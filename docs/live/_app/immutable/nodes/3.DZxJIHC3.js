import{r as St,s as Ql,n as pt,d as f,i as H,x as vt,G as Hn,D as Ml,a as ae,b as s,E as U,B as o,c,e as p,g,f as Y,H as x,h as u,j as b,t as J,I as cl,_ as Rs,C as Be,k as Ee,$ as Fs,w as Bn,L as At,a0 as Hs,K as Kl,M as ls,J as ns,N as xt,O as Ht}from"../chunks/DzR6qLkJ.js";import{a as he,t as De,S as $l,i as en,g as Sl,c as Vl,d as Ft,m as Ut,e as zt,b as Ot}from"../chunks/CbSE4UIZ.js";import{n as wl,o as Gs,q as qs,u as on,v as Ws,x as Ln,e as Jl,b as jl,y as ss,z as Ks,t as Yl,A as Us,B as xn,C as Xs,D as Ys,E as as,F as Js,G as Zs,H as Qs,I as Vn,f as Sn,g as $s,i as Rn,p as ea,l as zs,J as Os,W as ta,S as la,T as na,K as os,c as sn,r as an,a as Fn,s as Un,d as is,L as sa,M as aa,N as rs,w as oa,h as ia,j as ra,k as ca,O as ua}from"../chunks/DHOOHoMs.js";import{s as zn,l as fa,a as cs}from"../chunks/BmAGY9Gp.js";function Zl(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function da(t,e){t.d(1),e.delete(t.key)}function ha(t,e){De(t,1,1,()=>{e.delete(t.key)})}function xs(t,e,l,n,a,i,r,d,h,v,k,m){let _=t.length,y=i.length,w=_;const V={};for(;w--;)V[t[w].key]=w;const D=[],N=new Map,S=new Map,C=[];for(w=y;w--;){const B=m(a,i,w),R=l(B);let j=r.get(R);j?C.push(()=>j.p(B,e)):(j=v(R,B),j.c()),N.set(R,D[w]=j),R in V&&S.set(R,Math.abs(w-V[R]))}const I=new Set,E=new Set;function L(B){he(B,1),B.m(d,k),r.set(B.key,B),k=B.first,y--}for(;_&&y;){const B=D[y-1],R=t[_-1],j=B.key,M=R.key;B===R?(k=B.first,_--,y--):N.has(M)?!r.has(j)||I.has(j)?L(B):E.has(M)?_--:S.get(j)>S.get(M)?(E.add(j),L(B)):(I.add(M),_--):(h(R,r),_--)}for(;_--;){const B=t[_];N.has(B.key)||h(B,r)}for(;y;)L(D[y-1]);return St(C),D}function va(t){let e,l,n='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 15V3m0 0l-4 4m4-4l4 4"></path><path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17"></path></svg>',a,i,r="Drop an audio file here",d,h,v="or click to select",k,m,_,y="Supports WAV, FLAC, MP3, OGG",w,V,D,N,S=t[0]&&us(t);return{c(){e=u("div"),l=u("div"),l.innerHTML=n,a=b(),i=u("p"),i.textContent=r,d=b(),h=u("p"),h.textContent=v,k=b(),S&&S.c(),m=b(),_=u("p"),_.textContent=y,w=b(),V=u("input"),this.h()},l(C){e=c(C,"DIV",{class:!0,role:!0,tabindex:!0});var I=p(e);l=c(I,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-hj89uc"&&(l.innerHTML=n),a=g(I),i=c(I,"P",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-nangy9"&&(i.textContent=r),d=g(I),h=c(I,"P",{class:!0,"data-svelte-h":!0}),x(h)!=="svelte-fp1l9p"&&(h.textContent=v),k=g(I),S&&S.l(I),m=g(I),_=c(I,"P",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-tb4emq"&&(_.textContent=y),w=g(I),V=c(I,"INPUT",{type:!0,accept:!0,class:!0}),I.forEach(f),this.h()},h(){o(l,"class","icon svelte-lmmgcl"),o(i,"class","primary svelte-lmmgcl"),o(h,"class","secondary svelte-lmmgcl"),o(_,"class","formats svelte-lmmgcl"),o(V,"type","file"),o(V,"accept","audio/*"),o(V,"class","svelte-lmmgcl"),o(e,"class","drop-zone svelte-lmmgcl"),o(e,"role","button"),o(e,"tabindex","0"),cl(e,"drag-over",t[1])},m(C,I){H(C,e,I),s(e,l),s(e,a),s(e,i),s(e,d),s(e,h),s(e,k),S&&S.m(e,null),s(e,m),s(e,_),s(e,w),s(e,V),t[13](V),D||(N=[U(V,"change",t[9]),U(e,"drop",t[5]),U(e,"dragover",t[6]),U(e,"dragleave",t[7]),U(e,"click",t[8]),U(e,"keydown",t[14])],D=!0)},p(C,I){C[0]?S?S.p(C,I):(S=us(C),S.c(),S.m(e,m)):S&&(S.d(1),S=null),I&2&&cl(e,"drag-over",C[1])},d(C){C&&f(e),S&&S.d(),t[13](null),D=!1,St(N)}}}function pa(t){let e,l,n,a,i,r=t[4].toFixed(1)+"",d,h,v,k,m='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop Recording</span>',_,y;return{c(){e=u("div"),l=u("div"),n=u("div"),a=b(),i=u("span"),d=J(r),h=J("s"),v=b(),k=u("button"),k.innerHTML=m,this.h()},l(w){e=c(w,"DIV",{class:!0});var V=p(e);l=c(V,"DIV",{class:!0});var D=p(l);n=c(D,"DIV",{class:!0}),p(n).forEach(f),a=g(D),i=c(D,"SPAN",{class:!0});var N=p(i);d=Y(N,r),h=Y(N,"s"),N.forEach(f),D.forEach(f),v=g(V),k=c(V,"BUTTON",{class:!0,"data-svelte-h":!0}),x(k)!=="svelte-135d7zb"&&(k.innerHTML=m),V.forEach(f),this.h()},h(){o(n,"class","recording-pulse svelte-lmmgcl"),o(i,"class","recording-time svelte-lmmgcl"),o(l,"class","recording-indicator svelte-lmmgcl"),o(k,"class","stop-record-btn svelte-lmmgcl"),o(e,"class","drop-zone recording svelte-lmmgcl")},m(w,V){H(w,e,V),s(e,l),s(l,n),s(l,a),s(l,i),s(i,d),s(i,h),s(e,v),s(e,k),_||(y=U(k,"click",t[11]),_=!0)},p(w,V){V&16&&r!==(r=w[4].toFixed(1)+"")&&ae(d,r)},d(w){w&&f(e),_=!1,y()}}}function us(t){let e,l,n="or",a,i,r='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" class="svelte-lmmgcl"><circle cx="12" cy="12" r="8"></circle></svg> <span>Record from Microphone</span>',d,h;return{c(){e=u("div"),l=u("span"),l.textContent=n,a=b(),i=u("button"),i.innerHTML=r,this.h()},l(v){e=c(v,"DIV",{class:!0});var k=p(e);l=c(k,"SPAN",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-1wtgm67"&&(l.textContent=n),a=g(k),i=c(k,"BUTTON",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-8eds6f"&&(i.innerHTML=r),k.forEach(f),this.h()},h(){o(l,"class","divider-text svelte-lmmgcl"),o(i,"class","record-btn svelte-lmmgcl"),o(e,"class","record-section svelte-lmmgcl")},m(v,k){H(v,e,k),s(e,l),s(e,a),s(e,i),d||(h=U(i,"click",Rs(t[10])),d=!0)},p:pt,d(v){v&&f(e),d=!1,h()}}}function ma(t){let e;function l(i,r){return i[3]?pa:va}let n=l(t),a=n(t);return{c(){a.c(),e=vt()},l(i){a.l(i),e=vt()},m(i,r){a.m(i,r),H(i,e,r)},p(i,[r]){n===(n=l(i))&&a?a.p(i,r):(a.d(1),a=n(i),a&&(a.c(),a.m(e.parentNode,e)))},i:pt,o:pt,d(i){i&&f(e),a.d(i)}}}function _a(t,e,l){let{onFile:n}=e,{onRecordedBlob:a=void 0}=e,i=!1,r,d=!1,h=null,v=[],k=0,m=null;Hn(()=>{m&&clearInterval(m),h&&d&&h.stop()});function _(E){var B;E.preventDefault(),l(1,i=!1);const L=(B=E.dataTransfer)==null?void 0:B.files[0];L&&n(L)}function y(E){E.preventDefault(),l(1,i=!0)}function w(){l(1,i=!1)}function V(){r.click()}function D(E){var R;const B=(R=E.target.files)==null?void 0:R[0];B&&n(B)}async function N(){if(a)try{const E=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});v=[],h=new MediaRecorder(E,{mimeType:"audio/webm"}),h.ondataavailable=L=>{L.data.size>0&&v.push(L.data)},h.onstop=async()=>{E.getTracks().forEach(B=>B.stop());const L=new Blob(v,{type:"audio/webm"});a==null||a(L)},h.start(100),l(3,d=!0),l(4,k=0),m=setInterval(()=>{l(4,k+=.1)},100)}catch(E){console.error("Failed to start recording:",E),alert("Could not access microphone. Please allow microphone access.")}}function S(){h&&d&&(h.stop(),l(3,d=!1),m&&(clearInterval(m),m=null))}function C(E){Ml[E?"unshift":"push"](()=>{r=E,l(2,r)})}const I=E=>E.key==="Enter"&&V();return t.$$set=E=>{"onFile"in E&&l(12,n=E.onFile),"onRecordedBlob"in E&&l(0,a=E.onRecordedBlob)},[a,i,r,d,k,_,y,w,V,D,N,S,n,C,I]}class ga extends $l{constructor(e){super(),en(this,e,_a,ma,Ql,{onFile:12,onRecordedBlob:0})}}function fs(t,e,l){const n=t.slice();n[48]=e[l];const a=Math.max(ht,n[17](n[48].start));n[49]=a;const i=Math.min(n[9],n[17](n[48].end));n[50]=i;const r=n[50]-n[49];n[51]=r;const d=n[49]-ht;return n[52]=d,n}function On(t){const e=t.slice(),l=e[48].end-e[48].start;e[55]=l;const n=e[55]>=1?e[55].toFixed(2)+"s":(e[55]*1e3).toFixed(0)+"ms";return e[56]=n,e}function ds(t){let e,l,n,a,i;function r(y,w){return y[4]===y[48].index?ka:ba}let d=r(t),h=d(t);function v(...y){return t[34](t[48],...y)}function k(...y){return t[35](t[48],...y)}function m(...y){return t[36](t[48],...y)}let _=t[48].index>0&&vs(t);return{c(){e=u("div"),h.c(),l=b(),_&&_.c(),n=vt(),this.h()},l(y){e=c(y,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var w=p(e);h.l(w),w.forEach(f),l=g(y),_&&_.l(y),n=vt(),this.h()},h(){o(e,"class","interval svelte-1h3ij0x"),Be(e,"left",t[52]+"px"),Be(e,"width",t[51]+"px"),o(e,"role","button"),o(e,"tabindex","0"),cl(e,"selected",t[2]&&t[10]===t[48].index)},m(y,w){H(y,e,w),h.m(e,null),H(y,l,w),_&&_.m(y,w),H(y,n,w),a||(i=[U(e,"click",v),U(e,"dblclick",k),U(e,"keydown",m)],a=!0)},p(y,w){t=y,d===(d=r(t))&&h?h.p(t,w):(h.d(1),h=d(t),h&&(h.c(),h.m(e,null))),w[0]&256&&Be(e,"left",t[52]+"px"),w[0]&768&&Be(e,"width",t[51]+"px"),w[0]&1284&&cl(e,"selected",t[2]&&t[10]===t[48].index),t[48].index>0?_?_.p(t,w):(_=vs(t),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null)},d(y){y&&(f(e),f(l),f(n)),h.d(),_&&_.d(y),a=!1,St(i)}}}function ba(t){let e,l=(t[48].text||" ")+"",n,a,i,r,d;function h(){return t[32](t[48])}function v(...m){return t[33](t[48],...m)}let k=t[51]>30&&hs(t);return{c(){e=u("span"),n=J(l),a=b(),k&&k.c(),i=vt(),this.h()},l(m){e=c(m,"SPAN",{class:!0,role:!0,tabindex:!0});var _=p(e);n=Y(_,l),_.forEach(f),a=g(m),k&&k.l(m),i=vt(),this.h()},h(){o(e,"class","interval-text svelte-1h3ij0x"),o(e,"role","button"),o(e,"tabindex","0")},m(m,_){H(m,e,_),s(e,n),H(m,a,_),k&&k.m(m,_),H(m,i,_),r||(d=[U(e,"click",Rs(h)),U(e,"keydown",v)],r=!0)},p(m,_){t=m,_[0]&256&&l!==(l=(t[48].text||" ")+"")&&ae(n,l),t[51]>30?k?k.p(t,_):(k=hs(t),k.c(),k.m(i.parentNode,i)):k&&(k.d(1),k=null)},d(m){m&&(f(e),f(a),f(i)),k&&k.d(m),r=!1,St(d)}}}function ka(t){let e,l,n;return{c(){e=u("input"),this.h()},l(a){e=c(a,"INPUT",{type:!0,class:!0}),this.h()},h(){o(e,"type","text"),o(e,"class","interval-input svelte-1h3ij0x"),e.autofocus=!0},m(a,i){H(a,e,i),At(e,t[5]),e.focus(),l||(n=[U(e,"input",t[31]),U(e,"blur",t[26]),U(e,"keydown",t[27])],l=!0)},p(a,i){i[0]&32&&e.value!==a[5]&&At(e,a[5])},d(a){a&&f(e),l=!1,St(n)}}}function hs(t){let e,l=t[56]+"",n;return{c(){e=u("span"),n=J(l),this.h()},l(a){e=c(a,"SPAN",{class:!0});var i=p(e);n=Y(i,l),i.forEach(f),this.h()},h(){o(e,"class","interval-duration svelte-1h3ij0x")},m(a,i){H(a,e,i),s(e,n)},p(a,i){i[0]&256&&l!==(l=a[56]+"")&&ae(n,l)},d(a){a&&f(e)}}}function vs(t){let e,l,n,a;function i(...h){return t[37](t[48],...h)}function r(...h){return t[38](t[48],...h)}function d(...h){return t[39](t[48],...h)}return{c(){e=u("div"),this.h()},l(h){e=c(h,"DIV",{class:!0,style:!0,title:!0,role:!0,tabindex:!0,"aria-valuenow":!0}),p(e).forEach(f),this.h()},h(){o(e,"class","boundary svelte-1h3ij0x"),Be(e,"left",t[52]+"px"),o(e,"title","Drag to move, right-click to remove"),o(e,"role","slider"),o(e,"tabindex","0"),o(e,"aria-valuenow",l=t[48].start)},m(h,v){H(h,e,v),n||(a=[U(e,"mousedown",i),U(e,"contextmenu",r),U(e,"keydown",d)],n=!0)},p(h,v){t=h,v[0]&256&&Be(e,"left",t[52]+"px"),v[0]&256&&l!==(l=t[48].start)&&o(e,"aria-valuenow",l)},d(h){h&&f(e),n=!1,St(a)}}}function ps(t,e){let l,n,a=e[51]>2&&ds(On(e));return{key:t,first:null,c(){l=vt(),a&&a.c(),n=vt(),this.h()},l(i){l=vt(),a&&a.l(i),n=vt(),this.h()},h(){this.first=l},m(i,r){H(i,l,r),a&&a.m(i,r),H(i,n,r)},p(i,r){e=i,e[51]>2?a?a.p(On(e),r):(a=ds(On(e)),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(i){i&&(f(l),f(n)),a&&a.d(i)}}}function ms(t){let e;return{c(){e=u("div"),this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0}),p(e).forEach(f),this.h()},h(){o(e,"class","hover-cursor svelte-1h3ij0x"),Be(e,"left",t[17](t[11])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&2048&&Be(e,"left",l[17](l[11])+"px")},d(l){l&&f(e)}}}function _s(t){let e;return{c(){e=u("div"),this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0}),p(e).forEach(f),this.h()},h(){o(e,"class","cursor svelte-1h3ij0x"),Be(e,"left",t[17](t[12])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&4096&&Be(e,"left",l[17](l[12])+"px")},d(l){l&&f(e)}}}function gs(t){let e,l,n,a,i="Remove boundary",r,d;return{c(){e=u("div"),l=b(),n=u("div"),a=u("button"),a.textContent=i,this.h()},l(h){e=c(h,"DIV",{class:!0}),p(e).forEach(f),l=g(h),n=c(h,"DIV",{class:!0,style:!0});var v=p(n);a=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-ypaiql"&&(a.textContent=i),v.forEach(f),this.h()},h(){o(e,"class","context-menu-backdrop svelte-1h3ij0x"),o(a,"class","context-menu-item svelte-1h3ij0x"),o(n,"class","context-menu svelte-1h3ij0x"),Be(n,"left",t[7].x+"px"),Be(n,"top",t[7].y+"px")},m(h,v){H(h,e,v),H(h,l,v),H(h,n,v),s(n,a),r||(d=[U(e,"click",t[15]),U(a,"click",t[16])],r=!0)},p(h,v){v[0]&128&&Be(n,"left",h[7].x+"px"),v[0]&128&&Be(n,"top",h[7].y+"px")},d(h){h&&(f(e),f(l),f(n)),r=!1,St(d)}}}function wa(t){let e,l,n,a,i,r,d=t[0].name+"",h,v,k,m=[],_=new Map,y,w=t[11]!==null&&t[17](t[11])>=ht&&t[17](t[11])<=t[9],V,D=t[17](t[12])>=ht&&t[17](t[12])<=t[9],N,S,C,I,E=Zl(t[8]);const L=M=>M[48].index;for(let M=0;M<E.length;M+=1){let O=fs(t,E,M),Q=L(O);_.set(Q,m[M]=ps(Q,O))}let B=w&&ms(t),R=D&&_s(t),j=t[7]&&gs(t);return{c(){e=u("div"),l=u("div"),n=b(),a=u("div"),i=b(),r=u("div"),h=J(d),v=b(),k=u("div");for(let M=0;M<m.length;M+=1)m[M].c();y=b(),B&&B.c(),V=b(),R&&R.c(),N=b(),j&&j.c(),S=vt(),this.h()},l(M){e=c(M,"DIV",{class:!0,role:!0,tabindex:!0});var O=p(e);l=c(O,"DIV",{class:!0,style:!0}),p(l).forEach(f),n=g(O),a=c(O,"DIV",{class:!0,style:!0}),p(a).forEach(f),i=g(O),r=c(O,"DIV",{class:!0});var Q=p(r);h=Y(Q,d),Q.forEach(f),v=g(O),k=c(O,"DIV",{class:!0,style:!0});var Ce=p(k);for(let _e=0;_e<m.length;_e+=1)m[_e].l(Ce);Ce.forEach(f),y=g(O),B&&B.l(O),V=g(O),R&&R.l(O),O.forEach(f),N=g(M),j&&j.l(M),S=vt(),this.h()},h(){o(l,"class","margin-area left svelte-1h3ij0x"),Be(l,"width",ht+"px"),o(a,"class","margin-area right svelte-1h3ij0x"),Be(a,"width",Bl+"px"),o(r,"class","tier-label svelte-1h3ij0x"),o(k,"class","intervals svelte-1h3ij0x"),Be(k,"left",ht+"px"),Be(k,"right",Bl+"px"),o(e,"class","tier-container svelte-1h3ij0x"),o(e,"role","button"),o(e,"tabindex","0"),cl(e,"selected",t[2]),cl(e,"dragging",t[6])},m(M,O){H(M,e,O),s(e,l),s(e,n),s(e,a),s(e,i),s(e,r),s(r,h),s(e,v),s(e,k);for(let Q=0;Q<m.length;Q+=1)m[Q]&&m[Q].m(k,null);s(e,y),B&&B.m(e,null),s(e,V),R&&R.m(e,null),t[40](e),H(M,N,O),j&&j.m(M,O),H(M,S,O),C||(I=[U(window,"keydown",t[30]),U(window,"mouseup",t[20]),U(e,"click",t[18]),U(e,"dblclick",t[24]),U(e,"mousemove",t[19]),U(e,"mouseup",t[20]),U(e,"mouseleave",t[21]),U(e,"keydown",t[41])],C=!0)},p(M,O){O[0]&1&&d!==(d=M[0].name+"")&&ae(h,d),O[0]&247621430&&(E=Zl(M[8]),m=xs(m,O,L,1,M,E,_,k,da,ps,null,fs)),O[0]&2560&&(w=M[11]!==null&&M[17](M[11])>=ht&&M[17](M[11])<=M[9]),w?B?B.p(M,O):(B=ms(M),B.c(),B.m(e,V)):B&&(B.d(1),B=null),O[0]&4608&&(D=M[17](M[12])>=ht&&M[17](M[12])<=M[9]),D?R?R.p(M,O):(R=_s(M),R.c(),R.m(e,null)):R&&(R.d(1),R=null),O[0]&4&&cl(e,"selected",M[2]),O[0]&64&&cl(e,"dragging",M[6]),M[7]?j?j.p(M,O):(j=gs(M),j.c(),j.m(S.parentNode,S)):j&&(j.d(1),j=null)},i:pt,o:pt,d(M){M&&(f(e),f(N),f(S));for(let O=0;O<m.length;O+=1)m[O].d();B&&B.d(),R&&R.d(),t[40](null),j&&j.d(M),C=!1,St(I)}}}const ht=45,Bl=45;function ya(t,e,l){let n,a,i,r,d,h,v;Ee(t,Yl,P=>l(29,r=P)),Ee(t,Ln,P=>l(10,d=P)),Ee(t,on,P=>l(11,h=P)),Ee(t,jl,P=>l(12,v=P));let{tier:k}=e,{index:m}=e,{isSelected:_=!1}=e;Fs();let y,w=0,V,D=null,N="",S=!1,C=null,I=null;function E(P,q){P.preventDefault(),P.stopPropagation(),wl.set(m),Gs(),l(6,S=!0),C=q}function L(P,q){P.preventDefault(),P.stopPropagation(),l(7,I={x:P.clientX,y:P.clientY,intervalIndex:q})}function B(){l(7,I=null)}function R(){I&&(wl.set(m),qs(I.intervalIndex),l(7,I=null))}Bn(()=>{V=new ResizeObserver(P=>{const q=P[0].contentRect;l(28,w=q.width),q.height}),V.observe(y)}),Hn(()=>{V==null||V.disconnect()});function j(P){const{start:q,end:se}=r;return ht+(P-q)/(se-q)*n}function M(P){const{start:q,end:se}=r;return q+(P-ht)/n*(se-q)}function O(){wl.set(m)}function Q(P){const q=y.getBoundingClientRect(),se=P.clientX-q.left;if((se<ht||se>w-Bl)&&(on.set(null),!S))return;const $=M(se);on.set($),S&&C!==null&&Ws(C,$)}function Ce(){S&&(l(6,S=!1),C=null)}function _e(){on.set(null),S&&(l(6,S=!1),C=null)}function xe(P,q){P.stopPropagation(),wl.set(m),Ln.set(q);const se=k.intervals[q];se&&(Jl.set({start:se.start,end:se.end}),jl.set(se.start))}function Fe(P,q){P.stopPropagation();const se=y.getBoundingClientRect(),$=P.clientX-se.left;if($<ht||$>w-Bl)return;const te=M($);wl.set(m),ss(te)}function Re(P){const q=y.getBoundingClientRect(),se=P.clientX-q.left;if(se<ht||se>w-Bl)return;const $=M(se);wl.set(m),ss($)}function we(P){l(4,D=P),l(5,N=k.intervals[P].text)}function Ve(){D!==null&&(Ks(m,D,N),l(4,D=null),l(5,N=""))}function ye(P){P.key==="Enter"?Ve():P.key==="Escape"&&(l(4,D=null),l(5,N=""))}const Ie=P=>P.key==="Escape"&&I&&B();function Se(){N=this.value,l(5,N)}const X=P=>{Jl.set({start:P.start,end:P.end}),jl.set(P.start),we(P.index)},ve=(P,q)=>q.key==="Enter"&&we(P.index),oe=(P,q)=>xe(q,P.index),Ne=(P,q)=>Fe(q,P.index),Pe=(P,q)=>{q.key==="Enter"&&(wl.set(m),Ln.set(P.index))},Me=(P,q)=>E(q,P.index),Te=(P,q)=>L(q,P.index),pe=(P,q)=>q.key==="Enter"&&we(P.index);function Ae(P){Ml[P?"unshift":"push"](()=>{y=P,l(3,y)})}const $e=P=>P.key==="Enter"&&O();return t.$$set=P=>{"tier"in P&&l(0,k=P.tier),"index"in P&&l(1,m=P.index),"isSelected"in P&&l(2,_=P.isSelected)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&(n=Math.max(0,w-ht-Bl)),t.$$.dirty[0]&268435456&&l(9,a=w-Bl),t.$$.dirty[0]&536870913&&l(8,i=(()=>{const{start:P,end:q}=r;return k.intervals.map((se,$)=>({...se,index:$})).filter(se=>se.end>P&&se.start<q)})())},[k,m,_,y,D,N,S,I,i,a,d,h,v,E,L,B,R,j,O,Q,Ce,_e,xe,Fe,Re,we,Ve,ye,w,r,Ie,Se,X,ve,oe,Ne,Pe,Me,Te,pe,Ae,$e]}class Ca extends $l{constructor(e){super(),en(this,e,ya,wa,Ql,{tier:0,index:1,isSelected:2},null,[-1,-1])}}function bs(t){let e,l;return{c(){e=u("div"),l=J(t[0]),this.h()},l(n){e=c(n,"DIV",{class:!0});var a=p(e);l=Y(a,t[0]),a.forEach(f),this.h()},h(){o(e,"class","modal-header svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&1&&ae(l,n[0])},d(n){n&&f(e)}}}function ks(t){let e,l;return{c(){e=u("p"),l=J(t[2]),this.h()},l(n){e=c(n,"P",{class:!0});var a=p(e);l=Y(a,t[2]),a.forEach(f),this.h()},h(){o(e,"class","modal-message svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&4&&ae(l,n[2])},d(n){n&&f(e)}}}function ws(t){let e,l,n;return{c(){e=u("input"),this.h()},l(a){e=c(a,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){o(e,"type","text"),o(e,"class","modal-input svelte-1vzci29"),o(e,"placeholder",t[3])},m(a,i){H(a,e,i),t[14](e),At(e,t[6]),l||(n=[U(e,"input",t[15]),U(e,"keydown",t[11])],l=!0)},p(a,i){i&8&&o(e,"placeholder",a[3]),i&64&&e.value!==a[6]&&At(e,a[6])},d(a){a&&f(e),t[14](null),l=!1,St(n)}}}function ys(t){let e,l,n,a;return{c(){e=u("button"),l=J(t[5]),this.h()},l(i){e=c(i,"BUTTON",{class:!0});var r=p(e);l=Y(r,t[5]),r.forEach(f),this.h()},h(){o(e,"class","modal-btn cancel svelte-1vzci29")},m(i,r){H(i,e,r),s(e,l),n||(a=U(e,"click",t[9]),n=!0)},p(i,r){r&32&&ae(l,i[5])},d(i){i&&f(e),n=!1,a()}}}function Ta(t){let e,l,n,a,i,r,d,h,v,k,m,_,y=t[0]&&bs(t),w=t[2]&&ks(t),V=t[1]==="prompt"&&ws(t),D=t[1]!=="alert"&&ys(t);return{c(){e=u("div"),l=u("div"),y&&y.c(),n=b(),a=u("div"),w&&w.c(),i=b(),V&&V.c(),r=b(),d=u("div"),D&&D.c(),h=b(),v=u("button"),k=J(t[4]),this.h()},l(N){e=c(N,"DIV",{class:!0,role:!0,"aria-modal":!0});var S=p(e);l=c(S,"DIV",{class:!0});var C=p(l);y&&y.l(C),n=g(C),a=c(C,"DIV",{class:!0});var I=p(a);w&&w.l(I),i=g(I),V&&V.l(I),I.forEach(f),r=g(C),d=c(C,"DIV",{class:!0});var E=p(d);D&&D.l(E),h=g(E),v=c(E,"BUTTON",{class:!0});var L=p(v);k=Y(L,t[4]),L.forEach(f),E.forEach(f),C.forEach(f),S.forEach(f),this.h()},h(){o(a,"class","modal-body svelte-1vzci29"),o(v,"class","modal-btn confirm svelte-1vzci29"),o(d,"class","modal-footer svelte-1vzci29"),o(l,"class","modal svelte-1vzci29"),o(e,"class","modal-backdrop svelte-1vzci29"),o(e,"role","dialog"),o(e,"aria-modal","true")},m(N,S){H(N,e,S),s(e,l),y&&y.m(l,null),s(l,n),s(l,a),w&&w.m(a,null),s(a,i),V&&V.m(a,null),s(l,r),s(l,d),D&&D.m(d,null),s(d,h),s(d,v),s(v,k),m||(_=[U(window,"keydown",t[10]),U(v,"click",t[8]),U(e,"click",t[12])],m=!0)},p(N,[S]){N[0]?y?y.p(N,S):(y=bs(N),y.c(),y.m(l,n)):y&&(y.d(1),y=null),N[2]?w?w.p(N,S):(w=ks(N),w.c(),w.m(a,i)):w&&(w.d(1),w=null),N[1]==="prompt"?V?V.p(N,S):(V=ws(N),V.c(),V.m(a,null)):V&&(V.d(1),V=null),N[1]!=="alert"?D?D.p(N,S):(D=ys(N),D.c(),D.m(d,h)):D&&(D.d(1),D=null),S&16&&ae(k,N[4])},i:pt,o:pt,d(N){N&&f(e),y&&y.d(),w&&w.d(),V&&V.d(),D&&D.d(),m=!1,St(_)}}}function Ea(t,e,l){let{title:n=""}=e,{type:a="alert"}=e,{message:i=""}=e,{placeholder:r=""}=e,{initialValue:d=""}=e,{confirmText:h="OK"}=e,{cancelText:v="Cancel"}=e;const k=Fs();let m=d,_;Bn(()=>{a==="prompt"&&_&&(_.focus(),_.select())});function y(){a==="prompt"?k("confirm",m):k("confirm")}function w(){k("cancel")}function V(I){I.key==="Escape"?w():I.key==="Enter"&&a!=="prompt"&&y()}function D(I){I.key==="Enter"?y():I.key==="Escape"&&w()}function N(I){I.target===I.currentTarget&&w()}function S(I){Ml[I?"unshift":"push"](()=>{_=I,l(7,_)})}function C(){m=this.value,l(6,m)}return t.$$set=I=>{"title"in I&&l(0,n=I.title),"type"in I&&l(1,a=I.type),"message"in I&&l(2,i=I.message),"placeholder"in I&&l(3,r=I.placeholder),"initialValue"in I&&l(13,d=I.initialValue),"confirmText"in I&&l(4,h=I.confirmText),"cancelText"in I&&l(5,v=I.cancelText)},[n,a,i,r,h,v,m,_,y,w,V,D,N,d,S,C]}class rn extends $l{constructor(e){super(),en(this,e,Ea,Ta,Ql,{title:0,type:1,message:2,placeholder:3,initialValue:13,confirmText:4,cancelText:5})}}function Cs(t,e,l){const n=t.slice();return n[18]=e[l],n[20]=l,n}function Ts(t,e){let l,n,a;return n=new Ca({props:{tier:e[18],index:e[20],isSelected:e[20]===e[4]}}),{key:t,first:null,c(){l=u("div"),Ot(n.$$.fragment),this.h()},l(i){l=c(i,"DIV",{class:!0});var r=p(l);zt(n.$$.fragment,r),r.forEach(f),this.h()},h(){o(l,"class","tier-row svelte-13sadlc"),this.first=l},m(i,r){H(i,l,r),Ut(n,l,null),a=!0},p(i,r){e=i;const d={};r&32&&(d.tier=e[18]),r&32&&(d.index=e[20]),r&48&&(d.isSelected=e[20]===e[4]),n.$set(d)},i(i){a||(he(n.$$.fragment,i),a=!0)},o(i){De(n.$$.fragment,i),a=!1},d(i){i&&f(l),Ft(n)}}}function Es(t){let e,l='No annotation tiers. Click "+ Tier" to add one, or import a TextGrid.';return{c(){e=u("div"),e.textContent=l,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-11870wl"&&(e.textContent=l),this.h()},h(){o(e,"class","empty-message svelte-13sadlc")},m(n,a){H(n,e,a)},d(n){n&&f(e)}}}function Ds(t){let e,l;return e=new rn({props:{title:"Add Tier",type:"prompt",message:"Enter a name for the new tier:",placeholder:"Tier name",initialValue:`Tier ${t[5].length+1}`,confirmText:"Add"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const i={};a&32&&(i.initialValue=`Tier ${n[5].length+1}`),e.$set(i)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Is(t){var n;let e,l;return e=new rn({props:{title:"Rename Tier",type:"prompt",message:"Enter a new name for the tier:",placeholder:"Tier name",initialValue:((n=t[5][t[4]])==null?void 0:n.name)||"",confirmText:"Rename"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,i){Ut(e,a,i),l=!0},p(a,i){var d;const r={};i&48&&(r.initialValue=((d=a[5][a[4]])==null?void 0:d.name)||""),e.$set(r)},i(a){l||(he(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ns(t){var n;let e,l;return e=new rn({props:{title:"Remove Tier",type:"confirm",message:`Are you sure you want to remove tier "${(n=t[5][t[4]])==null?void 0:n.name}"?`,confirmText:"Remove"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,i){Ut(e,a,i),l=!0},p(a,i){var d;const r={};i&48&&(r.message=`Are you sure you want to remove tier "${(d=a[5][a[4]])==null?void 0:d.name}"?`),e.$set(r)},i(a){l||(he(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ps(t){let e,l;return e=new rn({props:{title:"Notice",type:"alert",message:t[2]}}),e.$on("confirm",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const i={};a&4&&(i.message=n[2]),e.$set(i)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function As(t){let e,l;return e=new rn({props:{title:"Export TextGrid",type:"prompt",message:"Enter a filename for the TextGrid:",placeholder:"filename.TextGrid",initialValue:t[3],confirmText:"Export"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const i={};a&8&&(i.initialValue=n[3]),e.$set(i)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Da(t){let e,l,n,a="Import",i,r,d="Export",h,v,k,m,_="+ Tier",y,w,V="Rename",D,N,S="- Tier",C,I,E,L,B="Undo",R,j,M="Redo",O,Q,Ce=t[5].length+"",_e,xe,Fe=t[5].length!==1?"s":"",Re,we,Ve,ye=[],Ie=new Map,Se,X,ve,oe,Ne,Pe,Me,Te,pe,Ae,$e,P,q=Zl(t[5]);const se=A=>A[20];for(let A=0;A<q.length;A+=1){let z=Cs(t,q,A),le=se(z);Ie.set(le,ye[A]=Ts(le,z))}let $=t[5].length===0&&Es(),te=t[1]==="addTier"&&Ds(t),fe=t[1]==="renameTier"&&Is(t),ce=t[1]==="removeTier"&&Ns(t),ge=t[1]==="alert"&&Ps(t),ie=t[1]==="exportTextGrid"&&As(t);return{c(){e=u("div"),l=u("div"),n=u("button"),n.textContent=a,i=b(),r=u("button"),r.textContent=d,h=b(),v=u("span"),k=b(),m=u("button"),m.textContent=_,y=b(),w=u("button"),w.textContent=V,D=b(),N=u("button"),N.textContent=S,C=b(),I=u("span"),E=b(),L=u("button"),L.textContent=B,R=b(),j=u("button"),j.textContent=M,O=b(),Q=u("span"),_e=J(Ce),xe=J(" tier"),Re=J(Fe),we=b(),Ve=u("div");for(let A=0;A<ye.length;A+=1)ye[A].c();Se=b(),$&&$.c(),X=b(),ve=u("input"),oe=b(),te&&te.c(),Ne=b(),fe&&fe.c(),Pe=b(),ce&&ce.c(),Me=b(),ge&&ge.c(),Te=b(),ie&&ie.c(),pe=vt(),this.h()},l(A){e=c(A,"DIV",{class:!0});var z=p(e);l=c(z,"DIV",{class:!0});var le=p(l);n=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(n)!=="svelte-1yaizdz"&&(n.textContent=a),i=g(le),r=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(r)!=="svelte-1aay3nq"&&(r.textContent=d),h=g(le),v=c(le,"SPAN",{class:!0}),p(v).forEach(f),k=g(le),m=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(m)!=="svelte-269lo2"&&(m.textContent=_),y=g(le),w=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(w)!=="svelte-6whcxg"&&(w.textContent=V),D=g(le),N=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(N)!=="svelte-1kr0wch"&&(N.textContent=S),C=g(le),I=c(le,"SPAN",{class:!0}),p(I).forEach(f),E=g(le),L=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(L)!=="svelte-wb3yww"&&(L.textContent=B),R=g(le),j=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(j)!=="svelte-2mf54l"&&(j.textContent=M),O=g(le),Q=c(le,"SPAN",{class:!0});var je=p(Q);_e=Y(je,Ce),xe=Y(je," tier"),Re=Y(je,Fe),je.forEach(f),le.forEach(f),we=g(z),Ve=c(z,"DIV",{class:!0});var et=p(Ve);for(let ot=0;ot<ye.length;ot+=1)ye[ot].l(et);Se=g(et),$&&$.l(et),et.forEach(f),X=g(z),ve=c(z,"INPUT",{type:!0,accept:!0,style:!0}),z.forEach(f),oe=g(A),te&&te.l(A),Ne=g(A),fe&&fe.l(A),Pe=g(A),ce&&ce.l(A),Me=g(A),ge&&ge.l(A),Te=g(A),ie&&ie.l(A),pe=vt(),this.h()},h(){o(n,"title","Import TextGrid"),o(n,"class","svelte-13sadlc"),o(r,"title","Export TextGrid"),o(r,"class","svelte-13sadlc"),o(v,"class","separator svelte-13sadlc"),o(m,"title","Add new tier"),o(m,"class","svelte-13sadlc"),o(w,"title","Rename selected tier"),o(w,"class","svelte-13sadlc"),o(N,"title","Remove selected tier"),o(N,"class","svelte-13sadlc"),o(I,"class","separator svelte-13sadlc"),o(L,"title","Undo (Ctrl+Z)"),o(L,"class","svelte-13sadlc"),o(j,"title","Redo (Ctrl+Y)"),o(j,"class","svelte-13sadlc"),o(Q,"class","tier-count svelte-13sadlc"),o(l,"class","annotation-toolbar svelte-13sadlc"),o(Ve,"class","tiers-container svelte-13sadlc"),o(ve,"type","file"),o(ve,"accept",".TextGrid,.textgrid,.txt,text/plain"),Be(ve,"display","none"),o(e,"class","annotation-editor svelte-13sadlc")},m(A,z){H(A,e,z),s(e,l),s(l,n),s(l,i),s(l,r),s(l,h),s(l,v),s(l,k),s(l,m),s(l,y),s(l,w),s(l,D),s(l,N),s(l,C),s(l,I),s(l,E),s(l,L),s(l,R),s(l,j),s(l,O),s(l,Q),s(Q,_e),s(Q,xe),s(Q,Re),s(e,we),s(e,Ve);for(let le=0;le<ye.length;le+=1)ye[le]&&ye[le].m(Ve,null);s(Ve,Se),$&&$.m(Ve,null),s(e,X),s(e,ve),t[14](ve),H(A,oe,z),te&&te.m(A,z),H(A,Ne,z),fe&&fe.m(A,z),H(A,Pe,z),ce&&ce.m(A,z),H(A,Me,z),ge&&ge.m(A,z),H(A,Te,z),ie&&ie.m(A,z),H(A,pe,z),Ae=!0,$e||(P=[U(n,"click",t[6]),U(r,"click",t[8]),U(m,"click",t[9]),U(w,"click",t[11]),U(N,"click",t[10]),U(L,"click",Us),U(j,"click",xn),U(ve,"change",t[7])],$e=!0)},p(A,[z]){(!Ae||z&32)&&Ce!==(Ce=A[5].length+"")&&ae(_e,Ce),(!Ae||z&32)&&Fe!==(Fe=A[5].length!==1?"s":"")&&ae(Re,Fe),z&48&&(q=Zl(A[5]),Sl(),ye=xs(ye,z,se,1,A,q,Ie,Ve,ha,Ts,Se,Cs),Vl()),A[5].length===0?$||($=Es(),$.c(),$.m(Ve,null)):$&&($.d(1),$=null),A[1]==="addTier"?te?(te.p(A,z),z&2&&he(te,1)):(te=Ds(A),te.c(),he(te,1),te.m(Ne.parentNode,Ne)):te&&(Sl(),De(te,1,1,()=>{te=null}),Vl()),A[1]==="renameTier"?fe?(fe.p(A,z),z&2&&he(fe,1)):(fe=Is(A),fe.c(),he(fe,1),fe.m(Pe.parentNode,Pe)):fe&&(Sl(),De(fe,1,1,()=>{fe=null}),Vl()),A[1]==="removeTier"?ce?(ce.p(A,z),z&2&&he(ce,1)):(ce=Ns(A),ce.c(),he(ce,1),ce.m(Me.parentNode,Me)):ce&&(Sl(),De(ce,1,1,()=>{ce=null}),Vl()),A[1]==="alert"?ge?(ge.p(A,z),z&2&&he(ge,1)):(ge=Ps(A),ge.c(),he(ge,1),ge.m(Te.parentNode,Te)):ge&&(Sl(),De(ge,1,1,()=>{ge=null}),Vl()),A[1]==="exportTextGrid"?ie?(ie.p(A,z),z&2&&he(ie,1)):(ie=As(A),ie.c(),he(ie,1),ie.m(pe.parentNode,pe)):ie&&(Sl(),De(ie,1,1,()=>{ie=null}),Vl())},i(A){if(!Ae){for(let z=0;z<q.length;z+=1)he(ye[z]);he(te),he(fe),he(ce),he(ge),he(ie),Ae=!0}},o(A){for(let z=0;z<ye.length;z+=1)De(ye[z]);De(te),De(fe),De(ce),De(ge),De(ie),Ae=!1},d(A){A&&(f(e),f(oe),f(Ne),f(Pe),f(Me),f(Te),f(pe));for(let z=0;z<ye.length;z+=1)ye[z].d();$&&$.d(),t[14](null),te&&te.d(A),fe&&fe.d(A),ce&&ce.d(A),ge&&ge.d(A),ie&&ie.d(A),$e=!1,St(P)}}}function Ia(t,e,l){let n,a,i;Ee(t,wl,E=>l(4,n=E)),Ee(t,Vn,E=>l(5,a=E)),Ee(t,Sn,E=>l(15,i=E));let r,d=null,h="",v="annotations.TextGrid";Bn(()=>{a.length===0&&Xs()});function k(E){l(2,h=E),l(1,d="alert")}function m(){r.click()}async function _(E){var R;const L=E.target,B=(R=L.files)==null?void 0:R[0];if(B){try{const j=await B.text();Ys(j)}catch(j){console.error("Failed to load TextGrid:",j),k("Failed to parse TextGrid file: "+(j instanceof Error?j.message:String(j)))}L.value=""}}async function y(){if(i){const E=i.replace(/\.[^/.]+$/,"");l(3,v=E+".TextGrid")}else l(3,v="annotations.TextGrid");if("showSaveFilePicker"in window)try{const E=as(),B=await(await window.showSaveFilePicker({suggestedName:v,types:[{description:"Praat TextGrid",accept:{"text/plain":[".TextGrid"]}}]})).createWritable();await B.write(E),await B.close();return}catch(E){if(E.name==="AbortError")return}l(1,d="exportTextGrid")}function w(E){const L=as(),B=new Blob([L],{type:"text/plain"}),R=URL.createObjectURL(B),j=document.createElement("a");j.href=R,j.download=E.endsWith(".TextGrid")?E:E+".TextGrid",j.click(),URL.revokeObjectURL(R)}function V(){l(1,d="addTier")}function D(){if(a.length<=1){k("Cannot remove the last tier");return}l(1,d="removeTier")}function N(){l(1,d="renameTier")}function S(E){var B;const L=d;if(l(1,d=null),L==="addTier"&&typeof E.detail=="string"&&E.detail)Js(E.detail);else if(L==="renameTier"&&typeof E.detail=="string"&&E.detail){const R=((B=a[n])==null?void 0:B.name)||"";E.detail!==R&&Zs(n,E.detail)}else L==="removeTier"?Qs(n):L==="exportTextGrid"&&typeof E.detail=="string"&&E.detail&&w(E.detail)}function C(){l(1,d=null)}function I(E){Ml[E?"unshift":"push"](()=>{r=E,l(0,r)})}return[r,d,h,v,n,a,m,_,y,V,D,N,S,C,I]}class Na extends $l{constructor(e){super(),en(this,e,Ia,Da,Ql,{})}}function Ss(t,e,l){const n=t.slice();return n[21]=e[l],n}function Vs(t){let e,l,n="Annotation",a,i=Zl(t[1]),r=[];for(let d=0;d<i.length;d+=1)r[d]=Bs(Ss(t,i,d));return{c(){e=u("div"),l=u("div"),l.textContent=n,a=b();for(let d=0;d<r.length;d+=1)r[d].c();this.h()},l(d){e=c(d,"DIV",{class:!0});var h=p(e);l=c(h,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-16eifwe"&&(l.textContent=n),a=g(h);for(let v=0;v<r.length;v+=1)r[v].l(h);h.forEach(f),this.h()},h(){o(l,"class","section-title svelte-k4aoyj"),o(e,"class","section svelte-k4aoyj")},m(d,h){H(d,e,h),s(e,l),s(e,a);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(e,null)},p(d,h){if(h&2){i=Zl(d[1]);let v;for(v=0;v<i.length;v+=1){const k=Ss(d,i,v);r[v]?r[v].p(k,h):(r[v]=Bs(k),r[v].c(),r[v].m(e,null))}for(;v<r.length;v+=1)r[v].d(1);r.length=i.length}},d(d){d&&f(e),Hs(r,d)}}}function Bs(t){let e,l,n=t[21].tierName+"",a,i,r,d=t[21].text+"",h,v;return{c(){e=u("div"),l=u("span"),a=J(n),i=b(),r=u("span"),h=J(d),v=b(),this.h()},l(k){e=c(k,"DIV",{class:!0});var m=p(e);l=c(m,"SPAN",{class:!0});var _=p(l);a=Y(_,n),_.forEach(f),i=g(m),r=c(m,"SPAN",{class:!0});var y=p(r);h=Y(y,d),y.forEach(f),v=g(m),m.forEach(f),this.h()},h(){o(l,"class","tier-name svelte-k4aoyj"),o(r,"class","interval-text svelte-k4aoyj"),o(e,"class","annotation-row svelte-k4aoyj")},m(k,m){H(k,e,m),s(e,l),s(l,a),s(e,i),s(e,r),s(r,h),s(e,v)},p(k,m){m&2&&n!==(n=k[21].tierName+"")&&ae(a,n),m&2&&d!==(d=k[21].text+"")&&ae(h,d)},d(k){k&&f(e)}}}function Pa(t){let e,l,n,a=t[0].toFixed(3)+"",i,r,d,h,v,k="Pitch & Voice",m,_,y,w,V="F0",D,N,S=An(t[15])+"",C,I,E,L,B="Int",R,j,M=Xl(t[14])+"",O,Q,Ce,_e,xe="HNR",Fe,Re,we=Xl(t[5])+"",Ve,ye,Ie,Se,X="Formants",ve,oe,Ne,Pe='<th class="svelte-k4aoyj"></th> <th class="svelte-k4aoyj">Freq</th> <th class="svelte-k4aoyj">BW</th>',Me,Te,pe,Ae="F1",$e,P,q=Qe(t[13])+"",se,$,te,fe=Qe(t[9])+"",ce,ge,ie,A,z="F2",le,je,et=Qe(t[12])+"",ot,tt,He,Gt=Qe(t[8])+"",it,T,W,G,K="F3",de,ne,re=Qe(t[11])+"",ue,Le,be,Ue=Qe(t[7])+"",Ge,Ll,mt,_t,Rl="F4",gt,lt,ul=Qe(t[10])+"",Vt,Fl,nl,nt=Qe(t[6])+"",Il,Nl,bt,kt,Ul="Spectral",Bt,Oe,qt,Wt,st="CoG",wt,fl,at=An(t[4])+"",Pl,yt,Kt,Xt,Yt="Tilt",Jt,dl,hl=t[3]!==null?`${t[3].toFixed(1)} dB/oct`:"—",qe,Ct,Zt,We,tn="A1-P0",Tt,vl,pl=Xl(t[2])+"",rt,Qt,ze=t[1].length>0&&Vs(t);return{c(){e=u("div"),l=u("div"),n=u("span"),i=J(a),r=J("s"),d=b(),h=u("div"),v=u("div"),v.textContent=k,m=b(),_=u("div"),y=u("div"),w=u("span"),w.textContent=V,D=b(),N=u("span"),C=J(S),I=b(),E=u("div"),L=u("span"),L.textContent=B,R=b(),j=u("span"),O=J(M),Q=b(),Ce=u("div"),_e=u("span"),_e.textContent=xe,Fe=b(),Re=u("span"),Ve=J(we),ye=b(),Ie=u("div"),Se=u("div"),Se.textContent=X,ve=b(),oe=u("table"),Ne=u("tr"),Ne.innerHTML=Pe,Me=b(),Te=u("tr"),pe=u("td"),pe.textContent=Ae,$e=b(),P=u("td"),se=J(q),$=b(),te=u("td"),ce=J(fe),ge=b(),ie=u("tr"),A=u("td"),A.textContent=z,le=b(),je=u("td"),ot=J(et),tt=b(),He=u("td"),it=J(Gt),T=b(),W=u("tr"),G=u("td"),G.textContent=K,de=b(),ne=u("td"),ue=J(re),Le=b(),be=u("td"),Ge=J(Ue),Ll=b(),mt=u("tr"),_t=u("td"),_t.textContent=Rl,gt=b(),lt=u("td"),Vt=J(ul),Fl=b(),nl=u("td"),Il=J(nt),Nl=b(),bt=u("div"),kt=u("div"),kt.textContent=Ul,Bt=b(),Oe=u("div"),qt=u("div"),Wt=u("span"),Wt.textContent=st,wt=b(),fl=u("span"),Pl=J(at),yt=b(),Kt=u("div"),Xt=u("span"),Xt.textContent=Yt,Jt=b(),dl=u("span"),qe=J(hl),Ct=b(),Zt=u("div"),We=u("span"),We.textContent=tn,Tt=b(),vl=u("span"),rt=J(pl),Qt=b(),ze&&ze.c(),this.h()},l(ke){e=c(ke,"DIV",{class:!0});var ee=p(e);l=c(ee,"DIV",{class:!0});var Mt=p(l);n=c(Mt,"SPAN",{class:!0});var zl=p(n);i=Y(zl,a),r=Y(zl,"s"),zl.forEach(f),Mt.forEach(f),d=g(ee),h=c(ee,"DIV",{class:!0});var ct=p(h);v=c(ct,"DIV",{class:!0,"data-svelte-h":!0}),x(v)!=="svelte-d0x3ep"&&(v.textContent=k),m=g(ct),_=c(ct,"DIV",{class:!0});var ml=p(_);y=c(ml,"DIV",{class:!0});var ut=p(y);w=c(ut,"SPAN",{class:!0,"data-svelte-h":!0}),x(w)!=="svelte-1cn36l0"&&(w.textContent=V),D=g(ut),N=c(ut,"SPAN",{class:!0});var ln=p(N);C=Y(ln,S),ln.forEach(f),ut.forEach(f),I=g(ml),E=c(ml,"DIV",{class:!0});var yl=p(E);L=c(yl,"SPAN",{class:!0,"data-svelte-h":!0}),x(L)!=="svelte-1kbwfyu"&&(L.textContent=B),R=g(yl),j=c(yl,"SPAN",{class:!0});var $t=p(j);O=Y($t,M),$t.forEach(f),yl.forEach(f),Q=g(ml),Ce=c(ml,"DIV",{class:!0});var Ke=p(Ce);_e=c(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),x(_e)!=="svelte-1wxjkk8"&&(_e.textContent=xe),Fe=g(Ke),Re=c(Ke,"SPAN",{class:!0});var _l=p(Re);Ve=Y(_l,we),_l.forEach(f),Ke.forEach(f),ml.forEach(f),ct.forEach(f),ye=g(ee),Ie=c(ee,"DIV",{class:!0});var jt=p(Ie);Se=c(jt,"DIV",{class:!0,"data-svelte-h":!0}),x(Se)!=="svelte-sqr9el"&&(Se.textContent=X),ve=g(jt),oe=c(jt,"TABLE",{class:!0});var ft=p(oe);Ne=c(ft,"TR",{"data-svelte-h":!0}),x(Ne)!=="svelte-316y0v"&&(Ne.innerHTML=Pe),Me=g(ft),Te=c(ft,"TR",{});var Et=p(Te);pe=c(Et,"TD",{class:!0,"data-svelte-h":!0}),x(pe)!=="svelte-1iujy6z"&&(pe.textContent=Ae),$e=g(Et),P=c(Et,"TD",{class:!0});var el=p(P);se=Y(el,q),el.forEach(f),$=g(Et),te=c(Et,"TD",{class:!0});var Ol=p(te);ce=Y(Ol,fe),Ol.forEach(f),Et.forEach(f),ge=g(ft),ie=c(ft,"TR",{});var Dt=p(ie);A=c(Dt,"TD",{class:!0,"data-svelte-h":!0}),x(A)!=="svelte-kfs2py"&&(A.textContent=z),le=g(Dt),je=c(Dt,"TD",{class:!0});var sl=p(je);ot=Y(sl,et),sl.forEach(f),tt=g(Dt),He=c(Dt,"TD",{class:!0});var xl=p(He);it=Y(xl,Gt),xl.forEach(f),Dt.forEach(f),T=g(ft),W=c(ft,"TR",{});var It=p(W);G=c(It,"TD",{class:!0,"data-svelte-h":!0}),x(G)!=="svelte-h8k9fd"&&(G.textContent=K),de=g(It),ne=c(It,"TD",{class:!0});var al=p(ne);ue=Y(al,re),al.forEach(f),Le=g(It),be=c(It,"TD",{class:!0});var Hl=p(be);Ge=Y(Hl,Ue),Hl.forEach(f),It.forEach(f),Ll=g(ft),mt=c(ft,"TR",{});var dt=p(mt);_t=c(dt,"TD",{class:!0,"data-svelte-h":!0}),x(_t)!=="svelte-zz0m8k"&&(_t.textContent=Rl),gt=g(dt),lt=c(dt,"TD",{class:!0});var Gl=p(lt);Vt=Y(Gl,ul),Gl.forEach(f),Fl=g(dt),nl=c(dt,"TD",{class:!0});var tl=p(nl);Il=Y(tl,nt),tl.forEach(f),dt.forEach(f),ft.forEach(f),jt.forEach(f),Nl=g(ee),bt=c(ee,"DIV",{class:!0});var Nt=p(bt);kt=c(Nt,"DIV",{class:!0,"data-svelte-h":!0}),x(kt)!=="svelte-19lj3il"&&(kt.textContent=Ul),Bt=g(Nt),Oe=c(Nt,"DIV",{class:!0});var ol=p(Oe);qt=c(ol,"DIV",{class:!0});var il=p(qt);Wt=c(il,"SPAN",{class:!0,"data-svelte-h":!0}),x(Wt)!=="svelte-m4uzze"&&(Wt.textContent=st),wt=g(il),fl=c(il,"SPAN",{class:!0});var Al=p(fl);Pl=Y(Al,at),Al.forEach(f),il.forEach(f),yt=g(ol),Kt=c(ol,"DIV",{class:!0});var Cl=p(Kt);Xt=c(Cl,"SPAN",{class:!0,"data-svelte-h":!0}),x(Xt)!=="svelte-124pemq"&&(Xt.textContent=Yt),Jt=g(Cl),dl=c(Cl,"SPAN",{class:!0});var Tl=p(dl);qe=Y(Tl,hl),Tl.forEach(f),Cl.forEach(f),Ct=g(ol),Zt=c(ol,"DIV",{class:!0});var gl=p(Zt);We=c(gl,"SPAN",{class:!0,"data-svelte-h":!0}),x(We)!=="svelte-hotqe4"&&(We.textContent=tn),Tt=g(gl),vl=c(gl,"SPAN",{class:!0});var ql=p(vl);rt=Y(ql,pl),ql.forEach(f),gl.forEach(f),ol.forEach(f),Nt.forEach(f),Qt=g(ee),ze&&ze.l(ee),ee.forEach(f),this.h()},h(){o(n,"class","time-label svelte-k4aoyj"),o(l,"class","panel-header svelte-k4aoyj"),o(v,"class","section-title svelte-k4aoyj"),o(w,"class","label pitch-label svelte-k4aoyj"),o(N,"class","value svelte-k4aoyj"),o(y,"class","value-row svelte-k4aoyj"),o(L,"class","label intensity-label svelte-k4aoyj"),o(j,"class","value svelte-k4aoyj"),o(E,"class","value-row svelte-k4aoyj"),o(_e,"class","label hnr-label svelte-k4aoyj"),o(Re,"class","value svelte-k4aoyj"),o(Ce,"class","value-row svelte-k4aoyj"),o(_,"class","values-grid svelte-k4aoyj"),o(h,"class","section svelte-k4aoyj"),o(Se,"class","section-title svelte-k4aoyj"),o(pe,"class","label f-label svelte-k4aoyj"),o(P,"class","value svelte-k4aoyj"),o(te,"class","value bw svelte-k4aoyj"),o(A,"class","label f-label svelte-k4aoyj"),o(je,"class","value svelte-k4aoyj"),o(He,"class","value bw svelte-k4aoyj"),o(G,"class","label f-label svelte-k4aoyj"),o(ne,"class","value svelte-k4aoyj"),o(be,"class","value bw svelte-k4aoyj"),o(_t,"class","label f-label svelte-k4aoyj"),o(lt,"class","value svelte-k4aoyj"),o(nl,"class","value bw svelte-k4aoyj"),o(oe,"class","formant-table svelte-k4aoyj"),o(Ie,"class","section svelte-k4aoyj"),o(kt,"class","section-title svelte-k4aoyj"),o(Wt,"class","label cog-label svelte-k4aoyj"),o(fl,"class","value svelte-k4aoyj"),o(qt,"class","value-row svelte-k4aoyj"),o(Xt,"class","label tilt-label svelte-k4aoyj"),o(dl,"class","value svelte-k4aoyj"),o(Kt,"class","value-row svelte-k4aoyj"),o(We,"class","label nasal-label svelte-k4aoyj"),o(vl,"class","value svelte-k4aoyj"),o(Zt,"class","value-row svelte-k4aoyj"),o(Oe,"class","values-grid svelte-k4aoyj"),o(bt,"class","section svelte-k4aoyj"),o(e,"class","values-panel svelte-k4aoyj")},m(ke,ee){H(ke,e,ee),s(e,l),s(l,n),s(n,i),s(n,r),s(e,d),s(e,h),s(h,v),s(h,m),s(h,_),s(_,y),s(y,w),s(y,D),s(y,N),s(N,C),s(_,I),s(_,E),s(E,L),s(E,R),s(E,j),s(j,O),s(_,Q),s(_,Ce),s(Ce,_e),s(Ce,Fe),s(Ce,Re),s(Re,Ve),s(e,ye),s(e,Ie),s(Ie,Se),s(Ie,ve),s(Ie,oe),s(oe,Ne),s(oe,Me),s(oe,Te),s(Te,pe),s(Te,$e),s(Te,P),s(P,se),s(Te,$),s(Te,te),s(te,ce),s(oe,ge),s(oe,ie),s(ie,A),s(ie,le),s(ie,je),s(je,ot),s(ie,tt),s(ie,He),s(He,it),s(oe,T),s(oe,W),s(W,G),s(W,de),s(W,ne),s(ne,ue),s(W,Le),s(W,be),s(be,Ge),s(oe,Ll),s(oe,mt),s(mt,_t),s(mt,gt),s(mt,lt),s(lt,Vt),s(mt,Fl),s(mt,nl),s(nl,Il),s(e,Nl),s(e,bt),s(bt,kt),s(bt,Bt),s(bt,Oe),s(Oe,qt),s(qt,Wt),s(qt,wt),s(qt,fl),s(fl,Pl),s(Oe,yt),s(Oe,Kt),s(Kt,Xt),s(Kt,Jt),s(Kt,dl),s(dl,qe),s(Oe,Ct),s(Oe,Zt),s(Zt,We),s(Zt,Tt),s(Zt,vl),s(vl,rt),s(e,Qt),ze&&ze.m(e,null)},p(ke,[ee]){ee&1&&a!==(a=ke[0].toFixed(3)+"")&&ae(i,a),ee&32768&&S!==(S=An(ke[15])+"")&&ae(C,S),ee&16384&&M!==(M=Xl(ke[14])+"")&&ae(O,M),ee&32&&we!==(we=Xl(ke[5])+"")&&ae(Ve,we),ee&8192&&q!==(q=Qe(ke[13])+"")&&ae(se,q),ee&512&&fe!==(fe=Qe(ke[9])+"")&&ae(ce,fe),ee&4096&&et!==(et=Qe(ke[12])+"")&&ae(ot,et),ee&256&&Gt!==(Gt=Qe(ke[8])+"")&&ae(it,Gt),ee&2048&&re!==(re=Qe(ke[11])+"")&&ae(ue,re),ee&128&&Ue!==(Ue=Qe(ke[7])+"")&&ae(Ge,Ue),ee&1024&&ul!==(ul=Qe(ke[10])+"")&&ae(Vt,ul),ee&64&&nt!==(nt=Qe(ke[6])+"")&&ae(Il,nt),ee&16&&at!==(at=An(ke[4])+"")&&ae(Pl,at),ee&8&&hl!==(hl=ke[3]!==null?`${ke[3].toFixed(1)} dB/oct`:"—")&&ae(qe,hl),ee&4&&pl!==(pl=Xl(ke[2])+"")&&ae(rt,pl),ke[1].length>0?ze?ze.p(ke,ee):(ze=Vs(ke),ze.c(),ze.m(e,null)):ze&&(ze.d(1),ze=null)},i:pt,o:pt,d(ke){ke&&f(e),ze&&ze.d()}}}function Pt(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const i=Math.floor((n+a)/2);e[i]<l?n=i+1:a=i}return n>0&&Math.abs(e[n-1]-l)<Math.abs(e[n]-l)&&(n=n-1),t[n]}function Aa(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const _=Math.floor((n+a+1)/2);e[_]<=l?n=_:a=_-1}const i=n,r=e[i],d=t[i];if(i>=e.length-1)return d;const h=e[i+1],v=t[i+1],k=d!==null&&d>0,m=v!==null&&v>0;if(k&&m){const _=(l-r)/(h-r);return Math.exp(Math.log(d)+_*(Math.log(v)-Math.log(d)))}else return k?d:m?v:null}function Qe(t){return t===null?"—":`${t.toFixed(0)}`}function An(t){return t===null?"—":`${t.toFixed(1)} Hz`}function Xl(t){return t===null?"—":`${t.toFixed(1)} dB`}function Sa(t,e,l){let n,a,i,r,d,h,v,k,m,_,y,w,V,D,N,S,C,I,E,L;Ee(t,$s,R=>l(16,C=R)),Ee(t,Vn,R=>l(19,I=R)),Ee(t,jl,R=>l(17,E=R)),Ee(t,on,R=>l(18,L=R));function B(R){if(!I||I.length===0)return[];const j=[];for(const M of I){const O=M.intervals.find(Q=>R>=Q.start&&R<Q.end);O&&O.text&&j.push({tierName:M.name,text:O.text})}return j}return t.$$.update=()=>{t.$$.dirty&393216&&l(0,n=L!==null?L:E),t.$$.dirty&65537&&l(15,a=C?Aa(C.pitch,C.times,n):null),t.$$.dirty&65537&&l(14,i=C?Pt(C.intensity,C.times,n):null),t.$$.dirty&65537&&l(13,r=C?Pt(C.formants.f1,C.times,n):null),t.$$.dirty&65537&&l(12,d=C?Pt(C.formants.f2,C.times,n):null),t.$$.dirty&65537&&l(11,h=C?Pt(C.formants.f3,C.times,n):null),t.$$.dirty&65537&&l(10,v=C?Pt(C.formants.f4,C.times,n):null),t.$$.dirty&65537&&l(9,k=C?Pt(C.formants.b1,C.times,n):null),t.$$.dirty&65537&&l(8,m=C?Pt(C.formants.b2,C.times,n):null),t.$$.dirty&65537&&l(7,_=C?Pt(C.formants.b3,C.times,n):null),t.$$.dirty&65537&&l(6,y=C?Pt(C.formants.b4,C.times,n):null),t.$$.dirty&65537&&l(5,w=C?Pt(C.harmonicity,C.times,n):null),t.$$.dirty&65537&&l(4,V=C!=null&&C.cog?Pt(C.cog,C.times,n):null),t.$$.dirty&65537&&l(3,D=C!=null&&C.spectralTilt?Pt(C.spectralTilt,C.times,n):null),t.$$.dirty&65537&&l(2,N=C!=null&&C.a1p0?Pt(C.a1p0,C.times,n):null),t.$$.dirty&1&&l(1,S=B(n))},[n,S,N,D,V,w,y,_,m,k,v,h,d,r,i,a,C,E,L]}class Va extends $l{constructor(e){super(),en(this,e,Sa,Pa,Ql,{})}}function Ba(t){let e,l,n,a,i='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',r,d,h,v,k='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><rect x="6" y="6" width="12" height="12"></rect></svg>',m,_,y,w='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>',V,D,N,S,C,I,E=rl(t[20])+"",L,B,R=rl(t[0].length/t[19])+"",j,M,O,Q,Ce,_e,xe,Fe,Re,we,Ve='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.03 7.03 0 00-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.49.49 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.01-1.58zM12 15.6a3.6 3.6 0 110-7.2 3.6 3.6 0 010 7.2z"></path></svg>',ye,Ie,Se,X,ve,oe,Ne,Pe,Me="Pitch",Te,pe,Ae,$e,P,q="Formants",se,$,te,fe,ce,ge="Intensity",ie,A,z,le,je,et="HNR",ot,tt,He,Gt,it,T="CoG",W,G,K,de,ne,re="Sp.Tilt",ue,Le,be,Ue,Ge,Ll="A1-P0",mt,_t,Rl,gt,lt,ul,Vt,Fl="Points",nl,nt,Il="Import",Nl,bt,kt,Ul,Bt,Oe,qt="Voice:",Wt,st,wt,fl="Female",at,Pl="Male",yt,Kt="Child",Xt,Yt,Jt,dl="Max Freq:",hl,qe,Ct,Zt="5 kHz",We,tn="7.5 kHz",Tt,vl="10 kHz",pl,rt,Qt,ze="Backend:",ke,ee,Mt,zl="praatfan (local)",ct,ml="praatfan (remote)",ut,ln="praatfan-gpl (remote)",yl,$t,Ke,_l,jt,ft,Et,el,Ol,Dt,sl,xl,It,al,Hl,dt,Gl,tl,Nt,ol,il=rl(t[21].start)+"",Al,Cl,Tl=rl(t[21].end)+"",gl,ql,Wl,Gn="Space: play | Tab: play visible | Arrows: navigate/zoom",Lt,Mn,qn;function Wn(F,Z){return F[24]?Ra:La}let cn=Wn(t),bl=cn(t);function Kn(F,Z){return F[6]?Ua:Fa}let un=Kn(t),ll=un(t),Ye=t[25]&&Ms(t),Je=t[26]&&js(t);function Xn(F,Z){return F[3]?Oa:za}let fn=Xn(t),kl=fn(t),Ze=t[22].length>0&&Ls(t);return jt=new ta({}),el=new la({props:{showPitch:t[8],showFormants:t[9],showIntensity:t[10],showHNR:t[11],showCoG:t[12],showSpectralTilt:t[13],showA1P0:t[14],showDataPoints:t[15],maxFreq:t[16]}}),sl=new na({}),al=new Na({}),dt=new Va({}),{c(){e=u("div"),l=u("header"),n=u("div"),a=u("button"),a.innerHTML=i,r=b(),d=u("button"),bl.c(),h=b(),v=u("button"),v.innerHTML=k,m=b(),ll.c(),_=b(),y=u("button"),y.innerHTML=w,V=b(),D=u("span"),N=J(t[18]),S=b(),C=u("div"),I=u("span"),L=J(E),B=J(" / "),j=J(R),M=b(),Ye&&Ye.c(),O=b(),Q=u("div"),Je&&Je.c(),Ce=b(),_e=u("span"),xe=J(t[19]),Fe=J(" Hz"),Re=b(),we=u("button"),we.innerHTML=Ve,ye=b(),Ie=u("button"),kl.c(),Se=b(),X=u("div"),ve=u("label"),oe=u("input"),Ne=b(),Pe=u("span"),Pe.textContent=Me,Te=b(),pe=u("label"),Ae=u("input"),$e=b(),P=u("span"),P.textContent=q,se=b(),$=u("label"),te=u("input"),fe=b(),ce=u("span"),ce.textContent=ge,ie=b(),A=u("label"),z=u("input"),le=b(),je=u("span"),je.textContent=et,ot=b(),tt=u("label"),He=u("input"),Gt=b(),it=u("span"),it.textContent=T,W=b(),G=u("label"),K=u("input"),de=b(),ne=u("span"),ne.textContent=re,ue=b(),Le=u("label"),be=u("input"),Ue=b(),Ge=u("span"),Ge.textContent=Ll,mt=b(),_t=u("span"),Rl=b(),gt=u("label"),lt=u("input"),ul=b(),Vt=u("span"),Vt.textContent=Fl,nl=b(),nt=u("button"),nt.textContent=Il,Nl=b(),Ze&&Ze.c(),bt=b(),kt=u("span"),Ul=b(),Bt=u("label"),Oe=u("span"),Oe.textContent=qt,Wt=b(),st=u("select"),wt=u("option"),wt.textContent=fl,at=u("option"),at.textContent=Pl,yt=u("option"),yt.textContent=Kt,Xt=b(),Yt=u("label"),Jt=u("span"),Jt.textContent=dl,hl=b(),qe=u("select"),Ct=u("option"),Ct.textContent=Zt,We=u("option"),We.textContent=tn,Tt=u("option"),Tt.textContent=vl,pl=b(),rt=u("label"),Qt=u("span"),Qt.textContent=ze,ke=b(),ee=u("select"),Mt=u("option"),Mt.textContent=zl,ct=u("option"),ct.textContent=ml,ut=u("option"),ut.textContent=ln,yl=b(),$t=u("div"),Ke=u("div"),_l=u("div"),Ot(jt.$$.fragment),ft=b(),Et=u("div"),Ot(el.$$.fragment),Ol=b(),Dt=u("div"),Ot(sl.$$.fragment),xl=b(),It=u("div"),Ot(al.$$.fragment),Hl=b(),Ot(dt.$$.fragment),Gl=b(),tl=u("footer"),Nt=u("span"),ol=J("View: "),Al=J(il),Cl=J(" - "),gl=J(Tl),ql=b(),Wl=u("span"),Wl.textContent=Gn,this.h()},l(F){e=c(F,"DIV",{class:!0});var Z=p(e);l=c(Z,"HEADER",{class:!0});var Xe=p(l);n=c(Xe,"DIV",{class:!0});var Rt=p(n);a=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(a)!=="svelte-1lvwg3g"&&(a.innerHTML=i),r=g(Rt),d=c(Rt,"BUTTON",{class:!0,title:!0});var Yn=p(d);bl.l(Yn),Yn.forEach(f),h=g(Rt),v=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(v)!=="svelte-1ictkst"&&(v.innerHTML=k),m=g(Rt),ll.l(Rt),_=g(Rt),y=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(y)!=="svelte-u6ddbp"&&(y.innerHTML=w),V=g(Rt),D=c(Rt,"SPAN",{class:!0});var Jn=p(D);N=Y(Jn,t[18]),Jn.forEach(f),Rt.forEach(f),S=g(Xe),C=c(Xe,"DIV",{class:!0});var dn=p(C);I=c(dn,"SPAN",{class:!0});var hn=p(I);L=Y(hn,E),B=Y(hn," / "),j=Y(hn,R),hn.forEach(f),M=g(dn),Ye&&Ye.l(dn),dn.forEach(f),O=g(Xe),Q=c(Xe,"DIV",{class:!0});var El=p(Q);Je&&Je.l(El),Ce=g(El),_e=c(El,"SPAN",{class:!0});var jn=p(_e);xe=Y(jn,t[19]),Fe=Y(jn," Hz"),jn.forEach(f),Re=g(El),we=c(El,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(we)!=="svelte-px3wau"&&(we.innerHTML=Ve),ye=g(El),Ie=c(El,"BUTTON",{class:!0,title:!0});var Zn=p(Ie);kl.l(Zn),Zn.forEach(f),El.forEach(f),Xe.forEach(f),Se=g(Z),X=c(Z,"DIV",{class:!0});var me=p(X);ve=c(me,"LABEL",{class:!0,title:!0});var vn=p(ve);oe=c(vn,"INPUT",{type:!0,class:!0}),Ne=g(vn),Pe=c(vn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Pe)!=="svelte-1k01z98"&&(Pe.textContent=Me),vn.forEach(f),Te=g(me),pe=c(me,"LABEL",{class:!0,title:!0});var pn=p(pe);Ae=c(pn,"INPUT",{type:!0,class:!0}),$e=g(pn),P=c(pn,"SPAN",{class:!0,"data-svelte-h":!0}),x(P)!=="svelte-6cthmg"&&(P.textContent=q),pn.forEach(f),se=g(me),$=c(me,"LABEL",{class:!0,title:!0});var mn=p($);te=c(mn,"INPUT",{type:!0,class:!0}),fe=g(mn),ce=c(mn,"SPAN",{class:!0,"data-svelte-h":!0}),x(ce)!=="svelte-1el2ji2"&&(ce.textContent=ge),mn.forEach(f),ie=g(me),A=c(me,"LABEL",{class:!0,title:!0});var _n=p(A);z=c(_n,"INPUT",{type:!0,class:!0}),le=g(_n),je=c(_n,"SPAN",{class:!0,"data-svelte-h":!0}),x(je)!=="svelte-177jta0"&&(je.textContent=et),_n.forEach(f),ot=g(me),tt=c(me,"LABEL",{class:!0,title:!0});var gn=p(tt);He=c(gn,"INPUT",{type:!0,class:!0}),Gt=g(gn),it=c(gn,"SPAN",{class:!0,"data-svelte-h":!0}),x(it)!=="svelte-1myrnh2"&&(it.textContent=T),gn.forEach(f),W=g(me),G=c(me,"LABEL",{class:!0,title:!0});var bn=p(G);K=c(bn,"INPUT",{type:!0,class:!0}),de=g(bn),ne=c(bn,"SPAN",{class:!0,"data-svelte-h":!0}),x(ne)!=="svelte-1pame47"&&(ne.textContent=re),bn.forEach(f),ue=g(me),Le=c(me,"LABEL",{class:!0,title:!0});var kn=p(Le);be=c(kn,"INPUT",{type:!0,class:!0}),Ue=g(kn),Ge=c(kn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Ge)!=="svelte-kia4wx"&&(Ge.textContent=Ll),kn.forEach(f),mt=g(me),_t=c(me,"SPAN",{class:!0}),p(_t).forEach(f),Rl=g(me),gt=c(me,"LABEL",{class:!0,title:!0});var wn=p(gt);lt=c(wn,"INPUT",{type:!0,class:!0}),ul=g(wn),Vt=c(wn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Vt)!=="svelte-16btzso"&&(Vt.textContent=Fl),wn.forEach(f),nl=g(me),nt=c(me,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(nt)!=="svelte-13z3t6e"&&(nt.textContent=Il),Nl=g(me),Ze&&Ze.l(me),bt=g(me),kt=c(me,"SPAN",{class:!0}),p(kt).forEach(f),Ul=g(me),Bt=c(me,"LABEL",{class:!0});var yn=p(Bt);Oe=c(yn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Oe)!=="svelte-1d25ili"&&(Oe.textContent=qt),Wt=g(yn),st=c(yn,"SELECT",{class:!0});var Cn=p(st);wt=c(Cn,"OPTION",{"data-svelte-h":!0}),x(wt)!=="svelte-kgyr86"&&(wt.textContent=fl),at=c(Cn,"OPTION",{"data-svelte-h":!0}),x(at)!=="svelte-8wnvoi"&&(at.textContent=Pl),yt=c(Cn,"OPTION",{"data-svelte-h":!0}),x(yt)!=="svelte-7fkmwe"&&(yt.textContent=Kt),Cn.forEach(f),yn.forEach(f),Xt=g(me),Yt=c(me,"LABEL",{class:!0});var Tn=p(Yt);Jt=c(Tn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Jt)!=="svelte-rpytas"&&(Jt.textContent=dl),hl=g(Tn),qe=c(Tn,"SELECT",{class:!0});var En=p(qe);Ct=c(En,"OPTION",{"data-svelte-h":!0}),x(Ct)!=="svelte-1awwqhf"&&(Ct.textContent=Zt),We=c(En,"OPTION",{"data-svelte-h":!0}),x(We)!=="svelte-1xbdoff"&&(We.textContent=tn),Tt=c(En,"OPTION",{"data-svelte-h":!0}),x(Tt)!=="svelte-1o5m333"&&(Tt.textContent=vl),En.forEach(f),Tn.forEach(f),pl=g(me),rt=c(me,"LABEL",{class:!0,title:!0});var Dn=p(rt);Qt=c(Dn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Qt)!=="svelte-bjtusk"&&(Qt.textContent=ze),ke=g(Dn),ee=c(Dn,"SELECT",{class:!0});var In=p(ee);Mt=c(In,"OPTION",{"data-svelte-h":!0}),x(Mt)!=="svelte-x3trnu"&&(Mt.textContent=zl),ct=c(In,"OPTION",{"data-svelte-h":!0}),x(ct)!=="svelte-10tohf9"&&(ct.textContent=ml),ut=c(In,"OPTION",{"data-svelte-h":!0}),x(ut)!=="svelte-pzpi85"&&(ut.textContent=ln),In.forEach(f),Dn.forEach(f),me.forEach(f),yl=g(Z),$t=c(Z,"DIV",{class:!0});var Nn=p($t);Ke=c(Nn,"DIV",{class:!0});var Dl=p(Ke);_l=c(Dl,"DIV",{class:!0});var Qn=p(_l);zt(jt.$$.fragment,Qn),Qn.forEach(f),ft=g(Dl),Et=c(Dl,"DIV",{class:!0});var $n=p(Et);zt(el.$$.fragment,$n),$n.forEach(f),Ol=g(Dl),Dt=c(Dl,"DIV",{class:!0});var es=p(Dt);zt(sl.$$.fragment,es),es.forEach(f),xl=g(Dl),It=c(Dl,"DIV",{class:!0});var ts=p(It);zt(al.$$.fragment,ts),ts.forEach(f),Dl.forEach(f),Hl=g(Nn),zt(dt.$$.fragment,Nn),Nn.forEach(f),Gl=g(Z),tl=c(Z,"FOOTER",{class:!0});var Pn=p(tl);Nt=c(Pn,"SPAN",{});var nn=p(Nt);ol=Y(nn,"View: "),Al=Y(nn,il),Cl=Y(nn," - "),gl=Y(nn,Tl),nn.forEach(f),ql=g(Pn),Wl=c(Pn,"SPAN",{"data-svelte-h":!0}),x(Wl)!=="svelte-109nybm"&&(Wl.textContent=Gn),Pn.forEach(f),Z.forEach(f),this.h()},h(){o(a,"class","open-btn svelte-1euarcl"),o(a,"title","Open audio file"),o(d,"class","play-btn svelte-1euarcl"),o(d,"title","Play/Pause (Space)"),cl(d,"playing",t[24]),o(v,"class","stop-btn svelte-1euarcl"),o(v,"title","Stop (Escape)"),o(y,"class","save-btn svelte-1euarcl"),o(y,"title","Save audio as WAV"),o(D,"class","filename svelte-1euarcl"),o(n,"class","toolbar-left svelte-1euarcl"),o(I,"class","time-display svelte-1euarcl"),o(C,"class","toolbar-center svelte-1euarcl"),o(_e,"class","sample-rate svelte-1euarcl"),o(we,"class","settings-btn svelte-1euarcl"),o(we,"title","Load configuration file"),o(Ie,"class","theme-btn svelte-1euarcl"),o(Ie,"title","Toggle theme"),o(Q,"class","toolbar-right svelte-1euarcl"),o(l,"class","toolbar svelte-1euarcl"),o(oe,"type","checkbox"),o(oe,"class","svelte-1euarcl"),o(Pe,"class","toggle-label pitch svelte-1euarcl"),o(ve,"class","overlay-toggle svelte-1euarcl"),o(ve,"title","Fundamental frequency (F0) - the perceived pitch of voiced speech"),o(Ae,"type","checkbox"),o(Ae,"class","svelte-1euarcl"),o(P,"class","toggle-label formants svelte-1euarcl"),o(pe,"class","overlay-toggle svelte-1euarcl"),o(pe,"title","Formants (F1-F4) - resonant frequencies of the vocal tract that distinguish vowels"),o(te,"type","checkbox"),o(te,"class","svelte-1euarcl"),o(ce,"class","toggle-label intensity svelte-1euarcl"),o($,"class","overlay-toggle svelte-1euarcl"),o($,"title","Intensity - sound pressure level in decibels (dB)"),o(z,"type","checkbox"),o(z,"class","svelte-1euarcl"),o(je,"class","toggle-label hnr svelte-1euarcl"),o(A,"class","overlay-toggle svelte-1euarcl"),o(A,"title","Harmonics-to-Noise Ratio - measure of voice quality (higher = clearer voice)"),o(He,"type","checkbox"),o(He,"class","svelte-1euarcl"),o(it,"class","toggle-label cog svelte-1euarcl"),o(tt,"class","overlay-toggle svelte-1euarcl"),o(tt,"title","Center of Gravity - spectral centroid, indicates brightness of sound"),o(K,"type","checkbox"),o(K,"class","svelte-1euarcl"),o(ne,"class","toggle-label tilt svelte-1euarcl"),o(G,"class","overlay-toggle svelte-1euarcl"),o(G,"title","Spectral Tilt - balance between low and high frequencies (dB difference 0-500 Hz vs 2000-4000 Hz)"),o(be,"type","checkbox"),o(be,"class","svelte-1euarcl"),o(Ge,"class","toggle-label a1p0 svelte-1euarcl"),o(Le,"class","overlay-toggle svelte-1euarcl"),o(Le,"title","A1-P0 Nasal Ratio - amplitude at F0 minus nasal pole (~250 Hz), indicates nasality"),o(_t,"class","controls-separator svelte-1euarcl"),o(lt,"type","checkbox"),o(lt,"class","svelte-1euarcl"),o(Vt,"class","toggle-label points svelte-1euarcl"),o(gt,"class","overlay-toggle svelte-1euarcl"),o(gt,"title","Data collection points - double-click to add, right-click to remove"),o(nt,"class","import-points-btn svelte-1euarcl"),o(nt,"title","Import data points from TSV"),o(kt,"class","controls-separator svelte-1euarcl"),o(Oe,"class","freq-label svelte-1euarcl"),wt.__value="female",At(wt,wt.__value),at.__value="male",At(at,at.__value),yt.__value="child",At(yt,yt.__value),o(st,"class","svelte-1euarcl"),t[2]===void 0&&ls(()=>t[54].call(st)),o(Bt,"class","freq-selector svelte-1euarcl"),o(Jt,"class","freq-label svelte-1euarcl"),Ct.__value=5e3,At(Ct,Ct.__value),We.__value=7500,At(We,We.__value),Tt.__value=1e4,At(Tt,Tt.__value),o(qe,"class","svelte-1euarcl"),t[16]===void 0&&ls(()=>t[55].call(qe)),o(Yt,"class","freq-selector svelte-1euarcl"),o(Qt,"class","freq-label svelte-1euarcl"),Mt.__value="praatfan-local",At(Mt,Mt.__value),ct.__value="praatfan",At(ct,ct.__value),ut.__value="praatfan-gpl",At(ut,ut.__value),o(ee,"class","svelte-1euarcl"),o(rt,"class","freq-selector svelte-1euarcl"),o(rt,"title","Acoustic analysis backend"),o(X,"class","overlay-controls svelte-1euarcl"),o(_l,"class","display-panel waveform-panel svelte-1euarcl"),o(Et,"class","display-panel spectrogram-panel svelte-1euarcl"),o(Dt,"class","time-axis-panel svelte-1euarcl"),o(It,"class","display-panel annotation-panel svelte-1euarcl"),o(Ke,"class","displays svelte-1euarcl"),o($t,"class","main-content svelte-1euarcl"),o(tl,"class","status-bar svelte-1euarcl"),o(e,"class","app-container svelte-1euarcl")},m(F,Z){H(F,e,Z),s(e,l),s(l,n),s(n,a),s(n,r),s(n,d),bl.m(d,null),s(n,h),s(n,v),s(n,m),ll.m(n,null),s(n,_),s(n,y),s(n,V),s(n,D),s(D,N),s(l,S),s(l,C),s(C,I),s(I,L),s(I,B),s(I,j),s(C,M),Ye&&Ye.m(C,null),s(l,O),s(l,Q),Je&&Je.m(Q,null),s(Q,Ce),s(Q,_e),s(_e,xe),s(_e,Fe),s(Q,Re),s(Q,we),s(Q,ye),s(Q,Ie),kl.m(Ie,null),s(e,Se),s(e,X),s(X,ve),s(ve,oe),oe.checked=t[8],s(ve,Ne),s(ve,Pe),s(X,Te),s(X,pe),s(pe,Ae),Ae.checked=t[9],s(pe,$e),s(pe,P),s(X,se),s(X,$),s($,te),te.checked=t[10],s($,fe),s($,ce),s(X,ie),s(X,A),s(A,z),z.checked=t[11],s(A,le),s(A,je),s(X,ot),s(X,tt),s(tt,He),He.checked=t[12],s(tt,Gt),s(tt,it),s(X,W),s(X,G),s(G,K),K.checked=t[13],s(G,de),s(G,ne),s(X,ue),s(X,Le),s(Le,be),be.checked=t[14],s(Le,Ue),s(Le,Ge),s(X,mt),s(X,_t),s(X,Rl),s(X,gt),s(gt,lt),lt.checked=t[15],s(gt,ul),s(gt,Vt),s(X,nl),s(X,nt),s(X,Nl),Ze&&Ze.m(X,null),s(X,bt),s(X,kt),s(X,Ul),s(X,Bt),s(Bt,Oe),s(Bt,Wt),s(Bt,st),s(st,wt),s(st,at),s(st,yt),Kl(st,t[2],!0),s(X,Xt),s(X,Yt),s(Yt,Jt),s(Yt,hl),s(Yt,qe),s(qe,Ct),s(qe,We),s(qe,Tt),Kl(qe,t[16],!0),s(X,pl),s(X,rt),s(rt,Qt),s(rt,ke),s(rt,ee),s(ee,Mt),s(ee,ct),s(ee,ut),Kl(ee,t[23]),s(e,yl),s(e,$t),s($t,Ke),s(Ke,_l),Ut(jt,_l,null),s(Ke,ft),s(Ke,Et),Ut(el,Et,null),s(Ke,Ol),s(Ke,Dt),Ut(sl,Dt,null),s(Ke,xl),s(Ke,It),Ut(al,It,null),s($t,Hl),Ut(dt,$t,null),s(e,Gl),s(e,tl),s(tl,Nt),s(Nt,ol),s(Nt,Al),s(Nt,Cl),s(Nt,gl),s(tl,ql),s(tl,Wl),Lt=!0,Mn||(qn=[U(a,"click",t[35]),U(d,"click",Os),U(v,"click",zs),U(y,"click",t[34]),U(we,"click",t[37]),U(Ie,"click",t[29]),U(oe,"change",t[46]),U(Ae,"change",t[47]),U(te,"change",t[48]),U(z,"change",t[49]),U(He,"change",t[50]),U(K,"change",t[51]),U(be,"change",t[52]),U(lt,"change",t[53]),U(nt,"click",t[40]),U(st,"change",t[54]),U(qe,"change",t[55]),U(ee,"change",t[28])],Mn=!0)},p(F,Z){cn!==(cn=Wn(F))&&(bl.d(1),bl=cn(F),bl&&(bl.c(),bl.m(d,null))),(!Lt||Z[0]&16777216)&&cl(d,"playing",F[24]),un===(un=Kn(F))&&ll?ll.p(F,Z):(ll.d(1),ll=un(F),ll&&(ll.c(),ll.m(n,_))),(!Lt||Z[0]&262144)&&ae(N,F[18]),(!Lt||Z[0]&1048576)&&E!==(E=rl(F[20])+"")&&ae(L,E),(!Lt||Z[0]&524289)&&R!==(R=rl(F[0].length/F[19])+"")&&ae(j,R),F[25]?Ye?Ye.p(F,Z):(Ye=Ms(F),Ye.c(),Ye.m(C,null)):Ye&&(Ye.d(1),Ye=null),F[26]?Je?Je.p(F,Z):(Je=js(F),Je.c(),Je.m(Q,Ce)):Je&&(Je.d(1),Je=null),(!Lt||Z[0]&524288)&&ae(xe,F[19]),fn!==(fn=Xn(F))&&(kl.d(1),kl=fn(F),kl&&(kl.c(),kl.m(Ie,null))),Z[0]&256&&(oe.checked=F[8]),Z[0]&512&&(Ae.checked=F[9]),Z[0]&1024&&(te.checked=F[10]),Z[0]&2048&&(z.checked=F[11]),Z[0]&4096&&(He.checked=F[12]),Z[0]&8192&&(K.checked=F[13]),Z[0]&16384&&(be.checked=F[14]),Z[0]&32768&&(lt.checked=F[15]),F[22].length>0?Ze?Ze.p(F,Z):(Ze=Ls(F),Ze.c(),Ze.m(X,bt)):Ze&&(Ze.d(1),Ze=null),Z[0]&4&&Kl(st,F[2]),Z[0]&65536&&Kl(qe,F[16]),(!Lt||Z[0]&8388608)&&Kl(ee,F[23]);const Xe={};Z[0]&256&&(Xe.showPitch=F[8]),Z[0]&512&&(Xe.showFormants=F[9]),Z[0]&1024&&(Xe.showIntensity=F[10]),Z[0]&2048&&(Xe.showHNR=F[11]),Z[0]&4096&&(Xe.showCoG=F[12]),Z[0]&8192&&(Xe.showSpectralTilt=F[13]),Z[0]&16384&&(Xe.showA1P0=F[14]),Z[0]&32768&&(Xe.showDataPoints=F[15]),Z[0]&65536&&(Xe.maxFreq=F[16]),el.$set(Xe),(!Lt||Z[0]&2097152)&&il!==(il=rl(F[21].start)+"")&&ae(Al,il),(!Lt||Z[0]&2097152)&&Tl!==(Tl=rl(F[21].end)+"")&&ae(gl,Tl)},i(F){Lt||(he(jt.$$.fragment,F),he(el.$$.fragment,F),he(sl.$$.fragment,F),he(al.$$.fragment,F),he(dt.$$.fragment,F),Lt=!0)},o(F){De(jt.$$.fragment,F),De(el.$$.fragment,F),De(sl.$$.fragment,F),De(al.$$.fragment,F),De(dt.$$.fragment,F),Lt=!1},d(F){F&&f(e),bl.d(),ll.d(),Ye&&Ye.d(),Je&&Je.d(),kl.d(),Ze&&Ze.d(),Ft(jt),Ft(el),Ft(sl),Ft(al),Ft(dt),Mn=!1,St(qn)}}}function Ma(t){let e,l;return e=new ga({props:{onFile:t[30],onRecordedBlob:t[31]}}),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p:pt,i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function ja(t){let e,l="Loading acoustic analysis engine...";return{c(){e=u("div"),e.textContent=l,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-plgi30"&&(e.textContent=l),this.h()},h(){o(e,"class","loading svelte-1euarcl")},m(n,a){H(n,e,a)},p:pt,i:pt,o:pt,d(n){n&&f(e)}}}function La(t){let e,l;return{c(){e=Ht("svg"),l=Ht("path"),this.h()},l(n){e=xt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=p(e);l=xt(a,"path",{d:!0}),p(l).forEach(f),a.forEach(f),this.h()},h(){o(l,"d","M8 5v14l11-7z"),o(e,"viewBox","0 0 24 24"),o(e,"fill","currentColor"),o(e,"width","20"),o(e,"height","20")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ra(t){let e,l,n;return{c(){e=Ht("svg"),l=Ht("rect"),n=Ht("rect"),this.h()},l(a){e=xt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var i=p(e);l=xt(i,"rect",{x:!0,y:!0,width:!0,height:!0}),p(l).forEach(f),n=xt(i,"rect",{x:!0,y:!0,width:!0,height:!0}),p(n).forEach(f),i.forEach(f),this.h()},h(){o(l,"x","6"),o(l,"y","4"),o(l,"width","4"),o(l,"height","16"),o(n,"x","14"),o(n,"y","4"),o(n,"width","4"),o(n,"height","16"),o(e,"viewBox","0 0 24 24"),o(e,"fill","currentColor"),o(e,"width","20"),o(e,"height","20")},m(a,i){H(a,e,i),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Fa(t){let e,l='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><circle cx="12" cy="12" r="6"></circle></svg>',n,a;return{c(){e=u("button"),e.innerHTML=l,this.h()},l(i){e=c(i,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(e)!=="svelte-d9ton6"&&(e.innerHTML=l),this.h()},h(){o(e,"class","record-btn svelte-1euarcl"),o(e,"title","Record from microphone")},m(i,r){H(i,e,r),n||(a=U(e,"click",t[32]),n=!0)},p:pt,d(i){i&&f(e),n=!1,a()}}}function Ua(t){let e,l,n,a,i,r=t[7].toFixed(1)+"",d,h,v,k;return{c(){e=u("button"),l=Ht("svg"),n=Ht("rect"),a=b(),i=u("span"),d=J(r),h=J("s"),this.h()},l(m){e=c(m,"BUTTON",{class:!0,title:!0});var _=p(e);l=xt(_,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var y=p(l);n=xt(y,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),p(n).forEach(f),y.forEach(f),a=g(_),i=c(_,"SPAN",{class:!0});var w=p(i);d=Y(w,r),h=Y(w,"s"),w.forEach(f),_.forEach(f),this.h()},h(){o(n,"x","6"),o(n,"y","6"),o(n,"width","12"),o(n,"height","12"),o(n,"rx","2"),o(l,"viewBox","0 0 24 24"),o(l,"fill","currentColor"),o(l,"width","16"),o(l,"height","16"),o(i,"class","recording-time svelte-1euarcl"),o(e,"class","record-btn recording svelte-1euarcl"),o(e,"title","Stop recording")},m(m,_){H(m,e,_),s(e,l),s(l,n),s(e,a),s(e,i),s(i,d),s(i,h),v||(k=U(e,"click",t[33]),v=!0)},p(m,_){_[0]&128&&r!==(r=m[7].toFixed(1)+"")&&ae(d,r)},d(m){m&&f(e),v=!1,k()}}}function Ms(t){let e,l,n=rl(t[25].end-t[25].start)+"",a;return{c(){e=u("span"),l=J("Sel: "),a=J(n),this.h()},l(i){e=c(i,"SPAN",{class:!0});var r=p(e);l=Y(r,"Sel: "),a=Y(r,n),r.forEach(f),this.h()},h(){o(e,"class","selection-info svelte-1euarcl")},m(i,r){H(i,e,r),s(e,l),s(e,a)},p(i,r){r[0]&33554432&&n!==(n=rl(i[25].end-i[25].start)+"")&&ae(a,n)},d(i){i&&f(e)}}}function js(t){let e,l,n,a;return{c(){e=u("span"),l=J("Analyzing... "),n=J(t[27]),a=J("%"),this.h()},l(i){e=c(i,"SPAN",{class:!0});var r=p(e);l=Y(r,"Analyzing... "),n=Y(r,t[27]),a=Y(r,"%"),r.forEach(f),this.h()},h(){o(e,"class","analysis-progress svelte-1euarcl")},m(i,r){H(i,e,r),s(e,l),s(e,n),s(e,a)},p(i,r){r[0]&134217728&&ae(n,i[27])},d(i){i&&f(e)}}}function za(t){let e,l,n;return{c(){e=Ht("svg"),l=Ht("circle"),n=Ht("path"),this.h()},l(a){e=xt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var i=p(e);l=xt(i,"circle",{cx:!0,cy:!0,r:!0}),p(l).forEach(f),n=xt(i,"path",{d:!0}),p(n).forEach(f),i.forEach(f),this.h()},h(){o(l,"cx","12"),o(l,"cy","12"),o(l,"r","5"),o(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),o(e,"viewBox","0 0 24 24"),o(e,"fill","currentColor"),o(e,"width","16"),o(e,"height","16")},m(a,i){H(a,e,i),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Oa(t){let e,l;return{c(){e=Ht("svg"),l=Ht("path"),this.h()},l(n){e=xt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=p(e);l=xt(a,"path",{d:!0}),p(l).forEach(f),a.forEach(f),this.h()},h(){o(l,"d","M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"),o(e,"viewBox","0 0 24 24"),o(e,"fill","currentColor"),o(e,"width","16"),o(e,"height","16")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ls(t){let e,l,n=t[22].length+"",a,i,r,d;return{c(){e=u("button"),l=J("Export ("),a=J(n),i=J(")"),this.h()},l(h){e=c(h,"BUTTON",{class:!0,title:!0});var v=p(e);l=Y(v,"Export ("),a=Y(v,n),i=Y(v,")"),v.forEach(f),this.h()},h(){o(e,"class","export-points-btn svelte-1euarcl"),o(e,"title","Export data points to TSV")},m(h,v){H(h,e,v),s(e,l),s(e,a),s(e,i),r||(d=U(e,"click",t[39]),r=!0)},p(h,v){v[0]&4194304&&n!==(n=h[22].length+"")&&ae(a,n)},d(h){h&&f(e),r=!1,d()}}}function xa(t){let e,l,n,a,i,r,d,h,v,k,m,_;const y=[ja,Ma,Ba],w=[];function V(D,N){return D[1]?D[0]?2:1:0}return h=V(t),v=w[h]=y[h](t),{c(){e=u("input"),l=b(),n=u("input"),a=b(),i=u("input"),r=b(),d=u("main"),v.c(),this.h()},l(D){e=c(D,"INPUT",{type:!0,accept:!0,style:!0}),l=g(D),n=c(D,"INPUT",{type:!0,accept:!0,style:!0}),a=g(D),i=c(D,"INPUT",{type:!0,accept:!0,style:!0}),r=g(D),d=c(D,"MAIN",{class:!0});var N=p(d);v.l(N),N.forEach(f),this.h()},h(){o(e,"type","file"),o(e,"accept","audio/*"),Be(e,"display","none"),o(n,"type","file"),o(n,"accept",".yaml,.yml"),Be(n,"display","none"),o(i,"type","file"),o(i,"accept",".tsv,.txt"),Be(i,"display","none"),o(d,"class","svelte-1euarcl")},m(D,N){H(D,e,N),t[43](e),H(D,l,N),H(D,n,N),t[44](n),H(D,a,N),H(D,i,N),t[45](i),H(D,r,N),H(D,d,N),w[h].m(d,null),k=!0,m||(_=[U(e,"change",t[36]),U(n,"change",t[38]),U(i,"change",t[41])],m=!0)},p(D,N){let S=h;h=V(D),h===S?w[h].p(D,N):(Sl(),De(w[S],1,1,()=>{w[S]=null}),Vl(),v=w[h],v?v.p(D,N):(v=w[h]=y[h](D),v.c()),he(v,1),v.m(d,null))},i(D){k||(he(v),k=!0)},o(D){De(v),k=!1},d(D){D&&(f(e),f(l),f(n),f(a),f(i),f(r),f(d)),t[43](null),t[44](null),t[45](null),w[h].d(),m=!1,St(_)}}}function rl(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toFixed(2).padStart(5,"0")}`}function Ha(t,e,l){let n,a,i,r,d,h,v,k,m,_,y,w,V,D,N;Ee(t,Sn,T=>l(18,n=T)),Ee(t,Fn,T=>l(0,a=T)),Ee(t,aa,T=>l(59,i=T)),Ee(t,Un,T=>l(19,r=T)),Ee(t,jl,T=>l(20,d=T)),Ee(t,Yl,T=>l(21,h=T)),Ee(t,Vn,T=>l(60,v=T)),Ee(t,rs,T=>l(22,k=T)),Ee(t,oa,T=>l(1,m=T)),Ee(t,cs,T=>l(2,_=T)),Ee(t,zn,T=>l(23,y=T)),Ee(t,ia,T=>l(24,w=T)),Ee(t,Jl,T=>l(25,V=T)),Ee(t,ra,T=>l(26,D=T)),Ee(t,ca,T=>l(27,N=T));let S=!0,C,I,E=!1,L=null,B=[],R=0,j=null;Bn(()=>{const T=localStorage.getItem("ozen-backend");return(T==="praatfan-gpl"||T==="praatfan"||T==="praatfan-local")&&zn.set(T),Rn(y),ua(Vn,rs),localStorage.getItem("ozen-theme")==="light"&&(l(3,S=!1),document.documentElement.classList.add("light")),window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)}),Hn(()=>{j&&clearInterval(j),L&&E&&L.stop()});async function M(T){const G=T.target.value;zn.set(G),localStorage.setItem("ozen-backend",G);try{await Rn(G),a&&(sn(),an().catch(K=>console.error("Analysis failed:",K)))}catch(K){console.error("Failed to switch backend:",K)}}let O=_;function Q(){l(3,S=!S),S?(document.documentElement.classList.remove("light"),localStorage.setItem("ozen-theme","dark")):(document.documentElement.classList.add("light"),localStorage.setItem("ozen-theme","light"))}async function Ce(){if(k.length===0){console.log("No data points to copy");return}const T=os({showPitch:Se,showFormants:X,showIntensity:ve,showHNR:oe,showCoG:Ne,showSpectralTilt:Pe,showA1P0:Me});try{await navigator.clipboard.writeText(T),console.log(`Copied ${k.length} data points to clipboard`)}catch(W){console.error("Failed to copy to clipboard:",W)}}function _e(T){if(!(T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement)){if(console.log("Key pressed:",T.code,T.key),T.ctrlKey||T.metaKey)switch(T.key.toLowerCase()){case"z":T.preventDefault(),T.shiftKey?xn():Us();return;case"y":T.preventDefault(),xn();return;case"c":T.preventDefault(),Ce();return}switch(T.code){case"Space":T.preventDefault(),Os();break;case"Escape":T.preventDefault(),zs(),Jl.set(null);break;case"Tab":T.preventDefault(),ea();break;case"ArrowLeft":console.log("ArrowLeft: panning left"),T.preventDefault(),xe(-.1);break;case"ArrowRight":console.log("ArrowRight: panning right"),T.preventDefault(),xe(.1);break;case"ArrowUp":console.log("ArrowUp: zooming in"),T.preventDefault(),Fe(.91);break;case"ArrowDown":console.log("ArrowDown: zooming out"),T.preventDefault(),Fe(1.1);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":const W=parseInt(T.code.slice(-1))-1;W<v.length&&wl.set(W);break}}}function xe(T){if(console.log("panView called with fraction:",T),!a){console.log("panView: no audio buffer");return}const W=a.length/r,{start:G,end:K}=h,de=K-G,ne=de*T;let re=G+ne,ue=K+ne;console.log("panView: moving from",G,"-",K,"to",re,"-",ue),re<0&&(re=0,ue=de),ue>W&&(ue=W,re=W-de),Yl.set({start:re,end:ue})}function Fe(T){if(console.log("zoomView called with factor:",T),!a){console.log("zoomView: no audio buffer");return}const W=a.length/r,{start:G,end:K}=h,de=K-G,ne=d,re=Math.max(.01,Math.min(W,de*T));console.log("zoomView: current duration",de,"→ new duration",re,"centered on",ne);const ue=(ne-G)/de;let Le=Math.max(0,ne-ue*re),be=Math.min(W,Le+re);be===W&&(Le=Math.max(0,be-re)),Yl.set({start:Le,end:be})}async function Re(T){sn();const W=await T.arrayBuffer(),K=await new AudioContext().decodeAudioData(W),de=new Float64Array(K.length),ne=K.getChannelData(0);for(let ue=0;ue<K.length;ue++)de[ue]=ne[ue];Fn.set(de),Un.set(K.sampleRate),Sn.set(T.name);const re=K.length/K.sampleRate;is.set(re),Yl.set({start:0,end:Math.min(re,10)}),jl.set(0),Jl.set(null),an().catch(ue=>console.error("Analysis failed:",ue))}async function we(T){sn();const W=await T.arrayBuffer(),K=await new AudioContext().decodeAudioData(W),de=new Float64Array(K.length),ne=K.getChannelData(0);for(let ue=0;ue<K.length;ue++)de[ue]=ne[ue];Fn.set(de),Un.set(K.sampleRate),Sn.set(`Recording ${new Date().toLocaleTimeString()}`);const re=K.length/K.sampleRate;is.set(re),Yl.set({start:0,end:Math.min(re,10)}),jl.set(0),Jl.set(null),an().catch(ue=>console.error("Analysis failed:",ue))}async function Ve(){try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});B=[],L=new MediaRecorder(T,{mimeType:"audio/webm"}),L.ondataavailable=W=>{W.data.size>0&&B.push(W.data)},L.onstop=async()=>{T.getTracks().forEach(G=>G.stop());const W=new Blob(B,{type:"audio/webm"});await we(W)},L.start(100),l(6,E=!0),l(7,R=0),j=setInterval(()=>{l(7,R+=.1)},100)}catch(T){console.error("Failed to start recording:",T),alert("Could not access microphone. Please allow microphone access.")}}function ye(){L&&E&&(L.stop(),l(6,E=!1),j&&(clearInterval(j),j=null))}async function Ie(){if(!a||!r)return;const T=a.length,W=new ArrayBuffer(44+T*2),G=new DataView(W),K=(be,Ue)=>{for(let Ge=0;Ge<Ue.length;Ge++)G.setUint8(be+Ge,Ue.charCodeAt(Ge))};K(0,"RIFF"),G.setUint32(4,36+T*2,!0),K(8,"WAVE"),K(12,"fmt "),G.setUint32(16,16,!0),G.setUint16(20,1,!0),G.setUint16(22,1,!0),G.setUint32(24,r,!0),G.setUint32(28,r*2,!0),G.setUint16(32,2,!0),G.setUint16(34,16,!0),K(36,"data"),G.setUint32(40,T*2,!0);let de=44;for(let be=0;be<T;be++){const Ue=Math.max(-1,Math.min(1,a[be]));G.setInt16(de,Ue<0?Ue*32768:Ue*32767,!0),de+=2}const ne=new Blob([W],{type:"audio/wav"});let re="audio.wav";if(n&&(re=n.replace(/\.[^/.]+$/,"")+".wav"),"showSaveFilePicker"in window)try{const Ue=await(await window.showSaveFilePicker({suggestedName:re,types:[{description:"WAV Audio",accept:{"audio/wav":[".wav"]}}]})).createWritable();await Ue.write(ne),await Ue.close();return}catch(be){if(be.name==="AbortError")return}const ue=URL.createObjectURL(ne),Le=document.createElement("a");Le.href=ue,Le.download=re,Le.click(),URL.revokeObjectURL(ue)}let Se=!0,X=!0,ve=!1,oe=!1,Ne=!1,Pe=!1,Me=!1,Te=!0,pe=5e3,Ae;function $e(){Ae.click()}async function P(T){var K;const W=T.target,G=(K=W.files)==null?void 0:K[0];G&&await Re(G),W.value=""}function q(){C.click()}async function se(T){var K;const W=T.target,G=(K=W.files)==null?void 0:K[0];if(G){const de=await G.text(),ne=fa(de);if(ne&&ne.backend!==i)try{await Rn(ne.backend),localStorage.setItem("ozen-backend",ne.backend),a&&(sn(),an().catch(re=>console.error("Analysis failed:",re)))}catch(re){console.error("Failed to switch backend:",re)}}W.value=""}async function $(){const T=os({showPitch:Se,showFormants:X,showIntensity:ve,showHNR:oe,showCoG:Ne,showSpectralTilt:Pe,showA1P0:Me});let W="data_points.tsv";if(n&&(W=n.replace(/\.[^/.]+$/,"")+"_points.tsv"),"showSaveFilePicker"in window)try{const re=await(await window.showSaveFilePicker({suggestedName:W,types:[{description:"Tab-Separated Values",accept:{"text/tab-separated-values":[".tsv"]}}]})).createWritable();await re.write(T),await re.close();return}catch(ne){if(ne.name==="AbortError")return}const G=new Blob([T],{type:"text/tab-separated-values"}),K=URL.createObjectURL(G),de=document.createElement("a");de.href=K,de.download=W,de.click(),URL.revokeObjectURL(K)}function te(){I.click()}async function fe(T){var K;const W=T.target,G=(K=W.files)==null?void 0:K[0];if(G){const de=await G.text();sa(de)===-1&&console.error("Failed to import data points: invalid TSV format (need time and frequency columns)")}W.value=""}function ce(T){Ml[T?"unshift":"push"](()=>{Ae=T,l(17,Ae)})}function ge(T){Ml[T?"unshift":"push"](()=>{C=T,l(4,C)})}function ie(T){Ml[T?"unshift":"push"](()=>{I=T,l(5,I)})}function A(){Se=this.checked,l(8,Se)}function z(){X=this.checked,l(9,X)}function le(){ve=this.checked,l(10,ve)}function je(){oe=this.checked,l(11,oe)}function et(){Ne=this.checked,l(12,Ne)}function ot(){Pe=this.checked,l(13,Pe)}function tt(){Me=this.checked,l(14,Me)}function He(){Te=this.checked,l(15,Te)}function Gt(){_=ns(this),cs.set(_)}function it(){pe=ns(this),l(16,pe)}return t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&2048&&_!==O&&(l(42,O=_),a&&m&&(sn(),an().catch(T=>console.error("Analysis failed:",T))))},[a,m,_,S,C,I,E,R,Se,X,ve,oe,Ne,Pe,Me,Te,pe,Ae,n,r,d,h,k,y,w,V,D,N,M,Q,Re,we,Ve,ye,Ie,$e,P,q,se,$,te,fe,O,ce,ge,ie,A,z,le,je,et,ot,tt,He,Gt,it]}class Xa extends $l{constructor(e){super(),en(this,e,Ha,xa,Ql,{},null,[-1,-1,-1])}}export{Xa as component};

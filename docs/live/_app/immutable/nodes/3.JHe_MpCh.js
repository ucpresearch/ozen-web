import{r as St,s as Ql,n as pt,d as f,i as H,x as vt,G as Hn,D as Ml,a as ae,b as s,E as U,B as i,c,e as p,g,f as Y,H as x,h as u,j as b,t as J,I as cl,_ as Rs,C as Me,k as Ee,$ as Fs,w as Vn,L as At,a0 as Hs,K as Kl,M as ls,J as ns,N as xt,O as Ht}from"../chunks/DzR6qLkJ.js";import{a as he,t as De,S as $l,i as en,g as Sl,c as Bl,d as Ft,m as Ut,e as zt,b as Ot}from"../chunks/CbSE4UIZ.js";import{n as wl,o as Gs,q as qs,u as rn,v as Ws,x as Ln,e as Jl,b as jl,y as ss,z as Ks,t as Yl,A as Us,B as xn,C as Xs,D as Ys,E as as,F as Js,G as Zs,H as Qs,I as Bn,f as Sn,g as $s,i as Rn,p as ea,l as zs,J as Os,W as ta,S as la,T as na,K as is,c as sn,r as an,a as Fn,s as Un,d as rs,L as sa,M as aa,N as os,w as ia,h as ra,j as oa,k as ca,O as ua}from"../chunks/CO5xYoUC.js";import{s as zn,l as fa,a as cs}from"../chunks/BmAGY9Gp.js";function Zl(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function da(t,e){t.d(1),e.delete(t.key)}function ha(t,e){De(t,1,1,()=>{e.delete(t.key)})}function xs(t,e,l,n,a,r,o,d,h,v,k,m){let _=t.length,y=r.length,w=_;const B={};for(;w--;)B[t[w].key]=w;const D=[],N=new Map,S=new Map,C=[];for(w=y;w--;){const V=m(a,r,w),R=l(V);let j=o.get(R);j?C.push(()=>j.p(V,e)):(j=v(R,V),j.c()),N.set(R,D[w]=j),R in B&&S.set(R,Math.abs(w-B[R]))}const I=new Set,E=new Set;function L(V){he(V,1),V.m(d,k),o.set(V.key,V),k=V.first,y--}for(;_&&y;){const V=D[y-1],R=t[_-1],j=V.key,M=R.key;V===R?(k=V.first,_--,y--):N.has(M)?!o.has(j)||I.has(j)?L(V):E.has(M)?_--:S.get(j)>S.get(M)?(E.add(j),L(V)):(I.add(M),_--):(h(R,o),_--)}for(;_--;){const V=t[_];N.has(V.key)||h(V,o)}for(;y;)L(D[y-1]);return St(C),D}function va(t){let e,l,n='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 15V3m0 0l-4 4m4-4l4 4"></path><path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17"></path></svg>',a,r,o="Drop an audio file here",d,h,v="or click to select",k,m,_,y="Supports WAV, FLAC, MP3, OGG",w,B,D,N,S=t[0]&&us(t);return{c(){e=u("div"),l=u("div"),l.innerHTML=n,a=b(),r=u("p"),r.textContent=o,d=b(),h=u("p"),h.textContent=v,k=b(),S&&S.c(),m=b(),_=u("p"),_.textContent=y,w=b(),B=u("input"),this.h()},l(C){e=c(C,"DIV",{class:!0,role:!0,tabindex:!0});var I=p(e);l=c(I,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-hj89uc"&&(l.innerHTML=n),a=g(I),r=c(I,"P",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-nangy9"&&(r.textContent=o),d=g(I),h=c(I,"P",{class:!0,"data-svelte-h":!0}),x(h)!=="svelte-fp1l9p"&&(h.textContent=v),k=g(I),S&&S.l(I),m=g(I),_=c(I,"P",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-tb4emq"&&(_.textContent=y),w=g(I),B=c(I,"INPUT",{type:!0,accept:!0,class:!0}),I.forEach(f),this.h()},h(){i(l,"class","icon svelte-lmmgcl"),i(r,"class","primary svelte-lmmgcl"),i(h,"class","secondary svelte-lmmgcl"),i(_,"class","formats svelte-lmmgcl"),i(B,"type","file"),i(B,"accept","audio/*"),i(B,"class","svelte-lmmgcl"),i(e,"class","drop-zone svelte-lmmgcl"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"drag-over",t[1])},m(C,I){H(C,e,I),s(e,l),s(e,a),s(e,r),s(e,d),s(e,h),s(e,k),S&&S.m(e,null),s(e,m),s(e,_),s(e,w),s(e,B),t[13](B),D||(N=[U(B,"change",t[9]),U(e,"drop",t[5]),U(e,"dragover",t[6]),U(e,"dragleave",t[7]),U(e,"click",t[8]),U(e,"keydown",t[14])],D=!0)},p(C,I){C[0]?S?S.p(C,I):(S=us(C),S.c(),S.m(e,m)):S&&(S.d(1),S=null),I&2&&cl(e,"drag-over",C[1])},d(C){C&&f(e),S&&S.d(),t[13](null),D=!1,St(N)}}}function pa(t){let e,l,n,a,r,o=t[4].toFixed(1)+"",d,h,v,k,m='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop Recording</span>',_,y;return{c(){e=u("div"),l=u("div"),n=u("div"),a=b(),r=u("span"),d=J(o),h=J("s"),v=b(),k=u("button"),k.innerHTML=m,this.h()},l(w){e=c(w,"DIV",{class:!0});var B=p(e);l=c(B,"DIV",{class:!0});var D=p(l);n=c(D,"DIV",{class:!0}),p(n).forEach(f),a=g(D),r=c(D,"SPAN",{class:!0});var N=p(r);d=Y(N,o),h=Y(N,"s"),N.forEach(f),D.forEach(f),v=g(B),k=c(B,"BUTTON",{class:!0,"data-svelte-h":!0}),x(k)!=="svelte-135d7zb"&&(k.innerHTML=m),B.forEach(f),this.h()},h(){i(n,"class","recording-pulse svelte-lmmgcl"),i(r,"class","recording-time svelte-lmmgcl"),i(l,"class","recording-indicator svelte-lmmgcl"),i(k,"class","stop-record-btn svelte-lmmgcl"),i(e,"class","drop-zone recording svelte-lmmgcl")},m(w,B){H(w,e,B),s(e,l),s(l,n),s(l,a),s(l,r),s(r,d),s(r,h),s(e,v),s(e,k),_||(y=U(k,"click",t[11]),_=!0)},p(w,B){B&16&&o!==(o=w[4].toFixed(1)+"")&&ae(d,o)},d(w){w&&f(e),_=!1,y()}}}function us(t){let e,l,n="or",a,r,o='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" class="svelte-lmmgcl"><circle cx="12" cy="12" r="8"></circle></svg> <span>Record from Microphone</span>',d,h;return{c(){e=u("div"),l=u("span"),l.textContent=n,a=b(),r=u("button"),r.innerHTML=o,this.h()},l(v){e=c(v,"DIV",{class:!0});var k=p(e);l=c(k,"SPAN",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-1wtgm67"&&(l.textContent=n),a=g(k),r=c(k,"BUTTON",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-8eds6f"&&(r.innerHTML=o),k.forEach(f),this.h()},h(){i(l,"class","divider-text svelte-lmmgcl"),i(r,"class","record-btn svelte-lmmgcl"),i(e,"class","record-section svelte-lmmgcl")},m(v,k){H(v,e,k),s(e,l),s(e,a),s(e,r),d||(h=U(r,"click",Rs(t[10])),d=!0)},p:pt,d(v){v&&f(e),d=!1,h()}}}function ma(t){let e;function l(r,o){return r[3]?pa:va}let n=l(t),a=n(t);return{c(){a.c(),e=vt()},l(r){a.l(r),e=vt()},m(r,o){a.m(r,o),H(r,e,o)},p(r,[o]){n===(n=l(r))&&a?a.p(r,o):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},i:pt,o:pt,d(r){r&&f(e),a.d(r)}}}function _a(t,e,l){let{onFile:n}=e,{onRecordedBlob:a=void 0}=e,r=!1,o,d=!1,h=null,v=[],k=0,m=null;Hn(()=>{m&&clearInterval(m),h&&d&&h.stop()});function _(E){var V;E.preventDefault(),l(1,r=!1);const L=(V=E.dataTransfer)==null?void 0:V.files[0];L&&n(L)}function y(E){E.preventDefault(),l(1,r=!0)}function w(){l(1,r=!1)}function B(){o.click()}function D(E){var R;const V=(R=E.target.files)==null?void 0:R[0];V&&n(V)}async function N(){if(a)try{const E=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});v=[],h=new MediaRecorder(E,{mimeType:"audio/webm"}),h.ondataavailable=L=>{L.data.size>0&&v.push(L.data)},h.onstop=async()=>{E.getTracks().forEach(V=>V.stop());const L=new Blob(v,{type:"audio/webm"});a==null||a(L)},h.start(100),l(3,d=!0),l(4,k=0),m=setInterval(()=>{l(4,k+=.1)},100)}catch(E){console.error("Failed to start recording:",E),alert("Could not access microphone. Please allow microphone access.")}}function S(){h&&d&&(h.stop(),l(3,d=!1),m&&(clearInterval(m),m=null))}function C(E){Ml[E?"unshift":"push"](()=>{o=E,l(2,o)})}const I=E=>E.key==="Enter"&&B();return t.$$set=E=>{"onFile"in E&&l(12,n=E.onFile),"onRecordedBlob"in E&&l(0,a=E.onRecordedBlob)},[a,r,o,d,k,_,y,w,B,D,N,S,n,C,I]}class ga extends $l{constructor(e){super(),en(this,e,_a,ma,Ql,{onFile:12,onRecordedBlob:0})}}function fs(t,e,l){const n=t.slice();n[48]=e[l];const a=Math.max(ht,n[17](n[48].start));n[49]=a;const r=Math.min(n[9],n[17](n[48].end));n[50]=r;const o=n[50]-n[49];n[51]=o;const d=n[49]-ht;return n[52]=d,n}function On(t){const e=t.slice(),l=e[48].end-e[48].start;e[55]=l;const n=e[55]>=1?e[55].toFixed(2)+"s":(e[55]*1e3).toFixed(0)+"ms";return e[56]=n,e}function ds(t){let e,l,n,a,r;function o(y,w){return y[4]===y[48].index?ka:ba}let d=o(t),h=d(t);function v(...y){return t[34](t[48],...y)}function k(...y){return t[35](t[48],...y)}function m(...y){return t[36](t[48],...y)}let _=t[48].index>0&&vs(t);return{c(){e=u("div"),h.c(),l=b(),_&&_.c(),n=vt(),this.h()},l(y){e=c(y,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var w=p(e);h.l(w),w.forEach(f),l=g(y),_&&_.l(y),n=vt(),this.h()},h(){i(e,"class","interval svelte-1h3ij0x"),Me(e,"left",t[52]+"px"),Me(e,"width",t[51]+"px"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]&&t[10]===t[48].index)},m(y,w){H(y,e,w),h.m(e,null),H(y,l,w),_&&_.m(y,w),H(y,n,w),a||(r=[U(e,"click",v),U(e,"dblclick",k),U(e,"keydown",m)],a=!0)},p(y,w){t=y,d===(d=o(t))&&h?h.p(t,w):(h.d(1),h=d(t),h&&(h.c(),h.m(e,null))),w[0]&256&&Me(e,"left",t[52]+"px"),w[0]&768&&Me(e,"width",t[51]+"px"),w[0]&1284&&cl(e,"selected",t[2]&&t[10]===t[48].index),t[48].index>0?_?_.p(t,w):(_=vs(t),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null)},d(y){y&&(f(e),f(l),f(n)),h.d(),_&&_.d(y),a=!1,St(r)}}}function ba(t){let e,l=(t[48].text||" ")+"",n,a,r,o,d;function h(){return t[32](t[48])}function v(...m){return t[33](t[48],...m)}let k=t[51]>30&&hs(t);return{c(){e=u("span"),n=J(l),a=b(),k&&k.c(),r=vt(),this.h()},l(m){e=c(m,"SPAN",{class:!0,role:!0,tabindex:!0});var _=p(e);n=Y(_,l),_.forEach(f),a=g(m),k&&k.l(m),r=vt(),this.h()},h(){i(e,"class","interval-text svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0")},m(m,_){H(m,e,_),s(e,n),H(m,a,_),k&&k.m(m,_),H(m,r,_),o||(d=[U(e,"click",Rs(h)),U(e,"keydown",v)],o=!0)},p(m,_){t=m,_[0]&256&&l!==(l=(t[48].text||" ")+"")&&ae(n,l),t[51]>30?k?k.p(t,_):(k=hs(t),k.c(),k.m(r.parentNode,r)):k&&(k.d(1),k=null)},d(m){m&&(f(e),f(a),f(r)),k&&k.d(m),o=!1,St(d)}}}function ka(t){let e,l,n;return{c(){e=u("input"),this.h()},l(a){e=c(a,"INPUT",{type:!0,class:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","interval-input svelte-1h3ij0x"),e.autofocus=!0},m(a,r){H(a,e,r),At(e,t[5]),e.focus(),l||(n=[U(e,"input",t[31]),U(e,"blur",t[26]),U(e,"keydown",t[27])],l=!0)},p(a,r){r[0]&32&&e.value!==a[5]&&At(e,a[5])},d(a){a&&f(e),l=!1,St(n)}}}function hs(t){let e,l=t[56]+"",n;return{c(){e=u("span"),n=J(l),this.h()},l(a){e=c(a,"SPAN",{class:!0});var r=p(e);n=Y(r,l),r.forEach(f),this.h()},h(){i(e,"class","interval-duration svelte-1h3ij0x")},m(a,r){H(a,e,r),s(e,n)},p(a,r){r[0]&256&&l!==(l=a[56]+"")&&ae(n,l)},d(a){a&&f(e)}}}function vs(t){let e,l,n,a;function r(...h){return t[37](t[48],...h)}function o(...h){return t[38](t[48],...h)}function d(...h){return t[39](t[48],...h)}return{c(){e=u("div"),this.h()},l(h){e=c(h,"DIV",{class:!0,style:!0,title:!0,role:!0,tabindex:!0,"aria-valuenow":!0}),p(e).forEach(f),this.h()},h(){i(e,"class","boundary svelte-1h3ij0x"),Me(e,"left",t[52]+"px"),i(e,"title","Drag to move, right-click to remove"),i(e,"role","slider"),i(e,"tabindex","0"),i(e,"aria-valuenow",l=t[48].start)},m(h,v){H(h,e,v),n||(a=[U(e,"mousedown",r),U(e,"contextmenu",o),U(e,"keydown",d)],n=!0)},p(h,v){t=h,v[0]&256&&Me(e,"left",t[52]+"px"),v[0]&256&&l!==(l=t[48].start)&&i(e,"aria-valuenow",l)},d(h){h&&f(e),n=!1,St(a)}}}function ps(t,e){let l,n,a=e[51]>2&&ds(On(e));return{key:t,first:null,c(){l=vt(),a&&a.c(),n=vt(),this.h()},l(r){l=vt(),a&&a.l(r),n=vt(),this.h()},h(){this.first=l},m(r,o){H(r,l,o),a&&a.m(r,o),H(r,n,o)},p(r,o){e=r,e[51]>2?a?a.p(On(e),o):(a=ds(On(e)),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(r){r&&(f(l),f(n)),a&&a.d(r)}}}function ms(t){let e;return{c(){e=u("div"),this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0}),p(e).forEach(f),this.h()},h(){i(e,"class","hover-cursor svelte-1h3ij0x"),Me(e,"left",t[17](t[11])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&2048&&Me(e,"left",l[17](l[11])+"px")},d(l){l&&f(e)}}}function _s(t){let e;return{c(){e=u("div"),this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0}),p(e).forEach(f),this.h()},h(){i(e,"class","cursor svelte-1h3ij0x"),Me(e,"left",t[17](t[12])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&4096&&Me(e,"left",l[17](l[12])+"px")},d(l){l&&f(e)}}}function gs(t){let e,l,n,a,r="Remove boundary",o,d;return{c(){e=u("div"),l=b(),n=u("div"),a=u("button"),a.textContent=r,this.h()},l(h){e=c(h,"DIV",{class:!0}),p(e).forEach(f),l=g(h),n=c(h,"DIV",{class:!0,style:!0});var v=p(n);a=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-ypaiql"&&(a.textContent=r),v.forEach(f),this.h()},h(){i(e,"class","context-menu-backdrop svelte-1h3ij0x"),i(a,"class","context-menu-item svelte-1h3ij0x"),i(n,"class","context-menu svelte-1h3ij0x"),Me(n,"left",t[7].x+"px"),Me(n,"top",t[7].y+"px")},m(h,v){H(h,e,v),H(h,l,v),H(h,n,v),s(n,a),o||(d=[U(e,"click",t[15]),U(a,"click",t[16])],o=!0)},p(h,v){v[0]&128&&Me(n,"left",h[7].x+"px"),v[0]&128&&Me(n,"top",h[7].y+"px")},d(h){h&&(f(e),f(l),f(n)),o=!1,St(d)}}}function wa(t){let e,l,n,a,r,o,d=t[0].name+"",h,v,k,m=[],_=new Map,y,w=t[11]!==null&&t[17](t[11])>=ht&&t[17](t[11])<=t[9],B,D=t[17](t[12])>=ht&&t[17](t[12])<=t[9],N,S,C,I,E=Zl(t[8]);const L=M=>M[48].index;for(let M=0;M<E.length;M+=1){let O=fs(t,E,M),Q=L(O);_.set(Q,m[M]=ps(Q,O))}let V=w&&ms(t),R=D&&_s(t),j=t[7]&&gs(t);return{c(){e=u("div"),l=u("div"),n=b(),a=u("div"),r=b(),o=u("div"),h=J(d),v=b(),k=u("div");for(let M=0;M<m.length;M+=1)m[M].c();y=b(),V&&V.c(),B=b(),R&&R.c(),N=b(),j&&j.c(),S=vt(),this.h()},l(M){e=c(M,"DIV",{class:!0,role:!0,tabindex:!0});var O=p(e);l=c(O,"DIV",{class:!0,style:!0}),p(l).forEach(f),n=g(O),a=c(O,"DIV",{class:!0,style:!0}),p(a).forEach(f),r=g(O),o=c(O,"DIV",{class:!0});var Q=p(o);h=Y(Q,d),Q.forEach(f),v=g(O),k=c(O,"DIV",{class:!0,style:!0});var Ce=p(k);for(let _e=0;_e<m.length;_e+=1)m[_e].l(Ce);Ce.forEach(f),y=g(O),V&&V.l(O),B=g(O),R&&R.l(O),O.forEach(f),N=g(M),j&&j.l(M),S=vt(),this.h()},h(){i(l,"class","margin-area left svelte-1h3ij0x"),Me(l,"width",ht+"px"),i(a,"class","margin-area right svelte-1h3ij0x"),Me(a,"width",Vl+"px"),i(o,"class","tier-label svelte-1h3ij0x"),i(k,"class","intervals svelte-1h3ij0x"),Me(k,"left",ht+"px"),Me(k,"right",Vl+"px"),i(e,"class","tier-container svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]),cl(e,"dragging",t[6])},m(M,O){H(M,e,O),s(e,l),s(e,n),s(e,a),s(e,r),s(e,o),s(o,h),s(e,v),s(e,k);for(let Q=0;Q<m.length;Q+=1)m[Q]&&m[Q].m(k,null);s(e,y),V&&V.m(e,null),s(e,B),R&&R.m(e,null),t[40](e),H(M,N,O),j&&j.m(M,O),H(M,S,O),C||(I=[U(window,"keydown",t[30]),U(window,"mouseup",t[20]),U(e,"click",t[18]),U(e,"dblclick",t[24]),U(e,"mousemove",t[19]),U(e,"mouseup",t[20]),U(e,"mouseleave",t[21]),U(e,"keydown",t[41])],C=!0)},p(M,O){O[0]&1&&d!==(d=M[0].name+"")&&ae(h,d),O[0]&247621430&&(E=Zl(M[8]),m=xs(m,O,L,1,M,E,_,k,da,ps,null,fs)),O[0]&2560&&(w=M[11]!==null&&M[17](M[11])>=ht&&M[17](M[11])<=M[9]),w?V?V.p(M,O):(V=ms(M),V.c(),V.m(e,B)):V&&(V.d(1),V=null),O[0]&4608&&(D=M[17](M[12])>=ht&&M[17](M[12])<=M[9]),D?R?R.p(M,O):(R=_s(M),R.c(),R.m(e,null)):R&&(R.d(1),R=null),O[0]&4&&cl(e,"selected",M[2]),O[0]&64&&cl(e,"dragging",M[6]),M[7]?j?j.p(M,O):(j=gs(M),j.c(),j.m(S.parentNode,S)):j&&(j.d(1),j=null)},i:pt,o:pt,d(M){M&&(f(e),f(N),f(S));for(let O=0;O<m.length;O+=1)m[O].d();V&&V.d(),R&&R.d(),t[40](null),j&&j.d(M),C=!1,St(I)}}}const ht=45,Vl=45;function ya(t,e,l){let n,a,r,o,d,h,v;Ee(t,Yl,P=>l(29,o=P)),Ee(t,Ln,P=>l(10,d=P)),Ee(t,rn,P=>l(11,h=P)),Ee(t,jl,P=>l(12,v=P));let{tier:k}=e,{index:m}=e,{isSelected:_=!1}=e;Fs();let y,w=0,B,D=null,N="",S=!1,C=null,I=null;function E(P,q){P.preventDefault(),P.stopPropagation(),wl.set(m),Gs(),l(6,S=!0),C=q}function L(P,q){P.preventDefault(),P.stopPropagation(),l(7,I={x:P.clientX,y:P.clientY,intervalIndex:q})}function V(){l(7,I=null)}function R(){I&&(wl.set(m),qs(I.intervalIndex),l(7,I=null))}Vn(()=>{B=new ResizeObserver(P=>{const q=P[0].contentRect;l(28,w=q.width),q.height}),B.observe(y)}),Hn(()=>{B==null||B.disconnect()});function j(P){const{start:q,end:ne}=o;return ht+(P-q)/(ne-q)*n}function M(P){const{start:q,end:ne}=o;return q+(P-ht)/n*(ne-q)}function O(){wl.set(m)}function Q(P){const q=y.getBoundingClientRect(),ne=P.clientX-q.left;if((ne<ht||ne>w-Vl)&&(rn.set(null),!S))return;const $=M(ne);rn.set($),S&&C!==null&&Ws(C,$)}function Ce(){S&&(l(6,S=!1),C=null)}function _e(){rn.set(null),S&&(l(6,S=!1),C=null)}function xe(P,q){P.stopPropagation(),wl.set(m),Ln.set(q);const ne=k.intervals[q];ne&&(Jl.set({start:ne.start,end:ne.end}),jl.set(ne.start))}function Fe(P,q){P.stopPropagation();const ne=y.getBoundingClientRect(),$=P.clientX-ne.left;if($<ht||$>w-Vl)return;const te=M($);wl.set(m),ss(te)}function Re(P){const q=y.getBoundingClientRect(),ne=P.clientX-q.left;if(ne<ht||ne>w-Vl)return;const $=M(ne);wl.set(m),ss($)}function we(P){l(4,D=P),l(5,N=k.intervals[P].text)}function Be(){D!==null&&(Ks(m,D,N),l(4,D=null),l(5,N=""))}function ye(P){P.key==="Enter"?Be():P.key==="Escape"&&(l(4,D=null),l(5,N=""))}const Ie=P=>P.key==="Escape"&&I&&V();function Se(){N=this.value,l(5,N)}const X=P=>{Jl.set({start:P.start,end:P.end}),jl.set(P.start),we(P.index)},ve=(P,q)=>q.key==="Enter"&&we(P.index),ie=(P,q)=>xe(q,P.index),Ne=(P,q)=>Fe(q,P.index),Pe=(P,q)=>{q.key==="Enter"&&(wl.set(m),Ln.set(P.index))},je=(P,q)=>E(q,P.index),Te=(P,q)=>L(q,P.index),pe=(P,q)=>q.key==="Enter"&&we(P.index);function Ae(P){Ml[P?"unshift":"push"](()=>{y=P,l(3,y)})}const $e=P=>P.key==="Enter"&&O();return t.$$set=P=>{"tier"in P&&l(0,k=P.tier),"index"in P&&l(1,m=P.index),"isSelected"in P&&l(2,_=P.isSelected)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&(n=Math.max(0,w-ht-Vl)),t.$$.dirty[0]&268435456&&l(9,a=w-Vl),t.$$.dirty[0]&536870913&&l(8,r=(()=>{const{start:P,end:q}=o;return k.intervals.map((ne,$)=>({...ne,index:$})).filter(ne=>ne.end>P&&ne.start<q)})())},[k,m,_,y,D,N,S,I,r,a,d,h,v,E,L,V,R,j,O,Q,Ce,_e,xe,Fe,Re,we,Be,ye,w,o,Ie,Se,X,ve,ie,Ne,Pe,je,Te,pe,Ae,$e]}class Ca extends $l{constructor(e){super(),en(this,e,ya,wa,Ql,{tier:0,index:1,isSelected:2},null,[-1,-1])}}function bs(t){let e,l;return{c(){e=u("div"),l=J(t[0]),this.h()},l(n){e=c(n,"DIV",{class:!0});var a=p(e);l=Y(a,t[0]),a.forEach(f),this.h()},h(){i(e,"class","modal-header svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&1&&ae(l,n[0])},d(n){n&&f(e)}}}function ks(t){let e,l;return{c(){e=u("p"),l=J(t[2]),this.h()},l(n){e=c(n,"P",{class:!0});var a=p(e);l=Y(a,t[2]),a.forEach(f),this.h()},h(){i(e,"class","modal-message svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&4&&ae(l,n[2])},d(n){n&&f(e)}}}function ws(t){let e,l,n;return{c(){e=u("input"),this.h()},l(a){e=c(a,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","modal-input svelte-1vzci29"),i(e,"placeholder",t[3])},m(a,r){H(a,e,r),t[14](e),At(e,t[6]),l||(n=[U(e,"input",t[15]),U(e,"keydown",t[11])],l=!0)},p(a,r){r&8&&i(e,"placeholder",a[3]),r&64&&e.value!==a[6]&&At(e,a[6])},d(a){a&&f(e),t[14](null),l=!1,St(n)}}}function ys(t){let e,l,n,a;return{c(){e=u("button"),l=J(t[5]),this.h()},l(r){e=c(r,"BUTTON",{class:!0});var o=p(e);l=Y(o,t[5]),o.forEach(f),this.h()},h(){i(e,"class","modal-btn cancel svelte-1vzci29")},m(r,o){H(r,e,o),s(e,l),n||(a=U(e,"click",t[9]),n=!0)},p(r,o){o&32&&ae(l,r[5])},d(r){r&&f(e),n=!1,a()}}}function Ta(t){let e,l,n,a,r,o,d,h,v,k,m,_,y=t[0]&&bs(t),w=t[2]&&ks(t),B=t[1]==="prompt"&&ws(t),D=t[1]!=="alert"&&ys(t);return{c(){e=u("div"),l=u("div"),y&&y.c(),n=b(),a=u("div"),w&&w.c(),r=b(),B&&B.c(),o=b(),d=u("div"),D&&D.c(),h=b(),v=u("button"),k=J(t[4]),this.h()},l(N){e=c(N,"DIV",{class:!0,role:!0,"aria-modal":!0});var S=p(e);l=c(S,"DIV",{class:!0});var C=p(l);y&&y.l(C),n=g(C),a=c(C,"DIV",{class:!0});var I=p(a);w&&w.l(I),r=g(I),B&&B.l(I),I.forEach(f),o=g(C),d=c(C,"DIV",{class:!0});var E=p(d);D&&D.l(E),h=g(E),v=c(E,"BUTTON",{class:!0});var L=p(v);k=Y(L,t[4]),L.forEach(f),E.forEach(f),C.forEach(f),S.forEach(f),this.h()},h(){i(a,"class","modal-body svelte-1vzci29"),i(v,"class","modal-btn confirm svelte-1vzci29"),i(d,"class","modal-footer svelte-1vzci29"),i(l,"class","modal svelte-1vzci29"),i(e,"class","modal-backdrop svelte-1vzci29"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(N,S){H(N,e,S),s(e,l),y&&y.m(l,null),s(l,n),s(l,a),w&&w.m(a,null),s(a,r),B&&B.m(a,null),s(l,o),s(l,d),D&&D.m(d,null),s(d,h),s(d,v),s(v,k),m||(_=[U(window,"keydown",t[10]),U(v,"click",t[8]),U(e,"click",t[12])],m=!0)},p(N,[S]){N[0]?y?y.p(N,S):(y=bs(N),y.c(),y.m(l,n)):y&&(y.d(1),y=null),N[2]?w?w.p(N,S):(w=ks(N),w.c(),w.m(a,r)):w&&(w.d(1),w=null),N[1]==="prompt"?B?B.p(N,S):(B=ws(N),B.c(),B.m(a,null)):B&&(B.d(1),B=null),N[1]!=="alert"?D?D.p(N,S):(D=ys(N),D.c(),D.m(d,h)):D&&(D.d(1),D=null),S&16&&ae(k,N[4])},i:pt,o:pt,d(N){N&&f(e),y&&y.d(),w&&w.d(),B&&B.d(),D&&D.d(),m=!1,St(_)}}}function Ea(t,e,l){let{title:n=""}=e,{type:a="alert"}=e,{message:r=""}=e,{placeholder:o=""}=e,{initialValue:d=""}=e,{confirmText:h="OK"}=e,{cancelText:v="Cancel"}=e;const k=Fs();let m=d,_;Vn(()=>{a==="prompt"&&_&&(_.focus(),_.select())});function y(){a==="prompt"?k("confirm",m):k("confirm")}function w(){k("cancel")}function B(I){I.key==="Escape"?w():I.key==="Enter"&&a!=="prompt"&&y()}function D(I){I.key==="Enter"?y():I.key==="Escape"&&w()}function N(I){I.target===I.currentTarget&&w()}function S(I){Ml[I?"unshift":"push"](()=>{_=I,l(7,_)})}function C(){m=this.value,l(6,m)}return t.$$set=I=>{"title"in I&&l(0,n=I.title),"type"in I&&l(1,a=I.type),"message"in I&&l(2,r=I.message),"placeholder"in I&&l(3,o=I.placeholder),"initialValue"in I&&l(13,d=I.initialValue),"confirmText"in I&&l(4,h=I.confirmText),"cancelText"in I&&l(5,v=I.cancelText)},[n,a,r,o,h,v,m,_,y,w,B,D,N,d,S,C]}class on extends $l{constructor(e){super(),en(this,e,Ea,Ta,Ql,{title:0,type:1,message:2,placeholder:3,initialValue:13,confirmText:4,cancelText:5})}}function Cs(t,e,l){const n=t.slice();return n[18]=e[l],n[20]=l,n}function Ts(t,e){let l,n,a;return n=new Ca({props:{tier:e[18],index:e[20],isSelected:e[20]===e[4]}}),{key:t,first:null,c(){l=u("div"),Ot(n.$$.fragment),this.h()},l(r){l=c(r,"DIV",{class:!0});var o=p(l);zt(n.$$.fragment,o),o.forEach(f),this.h()},h(){i(l,"class","tier-row svelte-13sadlc"),this.first=l},m(r,o){H(r,l,o),Ut(n,l,null),a=!0},p(r,o){e=r;const d={};o&32&&(d.tier=e[18]),o&32&&(d.index=e[20]),o&48&&(d.isSelected=e[20]===e[4]),n.$set(d)},i(r){a||(he(n.$$.fragment,r),a=!0)},o(r){De(n.$$.fragment,r),a=!1},d(r){r&&f(l),Ft(n)}}}function Es(t){let e,l='No annotation tiers. Click "+ Tier" to add one, or import a TextGrid.';return{c(){e=u("div"),e.textContent=l,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-11870wl"&&(e.textContent=l),this.h()},h(){i(e,"class","empty-message svelte-13sadlc")},m(n,a){H(n,e,a)},d(n){n&&f(e)}}}function Ds(t){let e,l;return e=new on({props:{title:"Add Tier",type:"prompt",message:"Enter a name for the new tier:",placeholder:"Tier name",initialValue:`Tier ${t[5].length+1}`,confirmText:"Add"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&32&&(r.initialValue=`Tier ${n[5].length+1}`),e.$set(r)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Is(t){var n;let e,l;return e=new on({props:{title:"Rename Tier",type:"prompt",message:"Enter a new name for the tier:",placeholder:"Tier name",initialValue:((n=t[5][t[4]])==null?void 0:n.name)||"",confirmText:"Rename"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const o={};r&48&&(o.initialValue=((d=a[5][a[4]])==null?void 0:d.name)||""),e.$set(o)},i(a){l||(he(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ns(t){var n;let e,l;return e=new on({props:{title:"Remove Tier",type:"confirm",message:`Are you sure you want to remove tier "${(n=t[5][t[4]])==null?void 0:n.name}"?`,confirmText:"Remove"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const o={};r&48&&(o.message=`Are you sure you want to remove tier "${(d=a[5][a[4]])==null?void 0:d.name}"?`),e.$set(o)},i(a){l||(he(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ps(t){let e,l;return e=new on({props:{title:"Notice",type:"alert",message:t[2]}}),e.$on("confirm",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&4&&(r.message=n[2]),e.$set(r)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function As(t){let e,l;return e=new on({props:{title:"Export TextGrid",type:"prompt",message:"Enter a filename for the TextGrid:",placeholder:"filename.TextGrid",initialValue:t[3],confirmText:"Export"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&8&&(r.initialValue=n[3]),e.$set(r)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Da(t){let e,l,n,a="Import",r,o,d="Export",h,v,k,m,_="+ Tier",y,w,B="Rename",D,N,S="- Tier",C,I,E,L,V="Undo",R,j,M="Redo",O,Q,Ce=t[5].length+"",_e,xe,Fe=t[5].length!==1?"s":"",Re,we,Be,ye=[],Ie=new Map,Se,X,ve,ie,Ne,Pe,je,Te,pe,Ae,$e,P,q=Zl(t[5]);const ne=A=>A[20];for(let A=0;A<q.length;A+=1){let z=Cs(t,q,A),le=ne(z);Ie.set(le,ye[A]=Ts(le,z))}let $=t[5].length===0&&Es(),te=t[1]==="addTier"&&Ds(t),fe=t[1]==="renameTier"&&Is(t),oe=t[1]==="removeTier"&&Ns(t),ge=t[1]==="alert"&&Ps(t),re=t[1]==="exportTextGrid"&&As(t);return{c(){e=u("div"),l=u("div"),n=u("button"),n.textContent=a,r=b(),o=u("button"),o.textContent=d,h=b(),v=u("span"),k=b(),m=u("button"),m.textContent=_,y=b(),w=u("button"),w.textContent=B,D=b(),N=u("button"),N.textContent=S,C=b(),I=u("span"),E=b(),L=u("button"),L.textContent=V,R=b(),j=u("button"),j.textContent=M,O=b(),Q=u("span"),_e=J(Ce),xe=J(" tier"),Re=J(Fe),we=b(),Be=u("div");for(let A=0;A<ye.length;A+=1)ye[A].c();Se=b(),$&&$.c(),X=b(),ve=u("input"),ie=b(),te&&te.c(),Ne=b(),fe&&fe.c(),Pe=b(),oe&&oe.c(),je=b(),ge&&ge.c(),Te=b(),re&&re.c(),pe=vt(),this.h()},l(A){e=c(A,"DIV",{class:!0});var z=p(e);l=c(z,"DIV",{class:!0});var le=p(l);n=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(n)!=="svelte-1yaizdz"&&(n.textContent=a),r=g(le),o=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(o)!=="svelte-1aay3nq"&&(o.textContent=d),h=g(le),v=c(le,"SPAN",{class:!0}),p(v).forEach(f),k=g(le),m=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(m)!=="svelte-269lo2"&&(m.textContent=_),y=g(le),w=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(w)!=="svelte-6whcxg"&&(w.textContent=B),D=g(le),N=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(N)!=="svelte-1kr0wch"&&(N.textContent=S),C=g(le),I=c(le,"SPAN",{class:!0}),p(I).forEach(f),E=g(le),L=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(L)!=="svelte-wb3yww"&&(L.textContent=V),R=g(le),j=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(j)!=="svelte-2mf54l"&&(j.textContent=M),O=g(le),Q=c(le,"SPAN",{class:!0});var Le=p(Q);_e=Y(Le,Ce),xe=Y(Le," tier"),Re=Y(Le,Fe),Le.forEach(f),le.forEach(f),we=g(z),Be=c(z,"DIV",{class:!0});var et=p(Be);for(let it=0;it<ye.length;it+=1)ye[it].l(et);Se=g(et),$&&$.l(et),et.forEach(f),X=g(z),ve=c(z,"INPUT",{type:!0,accept:!0,style:!0}),z.forEach(f),ie=g(A),te&&te.l(A),Ne=g(A),fe&&fe.l(A),Pe=g(A),oe&&oe.l(A),je=g(A),ge&&ge.l(A),Te=g(A),re&&re.l(A),pe=vt(),this.h()},h(){i(n,"title","Import TextGrid"),i(n,"class","svelte-13sadlc"),i(o,"title","Export TextGrid"),i(o,"class","svelte-13sadlc"),i(v,"class","separator svelte-13sadlc"),i(m,"title","Add new tier"),i(m,"class","svelte-13sadlc"),i(w,"title","Rename selected tier"),i(w,"class","svelte-13sadlc"),i(N,"title","Remove selected tier"),i(N,"class","svelte-13sadlc"),i(I,"class","separator svelte-13sadlc"),i(L,"title","Undo (Ctrl+Z)"),i(L,"class","svelte-13sadlc"),i(j,"title","Redo (Ctrl+Y)"),i(j,"class","svelte-13sadlc"),i(Q,"class","tier-count svelte-13sadlc"),i(l,"class","annotation-toolbar svelte-13sadlc"),i(Be,"class","tiers-container svelte-13sadlc"),i(ve,"type","file"),i(ve,"accept",".TextGrid,.textgrid,.txt,text/plain"),Me(ve,"display","none"),i(e,"class","annotation-editor svelte-13sadlc")},m(A,z){H(A,e,z),s(e,l),s(l,n),s(l,r),s(l,o),s(l,h),s(l,v),s(l,k),s(l,m),s(l,y),s(l,w),s(l,D),s(l,N),s(l,C),s(l,I),s(l,E),s(l,L),s(l,R),s(l,j),s(l,O),s(l,Q),s(Q,_e),s(Q,xe),s(Q,Re),s(e,we),s(e,Be);for(let le=0;le<ye.length;le+=1)ye[le]&&ye[le].m(Be,null);s(Be,Se),$&&$.m(Be,null),s(e,X),s(e,ve),t[14](ve),H(A,ie,z),te&&te.m(A,z),H(A,Ne,z),fe&&fe.m(A,z),H(A,Pe,z),oe&&oe.m(A,z),H(A,je,z),ge&&ge.m(A,z),H(A,Te,z),re&&re.m(A,z),H(A,pe,z),Ae=!0,$e||(P=[U(n,"click",t[6]),U(o,"click",t[8]),U(m,"click",t[9]),U(w,"click",t[11]),U(N,"click",t[10]),U(L,"click",Us),U(j,"click",xn),U(ve,"change",t[7])],$e=!0)},p(A,[z]){(!Ae||z&32)&&Ce!==(Ce=A[5].length+"")&&ae(_e,Ce),(!Ae||z&32)&&Fe!==(Fe=A[5].length!==1?"s":"")&&ae(Re,Fe),z&48&&(q=Zl(A[5]),Sl(),ye=xs(ye,z,ne,1,A,q,Ie,Be,ha,Ts,Se,Cs),Bl()),A[5].length===0?$||($=Es(),$.c(),$.m(Be,null)):$&&($.d(1),$=null),A[1]==="addTier"?te?(te.p(A,z),z&2&&he(te,1)):(te=Ds(A),te.c(),he(te,1),te.m(Ne.parentNode,Ne)):te&&(Sl(),De(te,1,1,()=>{te=null}),Bl()),A[1]==="renameTier"?fe?(fe.p(A,z),z&2&&he(fe,1)):(fe=Is(A),fe.c(),he(fe,1),fe.m(Pe.parentNode,Pe)):fe&&(Sl(),De(fe,1,1,()=>{fe=null}),Bl()),A[1]==="removeTier"?oe?(oe.p(A,z),z&2&&he(oe,1)):(oe=Ns(A),oe.c(),he(oe,1),oe.m(je.parentNode,je)):oe&&(Sl(),De(oe,1,1,()=>{oe=null}),Bl()),A[1]==="alert"?ge?(ge.p(A,z),z&2&&he(ge,1)):(ge=Ps(A),ge.c(),he(ge,1),ge.m(Te.parentNode,Te)):ge&&(Sl(),De(ge,1,1,()=>{ge=null}),Bl()),A[1]==="exportTextGrid"?re?(re.p(A,z),z&2&&he(re,1)):(re=As(A),re.c(),he(re,1),re.m(pe.parentNode,pe)):re&&(Sl(),De(re,1,1,()=>{re=null}),Bl())},i(A){if(!Ae){for(let z=0;z<q.length;z+=1)he(ye[z]);he(te),he(fe),he(oe),he(ge),he(re),Ae=!0}},o(A){for(let z=0;z<ye.length;z+=1)De(ye[z]);De(te),De(fe),De(oe),De(ge),De(re),Ae=!1},d(A){A&&(f(e),f(ie),f(Ne),f(Pe),f(je),f(Te),f(pe));for(let z=0;z<ye.length;z+=1)ye[z].d();$&&$.d(),t[14](null),te&&te.d(A),fe&&fe.d(A),oe&&oe.d(A),ge&&ge.d(A),re&&re.d(A),$e=!1,St(P)}}}function Ia(t,e,l){let n,a,r;Ee(t,wl,E=>l(4,n=E)),Ee(t,Bn,E=>l(5,a=E)),Ee(t,Sn,E=>l(15,r=E));let o,d=null,h="",v="annotations.TextGrid";Vn(()=>{a.length===0&&Xs()});function k(E){l(2,h=E),l(1,d="alert")}function m(){o.click()}async function _(E){var R;const L=E.target,V=(R=L.files)==null?void 0:R[0];if(V){try{const j=await V.text();Ys(j)}catch(j){console.error("Failed to load TextGrid:",j),k("Failed to parse TextGrid file: "+(j instanceof Error?j.message:String(j)))}L.value=""}}async function y(){if(r){const E=r.replace(/\.[^/.]+$/,"");l(3,v=E+".TextGrid")}else l(3,v="annotations.TextGrid");if("showSaveFilePicker"in window)try{const E=as(),V=await(await window.showSaveFilePicker({suggestedName:v,types:[{description:"Praat TextGrid",accept:{"text/plain":[".TextGrid"]}}]})).createWritable();await V.write(E),await V.close();return}catch(E){if(E.name==="AbortError")return}l(1,d="exportTextGrid")}function w(E){const L=as(),V=new Blob([L],{type:"text/plain"}),R=URL.createObjectURL(V),j=document.createElement("a");j.href=R,j.download=E.endsWith(".TextGrid")?E:E+".TextGrid",j.click(),URL.revokeObjectURL(R)}function B(){l(1,d="addTier")}function D(){if(a.length<=1){k("Cannot remove the last tier");return}l(1,d="removeTier")}function N(){l(1,d="renameTier")}function S(E){var V;const L=d;if(l(1,d=null),L==="addTier"&&typeof E.detail=="string"&&E.detail)Js(E.detail);else if(L==="renameTier"&&typeof E.detail=="string"&&E.detail){const R=((V=a[n])==null?void 0:V.name)||"";E.detail!==R&&Zs(n,E.detail)}else L==="removeTier"?Qs(n):L==="exportTextGrid"&&typeof E.detail=="string"&&E.detail&&w(E.detail)}function C(){l(1,d=null)}function I(E){Ml[E?"unshift":"push"](()=>{o=E,l(0,o)})}return[o,d,h,v,n,a,m,_,y,B,D,N,S,C,I]}class Na extends $l{constructor(e){super(),en(this,e,Ia,Da,Ql,{})}}function Ss(t,e,l){const n=t.slice();return n[21]=e[l],n}function Bs(t){let e,l,n="Annotation",a,r=Zl(t[1]),o=[];for(let d=0;d<r.length;d+=1)o[d]=Vs(Ss(t,r,d));return{c(){e=u("div"),l=u("div"),l.textContent=n,a=b();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=c(d,"DIV",{class:!0});var h=p(e);l=c(h,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-16eifwe"&&(l.textContent=n),a=g(h);for(let v=0;v<o.length;v+=1)o[v].l(h);h.forEach(f),this.h()},h(){i(l,"class","section-title svelte-k4aoyj"),i(e,"class","section svelte-k4aoyj")},m(d,h){H(d,e,h),s(e,l),s(e,a);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(e,null)},p(d,h){if(h&2){r=Zl(d[1]);let v;for(v=0;v<r.length;v+=1){const k=Ss(d,r,v);o[v]?o[v].p(k,h):(o[v]=Vs(k),o[v].c(),o[v].m(e,null))}for(;v<o.length;v+=1)o[v].d(1);o.length=r.length}},d(d){d&&f(e),Hs(o,d)}}}function Vs(t){let e,l,n=t[21].tierName+"",a,r,o,d=t[21].text+"",h,v;return{c(){e=u("div"),l=u("span"),a=J(n),r=b(),o=u("span"),h=J(d),v=b(),this.h()},l(k){e=c(k,"DIV",{class:!0});var m=p(e);l=c(m,"SPAN",{class:!0});var _=p(l);a=Y(_,n),_.forEach(f),r=g(m),o=c(m,"SPAN",{class:!0});var y=p(o);h=Y(y,d),y.forEach(f),v=g(m),m.forEach(f),this.h()},h(){i(l,"class","tier-name svelte-k4aoyj"),i(o,"class","interval-text svelte-k4aoyj"),i(e,"class","annotation-row svelte-k4aoyj")},m(k,m){H(k,e,m),s(e,l),s(l,a),s(e,r),s(e,o),s(o,h),s(e,v)},p(k,m){m&2&&n!==(n=k[21].tierName+"")&&ae(a,n),m&2&&d!==(d=k[21].text+"")&&ae(h,d)},d(k){k&&f(e)}}}function Pa(t){let e,l,n,a=t[0].toFixed(3)+"",r,o,d,h,v,k="Pitch & Voice",m,_,y,w,B="F0",D,N,S=An(t[15])+"",C,I,E,L,V="Int",R,j,M=Xl(t[14])+"",O,Q,Ce,_e,xe="HNR",Fe,Re,we=Xl(t[5])+"",Be,ye,Ie,Se,X="Formants",ve,ie,Ne,Pe='<th class="svelte-k4aoyj"></th> <th class="svelte-k4aoyj">Freq</th> <th class="svelte-k4aoyj">BW</th>',je,Te,pe,Ae="F1",$e,P,q=Qe(t[13])+"",ne,$,te,fe=Qe(t[9])+"",oe,ge,re,A,z="F2",le,Le,et=Qe(t[12])+"",it,tt,He,Gt=Qe(t[8])+"",rt,T,K,G,W="F3",de,se,ue=Qe(t[11])+"",ce,Ue,be,Ve=Qe(t[7])+"",Ge,Ll,mt,_t,Rl="F4",gt,lt,ul=Qe(t[10])+"",Bt,Fl,nl,nt=Qe(t[6])+"",Il,Nl,bt,kt,Ul="Spectral",Vt,Oe,qt,Wt,st="CoG",wt,fl,at=An(t[4])+"",Pl,yt,Kt,Xt,Yt="Tilt",Jt,dl,hl=t[3]!==null?`${t[3].toFixed(1)} dB/oct`:"—",qe,Ct,Zt,We,tn="A1-P0",Tt,vl,pl=Xl(t[2])+"",ot,Qt,ze=t[1].length>0&&Bs(t);return{c(){e=u("div"),l=u("div"),n=u("span"),r=J(a),o=J("s"),d=b(),h=u("div"),v=u("div"),v.textContent=k,m=b(),_=u("div"),y=u("div"),w=u("span"),w.textContent=B,D=b(),N=u("span"),C=J(S),I=b(),E=u("div"),L=u("span"),L.textContent=V,R=b(),j=u("span"),O=J(M),Q=b(),Ce=u("div"),_e=u("span"),_e.textContent=xe,Fe=b(),Re=u("span"),Be=J(we),ye=b(),Ie=u("div"),Se=u("div"),Se.textContent=X,ve=b(),ie=u("table"),Ne=u("tr"),Ne.innerHTML=Pe,je=b(),Te=u("tr"),pe=u("td"),pe.textContent=Ae,$e=b(),P=u("td"),ne=J(q),$=b(),te=u("td"),oe=J(fe),ge=b(),re=u("tr"),A=u("td"),A.textContent=z,le=b(),Le=u("td"),it=J(et),tt=b(),He=u("td"),rt=J(Gt),T=b(),K=u("tr"),G=u("td"),G.textContent=W,de=b(),se=u("td"),ce=J(ue),Ue=b(),be=u("td"),Ge=J(Ve),Ll=b(),mt=u("tr"),_t=u("td"),_t.textContent=Rl,gt=b(),lt=u("td"),Bt=J(ul),Fl=b(),nl=u("td"),Il=J(nt),Nl=b(),bt=u("div"),kt=u("div"),kt.textContent=Ul,Vt=b(),Oe=u("div"),qt=u("div"),Wt=u("span"),Wt.textContent=st,wt=b(),fl=u("span"),Pl=J(at),yt=b(),Kt=u("div"),Xt=u("span"),Xt.textContent=Yt,Jt=b(),dl=u("span"),qe=J(hl),Ct=b(),Zt=u("div"),We=u("span"),We.textContent=tn,Tt=b(),vl=u("span"),ot=J(pl),Qt=b(),ze&&ze.c(),this.h()},l(ke){e=c(ke,"DIV",{class:!0});var ee=p(e);l=c(ee,"DIV",{class:!0});var Mt=p(l);n=c(Mt,"SPAN",{class:!0});var zl=p(n);r=Y(zl,a),o=Y(zl,"s"),zl.forEach(f),Mt.forEach(f),d=g(ee),h=c(ee,"DIV",{class:!0});var ct=p(h);v=c(ct,"DIV",{class:!0,"data-svelte-h":!0}),x(v)!=="svelte-d0x3ep"&&(v.textContent=k),m=g(ct),_=c(ct,"DIV",{class:!0});var ml=p(_);y=c(ml,"DIV",{class:!0});var ut=p(y);w=c(ut,"SPAN",{class:!0,"data-svelte-h":!0}),x(w)!=="svelte-1cn36l0"&&(w.textContent=B),D=g(ut),N=c(ut,"SPAN",{class:!0});var ln=p(N);C=Y(ln,S),ln.forEach(f),ut.forEach(f),I=g(ml),E=c(ml,"DIV",{class:!0});var yl=p(E);L=c(yl,"SPAN",{class:!0,"data-svelte-h":!0}),x(L)!=="svelte-1kbwfyu"&&(L.textContent=V),R=g(yl),j=c(yl,"SPAN",{class:!0});var $t=p(j);O=Y($t,M),$t.forEach(f),yl.forEach(f),Q=g(ml),Ce=c(ml,"DIV",{class:!0});var Ke=p(Ce);_e=c(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),x(_e)!=="svelte-1wxjkk8"&&(_e.textContent=xe),Fe=g(Ke),Re=c(Ke,"SPAN",{class:!0});var _l=p(Re);Be=Y(_l,we),_l.forEach(f),Ke.forEach(f),ml.forEach(f),ct.forEach(f),ye=g(ee),Ie=c(ee,"DIV",{class:!0});var jt=p(Ie);Se=c(jt,"DIV",{class:!0,"data-svelte-h":!0}),x(Se)!=="svelte-sqr9el"&&(Se.textContent=X),ve=g(jt),ie=c(jt,"TABLE",{class:!0});var ft=p(ie);Ne=c(ft,"TR",{"data-svelte-h":!0}),x(Ne)!=="svelte-316y0v"&&(Ne.innerHTML=Pe),je=g(ft),Te=c(ft,"TR",{});var Et=p(Te);pe=c(Et,"TD",{class:!0,"data-svelte-h":!0}),x(pe)!=="svelte-1iujy6z"&&(pe.textContent=Ae),$e=g(Et),P=c(Et,"TD",{class:!0});var el=p(P);ne=Y(el,q),el.forEach(f),$=g(Et),te=c(Et,"TD",{class:!0});var Ol=p(te);oe=Y(Ol,fe),Ol.forEach(f),Et.forEach(f),ge=g(ft),re=c(ft,"TR",{});var Dt=p(re);A=c(Dt,"TD",{class:!0,"data-svelte-h":!0}),x(A)!=="svelte-kfs2py"&&(A.textContent=z),le=g(Dt),Le=c(Dt,"TD",{class:!0});var sl=p(Le);it=Y(sl,et),sl.forEach(f),tt=g(Dt),He=c(Dt,"TD",{class:!0});var xl=p(He);rt=Y(xl,Gt),xl.forEach(f),Dt.forEach(f),T=g(ft),K=c(ft,"TR",{});var It=p(K);G=c(It,"TD",{class:!0,"data-svelte-h":!0}),x(G)!=="svelte-h8k9fd"&&(G.textContent=W),de=g(It),se=c(It,"TD",{class:!0});var al=p(se);ce=Y(al,ue),al.forEach(f),Ue=g(It),be=c(It,"TD",{class:!0});var Hl=p(be);Ge=Y(Hl,Ve),Hl.forEach(f),It.forEach(f),Ll=g(ft),mt=c(ft,"TR",{});var dt=p(mt);_t=c(dt,"TD",{class:!0,"data-svelte-h":!0}),x(_t)!=="svelte-zz0m8k"&&(_t.textContent=Rl),gt=g(dt),lt=c(dt,"TD",{class:!0});var Gl=p(lt);Bt=Y(Gl,ul),Gl.forEach(f),Fl=g(dt),nl=c(dt,"TD",{class:!0});var tl=p(nl);Il=Y(tl,nt),tl.forEach(f),dt.forEach(f),ft.forEach(f),jt.forEach(f),Nl=g(ee),bt=c(ee,"DIV",{class:!0});var Nt=p(bt);kt=c(Nt,"DIV",{class:!0,"data-svelte-h":!0}),x(kt)!=="svelte-19lj3il"&&(kt.textContent=Ul),Vt=g(Nt),Oe=c(Nt,"DIV",{class:!0});var il=p(Oe);qt=c(il,"DIV",{class:!0});var rl=p(qt);Wt=c(rl,"SPAN",{class:!0,"data-svelte-h":!0}),x(Wt)!=="svelte-m4uzze"&&(Wt.textContent=st),wt=g(rl),fl=c(rl,"SPAN",{class:!0});var Al=p(fl);Pl=Y(Al,at),Al.forEach(f),rl.forEach(f),yt=g(il),Kt=c(il,"DIV",{class:!0});var Cl=p(Kt);Xt=c(Cl,"SPAN",{class:!0,"data-svelte-h":!0}),x(Xt)!=="svelte-124pemq"&&(Xt.textContent=Yt),Jt=g(Cl),dl=c(Cl,"SPAN",{class:!0});var Tl=p(dl);qe=Y(Tl,hl),Tl.forEach(f),Cl.forEach(f),Ct=g(il),Zt=c(il,"DIV",{class:!0});var gl=p(Zt);We=c(gl,"SPAN",{class:!0,"data-svelte-h":!0}),x(We)!=="svelte-hotqe4"&&(We.textContent=tn),Tt=g(gl),vl=c(gl,"SPAN",{class:!0});var ql=p(vl);ot=Y(ql,pl),ql.forEach(f),gl.forEach(f),il.forEach(f),Nt.forEach(f),Qt=g(ee),ze&&ze.l(ee),ee.forEach(f),this.h()},h(){i(n,"class","time-label svelte-k4aoyj"),i(l,"class","panel-header svelte-k4aoyj"),i(v,"class","section-title svelte-k4aoyj"),i(w,"class","label pitch-label svelte-k4aoyj"),i(N,"class","value svelte-k4aoyj"),i(y,"class","value-row svelte-k4aoyj"),i(L,"class","label intensity-label svelte-k4aoyj"),i(j,"class","value svelte-k4aoyj"),i(E,"class","value-row svelte-k4aoyj"),i(_e,"class","label hnr-label svelte-k4aoyj"),i(Re,"class","value svelte-k4aoyj"),i(Ce,"class","value-row svelte-k4aoyj"),i(_,"class","values-grid svelte-k4aoyj"),i(h,"class","section svelte-k4aoyj"),i(Se,"class","section-title svelte-k4aoyj"),i(pe,"class","label f-label svelte-k4aoyj"),i(P,"class","value svelte-k4aoyj"),i(te,"class","value bw svelte-k4aoyj"),i(A,"class","label f-label svelte-k4aoyj"),i(Le,"class","value svelte-k4aoyj"),i(He,"class","value bw svelte-k4aoyj"),i(G,"class","label f-label svelte-k4aoyj"),i(se,"class","value svelte-k4aoyj"),i(be,"class","value bw svelte-k4aoyj"),i(_t,"class","label f-label svelte-k4aoyj"),i(lt,"class","value svelte-k4aoyj"),i(nl,"class","value bw svelte-k4aoyj"),i(ie,"class","formant-table svelte-k4aoyj"),i(Ie,"class","section svelte-k4aoyj"),i(kt,"class","section-title svelte-k4aoyj"),i(Wt,"class","label cog-label svelte-k4aoyj"),i(fl,"class","value svelte-k4aoyj"),i(qt,"class","value-row svelte-k4aoyj"),i(Xt,"class","label tilt-label svelte-k4aoyj"),i(dl,"class","value svelte-k4aoyj"),i(Kt,"class","value-row svelte-k4aoyj"),i(We,"class","label nasal-label svelte-k4aoyj"),i(vl,"class","value svelte-k4aoyj"),i(Zt,"class","value-row svelte-k4aoyj"),i(Oe,"class","values-grid svelte-k4aoyj"),i(bt,"class","section svelte-k4aoyj"),i(e,"class","values-panel svelte-k4aoyj")},m(ke,ee){H(ke,e,ee),s(e,l),s(l,n),s(n,r),s(n,o),s(e,d),s(e,h),s(h,v),s(h,m),s(h,_),s(_,y),s(y,w),s(y,D),s(y,N),s(N,C),s(_,I),s(_,E),s(E,L),s(E,R),s(E,j),s(j,O),s(_,Q),s(_,Ce),s(Ce,_e),s(Ce,Fe),s(Ce,Re),s(Re,Be),s(e,ye),s(e,Ie),s(Ie,Se),s(Ie,ve),s(Ie,ie),s(ie,Ne),s(ie,je),s(ie,Te),s(Te,pe),s(Te,$e),s(Te,P),s(P,ne),s(Te,$),s(Te,te),s(te,oe),s(ie,ge),s(ie,re),s(re,A),s(re,le),s(re,Le),s(Le,it),s(re,tt),s(re,He),s(He,rt),s(ie,T),s(ie,K),s(K,G),s(K,de),s(K,se),s(se,ce),s(K,Ue),s(K,be),s(be,Ge),s(ie,Ll),s(ie,mt),s(mt,_t),s(mt,gt),s(mt,lt),s(lt,Bt),s(mt,Fl),s(mt,nl),s(nl,Il),s(e,Nl),s(e,bt),s(bt,kt),s(bt,Vt),s(bt,Oe),s(Oe,qt),s(qt,Wt),s(qt,wt),s(qt,fl),s(fl,Pl),s(Oe,yt),s(Oe,Kt),s(Kt,Xt),s(Kt,Jt),s(Kt,dl),s(dl,qe),s(Oe,Ct),s(Oe,Zt),s(Zt,We),s(Zt,Tt),s(Zt,vl),s(vl,ot),s(e,Qt),ze&&ze.m(e,null)},p(ke,[ee]){ee&1&&a!==(a=ke[0].toFixed(3)+"")&&ae(r,a),ee&32768&&S!==(S=An(ke[15])+"")&&ae(C,S),ee&16384&&M!==(M=Xl(ke[14])+"")&&ae(O,M),ee&32&&we!==(we=Xl(ke[5])+"")&&ae(Be,we),ee&8192&&q!==(q=Qe(ke[13])+"")&&ae(ne,q),ee&512&&fe!==(fe=Qe(ke[9])+"")&&ae(oe,fe),ee&4096&&et!==(et=Qe(ke[12])+"")&&ae(it,et),ee&256&&Gt!==(Gt=Qe(ke[8])+"")&&ae(rt,Gt),ee&2048&&ue!==(ue=Qe(ke[11])+"")&&ae(ce,ue),ee&128&&Ve!==(Ve=Qe(ke[7])+"")&&ae(Ge,Ve),ee&1024&&ul!==(ul=Qe(ke[10])+"")&&ae(Bt,ul),ee&64&&nt!==(nt=Qe(ke[6])+"")&&ae(Il,nt),ee&16&&at!==(at=An(ke[4])+"")&&ae(Pl,at),ee&8&&hl!==(hl=ke[3]!==null?`${ke[3].toFixed(1)} dB/oct`:"—")&&ae(qe,hl),ee&4&&pl!==(pl=Xl(ke[2])+"")&&ae(ot,pl),ke[1].length>0?ze?ze.p(ke,ee):(ze=Bs(ke),ze.c(),ze.m(e,null)):ze&&(ze.d(1),ze=null)},i:pt,o:pt,d(ke){ke&&f(e),ze&&ze.d()}}}function Pt(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const r=Math.floor((n+a)/2);e[r]<l?n=r+1:a=r}return n>0&&Math.abs(e[n-1]-l)<Math.abs(e[n]-l)&&(n=n-1),t[n]}function Aa(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const _=Math.floor((n+a+1)/2);e[_]<=l?n=_:a=_-1}const r=n,o=e[r],d=t[r];if(r>=e.length-1)return d;const h=e[r+1],v=t[r+1],k=d!==null&&d>0,m=v!==null&&v>0;if(k&&m){const _=(l-o)/(h-o);return Math.exp(Math.log(d)+_*(Math.log(v)-Math.log(d)))}else return k?d:m?v:null}function Qe(t){return t===null?"—":`${t.toFixed(0)}`}function An(t){return t===null?"—":`${t.toFixed(1)} Hz`}function Xl(t){return t===null?"—":`${t.toFixed(1)} dB`}function Sa(t,e,l){let n,a,r,o,d,h,v,k,m,_,y,w,B,D,N,S,C,I,E,L;Ee(t,$s,R=>l(16,C=R)),Ee(t,Bn,R=>l(19,I=R)),Ee(t,jl,R=>l(17,E=R)),Ee(t,rn,R=>l(18,L=R));function V(R){if(!I||I.length===0)return[];const j=[];for(const M of I){const O=M.intervals.find(Q=>R>=Q.start&&R<Q.end);O&&O.text&&j.push({tierName:M.name,text:O.text})}return j}return t.$$.update=()=>{t.$$.dirty&393216&&l(0,n=L!==null?L:E),t.$$.dirty&65537&&l(15,a=C?Aa(C.pitch,C.times,n):null),t.$$.dirty&65537&&l(14,r=C?Pt(C.intensity,C.times,n):null),t.$$.dirty&65537&&l(13,o=C?Pt(C.formants.f1,C.times,n):null),t.$$.dirty&65537&&l(12,d=C?Pt(C.formants.f2,C.times,n):null),t.$$.dirty&65537&&l(11,h=C?Pt(C.formants.f3,C.times,n):null),t.$$.dirty&65537&&l(10,v=C?Pt(C.formants.f4,C.times,n):null),t.$$.dirty&65537&&l(9,k=C?Pt(C.formants.b1,C.times,n):null),t.$$.dirty&65537&&l(8,m=C?Pt(C.formants.b2,C.times,n):null),t.$$.dirty&65537&&l(7,_=C?Pt(C.formants.b3,C.times,n):null),t.$$.dirty&65537&&l(6,y=C?Pt(C.formants.b4,C.times,n):null),t.$$.dirty&65537&&l(5,w=C?Pt(C.harmonicity,C.times,n):null),t.$$.dirty&65537&&l(4,B=C!=null&&C.cog?Pt(C.cog,C.times,n):null),t.$$.dirty&65537&&l(3,D=C!=null&&C.spectralTilt?Pt(C.spectralTilt,C.times,n):null),t.$$.dirty&65537&&l(2,N=C!=null&&C.a1p0?Pt(C.a1p0,C.times,n):null),t.$$.dirty&1&&l(1,S=V(n))},[n,S,N,D,B,w,y,_,m,k,v,h,d,o,r,a,C,E,L]}class Ba extends $l{constructor(e){super(),en(this,e,Sa,Pa,Ql,{})}}function Va(t){let e,l,n,a,r='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',o,d,h,v,k='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><rect x="6" y="6" width="12" height="12"></rect></svg>',m,_,y,w='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>',B,D,N,S,C,I,E=ol(t[20])+"",L,V,R=ol(t[0].length/t[19])+"",j,M,O,Q,Ce,_e,xe,Fe,Re,we,Be='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.03 7.03 0 00-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.49.49 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.01-1.58zM12 15.6a3.6 3.6 0 110-7.2 3.6 3.6 0 010 7.2z"></path></svg>',ye,Ie,Se,X,ve,ie,Ne,Pe,je="Pitch",Te,pe,Ae,$e,P,q="Formants",ne,$,te,fe,oe,ge="Intensity",re,A,z,le,Le,et="HNR",it,tt,He,Gt,rt,T="CoG",K,G,W,de,se,ue="Sp.Tilt",ce,Ue,be,Ve,Ge,Ll="A1-P0",mt,_t,Rl,gt,lt,ul,Bt,Fl="Points",nl,nt,Il="Import",Nl,bt,kt,Ul,Vt,Oe,qt="Voice:",Wt,st,wt,fl="Female",at,Pl="Male",yt,Kt="Child",Xt,Yt,Jt,dl="Max Freq:",hl,qe,Ct,Zt="5 kHz",We,tn="7.5 kHz",Tt,vl="10 kHz",pl,ot,Qt,ze="Backend:",ke,ee,Mt,zl="praatfan (local)",ct,ml="praatfan (remote)",ut,ln="praatfan-gpl (remote)",yl,$t,Ke,_l,jt,ft,Et,el,Ol,Dt,sl,xl,It,al,Hl,dt,Gl,tl,Nt,il,rl=ol(t[21].start)+"",Al,Cl,Tl=ol(t[21].end)+"",gl,ql,Wl,Gn="Space: play | Tab: play visible | Arrows: navigate/zoom",Lt,Mn,qn;function Wn(F,Z){return F[24]?Ra:La}let cn=Wn(t),bl=cn(t);function Kn(F,Z){return F[6]?Ua:Fa}let un=Kn(t),ll=un(t),Ye=t[25]&&Ms(t),Je=t[26]&&js(t);function Xn(F,Z){return F[3]?Oa:za}let fn=Xn(t),kl=fn(t),Ze=t[22].length>0&&Ls(t);return jt=new ta({}),el=new la({props:{showPitch:t[8],showFormants:t[9],showIntensity:t[10],showHNR:t[11],showCoG:t[12],showSpectralTilt:t[13],showA1P0:t[14],showDataPoints:t[15],maxFreq:t[16]}}),sl=new na({}),al=new Na({}),dt=new Ba({}),{c(){e=u("div"),l=u("header"),n=u("div"),a=u("button"),a.innerHTML=r,o=b(),d=u("button"),bl.c(),h=b(),v=u("button"),v.innerHTML=k,m=b(),ll.c(),_=b(),y=u("button"),y.innerHTML=w,B=b(),D=u("span"),N=J(t[18]),S=b(),C=u("div"),I=u("span"),L=J(E),V=J(" / "),j=J(R),M=b(),Ye&&Ye.c(),O=b(),Q=u("div"),Je&&Je.c(),Ce=b(),_e=u("span"),xe=J(t[19]),Fe=J(" Hz"),Re=b(),we=u("button"),we.innerHTML=Be,ye=b(),Ie=u("button"),kl.c(),Se=b(),X=u("div"),ve=u("label"),ie=u("input"),Ne=b(),Pe=u("span"),Pe.textContent=je,Te=b(),pe=u("label"),Ae=u("input"),$e=b(),P=u("span"),P.textContent=q,ne=b(),$=u("label"),te=u("input"),fe=b(),oe=u("span"),oe.textContent=ge,re=b(),A=u("label"),z=u("input"),le=b(),Le=u("span"),Le.textContent=et,it=b(),tt=u("label"),He=u("input"),Gt=b(),rt=u("span"),rt.textContent=T,K=b(),G=u("label"),W=u("input"),de=b(),se=u("span"),se.textContent=ue,ce=b(),Ue=u("label"),be=u("input"),Ve=b(),Ge=u("span"),Ge.textContent=Ll,mt=b(),_t=u("span"),Rl=b(),gt=u("label"),lt=u("input"),ul=b(),Bt=u("span"),Bt.textContent=Fl,nl=b(),nt=u("button"),nt.textContent=Il,Nl=b(),Ze&&Ze.c(),bt=b(),kt=u("span"),Ul=b(),Vt=u("label"),Oe=u("span"),Oe.textContent=qt,Wt=b(),st=u("select"),wt=u("option"),wt.textContent=fl,at=u("option"),at.textContent=Pl,yt=u("option"),yt.textContent=Kt,Xt=b(),Yt=u("label"),Jt=u("span"),Jt.textContent=dl,hl=b(),qe=u("select"),Ct=u("option"),Ct.textContent=Zt,We=u("option"),We.textContent=tn,Tt=u("option"),Tt.textContent=vl,pl=b(),ot=u("label"),Qt=u("span"),Qt.textContent=ze,ke=b(),ee=u("select"),Mt=u("option"),Mt.textContent=zl,ct=u("option"),ct.textContent=ml,ut=u("option"),ut.textContent=ln,yl=b(),$t=u("div"),Ke=u("div"),_l=u("div"),Ot(jt.$$.fragment),ft=b(),Et=u("div"),Ot(el.$$.fragment),Ol=b(),Dt=u("div"),Ot(sl.$$.fragment),xl=b(),It=u("div"),Ot(al.$$.fragment),Hl=b(),Ot(dt.$$.fragment),Gl=b(),tl=u("footer"),Nt=u("span"),il=J("View: "),Al=J(rl),Cl=J(" - "),gl=J(Tl),ql=b(),Wl=u("span"),Wl.textContent=Gn,this.h()},l(F){e=c(F,"DIV",{class:!0});var Z=p(e);l=c(Z,"HEADER",{class:!0});var Xe=p(l);n=c(Xe,"DIV",{class:!0});var Rt=p(n);a=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(a)!=="svelte-1lvwg3g"&&(a.innerHTML=r),o=g(Rt),d=c(Rt,"BUTTON",{class:!0,title:!0});var Yn=p(d);bl.l(Yn),Yn.forEach(f),h=g(Rt),v=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(v)!=="svelte-1ictkst"&&(v.innerHTML=k),m=g(Rt),ll.l(Rt),_=g(Rt),y=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(y)!=="svelte-u6ddbp"&&(y.innerHTML=w),B=g(Rt),D=c(Rt,"SPAN",{class:!0});var Jn=p(D);N=Y(Jn,t[18]),Jn.forEach(f),Rt.forEach(f),S=g(Xe),C=c(Xe,"DIV",{class:!0});var dn=p(C);I=c(dn,"SPAN",{class:!0});var hn=p(I);L=Y(hn,E),V=Y(hn," / "),j=Y(hn,R),hn.forEach(f),M=g(dn),Ye&&Ye.l(dn),dn.forEach(f),O=g(Xe),Q=c(Xe,"DIV",{class:!0});var El=p(Q);Je&&Je.l(El),Ce=g(El),_e=c(El,"SPAN",{class:!0});var jn=p(_e);xe=Y(jn,t[19]),Fe=Y(jn," Hz"),jn.forEach(f),Re=g(El),we=c(El,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(we)!=="svelte-px3wau"&&(we.innerHTML=Be),ye=g(El),Ie=c(El,"BUTTON",{class:!0,title:!0});var Zn=p(Ie);kl.l(Zn),Zn.forEach(f),El.forEach(f),Xe.forEach(f),Se=g(Z),X=c(Z,"DIV",{class:!0});var me=p(X);ve=c(me,"LABEL",{class:!0,title:!0});var vn=p(ve);ie=c(vn,"INPUT",{type:!0,class:!0}),Ne=g(vn),Pe=c(vn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Pe)!=="svelte-1k01z98"&&(Pe.textContent=je),vn.forEach(f),Te=g(me),pe=c(me,"LABEL",{class:!0,title:!0});var pn=p(pe);Ae=c(pn,"INPUT",{type:!0,class:!0}),$e=g(pn),P=c(pn,"SPAN",{class:!0,"data-svelte-h":!0}),x(P)!=="svelte-6cthmg"&&(P.textContent=q),pn.forEach(f),ne=g(me),$=c(me,"LABEL",{class:!0,title:!0});var mn=p($);te=c(mn,"INPUT",{type:!0,class:!0}),fe=g(mn),oe=c(mn,"SPAN",{class:!0,"data-svelte-h":!0}),x(oe)!=="svelte-1el2ji2"&&(oe.textContent=ge),mn.forEach(f),re=g(me),A=c(me,"LABEL",{class:!0,title:!0});var _n=p(A);z=c(_n,"INPUT",{type:!0,class:!0}),le=g(_n),Le=c(_n,"SPAN",{class:!0,"data-svelte-h":!0}),x(Le)!=="svelte-177jta0"&&(Le.textContent=et),_n.forEach(f),it=g(me),tt=c(me,"LABEL",{class:!0,title:!0});var gn=p(tt);He=c(gn,"INPUT",{type:!0,class:!0}),Gt=g(gn),rt=c(gn,"SPAN",{class:!0,"data-svelte-h":!0}),x(rt)!=="svelte-1myrnh2"&&(rt.textContent=T),gn.forEach(f),K=g(me),G=c(me,"LABEL",{class:!0,title:!0});var bn=p(G);W=c(bn,"INPUT",{type:!0,class:!0}),de=g(bn),se=c(bn,"SPAN",{class:!0,"data-svelte-h":!0}),x(se)!=="svelte-1pame47"&&(se.textContent=ue),bn.forEach(f),ce=g(me),Ue=c(me,"LABEL",{class:!0,title:!0});var kn=p(Ue);be=c(kn,"INPUT",{type:!0,class:!0}),Ve=g(kn),Ge=c(kn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Ge)!=="svelte-kia4wx"&&(Ge.textContent=Ll),kn.forEach(f),mt=g(me),_t=c(me,"SPAN",{class:!0}),p(_t).forEach(f),Rl=g(me),gt=c(me,"LABEL",{class:!0,title:!0});var wn=p(gt);lt=c(wn,"INPUT",{type:!0,class:!0}),ul=g(wn),Bt=c(wn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Bt)!=="svelte-16btzso"&&(Bt.textContent=Fl),wn.forEach(f),nl=g(me),nt=c(me,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(nt)!=="svelte-13z3t6e"&&(nt.textContent=Il),Nl=g(me),Ze&&Ze.l(me),bt=g(me),kt=c(me,"SPAN",{class:!0}),p(kt).forEach(f),Ul=g(me),Vt=c(me,"LABEL",{class:!0});var yn=p(Vt);Oe=c(yn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Oe)!=="svelte-1d25ili"&&(Oe.textContent=qt),Wt=g(yn),st=c(yn,"SELECT",{class:!0});var Cn=p(st);wt=c(Cn,"OPTION",{"data-svelte-h":!0}),x(wt)!=="svelte-kgyr86"&&(wt.textContent=fl),at=c(Cn,"OPTION",{"data-svelte-h":!0}),x(at)!=="svelte-8wnvoi"&&(at.textContent=Pl),yt=c(Cn,"OPTION",{"data-svelte-h":!0}),x(yt)!=="svelte-7fkmwe"&&(yt.textContent=Kt),Cn.forEach(f),yn.forEach(f),Xt=g(me),Yt=c(me,"LABEL",{class:!0});var Tn=p(Yt);Jt=c(Tn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Jt)!=="svelte-rpytas"&&(Jt.textContent=dl),hl=g(Tn),qe=c(Tn,"SELECT",{class:!0});var En=p(qe);Ct=c(En,"OPTION",{"data-svelte-h":!0}),x(Ct)!=="svelte-1awwqhf"&&(Ct.textContent=Zt),We=c(En,"OPTION",{"data-svelte-h":!0}),x(We)!=="svelte-1xbdoff"&&(We.textContent=tn),Tt=c(En,"OPTION",{"data-svelte-h":!0}),x(Tt)!=="svelte-1o5m333"&&(Tt.textContent=vl),En.forEach(f),Tn.forEach(f),pl=g(me),ot=c(me,"LABEL",{class:!0,title:!0});var Dn=p(ot);Qt=c(Dn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Qt)!=="svelte-bjtusk"&&(Qt.textContent=ze),ke=g(Dn),ee=c(Dn,"SELECT",{class:!0});var In=p(ee);Mt=c(In,"OPTION",{"data-svelte-h":!0}),x(Mt)!=="svelte-x3trnu"&&(Mt.textContent=zl),ct=c(In,"OPTION",{"data-svelte-h":!0}),x(ct)!=="svelte-10tohf9"&&(ct.textContent=ml),ut=c(In,"OPTION",{"data-svelte-h":!0}),x(ut)!=="svelte-pzpi85"&&(ut.textContent=ln),In.forEach(f),Dn.forEach(f),me.forEach(f),yl=g(Z),$t=c(Z,"DIV",{class:!0});var Nn=p($t);Ke=c(Nn,"DIV",{class:!0});var Dl=p(Ke);_l=c(Dl,"DIV",{class:!0});var Qn=p(_l);zt(jt.$$.fragment,Qn),Qn.forEach(f),ft=g(Dl),Et=c(Dl,"DIV",{class:!0});var $n=p(Et);zt(el.$$.fragment,$n),$n.forEach(f),Ol=g(Dl),Dt=c(Dl,"DIV",{class:!0});var es=p(Dt);zt(sl.$$.fragment,es),es.forEach(f),xl=g(Dl),It=c(Dl,"DIV",{class:!0});var ts=p(It);zt(al.$$.fragment,ts),ts.forEach(f),Dl.forEach(f),Hl=g(Nn),zt(dt.$$.fragment,Nn),Nn.forEach(f),Gl=g(Z),tl=c(Z,"FOOTER",{class:!0});var Pn=p(tl);Nt=c(Pn,"SPAN",{});var nn=p(Nt);il=Y(nn,"View: "),Al=Y(nn,rl),Cl=Y(nn," - "),gl=Y(nn,Tl),nn.forEach(f),ql=g(Pn),Wl=c(Pn,"SPAN",{"data-svelte-h":!0}),x(Wl)!=="svelte-109nybm"&&(Wl.textContent=Gn),Pn.forEach(f),Z.forEach(f),this.h()},h(){i(a,"class","open-btn svelte-1euarcl"),i(a,"title","Open audio file"),i(d,"class","play-btn svelte-1euarcl"),i(d,"title","Play/Pause (Space)"),cl(d,"playing",t[24]),i(v,"class","stop-btn svelte-1euarcl"),i(v,"title","Stop (Escape)"),i(y,"class","save-btn svelte-1euarcl"),i(y,"title","Save audio as WAV"),i(D,"class","filename svelte-1euarcl"),i(n,"class","toolbar-left svelte-1euarcl"),i(I,"class","time-display svelte-1euarcl"),i(C,"class","toolbar-center svelte-1euarcl"),i(_e,"class","sample-rate svelte-1euarcl"),i(we,"class","settings-btn svelte-1euarcl"),i(we,"title","Load configuration file"),i(Ie,"class","theme-btn svelte-1euarcl"),i(Ie,"title","Toggle theme"),i(Q,"class","toolbar-right svelte-1euarcl"),i(l,"class","toolbar svelte-1euarcl"),i(ie,"type","checkbox"),i(ie,"class","svelte-1euarcl"),i(Pe,"class","toggle-label pitch svelte-1euarcl"),i(ve,"class","overlay-toggle svelte-1euarcl"),i(ve,"title","Fundamental frequency (F0) - the perceived pitch of voiced speech"),i(Ae,"type","checkbox"),i(Ae,"class","svelte-1euarcl"),i(P,"class","toggle-label formants svelte-1euarcl"),i(pe,"class","overlay-toggle svelte-1euarcl"),i(pe,"title","Formants (F1-F4) - resonant frequencies of the vocal tract that distinguish vowels"),i(te,"type","checkbox"),i(te,"class","svelte-1euarcl"),i(oe,"class","toggle-label intensity svelte-1euarcl"),i($,"class","overlay-toggle svelte-1euarcl"),i($,"title","Intensity - sound pressure level in decibels (dB)"),i(z,"type","checkbox"),i(z,"class","svelte-1euarcl"),i(Le,"class","toggle-label hnr svelte-1euarcl"),i(A,"class","overlay-toggle svelte-1euarcl"),i(A,"title","Harmonics-to-Noise Ratio - measure of voice quality (higher = clearer voice)"),i(He,"type","checkbox"),i(He,"class","svelte-1euarcl"),i(rt,"class","toggle-label cog svelte-1euarcl"),i(tt,"class","overlay-toggle svelte-1euarcl"),i(tt,"title","Center of Gravity - spectral centroid, indicates brightness of sound"),i(W,"type","checkbox"),i(W,"class","svelte-1euarcl"),i(se,"class","toggle-label tilt svelte-1euarcl"),i(G,"class","overlay-toggle svelte-1euarcl"),i(G,"title","Spectral Tilt - balance between low and high frequencies (dB difference 0-500 Hz vs 2000-4000 Hz)"),i(be,"type","checkbox"),i(be,"class","svelte-1euarcl"),i(Ge,"class","toggle-label a1p0 svelte-1euarcl"),i(Ue,"class","overlay-toggle svelte-1euarcl"),i(Ue,"title","A1-P0 Nasal Ratio - amplitude at F0 minus nasal pole (~250 Hz), indicates nasality"),i(_t,"class","controls-separator svelte-1euarcl"),i(lt,"type","checkbox"),i(lt,"class","svelte-1euarcl"),i(Bt,"class","toggle-label points svelte-1euarcl"),i(gt,"class","overlay-toggle svelte-1euarcl"),i(gt,"title","Data collection points - double-click to add, right-click to remove"),i(nt,"class","import-points-btn svelte-1euarcl"),i(nt,"title","Import data points from TSV"),i(kt,"class","controls-separator svelte-1euarcl"),i(Oe,"class","freq-label svelte-1euarcl"),wt.__value="female",At(wt,wt.__value),at.__value="male",At(at,at.__value),yt.__value="child",At(yt,yt.__value),i(st,"class","svelte-1euarcl"),t[2]===void 0&&ls(()=>t[54].call(st)),i(Vt,"class","freq-selector svelte-1euarcl"),i(Jt,"class","freq-label svelte-1euarcl"),Ct.__value=5e3,At(Ct,Ct.__value),We.__value=7500,At(We,We.__value),Tt.__value=1e4,At(Tt,Tt.__value),i(qe,"class","svelte-1euarcl"),t[16]===void 0&&ls(()=>t[55].call(qe)),i(Yt,"class","freq-selector svelte-1euarcl"),i(Qt,"class","freq-label svelte-1euarcl"),Mt.__value="praatfan-local",At(Mt,Mt.__value),ct.__value="praatfan",At(ct,ct.__value),ut.__value="praatfan-gpl",At(ut,ut.__value),i(ee,"class","svelte-1euarcl"),i(ot,"class","freq-selector svelte-1euarcl"),i(ot,"title","Acoustic analysis backend"),i(X,"class","overlay-controls svelte-1euarcl"),i(_l,"class","display-panel waveform-panel svelte-1euarcl"),i(Et,"class","display-panel spectrogram-panel svelte-1euarcl"),i(Dt,"class","time-axis-panel svelte-1euarcl"),i(It,"class","display-panel annotation-panel svelte-1euarcl"),i(Ke,"class","displays svelte-1euarcl"),i($t,"class","main-content svelte-1euarcl"),i(tl,"class","status-bar svelte-1euarcl"),i(e,"class","app-container svelte-1euarcl")},m(F,Z){H(F,e,Z),s(e,l),s(l,n),s(n,a),s(n,o),s(n,d),bl.m(d,null),s(n,h),s(n,v),s(n,m),ll.m(n,null),s(n,_),s(n,y),s(n,B),s(n,D),s(D,N),s(l,S),s(l,C),s(C,I),s(I,L),s(I,V),s(I,j),s(C,M),Ye&&Ye.m(C,null),s(l,O),s(l,Q),Je&&Je.m(Q,null),s(Q,Ce),s(Q,_e),s(_e,xe),s(_e,Fe),s(Q,Re),s(Q,we),s(Q,ye),s(Q,Ie),kl.m(Ie,null),s(e,Se),s(e,X),s(X,ve),s(ve,ie),ie.checked=t[8],s(ve,Ne),s(ve,Pe),s(X,Te),s(X,pe),s(pe,Ae),Ae.checked=t[9],s(pe,$e),s(pe,P),s(X,ne),s(X,$),s($,te),te.checked=t[10],s($,fe),s($,oe),s(X,re),s(X,A),s(A,z),z.checked=t[11],s(A,le),s(A,Le),s(X,it),s(X,tt),s(tt,He),He.checked=t[12],s(tt,Gt),s(tt,rt),s(X,K),s(X,G),s(G,W),W.checked=t[13],s(G,de),s(G,se),s(X,ce),s(X,Ue),s(Ue,be),be.checked=t[14],s(Ue,Ve),s(Ue,Ge),s(X,mt),s(X,_t),s(X,Rl),s(X,gt),s(gt,lt),lt.checked=t[15],s(gt,ul),s(gt,Bt),s(X,nl),s(X,nt),s(X,Nl),Ze&&Ze.m(X,null),s(X,bt),s(X,kt),s(X,Ul),s(X,Vt),s(Vt,Oe),s(Vt,Wt),s(Vt,st),s(st,wt),s(st,at),s(st,yt),Kl(st,t[2],!0),s(X,Xt),s(X,Yt),s(Yt,Jt),s(Yt,hl),s(Yt,qe),s(qe,Ct),s(qe,We),s(qe,Tt),Kl(qe,t[16],!0),s(X,pl),s(X,ot),s(ot,Qt),s(ot,ke),s(ot,ee),s(ee,Mt),s(ee,ct),s(ee,ut),Kl(ee,t[23]),s(e,yl),s(e,$t),s($t,Ke),s(Ke,_l),Ut(jt,_l,null),s(Ke,ft),s(Ke,Et),Ut(el,Et,null),s(Ke,Ol),s(Ke,Dt),Ut(sl,Dt,null),s(Ke,xl),s(Ke,It),Ut(al,It,null),s($t,Hl),Ut(dt,$t,null),s(e,Gl),s(e,tl),s(tl,Nt),s(Nt,il),s(Nt,Al),s(Nt,Cl),s(Nt,gl),s(tl,ql),s(tl,Wl),Lt=!0,Mn||(qn=[U(a,"click",t[35]),U(d,"click",Os),U(v,"click",zs),U(y,"click",t[34]),U(we,"click",t[37]),U(Ie,"click",t[29]),U(ie,"change",t[46]),U(Ae,"change",t[47]),U(te,"change",t[48]),U(z,"change",t[49]),U(He,"change",t[50]),U(W,"change",t[51]),U(be,"change",t[52]),U(lt,"change",t[53]),U(nt,"click",t[40]),U(st,"change",t[54]),U(qe,"change",t[55]),U(ee,"change",t[28])],Mn=!0)},p(F,Z){cn!==(cn=Wn(F))&&(bl.d(1),bl=cn(F),bl&&(bl.c(),bl.m(d,null))),(!Lt||Z[0]&16777216)&&cl(d,"playing",F[24]),un===(un=Kn(F))&&ll?ll.p(F,Z):(ll.d(1),ll=un(F),ll&&(ll.c(),ll.m(n,_))),(!Lt||Z[0]&262144)&&ae(N,F[18]),(!Lt||Z[0]&1048576)&&E!==(E=ol(F[20])+"")&&ae(L,E),(!Lt||Z[0]&524289)&&R!==(R=ol(F[0].length/F[19])+"")&&ae(j,R),F[25]?Ye?Ye.p(F,Z):(Ye=Ms(F),Ye.c(),Ye.m(C,null)):Ye&&(Ye.d(1),Ye=null),F[26]?Je?Je.p(F,Z):(Je=js(F),Je.c(),Je.m(Q,Ce)):Je&&(Je.d(1),Je=null),(!Lt||Z[0]&524288)&&ae(xe,F[19]),fn!==(fn=Xn(F))&&(kl.d(1),kl=fn(F),kl&&(kl.c(),kl.m(Ie,null))),Z[0]&256&&(ie.checked=F[8]),Z[0]&512&&(Ae.checked=F[9]),Z[0]&1024&&(te.checked=F[10]),Z[0]&2048&&(z.checked=F[11]),Z[0]&4096&&(He.checked=F[12]),Z[0]&8192&&(W.checked=F[13]),Z[0]&16384&&(be.checked=F[14]),Z[0]&32768&&(lt.checked=F[15]),F[22].length>0?Ze?Ze.p(F,Z):(Ze=Ls(F),Ze.c(),Ze.m(X,bt)):Ze&&(Ze.d(1),Ze=null),Z[0]&4&&Kl(st,F[2]),Z[0]&65536&&Kl(qe,F[16]),(!Lt||Z[0]&8388608)&&Kl(ee,F[23]);const Xe={};Z[0]&256&&(Xe.showPitch=F[8]),Z[0]&512&&(Xe.showFormants=F[9]),Z[0]&1024&&(Xe.showIntensity=F[10]),Z[0]&2048&&(Xe.showHNR=F[11]),Z[0]&4096&&(Xe.showCoG=F[12]),Z[0]&8192&&(Xe.showSpectralTilt=F[13]),Z[0]&16384&&(Xe.showA1P0=F[14]),Z[0]&32768&&(Xe.showDataPoints=F[15]),Z[0]&65536&&(Xe.maxFreq=F[16]),el.$set(Xe),(!Lt||Z[0]&2097152)&&rl!==(rl=ol(F[21].start)+"")&&ae(Al,rl),(!Lt||Z[0]&2097152)&&Tl!==(Tl=ol(F[21].end)+"")&&ae(gl,Tl)},i(F){Lt||(he(jt.$$.fragment,F),he(el.$$.fragment,F),he(sl.$$.fragment,F),he(al.$$.fragment,F),he(dt.$$.fragment,F),Lt=!0)},o(F){De(jt.$$.fragment,F),De(el.$$.fragment,F),De(sl.$$.fragment,F),De(al.$$.fragment,F),De(dt.$$.fragment,F),Lt=!1},d(F){F&&f(e),bl.d(),ll.d(),Ye&&Ye.d(),Je&&Je.d(),kl.d(),Ze&&Ze.d(),Ft(jt),Ft(el),Ft(sl),Ft(al),Ft(dt),Mn=!1,St(qn)}}}function Ma(t){let e,l;return e=new ga({props:{onFile:t[30],onRecordedBlob:t[31]}}),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p:pt,i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function ja(t){let e,l="Loading acoustic analysis engine...";return{c(){e=u("div"),e.textContent=l,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-plgi30"&&(e.textContent=l),this.h()},h(){i(e,"class","loading svelte-1euarcl")},m(n,a){H(n,e,a)},p:pt,i:pt,o:pt,d(n){n&&f(e)}}}function La(t){let e,l;return{c(){e=Ht("svg"),l=Ht("path"),this.h()},l(n){e=xt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=p(e);l=xt(a,"path",{d:!0}),p(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M8 5v14l11-7z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ra(t){let e,l,n;return{c(){e=Ht("svg"),l=Ht("rect"),n=Ht("rect"),this.h()},l(a){e=xt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=p(e);l=xt(r,"rect",{x:!0,y:!0,width:!0,height:!0}),p(l).forEach(f),n=xt(r,"rect",{x:!0,y:!0,width:!0,height:!0}),p(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"x","6"),i(l,"y","4"),i(l,"width","4"),i(l,"height","16"),i(n,"x","14"),i(n,"y","4"),i(n,"width","4"),i(n,"height","16"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(a,r){H(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Fa(t){let e,l='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><circle cx="12" cy="12" r="6"></circle></svg>',n,a;return{c(){e=u("button"),e.innerHTML=l,this.h()},l(r){e=c(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(e)!=="svelte-d9ton6"&&(e.innerHTML=l),this.h()},h(){i(e,"class","record-btn svelte-1euarcl"),i(e,"title","Record from microphone")},m(r,o){H(r,e,o),n||(a=U(e,"click",t[32]),n=!0)},p:pt,d(r){r&&f(e),n=!1,a()}}}function Ua(t){let e,l,n,a,r,o=t[7].toFixed(1)+"",d,h,v,k;return{c(){e=u("button"),l=Ht("svg"),n=Ht("rect"),a=b(),r=u("span"),d=J(o),h=J("s"),this.h()},l(m){e=c(m,"BUTTON",{class:!0,title:!0});var _=p(e);l=xt(_,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var y=p(l);n=xt(y,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),p(n).forEach(f),y.forEach(f),a=g(_),r=c(_,"SPAN",{class:!0});var w=p(r);d=Y(w,o),h=Y(w,"s"),w.forEach(f),_.forEach(f),this.h()},h(){i(n,"x","6"),i(n,"y","6"),i(n,"width","12"),i(n,"height","12"),i(n,"rx","2"),i(l,"viewBox","0 0 24 24"),i(l,"fill","currentColor"),i(l,"width","16"),i(l,"height","16"),i(r,"class","recording-time svelte-1euarcl"),i(e,"class","record-btn recording svelte-1euarcl"),i(e,"title","Stop recording")},m(m,_){H(m,e,_),s(e,l),s(l,n),s(e,a),s(e,r),s(r,d),s(r,h),v||(k=U(e,"click",t[33]),v=!0)},p(m,_){_[0]&128&&o!==(o=m[7].toFixed(1)+"")&&ae(d,o)},d(m){m&&f(e),v=!1,k()}}}function Ms(t){let e,l,n=ol(t[25].end-t[25].start)+"",a;return{c(){e=u("span"),l=J("Sel: "),a=J(n),this.h()},l(r){e=c(r,"SPAN",{class:!0});var o=p(e);l=Y(o,"Sel: "),a=Y(o,n),o.forEach(f),this.h()},h(){i(e,"class","selection-info svelte-1euarcl")},m(r,o){H(r,e,o),s(e,l),s(e,a)},p(r,o){o[0]&33554432&&n!==(n=ol(r[25].end-r[25].start)+"")&&ae(a,n)},d(r){r&&f(e)}}}function js(t){let e,l,n,a;return{c(){e=u("span"),l=J("Analyzing... "),n=J(t[27]),a=J("%"),this.h()},l(r){e=c(r,"SPAN",{class:!0});var o=p(e);l=Y(o,"Analyzing... "),n=Y(o,t[27]),a=Y(o,"%"),o.forEach(f),this.h()},h(){i(e,"class","analysis-progress svelte-1euarcl")},m(r,o){H(r,e,o),s(e,l),s(e,n),s(e,a)},p(r,o){o[0]&134217728&&ae(n,r[27])},d(r){r&&f(e)}}}function za(t){let e,l,n;return{c(){e=Ht("svg"),l=Ht("circle"),n=Ht("path"),this.h()},l(a){e=xt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=p(e);l=xt(r,"circle",{cx:!0,cy:!0,r:!0}),p(l).forEach(f),n=xt(r,"path",{d:!0}),p(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"cx","12"),i(l,"cy","12"),i(l,"r","5"),i(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(a,r){H(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Oa(t){let e,l;return{c(){e=Ht("svg"),l=Ht("path"),this.h()},l(n){e=xt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=p(e);l=xt(a,"path",{d:!0}),p(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ls(t){let e,l,n=t[22].length+"",a,r,o,d;return{c(){e=u("button"),l=J("Export ("),a=J(n),r=J(")"),this.h()},l(h){e=c(h,"BUTTON",{class:!0,title:!0});var v=p(e);l=Y(v,"Export ("),a=Y(v,n),r=Y(v,")"),v.forEach(f),this.h()},h(){i(e,"class","export-points-btn svelte-1euarcl"),i(e,"title","Export data points to TSV")},m(h,v){H(h,e,v),s(e,l),s(e,a),s(e,r),o||(d=U(e,"click",t[39]),o=!0)},p(h,v){v[0]&4194304&&n!==(n=h[22].length+"")&&ae(a,n)},d(h){h&&f(e),o=!1,d()}}}function xa(t){let e,l,n,a,r,o,d,h,v,k,m,_;const y=[ja,Ma,Va],w=[];function B(D,N){return D[1]?D[0]?2:1:0}return h=B(t),v=w[h]=y[h](t),{c(){e=u("input"),l=b(),n=u("input"),a=b(),r=u("input"),o=b(),d=u("main"),v.c(),this.h()},l(D){e=c(D,"INPUT",{type:!0,accept:!0,style:!0}),l=g(D),n=c(D,"INPUT",{type:!0,accept:!0,style:!0}),a=g(D),r=c(D,"INPUT",{type:!0,accept:!0,style:!0}),o=g(D),d=c(D,"MAIN",{class:!0});var N=p(d);v.l(N),N.forEach(f),this.h()},h(){i(e,"type","file"),i(e,"accept","audio/*"),Me(e,"display","none"),i(n,"type","file"),i(n,"accept",".yaml,.yml"),Me(n,"display","none"),i(r,"type","file"),i(r,"accept",".tsv,.txt"),Me(r,"display","none"),i(d,"class","svelte-1euarcl")},m(D,N){H(D,e,N),t[43](e),H(D,l,N),H(D,n,N),t[44](n),H(D,a,N),H(D,r,N),t[45](r),H(D,o,N),H(D,d,N),w[h].m(d,null),k=!0,m||(_=[U(e,"change",t[36]),U(n,"change",t[38]),U(r,"change",t[41])],m=!0)},p(D,N){let S=h;h=B(D),h===S?w[h].p(D,N):(Sl(),De(w[S],1,1,()=>{w[S]=null}),Bl(),v=w[h],v?v.p(D,N):(v=w[h]=y[h](D),v.c()),he(v,1),v.m(d,null))},i(D){k||(he(v),k=!0)},o(D){De(v),k=!1},d(D){D&&(f(e),f(l),f(n),f(a),f(r),f(o),f(d)),t[43](null),t[44](null),t[45](null),w[h].d(),m=!1,St(_)}}}function ol(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toFixed(2).padStart(5,"0")}`}function Ha(t,e,l){let n,a,r,o,d,h,v,k,m,_,y,w,B,D,N;Ee(t,Sn,T=>l(18,n=T)),Ee(t,Fn,T=>l(0,a=T)),Ee(t,aa,T=>l(59,r=T)),Ee(t,Un,T=>l(19,o=T)),Ee(t,jl,T=>l(20,d=T)),Ee(t,Yl,T=>l(21,h=T)),Ee(t,Bn,T=>l(60,v=T)),Ee(t,os,T=>l(22,k=T)),Ee(t,ia,T=>l(1,m=T)),Ee(t,cs,T=>l(2,_=T)),Ee(t,zn,T=>l(23,y=T)),Ee(t,ra,T=>l(24,w=T)),Ee(t,Jl,T=>l(25,B=T)),Ee(t,oa,T=>l(26,D=T)),Ee(t,ca,T=>l(27,N=T));let S=!0,C,I,E=!1,L=null,V=[],R=0,j=null;Vn(()=>{const T=localStorage.getItem("ozen-backend");return(T==="praatfan-gpl"||T==="praatfan"||T==="praatfan-local")&&zn.set(T),Rn(y),ua(Bn,os),localStorage.getItem("ozen-theme")==="light"&&(l(3,S=!1),document.documentElement.classList.add("light")),window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)}),Hn(()=>{j&&clearInterval(j),L&&E&&L.stop()});async function M(T){const G=T.target.value;zn.set(G),localStorage.setItem("ozen-backend",G);try{await Rn(G),a&&(sn(),an().catch(W=>console.error("Analysis failed:",W)))}catch(W){console.error("Failed to switch backend:",W)}}let O=_;function Q(){l(3,S=!S),S?(document.documentElement.classList.remove("light"),localStorage.setItem("ozen-theme","dark")):(document.documentElement.classList.add("light"),localStorage.setItem("ozen-theme","light"))}async function Ce(){if(k.length===0){console.log("No data points to copy");return}const T=is({showPitch:Se,showFormants:X,showIntensity:ve,showHNR:ie,showCoG:Ne,showSpectralTilt:Pe,showA1P0:je});try{await navigator.clipboard.writeText(T),console.log(`Copied ${k.length} data points to clipboard`)}catch(K){console.error("Failed to copy to clipboard:",K)}}function _e(T){if(!(T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement)){if(T.ctrlKey||T.metaKey)switch(T.key.toLowerCase()){case"z":T.preventDefault(),T.shiftKey?xn():Us();return;case"y":T.preventDefault(),xn();return;case"c":T.preventDefault(),Ce();return}switch(T.code){case"Space":T.preventDefault(),Os();break;case"Escape":T.preventDefault(),zs(),Jl.set(null);break;case"Tab":T.preventDefault(),ea();break;case"ArrowLeft":T.preventDefault(),xe(-.1);break;case"ArrowRight":T.preventDefault(),xe(.1);break;case"ArrowUp":T.preventDefault(),Fe(.91,!0);break;case"ArrowDown":T.preventDefault(),Fe(1.1,!0);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":const K=parseInt(T.code.slice(-1))-1;K<v.length&&wl.set(K);break}}}function xe(T){if(!a)return;const K=a.length/o,{start:G,end:W}=h,de=W-G,se=de*T;let ue=G+se,ce=W+se;ue<0&&(ue=0,ce=de),ce>K&&(ce=K,ue=K-de),Yl.set({start:ue,end:ce})}function Fe(T,K=!1){if(!a)return;const G=a.length/o,{start:W,end:de}=h,se=de-W,ue=K?(W+de)/2:d,ce=Math.max(.01,Math.min(G,se*T)),Ue=(ue-W)/se;let be=Math.max(0,ue-Ue*ce),Ve=Math.min(G,be+ce);Ve===G&&(be=Math.max(0,Ve-ce)),Yl.set({start:be,end:Ve})}async function Re(T){sn();const K=await T.arrayBuffer(),W=await new AudioContext().decodeAudioData(K),de=new Float64Array(W.length),se=W.getChannelData(0);for(let ce=0;ce<W.length;ce++)de[ce]=se[ce];Fn.set(de),Un.set(W.sampleRate),Sn.set(T.name);const ue=W.length/W.sampleRate;rs.set(ue),Yl.set({start:0,end:Math.min(ue,10)}),jl.set(0),Jl.set(null),an().catch(ce=>console.error("Analysis failed:",ce))}async function we(T){sn();const K=await T.arrayBuffer(),W=await new AudioContext().decodeAudioData(K),de=new Float64Array(W.length),se=W.getChannelData(0);for(let ce=0;ce<W.length;ce++)de[ce]=se[ce];Fn.set(de),Un.set(W.sampleRate),Sn.set(`Recording ${new Date().toLocaleTimeString()}`);const ue=W.length/W.sampleRate;rs.set(ue),Yl.set({start:0,end:Math.min(ue,10)}),jl.set(0),Jl.set(null),an().catch(ce=>console.error("Analysis failed:",ce))}async function Be(){try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});V=[],L=new MediaRecorder(T,{mimeType:"audio/webm"}),L.ondataavailable=K=>{K.data.size>0&&V.push(K.data)},L.onstop=async()=>{T.getTracks().forEach(G=>G.stop());const K=new Blob(V,{type:"audio/webm"});await we(K)},L.start(100),l(6,E=!0),l(7,R=0),j=setInterval(()=>{l(7,R+=.1)},100)}catch(T){console.error("Failed to start recording:",T),alert("Could not access microphone. Please allow microphone access.")}}function ye(){L&&E&&(L.stop(),l(6,E=!1),j&&(clearInterval(j),j=null))}async function Ie(){if(!a||!o)return;const T=a.length,K=new ArrayBuffer(44+T*2),G=new DataView(K),W=(be,Ve)=>{for(let Ge=0;Ge<Ve.length;Ge++)G.setUint8(be+Ge,Ve.charCodeAt(Ge))};W(0,"RIFF"),G.setUint32(4,36+T*2,!0),W(8,"WAVE"),W(12,"fmt "),G.setUint32(16,16,!0),G.setUint16(20,1,!0),G.setUint16(22,1,!0),G.setUint32(24,o,!0),G.setUint32(28,o*2,!0),G.setUint16(32,2,!0),G.setUint16(34,16,!0),W(36,"data"),G.setUint32(40,T*2,!0);let de=44;for(let be=0;be<T;be++){const Ve=Math.max(-1,Math.min(1,a[be]));G.setInt16(de,Ve<0?Ve*32768:Ve*32767,!0),de+=2}const se=new Blob([K],{type:"audio/wav"});let ue="audio.wav";if(n&&(ue=n.replace(/\.[^/.]+$/,"")+".wav"),"showSaveFilePicker"in window)try{const Ve=await(await window.showSaveFilePicker({suggestedName:ue,types:[{description:"WAV Audio",accept:{"audio/wav":[".wav"]}}]})).createWritable();await Ve.write(se),await Ve.close();return}catch(be){if(be.name==="AbortError")return}const ce=URL.createObjectURL(se),Ue=document.createElement("a");Ue.href=ce,Ue.download=ue,Ue.click(),URL.revokeObjectURL(ce)}let Se=!0,X=!0,ve=!1,ie=!1,Ne=!1,Pe=!1,je=!1,Te=!0,pe=5e3,Ae;function $e(){Ae.click()}async function P(T){var W;const K=T.target,G=(W=K.files)==null?void 0:W[0];G&&await Re(G),K.value=""}function q(){C.click()}async function ne(T){var W;const K=T.target,G=(W=K.files)==null?void 0:W[0];if(G){const de=await G.text(),se=fa(de);if(se&&se.backend!==r)try{await Rn(se.backend),localStorage.setItem("ozen-backend",se.backend),a&&(sn(),an().catch(ue=>console.error("Analysis failed:",ue)))}catch(ue){console.error("Failed to switch backend:",ue)}}K.value=""}async function $(){const T=is({showPitch:Se,showFormants:X,showIntensity:ve,showHNR:ie,showCoG:Ne,showSpectralTilt:Pe,showA1P0:je});let K="data_points.tsv";if(n&&(K=n.replace(/\.[^/.]+$/,"")+"_points.tsv"),"showSaveFilePicker"in window)try{const ue=await(await window.showSaveFilePicker({suggestedName:K,types:[{description:"Tab-Separated Values",accept:{"text/tab-separated-values":[".tsv"]}}]})).createWritable();await ue.write(T),await ue.close();return}catch(se){if(se.name==="AbortError")return}const G=new Blob([T],{type:"text/tab-separated-values"}),W=URL.createObjectURL(G),de=document.createElement("a");de.href=W,de.download=K,de.click(),URL.revokeObjectURL(W)}function te(){I.click()}async function fe(T){var W;const K=T.target,G=(W=K.files)==null?void 0:W[0];if(G){const de=await G.text();sa(de)===-1&&console.error("Failed to import data points: invalid TSV format (need time and frequency columns)")}K.value=""}function oe(T){Ml[T?"unshift":"push"](()=>{Ae=T,l(17,Ae)})}function ge(T){Ml[T?"unshift":"push"](()=>{C=T,l(4,C)})}function re(T){Ml[T?"unshift":"push"](()=>{I=T,l(5,I)})}function A(){Se=this.checked,l(8,Se)}function z(){X=this.checked,l(9,X)}function le(){ve=this.checked,l(10,ve)}function Le(){ie=this.checked,l(11,ie)}function et(){Ne=this.checked,l(12,Ne)}function it(){Pe=this.checked,l(13,Pe)}function tt(){je=this.checked,l(14,je)}function He(){Te=this.checked,l(15,Te)}function Gt(){_=ns(this),cs.set(_)}function rt(){pe=ns(this),l(16,pe)}return t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&2048&&_!==O&&(l(42,O=_),a&&m&&(sn(),an().catch(T=>console.error("Analysis failed:",T))))},[a,m,_,S,C,I,E,R,Se,X,ve,ie,Ne,Pe,je,Te,pe,Ae,n,o,d,h,k,y,w,B,D,N,M,Q,Re,we,Be,ye,Ie,$e,P,q,ne,$,te,fe,O,oe,ge,re,A,z,le,Le,et,it,tt,He,Gt,rt]}class Xa extends $l{constructor(e){super(),en(this,e,Ha,xa,Ql,{},null,[-1,-1,-1])}}export{Xa as component};

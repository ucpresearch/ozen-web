import{r as Bt,s as sn,n as Tt,d as f,i as G,x as Ct,G as Zn,D as jl,a as se,b as s,E as R,B as i,c as o,e as m,g,f as K,H as O,h as c,j as b,t as X,I as cl,_ as js,C as Me,k as Ne,$ as qs,w as Hn,L as St,a0 as Js,K as $l,M as cs,J as us,N as Gt,O as jt}from"../chunks/DzR6qLkJ.js";import{a as ve,t as Ie,S as an,i as rn,g as Ol,c as Hl,d as Ut,m as zt,e as Ot,b as Ht}from"../chunks/CbSE4UIZ.js";import{n as bl,o as Zs,q as Qs,u as vn,v as $s,x as jn,e as ln,b as ql,y as fs,z as ea,t as tn,A as Ws,B as Jn,C as ta,D as la,E as ds,F as na,G as sa,H as aa,I as On,f as zn,g as ia,i as qn,p as ra,l as Ks,J as Xs,W as oa,S as ca,T as ua,K as hs,c as hn,r as pn,a as Wn,s as Kn,d as ps,L as fa,M as da,N as vs,w as ha,h as pa,j as va,k as ma,O as _a}from"../chunks/oPkQdaeP.js";import{s as Xn,l as ga,a as ms}from"../chunks/BmAGY9Gp.js";function nn(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ba(t,e){t.d(1),e.delete(t.key)}function wa(t,e){Ie(t,1,1,()=>{e.delete(t.key)})}function Ys(t,e,l,n,a,r,u,d,h,p,y,w){let _=t.length,T=r.length,C=_;const M={};for(;C--;)M[t[C].key]=C;const E=[],N=new Map,S=new Map,U=[];for(C=T;C--;){const B=w(a,r,C),F=l(B);let A=u.get(F);A?U.push(()=>A.p(B,e)):(A=p(F,B),A.c()),N.set(F,E[C]=A),F in M&&S.set(F,Math.abs(C-M[F]))}const v=new Set,x=new Set;function P(B){ve(B,1),B.m(d,y),u.set(B.key,B),y=B.first,T--}for(;_&&T;){const B=E[T-1],F=t[_-1],A=B.key,V=F.key;B===F?(y=B.first,_--,T--):N.has(V)?!u.has(A)||v.has(A)?P(B):x.has(V)?_--:S.get(A)>S.get(V)?(x.add(A),P(B)):(v.add(V),_--):(h(F,u),_--)}for(;_--;){const B=t[_];N.has(B.key)||h(B,u)}for(;T;)P(E[T-1]);return Bt(U),E}function ya(t){let e,l,n='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 15V3m0 0l-4 4m4-4l4 4"></path><path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17"></path></svg>',a,r,u="Drop an audio file here",d,h,p="or click to select",y,w,_,T="Supports WAV, FLAC, MP3, OGG",C,M,E,N,S=t[0]&&_s(t);return{c(){e=c("div"),l=c("div"),l.innerHTML=n,a=b(),r=c("p"),r.textContent=u,d=b(),h=c("p"),h.textContent=p,y=b(),S&&S.c(),w=b(),_=c("p"),_.textContent=T,C=b(),M=c("input"),this.h()},l(U){e=o(U,"DIV",{class:!0,role:!0,tabindex:!0});var v=m(e);l=o(v,"DIV",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-hj89uc"&&(l.innerHTML=n),a=g(v),r=o(v,"P",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-nangy9"&&(r.textContent=u),d=g(v),h=o(v,"P",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-fp1l9p"&&(h.textContent=p),y=g(v),S&&S.l(v),w=g(v),_=o(v,"P",{class:!0,"data-svelte-h":!0}),O(_)!=="svelte-tb4emq"&&(_.textContent=T),C=g(v),M=o(v,"INPUT",{type:!0,accept:!0,class:!0}),v.forEach(f),this.h()},h(){i(l,"class","icon svelte-lmmgcl"),i(r,"class","primary svelte-lmmgcl"),i(h,"class","secondary svelte-lmmgcl"),i(_,"class","formats svelte-lmmgcl"),i(M,"type","file"),i(M,"accept","audio/*"),i(M,"class","svelte-lmmgcl"),i(e,"class","drop-zone svelte-lmmgcl"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"drag-over",t[1])},m(U,v){G(U,e,v),s(e,l),s(e,a),s(e,r),s(e,d),s(e,h),s(e,y),S&&S.m(e,null),s(e,w),s(e,_),s(e,C),s(e,M),t[13](M),E||(N=[R(M,"change",t[9]),R(e,"drop",t[5]),R(e,"dragover",t[6]),R(e,"dragleave",t[7]),R(e,"click",t[8]),R(e,"keydown",t[14])],E=!0)},p(U,v){U[0]?S?S.p(U,v):(S=_s(U),S.c(),S.m(e,w)):S&&(S.d(1),S=null),v&2&&cl(e,"drag-over",U[1])},d(U){U&&f(e),S&&S.d(),t[13](null),E=!1,Bt(N)}}}function ka(t){let e,l,n,a,r,u=t[4].toFixed(1)+"",d,h,p,y,w='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop Recording</span>',_,T;return{c(){e=c("div"),l=c("div"),n=c("div"),a=b(),r=c("span"),d=X(u),h=X("s"),p=b(),y=c("button"),y.innerHTML=w,this.h()},l(C){e=o(C,"DIV",{class:!0});var M=m(e);l=o(M,"DIV",{class:!0});var E=m(l);n=o(E,"DIV",{class:!0}),m(n).forEach(f),a=g(E),r=o(E,"SPAN",{class:!0});var N=m(r);d=K(N,u),h=K(N,"s"),N.forEach(f),E.forEach(f),p=g(M),y=o(M,"BUTTON",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-135d7zb"&&(y.innerHTML=w),M.forEach(f),this.h()},h(){i(n,"class","recording-pulse svelte-lmmgcl"),i(r,"class","recording-time svelte-lmmgcl"),i(l,"class","recording-indicator svelte-lmmgcl"),i(y,"class","stop-record-btn svelte-lmmgcl"),i(e,"class","drop-zone recording svelte-lmmgcl")},m(C,M){G(C,e,M),s(e,l),s(l,n),s(l,a),s(l,r),s(r,d),s(r,h),s(e,p),s(e,y),_||(T=R(y,"click",t[11]),_=!0)},p(C,M){M&16&&u!==(u=C[4].toFixed(1)+"")&&se(d,u)},d(C){C&&f(e),_=!1,T()}}}function _s(t){let e,l,n="or",a,r,u='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" class="svelte-lmmgcl"><circle cx="12" cy="12" r="8"></circle></svg> <span>Record from Microphone</span>',d,h;return{c(){e=c("div"),l=c("span"),l.textContent=n,a=b(),r=c("button"),r.innerHTML=u,this.h()},l(p){e=o(p,"DIV",{class:!0});var y=m(e);l=o(y,"SPAN",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-1wtgm67"&&(l.textContent=n),a=g(y),r=o(y,"BUTTON",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-8eds6f"&&(r.innerHTML=u),y.forEach(f),this.h()},h(){i(l,"class","divider-text svelte-lmmgcl"),i(r,"class","record-btn svelte-lmmgcl"),i(e,"class","record-section svelte-lmmgcl")},m(p,y){G(p,e,y),s(e,l),s(e,a),s(e,r),d||(h=R(r,"click",js(t[10])),d=!0)},p:Tt,d(p){p&&f(e),d=!1,h()}}}function Ca(t){let e;function l(r,u){return r[3]?ka:ya}let n=l(t),a=n(t);return{c(){a.c(),e=Ct()},l(r){a.l(r),e=Ct()},m(r,u){a.m(r,u),G(r,e,u)},p(r,[u]){n===(n=l(r))&&a?a.p(r,u):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},i:Tt,o:Tt,d(r){r&&f(e),a.d(r)}}}function Ta(t,e,l){let{onFile:n}=e,{onRecordedBlob:a=void 0}=e,r=!1,u,d=!1,h=null,p=null,y=[],w=0,_=null;Zn(()=>{_&&clearInterval(_),h&&d&&h.stop(),p&&(p.getTracks().forEach(P=>P.stop()),p=null)});function T(P){var F;P.preventDefault(),l(1,r=!1);const B=(F=P.dataTransfer)==null?void 0:F.files[0];B&&n(B)}function C(P){P.preventDefault(),l(1,r=!0)}function M(){l(1,r=!1)}function E(){u.click()}function N(P){var A;const F=(A=P.target.files)==null?void 0:A[0];F&&n(F)}async function S(){if(a)try{const P=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});p=P,y=[],h=new MediaRecorder(P,{mimeType:"audio/webm"}),h.ondataavailable=B=>{B.data.size>0&&y.push(B.data)},h.onstop=async()=>{P.getTracks().forEach(F=>F.stop()),p=null;const B=new Blob(y,{type:"audio/webm"});a==null||a(B)},h.start(100),l(3,d=!0),l(4,w=0),_=setInterval(()=>{l(4,w+=.1)},100)}catch(P){console.error("Failed to start recording:",P),alert("Could not access microphone. Please allow microphone access.")}}function U(){h&&d&&(h.stop(),l(3,d=!1),_&&(clearInterval(_),_=null))}function v(P){jl[P?"unshift":"push"](()=>{u=P,l(2,u)})}const x=P=>P.key==="Enter"&&E();return t.$$set=P=>{"onFile"in P&&l(12,n=P.onFile),"onRecordedBlob"in P&&l(0,a=P.onRecordedBlob)},[a,r,u,d,w,T,C,M,E,N,S,U,n,v,x]}class Ea extends an{constructor(e){super(),rn(this,e,Ta,Ca,sn,{onFile:12,onRecordedBlob:0})}}function gs(t,e,l){const n=t.slice();n[48]=e[l];const a=Math.max(kt,n[17](n[48].start));n[49]=a;const r=Math.min(n[9],n[17](n[48].end));n[50]=r;const u=n[50]-n[49];n[51]=u;const d=n[49]-kt;return n[52]=d,n}function Yn(t){const e=t.slice(),l=e[48].end-e[48].start;e[55]=l;const n=e[55]>=1?e[55].toFixed(2)+"s":(e[55]*1e3).toFixed(0)+"ms";return e[56]=n,e}function bs(t){let e,l,n,a,r;function u(T,C){return T[4]===T[48].index?Ia:Na}let d=u(t),h=d(t);function p(...T){return t[34](t[48],...T)}function y(...T){return t[35](t[48],...T)}function w(...T){return t[36](t[48],...T)}let _=t[48].index>0&&ys(t);return{c(){e=c("div"),h.c(),l=b(),_&&_.c(),n=Ct(),this.h()},l(T){e=o(T,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var C=m(e);h.l(C),C.forEach(f),l=g(T),_&&_.l(T),n=Ct(),this.h()},h(){i(e,"class","interval svelte-1h3ij0x"),Me(e,"left",t[52]+"px"),Me(e,"width",t[51]+"px"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]&&t[10]===t[48].index)},m(T,C){G(T,e,C),h.m(e,null),G(T,l,C),_&&_.m(T,C),G(T,n,C),a||(r=[R(e,"click",p),R(e,"dblclick",y),R(e,"keydown",w)],a=!0)},p(T,C){t=T,d===(d=u(t))&&h?h.p(t,C):(h.d(1),h=d(t),h&&(h.c(),h.m(e,null))),C[0]&256&&Me(e,"left",t[52]+"px"),C[0]&768&&Me(e,"width",t[51]+"px"),C[0]&1284&&cl(e,"selected",t[2]&&t[10]===t[48].index),t[48].index>0?_?_.p(t,C):(_=ys(t),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null)},d(T){T&&(f(e),f(l),f(n)),h.d(),_&&_.d(T),a=!1,Bt(r)}}}function Na(t){let e,l=(t[48].text||" ")+"",n,a,r,u,d;function h(){return t[32](t[48])}function p(...w){return t[33](t[48],...w)}let y=t[51]>30&&ws(t);return{c(){e=c("span"),n=X(l),a=b(),y&&y.c(),r=Ct(),this.h()},l(w){e=o(w,"SPAN",{class:!0,role:!0,tabindex:!0});var _=m(e);n=K(_,l),_.forEach(f),a=g(w),y&&y.l(w),r=Ct(),this.h()},h(){i(e,"class","interval-text svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0")},m(w,_){G(w,e,_),s(e,n),G(w,a,_),y&&y.m(w,_),G(w,r,_),u||(d=[R(e,"click",js(h)),R(e,"keydown",p)],u=!0)},p(w,_){t=w,_[0]&256&&l!==(l=(t[48].text||" ")+"")&&se(n,l),t[51]>30?y?y.p(t,_):(y=ws(t),y.c(),y.m(r.parentNode,r)):y&&(y.d(1),y=null)},d(w){w&&(f(e),f(a),f(r)),y&&y.d(w),u=!1,Bt(d)}}}function Ia(t){let e,l,n;return{c(){e=c("input"),this.h()},l(a){e=o(a,"INPUT",{type:!0,class:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","interval-input svelte-1h3ij0x"),e.autofocus=!0},m(a,r){G(a,e,r),St(e,t[5]),e.focus(),l||(n=[R(e,"input",t[31]),R(e,"blur",t[26]),R(e,"keydown",t[27])],l=!0)},p(a,r){r[0]&32&&e.value!==a[5]&&St(e,a[5])},d(a){a&&f(e),l=!1,Bt(n)}}}function ws(t){let e,l=t[56]+"",n;return{c(){e=c("span"),n=X(l),this.h()},l(a){e=o(a,"SPAN",{class:!0});var r=m(e);n=K(r,l),r.forEach(f),this.h()},h(){i(e,"class","interval-duration svelte-1h3ij0x")},m(a,r){G(a,e,r),s(e,n)},p(a,r){r[0]&256&&l!==(l=a[56]+"")&&se(n,l)},d(a){a&&f(e)}}}function ys(t){let e,l,n,a;function r(...h){return t[37](t[48],...h)}function u(...h){return t[38](t[48],...h)}function d(...h){return t[39](t[48],...h)}return{c(){e=c("div"),this.h()},l(h){e=o(h,"DIV",{class:!0,style:!0,title:!0,role:!0,tabindex:!0,"aria-valuenow":!0}),m(e).forEach(f),this.h()},h(){i(e,"class","boundary svelte-1h3ij0x"),Me(e,"left",t[52]+"px"),i(e,"title","Drag to move, right-click to remove"),i(e,"role","slider"),i(e,"tabindex","0"),i(e,"aria-valuenow",l=t[48].start)},m(h,p){G(h,e,p),n||(a=[R(e,"mousedown",r),R(e,"contextmenu",u),R(e,"keydown",d)],n=!0)},p(h,p){t=h,p[0]&256&&Me(e,"left",t[52]+"px"),p[0]&256&&l!==(l=t[48].start)&&i(e,"aria-valuenow",l)},d(h){h&&f(e),n=!1,Bt(a)}}}function ks(t,e){let l,n,a=e[51]>2&&bs(Yn(e));return{key:t,first:null,c(){l=Ct(),a&&a.c(),n=Ct(),this.h()},l(r){l=Ct(),a&&a.l(r),n=Ct(),this.h()},h(){this.first=l},m(r,u){G(r,l,u),a&&a.m(r,u),G(r,n,u)},p(r,u){e=r,e[51]>2?a?a.p(Yn(e),u):(a=bs(Yn(e)),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(r){r&&(f(l),f(n)),a&&a.d(r)}}}function Cs(t){let e;return{c(){e=c("div"),this.h()},l(l){e=o(l,"DIV",{class:!0,style:!0}),m(e).forEach(f),this.h()},h(){i(e,"class","hover-cursor svelte-1h3ij0x"),Me(e,"left",t[17](t[11])+"px")},m(l,n){G(l,e,n)},p(l,n){n[0]&2048&&Me(e,"left",l[17](l[11])+"px")},d(l){l&&f(e)}}}function Ts(t){let e;return{c(){e=c("div"),this.h()},l(l){e=o(l,"DIV",{class:!0,style:!0}),m(e).forEach(f),this.h()},h(){i(e,"class","cursor svelte-1h3ij0x"),Me(e,"left",t[17](t[12])+"px")},m(l,n){G(l,e,n)},p(l,n){n[0]&4096&&Me(e,"left",l[17](l[12])+"px")},d(l){l&&f(e)}}}function Es(t){let e,l,n,a,r="Remove boundary",u,d;return{c(){e=c("div"),l=b(),n=c("div"),a=c("button"),a.textContent=r,this.h()},l(h){e=o(h,"DIV",{class:!0}),m(e).forEach(f),l=g(h),n=o(h,"DIV",{class:!0,style:!0});var p=m(n);a=o(p,"BUTTON",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-ypaiql"&&(a.textContent=r),p.forEach(f),this.h()},h(){i(e,"class","context-menu-backdrop svelte-1h3ij0x"),i(a,"class","context-menu-item svelte-1h3ij0x"),i(n,"class","context-menu svelte-1h3ij0x"),Me(n,"left",t[7].x+"px"),Me(n,"top",t[7].y+"px")},m(h,p){G(h,e,p),G(h,l,p),G(h,n,p),s(n,a),u||(d=[R(e,"click",t[15]),R(a,"click",t[16])],u=!0)},p(h,p){p[0]&128&&Me(n,"left",h[7].x+"px"),p[0]&128&&Me(n,"top",h[7].y+"px")},d(h){h&&(f(e),f(l),f(n)),u=!1,Bt(d)}}}function Da(t){let e,l,n,a,r,u,d=t[0].name+"",h,p,y,w=[],_=new Map,T,C=t[11]!==null&&t[17](t[11])>=kt&&t[17](t[11])<=t[9],M,E=t[17](t[12])>=kt&&t[17](t[12])<=t[9],N,S,U,v,x=nn(t[8]);const P=V=>V[48].index;for(let V=0;V<x.length;V+=1){let H=gs(t,x,V),Z=P(H);_.set(Z,w[V]=ks(Z,H))}let B=C&&Cs(t),F=E&&Ts(t),A=t[7]&&Es(t);return{c(){e=c("div"),l=c("div"),n=b(),a=c("div"),r=b(),u=c("div"),h=X(d),p=b(),y=c("div");for(let V=0;V<w.length;V+=1)w[V].c();T=b(),B&&B.c(),M=b(),F&&F.c(),N=b(),A&&A.c(),S=Ct(),this.h()},l(V){e=o(V,"DIV",{class:!0,role:!0,tabindex:!0});var H=m(e);l=o(H,"DIV",{class:!0,style:!0}),m(l).forEach(f),n=g(H),a=o(H,"DIV",{class:!0,style:!0}),m(a).forEach(f),r=g(H),u=o(H,"DIV",{class:!0});var Z=m(u);h=K(Z,d),Z.forEach(f),p=g(H),y=o(H,"DIV",{class:!0,style:!0});var ge=m(y);for(let be=0;be<w.length;be+=1)w[be].l(ge);ge.forEach(f),T=g(H),B&&B.l(H),M=g(H),F&&F.l(H),H.forEach(f),N=g(V),A&&A.l(V),S=Ct(),this.h()},h(){i(l,"class","margin-area left svelte-1h3ij0x"),Me(l,"width",kt+"px"),i(a,"class","margin-area right svelte-1h3ij0x"),Me(a,"width",Gl+"px"),i(u,"class","tier-label svelte-1h3ij0x"),i(y,"class","intervals svelte-1h3ij0x"),Me(y,"left",kt+"px"),Me(y,"right",Gl+"px"),i(e,"class","tier-container svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]),cl(e,"dragging",t[6])},m(V,H){G(V,e,H),s(e,l),s(e,n),s(e,a),s(e,r),s(e,u),s(u,h),s(e,p),s(e,y);for(let Z=0;Z<w.length;Z+=1)w[Z]&&w[Z].m(y,null);s(e,T),B&&B.m(e,null),s(e,M),F&&F.m(e,null),t[40](e),G(V,N,H),A&&A.m(V,H),G(V,S,H),U||(v=[R(window,"keydown",t[30]),R(window,"mouseup",t[20]),R(e,"click",t[18]),R(e,"dblclick",t[24]),R(e,"mousemove",t[19]),R(e,"mouseup",t[20]),R(e,"mouseleave",t[21]),R(e,"keydown",t[41])],U=!0)},p(V,H){H[0]&1&&d!==(d=V[0].name+"")&&se(h,d),H[0]&247621430&&(x=nn(V[8]),w=Ys(w,H,P,1,V,x,_,y,ba,ks,null,gs)),H[0]&2560&&(C=V[11]!==null&&V[17](V[11])>=kt&&V[17](V[11])<=V[9]),C?B?B.p(V,H):(B=Cs(V),B.c(),B.m(e,M)):B&&(B.d(1),B=null),H[0]&4608&&(E=V[17](V[12])>=kt&&V[17](V[12])<=V[9]),E?F?F.p(V,H):(F=Ts(V),F.c(),F.m(e,null)):F&&(F.d(1),F=null),H[0]&4&&cl(e,"selected",V[2]),H[0]&64&&cl(e,"dragging",V[6]),V[7]?A?A.p(V,H):(A=Es(V),A.c(),A.m(S.parentNode,S)):A&&(A.d(1),A=null)},i:Tt,o:Tt,d(V){V&&(f(e),f(N),f(S));for(let H=0;H<w.length;H+=1)w[H].d();B&&B.d(),F&&F.d(),t[40](null),A&&A.d(V),U=!1,Bt(v)}}}const kt=45,Gl=45;function Pa(t,e,l){let n,a,r,u,d,h,p;Ne(t,tn,I=>l(29,u=I)),Ne(t,jn,I=>l(10,d=I)),Ne(t,vn,I=>l(11,h=I)),Ne(t,ql,I=>l(12,p=I));let{tier:y}=e,{index:w}=e,{isSelected:_=!1}=e;qs();let T,C=0,M,E=null,N="",S=!1,U=null,v=null;function x(I,q){I.preventDefault(),I.stopPropagation(),bl.set(w),Zs(),l(6,S=!0),U=q}function P(I,q){I.preventDefault(),I.stopPropagation(),l(7,v={x:I.clientX,y:I.clientY,intervalIndex:q})}function B(){l(7,v=null)}function F(){v&&(bl.set(w),Qs(v.intervalIndex),l(7,v=null))}Hn(()=>{M=new ResizeObserver(I=>{const q=I[0].contentRect;l(28,C=q.width),q.height}),M.observe(T)}),Zn(()=>{M==null||M.disconnect()});function A(I){const{start:q,end:ae}=u;return kt+(I-q)/(ae-q)*n}function V(I){const{start:q,end:ae}=u;return q+(I-kt)/n*(ae-q)}function H(){bl.set(w)}function Z(I){const q=T.getBoundingClientRect(),ae=I.clientX-q.left;if((ae<kt||ae>C-Gl)&&(vn.set(null),!S))return;const $=V(ae);vn.set($),S&&U!==null&&$s(U,$)}function ge(){S&&(l(6,S=!1),U=null)}function be(){vn.set(null),S&&(l(6,S=!1),U=null)}function We(I,q){I.stopPropagation(),bl.set(w),jn.set(q);const ae=y.intervals[q];ae&&(ln.set({start:ae.start,end:ae.end}),ql.set(ae.start))}function ze(I,q){I.stopPropagation();const ae=T.getBoundingClientRect(),$=I.clientX-ae.left;if($<kt||$>C-Gl)return;const te=V($);bl.set(w),fs(te)}function Fe(I){const q=T.getBoundingClientRect(),ae=I.clientX-q.left;if(ae<kt||ae>C-Gl)return;const $=V(ae);bl.set(w),fs($)}function Ce(I){l(4,E=I),l(5,N=y.intervals[I].text)}function Be(){E!==null&&(ea(w,E,N),l(4,E=null),l(5,N=""))}function Te(I){I.key==="Enter"?Be():I.key==="Escape"&&(l(4,E=null),l(5,N=""))}const De=I=>I.key==="Escape"&&v&&B();function xe(){N=this.value,l(5,N)}const W=I=>{ln.set({start:I.start,end:I.end}),ql.set(I.start),Ce(I.index)},me=(I,q)=>q.key==="Enter"&&Ce(I.index),re=(I,q)=>We(q,I.index),Pe=(I,q)=>ze(q,I.index),Ae=(I,q)=>{q.key==="Enter"&&(bl.set(w),jn.set(I.index))},Ve=(I,q)=>x(q,I.index),ye=(I,q)=>P(q,I.index),_e=(I,q)=>q.key==="Enter"&&Ce(I.index);function Se(I){jl[I?"unshift":"push"](()=>{T=I,l(3,T)})}const Ge=I=>I.key==="Enter"&&H();return t.$$set=I=>{"tier"in I&&l(0,y=I.tier),"index"in I&&l(1,w=I.index),"isSelected"in I&&l(2,_=I.isSelected)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&(n=Math.max(0,C-kt-Gl)),t.$$.dirty[0]&268435456&&l(9,a=C-Gl),t.$$.dirty[0]&536870913&&l(8,r=(()=>{const{start:I,end:q}=u;return y.intervals.map((ae,$)=>({...ae,index:$})).filter(ae=>ae.end>I&&ae.start<q)})())},[y,w,_,T,E,N,S,v,r,a,d,h,p,x,P,B,F,A,H,Z,ge,be,We,ze,Fe,Ce,Be,Te,C,u,De,xe,W,me,re,Pe,Ae,Ve,ye,_e,Se,Ge]}class Aa extends an{constructor(e){super(),rn(this,e,Pa,Da,sn,{tier:0,index:1,isSelected:2},null,[-1,-1])}}function Ns(t){let e,l;return{c(){e=c("div"),l=X(t[0]),this.h()},l(n){e=o(n,"DIV",{class:!0});var a=m(e);l=K(a,t[0]),a.forEach(f),this.h()},h(){i(e,"class","modal-header svelte-1vzci29")},m(n,a){G(n,e,a),s(e,l)},p(n,a){a&1&&se(l,n[0])},d(n){n&&f(e)}}}function Is(t){let e,l;return{c(){e=c("p"),l=X(t[2]),this.h()},l(n){e=o(n,"P",{class:!0});var a=m(e);l=K(a,t[2]),a.forEach(f),this.h()},h(){i(e,"class","modal-message svelte-1vzci29")},m(n,a){G(n,e,a),s(e,l)},p(n,a){a&4&&se(l,n[2])},d(n){n&&f(e)}}}function Ds(t){let e,l,n;return{c(){e=c("input"),this.h()},l(a){e=o(a,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","modal-input svelte-1vzci29"),i(e,"placeholder",t[3])},m(a,r){G(a,e,r),t[14](e),St(e,t[6]),l||(n=[R(e,"input",t[15]),R(e,"keydown",t[11])],l=!0)},p(a,r){r&8&&i(e,"placeholder",a[3]),r&64&&e.value!==a[6]&&St(e,a[6])},d(a){a&&f(e),t[14](null),l=!1,Bt(n)}}}function Ps(t){let e,l,n,a;return{c(){e=c("button"),l=X(t[5]),this.h()},l(r){e=o(r,"BUTTON",{class:!0});var u=m(e);l=K(u,t[5]),u.forEach(f),this.h()},h(){i(e,"class","modal-btn cancel svelte-1vzci29")},m(r,u){G(r,e,u),s(e,l),n||(a=R(e,"click",t[9]),n=!0)},p(r,u){u&32&&se(l,r[5])},d(r){r&&f(e),n=!1,a()}}}function xa(t){let e,l,n,a,r,u,d,h,p,y,w,_,T=t[0]&&Ns(t),C=t[2]&&Is(t),M=t[1]==="prompt"&&Ds(t),E=t[1]!=="alert"&&Ps(t);return{c(){e=c("div"),l=c("div"),T&&T.c(),n=b(),a=c("div"),C&&C.c(),r=b(),M&&M.c(),u=b(),d=c("div"),E&&E.c(),h=b(),p=c("button"),y=X(t[4]),this.h()},l(N){e=o(N,"DIV",{class:!0,role:!0,"aria-modal":!0});var S=m(e);l=o(S,"DIV",{class:!0});var U=m(l);T&&T.l(U),n=g(U),a=o(U,"DIV",{class:!0});var v=m(a);C&&C.l(v),r=g(v),M&&M.l(v),v.forEach(f),u=g(U),d=o(U,"DIV",{class:!0});var x=m(d);E&&E.l(x),h=g(x),p=o(x,"BUTTON",{class:!0});var P=m(p);y=K(P,t[4]),P.forEach(f),x.forEach(f),U.forEach(f),S.forEach(f),this.h()},h(){i(a,"class","modal-body svelte-1vzci29"),i(p,"class","modal-btn confirm svelte-1vzci29"),i(d,"class","modal-footer svelte-1vzci29"),i(l,"class","modal svelte-1vzci29"),i(e,"class","modal-backdrop svelte-1vzci29"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(N,S){G(N,e,S),s(e,l),T&&T.m(l,null),s(l,n),s(l,a),C&&C.m(a,null),s(a,r),M&&M.m(a,null),s(l,u),s(l,d),E&&E.m(d,null),s(d,h),s(d,p),s(p,y),w||(_=[R(window,"keydown",t[10]),R(p,"click",t[8]),R(e,"click",t[12])],w=!0)},p(N,[S]){N[0]?T?T.p(N,S):(T=Ns(N),T.c(),T.m(l,n)):T&&(T.d(1),T=null),N[2]?C?C.p(N,S):(C=Is(N),C.c(),C.m(a,r)):C&&(C.d(1),C=null),N[1]==="prompt"?M?M.p(N,S):(M=Ds(N),M.c(),M.m(a,null)):M&&(M.d(1),M=null),N[1]!=="alert"?E?E.p(N,S):(E=Ps(N),E.c(),E.m(d,h)):E&&(E.d(1),E=null),S&16&&se(y,N[4])},i:Tt,o:Tt,d(N){N&&f(e),T&&T.d(),C&&C.d(),M&&M.d(),E&&E.d(),w=!1,Bt(_)}}}function Sa(t,e,l){let{title:n=""}=e,{type:a="alert"}=e,{message:r=""}=e,{placeholder:u=""}=e,{initialValue:d=""}=e,{confirmText:h="OK"}=e,{cancelText:p="Cancel"}=e;const y=qs();let w=d,_;Hn(()=>{a==="prompt"&&_&&(_.focus(),_.select())});function T(){a==="prompt"?y("confirm",w):y("confirm")}function C(){y("cancel")}function M(v){v.key==="Escape"?C():v.key==="Enter"&&a!=="prompt"&&T()}function E(v){v.key==="Enter"?T():v.key==="Escape"&&C()}function N(v){v.target===v.currentTarget&&C()}function S(v){jl[v?"unshift":"push"](()=>{_=v,l(7,_)})}function U(){w=this.value,l(6,w)}return t.$$set=v=>{"title"in v&&l(0,n=v.title),"type"in v&&l(1,a=v.type),"message"in v&&l(2,r=v.message),"placeholder"in v&&l(3,u=v.placeholder),"initialValue"in v&&l(13,d=v.initialValue),"confirmText"in v&&l(4,h=v.confirmText),"cancelText"in v&&l(5,p=v.cancelText)},[n,a,r,u,h,p,w,_,T,C,M,E,N,d,S,U]}class mn extends an{constructor(e){super(),rn(this,e,Sa,xa,sn,{title:0,type:1,message:2,placeholder:3,initialValue:13,confirmText:4,cancelText:5})}}function As(t,e,l){const n=t.slice();return n[18]=e[l],n[20]=l,n}function xs(t,e){let l,n,a;return n=new Aa({props:{tier:e[18],index:e[20],isSelected:e[20]===e[4]}}),{key:t,first:null,c(){l=c("div"),Ht(n.$$.fragment),this.h()},l(r){l=o(r,"DIV",{class:!0});var u=m(l);Ot(n.$$.fragment,u),u.forEach(f),this.h()},h(){i(l,"class","tier-row svelte-13sadlc"),this.first=l},m(r,u){G(r,l,u),zt(n,l,null),a=!0},p(r,u){e=r;const d={};u&32&&(d.tier=e[18]),u&32&&(d.index=e[20]),u&48&&(d.isSelected=e[20]===e[4]),n.$set(d)},i(r){a||(ve(n.$$.fragment,r),a=!0)},o(r){Ie(n.$$.fragment,r),a=!1},d(r){r&&f(l),Ut(n)}}}function Ss(t){let e,l='No annotation tiers. Click "+ Tier" to add one, or import a TextGrid.';return{c(){e=c("div"),e.textContent=l,this.h()},l(n){e=o(n,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-11870wl"&&(e.textContent=l),this.h()},h(){i(e,"class","empty-message svelte-13sadlc")},m(n,a){G(n,e,a)},d(n){n&&f(e)}}}function Bs(t){let e,l;return e=new mn({props:{title:"Add Tier",type:"prompt",message:"Enter a name for the new tier:",placeholder:"Tier name",initialValue:`Tier ${t[5].length+1}`,confirmText:"Add"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ht(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,a){zt(e,n,a),l=!0},p(n,a){const r={};a&32&&(r.initialValue=`Tier ${n[5].length+1}`),e.$set(r)},i(n){l||(ve(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ut(e,n)}}}function Ms(t){var n;let e,l;return e=new mn({props:{title:"Rename Tier",type:"prompt",message:"Enter a new name for the tier:",placeholder:"Tier name",initialValue:((n=t[5][t[4]])==null?void 0:n.name)||"",confirmText:"Rename"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ht(e.$$.fragment)},l(a){Ot(e.$$.fragment,a)},m(a,r){zt(e,a,r),l=!0},p(a,r){var d;const u={};r&48&&(u.initialValue=((d=a[5][a[4]])==null?void 0:d.name)||""),e.$set(u)},i(a){l||(ve(e.$$.fragment,a),l=!0)},o(a){Ie(e.$$.fragment,a),l=!1},d(a){Ut(e,a)}}}function Vs(t){var n;let e,l;return e=new mn({props:{title:"Remove Tier",type:"confirm",message:`Are you sure you want to remove tier "${(n=t[5][t[4]])==null?void 0:n.name}"?`,confirmText:"Remove"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ht(e.$$.fragment)},l(a){Ot(e.$$.fragment,a)},m(a,r){zt(e,a,r),l=!0},p(a,r){var d;const u={};r&48&&(u.message=`Are you sure you want to remove tier "${(d=a[5][a[4]])==null?void 0:d.name}"?`),e.$set(u)},i(a){l||(ve(e.$$.fragment,a),l=!0)},o(a){Ie(e.$$.fragment,a),l=!1},d(a){Ut(e,a)}}}function Ls(t){let e,l;return e=new mn({props:{title:"Notice",type:"alert",message:t[2]}}),e.$on("confirm",t[13]),{c(){Ht(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,a){zt(e,n,a),l=!0},p(n,a){const r={};a&4&&(r.message=n[2]),e.$set(r)},i(n){l||(ve(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ut(e,n)}}}function Rs(t){let e,l;return e=new mn({props:{title:"Export TextGrid",type:"prompt",message:"Enter a filename for the TextGrid:",placeholder:"filename.TextGrid",initialValue:t[3],confirmText:"Export"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ht(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,a){zt(e,n,a),l=!0},p(n,a){const r={};a&8&&(r.initialValue=n[3]),e.$set(r)},i(n){l||(ve(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ut(e,n)}}}function Ba(t){let e,l,n,a="Import",r,u,d="Export",h,p,y,w,_="+ Tier",T,C,M="Rename",E,N,S="- Tier",U,v,x,P,B="Undo",F,A,V="Redo",H,Z,ge=t[5].length+"",be,We,ze=t[5].length!==1?"s":"",Fe,Ce,Be,Te=[],De=new Map,xe,W,me,re,Pe,Ae,Ve,ye,_e,Se,Ge,I,q=nn(t[5]);const ae=D=>D[20];for(let D=0;D<q.length;D+=1){let z=As(t,q,D),le=ae(z);De.set(le,Te[D]=xs(le,z))}let $=t[5].length===0&&Ss(),te=t[1]==="addTier"&&Bs(t),fe=t[1]==="renameTier"&&Ms(t),ce=t[1]==="removeTier"&&Vs(t),we=t[1]==="alert"&&Ls(t),oe=t[1]==="exportTextGrid"&&Rs(t);return{c(){e=c("div"),l=c("div"),n=c("button"),n.textContent=a,r=b(),u=c("button"),u.textContent=d,h=b(),p=c("span"),y=b(),w=c("button"),w.textContent=_,T=b(),C=c("button"),C.textContent=M,E=b(),N=c("button"),N.textContent=S,U=b(),v=c("span"),x=b(),P=c("button"),P.textContent=B,F=b(),A=c("button"),A.textContent=V,H=b(),Z=c("span"),be=X(ge),We=X(" tier"),Fe=X(ze),Ce=b(),Be=c("div");for(let D=0;D<Te.length;D+=1)Te[D].c();xe=b(),$&&$.c(),W=b(),me=c("input"),re=b(),te&&te.c(),Pe=b(),fe&&fe.c(),Ae=b(),ce&&ce.c(),Ve=b(),we&&we.c(),ye=b(),oe&&oe.c(),_e=Ct(),this.h()},l(D){e=o(D,"DIV",{class:!0});var z=m(e);l=o(z,"DIV",{class:!0});var le=m(l);n=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1yaizdz"&&(n.textContent=a),r=g(le),u=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(u)!=="svelte-1aay3nq"&&(u.textContent=d),h=g(le),p=o(le,"SPAN",{class:!0}),m(p).forEach(f),y=g(le),w=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(w)!=="svelte-269lo2"&&(w.textContent=_),T=g(le),C=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(C)!=="svelte-6whcxg"&&(C.textContent=M),E=g(le),N=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(N)!=="svelte-1kr0wch"&&(N.textContent=S),U=g(le),v=o(le,"SPAN",{class:!0}),m(v).forEach(f),x=g(le),P=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(P)!=="svelte-wb3yww"&&(P.textContent=B),F=g(le),A=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),O(A)!=="svelte-2mf54l"&&(A.textContent=V),H=g(le),Z=o(le,"SPAN",{class:!0});var Le=m(Z);be=K(Le,ge),We=K(Le," tier"),Fe=K(Le,ze),Le.forEach(f),le.forEach(f),Ce=g(z),Be=o(z,"DIV",{class:!0});var it=m(Be);for(let _t=0;_t<Te.length;_t+=1)Te[_t].l(it);xe=g(it),$&&$.l(it),it.forEach(f),W=g(z),me=o(z,"INPUT",{type:!0,accept:!0,style:!0}),z.forEach(f),re=g(D),te&&te.l(D),Pe=g(D),fe&&fe.l(D),Ae=g(D),ce&&ce.l(D),Ve=g(D),we&&we.l(D),ye=g(D),oe&&oe.l(D),_e=Ct(),this.h()},h(){i(n,"title","Import TextGrid"),i(n,"class","svelte-13sadlc"),i(u,"title","Export TextGrid"),i(u,"class","svelte-13sadlc"),i(p,"class","separator svelte-13sadlc"),i(w,"title","Add new tier"),i(w,"class","svelte-13sadlc"),i(C,"title","Rename selected tier"),i(C,"class","svelte-13sadlc"),i(N,"title","Remove selected tier"),i(N,"class","svelte-13sadlc"),i(v,"class","separator svelte-13sadlc"),i(P,"title","Undo (Ctrl+Z)"),i(P,"class","svelte-13sadlc"),i(A,"title","Redo (Ctrl+Y)"),i(A,"class","svelte-13sadlc"),i(Z,"class","tier-count svelte-13sadlc"),i(l,"class","annotation-toolbar svelte-13sadlc"),i(Be,"class","tiers-container svelte-13sadlc"),i(me,"type","file"),i(me,"accept",".TextGrid,.textgrid,.txt,text/plain"),Me(me,"display","none"),i(e,"class","annotation-editor svelte-13sadlc")},m(D,z){G(D,e,z),s(e,l),s(l,n),s(l,r),s(l,u),s(l,h),s(l,p),s(l,y),s(l,w),s(l,T),s(l,C),s(l,E),s(l,N),s(l,U),s(l,v),s(l,x),s(l,P),s(l,F),s(l,A),s(l,H),s(l,Z),s(Z,be),s(Z,We),s(Z,Fe),s(e,Ce),s(e,Be);for(let le=0;le<Te.length;le+=1)Te[le]&&Te[le].m(Be,null);s(Be,xe),$&&$.m(Be,null),s(e,W),s(e,me),t[14](me),G(D,re,z),te&&te.m(D,z),G(D,Pe,z),fe&&fe.m(D,z),G(D,Ae,z),ce&&ce.m(D,z),G(D,Ve,z),we&&we.m(D,z),G(D,ye,z),oe&&oe.m(D,z),G(D,_e,z),Se=!0,Ge||(I=[R(n,"click",t[6]),R(u,"click",t[8]),R(w,"click",t[9]),R(C,"click",t[11]),R(N,"click",t[10]),R(P,"click",Ws),R(A,"click",Jn),R(me,"change",t[7])],Ge=!0)},p(D,[z]){(!Se||z&32)&&ge!==(ge=D[5].length+"")&&se(be,ge),(!Se||z&32)&&ze!==(ze=D[5].length!==1?"s":"")&&se(Fe,ze),z&48&&(q=nn(D[5]),Ol(),Te=Ys(Te,z,ae,1,D,q,De,Be,wa,xs,xe,As),Hl()),D[5].length===0?$||($=Ss(),$.c(),$.m(Be,null)):$&&($.d(1),$=null),D[1]==="addTier"?te?(te.p(D,z),z&2&&ve(te,1)):(te=Bs(D),te.c(),ve(te,1),te.m(Pe.parentNode,Pe)):te&&(Ol(),Ie(te,1,1,()=>{te=null}),Hl()),D[1]==="renameTier"?fe?(fe.p(D,z),z&2&&ve(fe,1)):(fe=Ms(D),fe.c(),ve(fe,1),fe.m(Ae.parentNode,Ae)):fe&&(Ol(),Ie(fe,1,1,()=>{fe=null}),Hl()),D[1]==="removeTier"?ce?(ce.p(D,z),z&2&&ve(ce,1)):(ce=Vs(D),ce.c(),ve(ce,1),ce.m(Ve.parentNode,Ve)):ce&&(Ol(),Ie(ce,1,1,()=>{ce=null}),Hl()),D[1]==="alert"?we?(we.p(D,z),z&2&&ve(we,1)):(we=Ls(D),we.c(),ve(we,1),we.m(ye.parentNode,ye)):we&&(Ol(),Ie(we,1,1,()=>{we=null}),Hl()),D[1]==="exportTextGrid"?oe?(oe.p(D,z),z&2&&ve(oe,1)):(oe=Rs(D),oe.c(),ve(oe,1),oe.m(_e.parentNode,_e)):oe&&(Ol(),Ie(oe,1,1,()=>{oe=null}),Hl())},i(D){if(!Se){for(let z=0;z<q.length;z+=1)ve(Te[z]);ve(te),ve(fe),ve(ce),ve(we),ve(oe),Se=!0}},o(D){for(let z=0;z<Te.length;z+=1)Ie(Te[z]);Ie(te),Ie(fe),Ie(ce),Ie(we),Ie(oe),Se=!1},d(D){D&&(f(e),f(re),f(Pe),f(Ae),f(Ve),f(ye),f(_e));for(let z=0;z<Te.length;z+=1)Te[z].d();$&&$.d(),t[14](null),te&&te.d(D),fe&&fe.d(D),ce&&ce.d(D),we&&we.d(D),oe&&oe.d(D),Ge=!1,Bt(I)}}}function Ma(t,e,l){let n,a,r;Ne(t,bl,x=>l(4,n=x)),Ne(t,On,x=>l(5,a=x)),Ne(t,zn,x=>l(15,r=x));let u,d=null,h="",p="annotations.TextGrid";Hn(()=>{a.length===0&&ta()});function y(x){l(2,h=x),l(1,d="alert")}function w(){u.click()}async function _(x){var F;const P=x.target,B=(F=P.files)==null?void 0:F[0];if(B){try{const A=await B.text();la(A)}catch(A){console.error("Failed to load TextGrid:",A),y("Failed to parse TextGrid file: "+(A instanceof Error?A.message:String(A)))}P.value=""}}async function T(){if(r){const x=r.replace(/\.[^/.]+$/,"");l(3,p=x+".TextGrid")}else l(3,p="annotations.TextGrid");if("showSaveFilePicker"in window)try{const x=ds(),B=await(await window.showSaveFilePicker({suggestedName:p,types:[{description:"Praat TextGrid",accept:{"text/plain":[".TextGrid"]}}]})).createWritable();await B.write(x),await B.close();return}catch(x){if(x.name==="AbortError")return}l(1,d="exportTextGrid")}function C(x){const P=ds(),B=new Blob([P],{type:"text/plain"}),F=URL.createObjectURL(B),A=document.createElement("a");A.href=F,A.download=x.endsWith(".TextGrid")?x:x+".TextGrid",A.click(),URL.revokeObjectURL(F)}function M(){l(1,d="addTier")}function E(){if(a.length<=1){y("Cannot remove the last tier");return}l(1,d="removeTier")}function N(){l(1,d="renameTier")}function S(x){var B;const P=d;if(l(1,d=null),P==="addTier"&&typeof x.detail=="string"&&x.detail)na(x.detail);else if(P==="renameTier"&&typeof x.detail=="string"&&x.detail){const F=((B=a[n])==null?void 0:B.name)||"";x.detail!==F&&sa(n,x.detail)}else P==="removeTier"?aa(n):P==="exportTextGrid"&&typeof x.detail=="string"&&x.detail&&C(x.detail)}function U(){l(1,d=null)}function v(x){jl[x?"unshift":"push"](()=>{u=x,l(0,u)})}return[u,d,h,p,n,a,w,_,T,M,E,N,S,U,v]}class Va extends an{constructor(e){super(),rn(this,e,Ma,Ba,sn,{})}}function Fs(t,e,l){const n=t.slice();return n[22]=e[l],n}function Us(t){let e,l,n="Annotation",a,r=nn(t[1]),u=[];for(let d=0;d<r.length;d+=1)u[d]=zs(Fs(t,r,d));return{c(){e=c("div"),l=c("div"),l.textContent=n,a=b();for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=o(d,"DIV",{class:!0});var h=m(e);l=o(h,"DIV",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-16eifwe"&&(l.textContent=n),a=g(h);for(let p=0;p<u.length;p+=1)u[p].l(h);h.forEach(f),this.h()},h(){i(l,"class","section-title svelte-1etf494"),i(e,"class","section svelte-1etf494")},m(d,h){G(d,e,h),s(e,l),s(e,a);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(e,null)},p(d,h){if(h&2){r=nn(d[1]);let p;for(p=0;p<r.length;p+=1){const y=Fs(d,r,p);u[p]?u[p].p(y,h):(u[p]=zs(y),u[p].c(),u[p].m(e,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=r.length}},d(d){d&&f(e),Js(u,d)}}}function zs(t){let e,l,n=t[22].tierName+"",a,r,u,d=t[22].text+"",h,p;return{c(){e=c("div"),l=c("span"),a=X(n),r=b(),u=c("span"),h=X(d),p=b(),this.h()},l(y){e=o(y,"DIV",{class:!0});var w=m(e);l=o(w,"SPAN",{class:!0});var _=m(l);a=K(_,n),_.forEach(f),r=g(w),u=o(w,"SPAN",{class:!0});var T=m(u);h=K(T,d),T.forEach(f),p=g(w),w.forEach(f),this.h()},h(){i(l,"class","tier-name svelte-1etf494"),i(u,"class","interval-text svelte-1etf494"),i(e,"class","annotation-row svelte-1etf494")},m(y,w){G(y,e,w),s(e,l),s(l,a),s(e,r),s(e,u),s(u,h),s(e,p)},p(y,w){w&2&&n!==(n=y[22].tierName+"")&&se(a,n),w&2&&d!==(d=y[22].text+"")&&se(h,d)},d(y){y&&f(e)}}}function La(t){let e,l,n,a=t[0].toFixed(3)+"",r,u,d,h,p,y="Pitch & Voice",w,_,T,C,M="F0",E,N,S=Un(t[16])+"",U,v,x,P,B="Int",F,A,V=en(t[15])+"",H,Z,ge,be,We="HNR",ze,Fe,Ce=en(t[6])+"",Be,Te,De,xe,W="Formants",me,re,Pe,Ae='<th class="svelte-1etf494"></th> <th class="svelte-1etf494">Freq</th> <th class="svelte-1etf494">BW</th>',Ve,ye,_e,Se="F1",Ge,I,q=at(t[14])+"",ae,$,te,fe=at(t[10])+"",ce,we,oe,D,z="F2",le,Le,it=at(t[13])+"",_t,rt,Ke,qt=at(t[9])+"",gt,wl,ot,k,Y="F3",Q,j,de=at(t[12])+"",pe,ne,ee,ct=at(t[8])+"",Ee,Ue,je,Xe,Wt="F4",Pl,bt,yl=at(t[11])+"",kl,ul,$t,ut=at(t[7])+"",Et,Al,et,el,Wl="Spectral",Nt,ft,Mt,Vt,Cl="CoG",xl,dt,It=Un(t[5])+"",Sl,Bl,Re,Ye,on="Tilt",Dt,fl,ht=t[4]!==null?`${t[4].toFixed(1)} dB/oct`:"—",Ml,Vl,Je,pt,cn="A1-P0",Ll,Oe,vt=en(t[3])+"",Rl,Pt,Kt,Ze,un="NMR",Fl,tt,At=(t[2]!==null?t[2].toFixed(3):"—")+"",Ul,zl,ke=t[1].length>0&&Us(t);return{c(){e=c("div"),l=c("div"),n=c("span"),r=X(a),u=X("s"),d=b(),h=c("div"),p=c("div"),p.textContent=y,w=b(),_=c("div"),T=c("div"),C=c("span"),C.textContent=M,E=b(),N=c("span"),U=X(S),v=b(),x=c("div"),P=c("span"),P.textContent=B,F=b(),A=c("span"),H=X(V),Z=b(),ge=c("div"),be=c("span"),be.textContent=We,ze=b(),Fe=c("span"),Be=X(Ce),Te=b(),De=c("div"),xe=c("div"),xe.textContent=W,me=b(),re=c("table"),Pe=c("tr"),Pe.innerHTML=Ae,Ve=b(),ye=c("tr"),_e=c("td"),_e.textContent=Se,Ge=b(),I=c("td"),ae=X(q),$=b(),te=c("td"),ce=X(fe),we=b(),oe=c("tr"),D=c("td"),D.textContent=z,le=b(),Le=c("td"),_t=X(it),rt=b(),Ke=c("td"),gt=X(qt),wl=b(),ot=c("tr"),k=c("td"),k.textContent=Y,Q=b(),j=c("td"),pe=X(de),ne=b(),ee=c("td"),Ee=X(ct),Ue=b(),je=c("tr"),Xe=c("td"),Xe.textContent=Wt,Pl=b(),bt=c("td"),kl=X(yl),ul=b(),$t=c("td"),Et=X(ut),Al=b(),et=c("div"),el=c("div"),el.textContent=Wl,Nt=b(),ft=c("div"),Mt=c("div"),Vt=c("span"),Vt.textContent=Cl,xl=b(),dt=c("span"),Sl=X(It),Bl=b(),Re=c("div"),Ye=c("span"),Ye.textContent=on,Dt=b(),fl=c("span"),Ml=X(ht),Vl=b(),Je=c("div"),pt=c("span"),pt.textContent=cn,Ll=b(),Oe=c("span"),Rl=X(vt),Pt=b(),Kt=c("div"),Ze=c("span"),Ze.textContent=un,Fl=b(),tt=c("span"),Ul=X(At),zl=b(),ke&&ke.c(),this.h()},l(ie){e=o(ie,"DIV",{class:!0});var ue=m(e);l=o(ue,"DIV",{class:!0});var Lt=m(l);n=o(Lt,"SPAN",{class:!0});var Kl=m(n);r=K(Kl,a),u=K(Kl,"s"),Kl.forEach(f),Lt.forEach(f),d=g(ue),h=o(ue,"DIV",{class:!0});var wt=m(h);p=o(wt,"DIV",{class:!0,"data-svelte-h":!0}),O(p)!=="svelte-d0x3ep"&&(p.textContent=y),w=g(wt),_=o(wt,"DIV",{class:!0});var dl=m(_);T=o(dl,"DIV",{class:!0});var Tl=m(T);C=o(Tl,"SPAN",{class:!0,"data-svelte-h":!0}),O(C)!=="svelte-1cn36l0"&&(C.textContent=M),E=g(Tl),N=o(Tl,"SPAN",{class:!0});var Xt=m(N);U=K(Xt,S),Xt.forEach(f),Tl.forEach(f),v=g(dl),x=o(dl,"DIV",{class:!0});var Qe=m(x);P=o(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),O(P)!=="svelte-1kbwfyu"&&(P.textContent=B),F=g(Qe),A=o(Qe,"SPAN",{class:!0});var hl=m(A);H=K(hl,V),hl.forEach(f),Qe.forEach(f),Z=g(dl),ge=o(dl,"DIV",{class:!0});var Rt=m(ge);be=o(Rt,"SPAN",{class:!0,"data-svelte-h":!0}),O(be)!=="svelte-1wxjkk8"&&(be.textContent=We),ze=g(Rt),Fe=o(Rt,"SPAN",{class:!0});var Xl=m(Fe);Be=K(Xl,Ce),Xl.forEach(f),Rt.forEach(f),dl.forEach(f),wt.forEach(f),Te=g(ue),De=o(ue,"DIV",{class:!0});var Yt=m(De);xe=o(Yt,"DIV",{class:!0,"data-svelte-h":!0}),O(xe)!=="svelte-sqr9el"&&(xe.textContent=W),me=g(Yt),re=o(Yt,"TABLE",{class:!0});var He=m(re);Pe=o(He,"TR",{"data-svelte-h":!0}),O(Pe)!=="svelte-316y0v"&&(Pe.innerHTML=Ae),Ve=g(He),ye=o(He,"TR",{});var tl=m(ye);_e=o(tl,"TD",{class:!0,"data-svelte-h":!0}),O(_e)!=="svelte-1iujy6z"&&(_e.textContent=Se),Ge=g(tl),I=o(tl,"TD",{class:!0});var pl=m(I);ae=K(pl,q),pl.forEach(f),$=g(tl),te=o(tl,"TD",{class:!0});var ll=m(te);ce=K(ll,fe),ll.forEach(f),tl.forEach(f),we=g(He),oe=o(He,"TR",{});var nl=m(oe);D=o(nl,"TD",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-kfs2py"&&(D.textContent=z),le=g(nl),Le=o(nl,"TD",{class:!0});var vl=m(Le);_t=K(vl,it),vl.forEach(f),rt=g(nl),Ke=o(nl,"TD",{class:!0});var sl=m(Ke);gt=K(sl,qt),sl.forEach(f),nl.forEach(f),wl=g(He),ot=o(He,"TR",{});var al=m(ot);k=o(al,"TD",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-h8k9fd"&&(k.textContent=Y),Q=g(al),j=o(al,"TD",{class:!0});var il=m(j);pe=K(il,de),il.forEach(f),ne=g(al),ee=o(al,"TD",{class:!0});var Yl=m(ee);Ee=K(Yl,ct),Yl.forEach(f),al.forEach(f),Ue=g(He),je=o(He,"TR",{});var mt=m(je);Xe=o(mt,"TD",{class:!0,"data-svelte-h":!0}),O(Xe)!=="svelte-zz0m8k"&&(Xe.textContent=Wt),Pl=g(mt),bt=o(mt,"TD",{class:!0});var Jt=m(bt);kl=K(Jt,yl),Jt.forEach(f),ul=g(mt),$t=o(mt,"TD",{class:!0});var Jl=m($t);Et=K(Jl,ut),Jl.forEach(f),mt.forEach(f),He.forEach(f),Yt.forEach(f),Al=g(ue),et=o(ue,"DIV",{class:!0});var rl=m(et);el=o(rl,"DIV",{class:!0,"data-svelte-h":!0}),O(el)!=="svelte-19lj3il"&&(el.textContent=Wl),Nt=g(rl),ft=o(rl,"DIV",{class:!0});var xt=m(ft);Mt=o(xt,"DIV",{class:!0});var El=m(Mt);Vt=o(El,"SPAN",{class:!0,"data-svelte-h":!0}),O(Vt)!=="svelte-m4uzze"&&(Vt.textContent=Cl),xl=g(El),dt=o(El,"SPAN",{class:!0});var Nl=m(dt);Sl=K(Nl,It),Nl.forEach(f),El.forEach(f),Bl=g(xt),Re=o(xt,"DIV",{class:!0});var ml=m(Re);Ye=o(ml,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ye)!=="svelte-124pemq"&&(Ye.textContent=on),Dt=g(ml),fl=o(ml,"SPAN",{class:!0});var Zl=m(fl);Ml=K(Zl,ht),Zl.forEach(f),ml.forEach(f),Vl=g(xt),Je=o(xt,"DIV",{class:!0});var Zt=m(Je);pt=o(Zt,"SPAN",{class:!0,"data-svelte-h":!0}),O(pt)!=="svelte-hotqe4"&&(pt.textContent=cn),Ll=g(Zt),Oe=o(Zt,"SPAN",{class:!0});var fn=m(Oe);Rl=K(fn,vt),fn.forEach(f),Zt.forEach(f),Pt=g(xt),Kt=o(xt,"DIV",{class:!0});var $e=m(Kt);Ze=o($e,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ze)!=="svelte-avoxxe"&&(Ze.textContent=un),Fl=g($e),tt=o($e,"SPAN",{class:!0});var Ql=m(tt);Ul=K(Ql,At),Ql.forEach(f),$e.forEach(f),xt.forEach(f),rl.forEach(f),zl=g(ue),ke&&ke.l(ue),ue.forEach(f),this.h()},h(){i(n,"class","time-label svelte-1etf494"),i(l,"class","panel-header svelte-1etf494"),i(p,"class","section-title svelte-1etf494"),i(C,"class","label pitch-label svelte-1etf494"),i(N,"class","value svelte-1etf494"),i(T,"class","value-row svelte-1etf494"),i(P,"class","label intensity-label svelte-1etf494"),i(A,"class","value svelte-1etf494"),i(x,"class","value-row svelte-1etf494"),i(be,"class","label hnr-label svelte-1etf494"),i(Fe,"class","value svelte-1etf494"),i(ge,"class","value-row svelte-1etf494"),i(_,"class","values-grid svelte-1etf494"),i(h,"class","section svelte-1etf494"),i(xe,"class","section-title svelte-1etf494"),i(_e,"class","label f-label svelte-1etf494"),i(I,"class","value svelte-1etf494"),i(te,"class","value bw svelte-1etf494"),i(D,"class","label f-label svelte-1etf494"),i(Le,"class","value svelte-1etf494"),i(Ke,"class","value bw svelte-1etf494"),i(k,"class","label f-label svelte-1etf494"),i(j,"class","value svelte-1etf494"),i(ee,"class","value bw svelte-1etf494"),i(Xe,"class","label f-label svelte-1etf494"),i(bt,"class","value svelte-1etf494"),i($t,"class","value bw svelte-1etf494"),i(re,"class","formant-table svelte-1etf494"),i(De,"class","section svelte-1etf494"),i(el,"class","section-title svelte-1etf494"),i(Vt,"class","label cog-label svelte-1etf494"),i(dt,"class","value svelte-1etf494"),i(Mt,"class","value-row svelte-1etf494"),i(Ye,"class","label tilt-label svelte-1etf494"),i(fl,"class","value svelte-1etf494"),i(Re,"class","value-row svelte-1etf494"),i(pt,"class","label nasal-label svelte-1etf494"),i(Oe,"class","value svelte-1etf494"),i(Je,"class","value-row svelte-1etf494"),i(Ze,"class","label nmr-label svelte-1etf494"),i(tt,"class","value svelte-1etf494"),i(Kt,"class","value-row svelte-1etf494"),i(ft,"class","values-grid svelte-1etf494"),i(et,"class","section svelte-1etf494"),i(e,"class","values-panel svelte-1etf494")},m(ie,ue){G(ie,e,ue),s(e,l),s(l,n),s(n,r),s(n,u),s(e,d),s(e,h),s(h,p),s(h,w),s(h,_),s(_,T),s(T,C),s(T,E),s(T,N),s(N,U),s(_,v),s(_,x),s(x,P),s(x,F),s(x,A),s(A,H),s(_,Z),s(_,ge),s(ge,be),s(ge,ze),s(ge,Fe),s(Fe,Be),s(e,Te),s(e,De),s(De,xe),s(De,me),s(De,re),s(re,Pe),s(re,Ve),s(re,ye),s(ye,_e),s(ye,Ge),s(ye,I),s(I,ae),s(ye,$),s(ye,te),s(te,ce),s(re,we),s(re,oe),s(oe,D),s(oe,le),s(oe,Le),s(Le,_t),s(oe,rt),s(oe,Ke),s(Ke,gt),s(re,wl),s(re,ot),s(ot,k),s(ot,Q),s(ot,j),s(j,pe),s(ot,ne),s(ot,ee),s(ee,Ee),s(re,Ue),s(re,je),s(je,Xe),s(je,Pl),s(je,bt),s(bt,kl),s(je,ul),s(je,$t),s($t,Et),s(e,Al),s(e,et),s(et,el),s(et,Nt),s(et,ft),s(ft,Mt),s(Mt,Vt),s(Mt,xl),s(Mt,dt),s(dt,Sl),s(ft,Bl),s(ft,Re),s(Re,Ye),s(Re,Dt),s(Re,fl),s(fl,Ml),s(ft,Vl),s(ft,Je),s(Je,pt),s(Je,Ll),s(Je,Oe),s(Oe,Rl),s(ft,Pt),s(ft,Kt),s(Kt,Ze),s(Kt,Fl),s(Kt,tt),s(tt,Ul),s(e,zl),ke&&ke.m(e,null)},p(ie,[ue]){ue&1&&a!==(a=ie[0].toFixed(3)+"")&&se(r,a),ue&65536&&S!==(S=Un(ie[16])+"")&&se(U,S),ue&32768&&V!==(V=en(ie[15])+"")&&se(H,V),ue&64&&Ce!==(Ce=en(ie[6])+"")&&se(Be,Ce),ue&16384&&q!==(q=at(ie[14])+"")&&se(ae,q),ue&1024&&fe!==(fe=at(ie[10])+"")&&se(ce,fe),ue&8192&&it!==(it=at(ie[13])+"")&&se(_t,it),ue&512&&qt!==(qt=at(ie[9])+"")&&se(gt,qt),ue&4096&&de!==(de=at(ie[12])+"")&&se(pe,de),ue&256&&ct!==(ct=at(ie[8])+"")&&se(Ee,ct),ue&2048&&yl!==(yl=at(ie[11])+"")&&se(kl,yl),ue&128&&ut!==(ut=at(ie[7])+"")&&se(Et,ut),ue&32&&It!==(It=Un(ie[5])+"")&&se(Sl,It),ue&16&&ht!==(ht=ie[4]!==null?`${ie[4].toFixed(1)} dB/oct`:"—")&&se(Ml,ht),ue&8&&vt!==(vt=en(ie[3])+"")&&se(Rl,vt),ue&4&&At!==(At=(ie[2]!==null?ie[2].toFixed(3):"—")+"")&&se(Ul,At),ie[1].length>0?ke?ke.p(ie,ue):(ke=Us(ie),ke.c(),ke.m(e,null)):ke&&(ke.d(1),ke=null)},i:Tt,o:Tt,d(ie){ie&&f(e),ke&&ke.d()}}}function yt(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const r=Math.floor((n+a)/2);e[r]<l?n=r+1:a=r}return n>0&&Math.abs(e[n-1]-l)<Math.abs(e[n]-l)&&(n=n-1),t[n]}function Ra(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const _=Math.floor((n+a+1)/2);e[_]<=l?n=_:a=_-1}const r=n,u=e[r],d=t[r];if(r>=e.length-1)return d;const h=e[r+1],p=t[r+1],y=d!==null&&d>0,w=p!==null&&p>0;if(y&&w){const _=(l-u)/(h-u);return Math.exp(Math.log(d)+_*(Math.log(p)-Math.log(d)))}else return y?d:w?p:null}function at(t){return t===null?"—":`${t.toFixed(0)}`}function Un(t){return t===null?"—":`${t.toFixed(1)} Hz`}function en(t){return t===null?"—":`${t.toFixed(1)} dB`}function Fa(t,e,l){let n,a,r,u,d,h,p,y,w,_,T,C,M,E,N,S,U,v,x,P,B;Ne(t,ia,A=>l(17,v=A)),Ne(t,On,A=>l(20,x=A)),Ne(t,ql,A=>l(18,P=A)),Ne(t,vn,A=>l(19,B=A));function F(A){if(!x||x.length===0)return[];const V=[];for(const H of x){const Z=H.intervals.find(ge=>A>=ge.start&&A<ge.end);Z&&Z.text&&V.push({tierName:H.name,text:Z.text})}return V}return t.$$.update=()=>{t.$$.dirty&786432&&l(0,n=B!==null?B:P),t.$$.dirty&131073&&l(16,a=v?Ra(v.pitch,v.times,n):null),t.$$.dirty&131073&&l(15,r=v?yt(v.intensity,v.times,n):null),t.$$.dirty&131073&&l(14,u=v?yt(v.formants.f1,v.times,n):null),t.$$.dirty&131073&&l(13,d=v?yt(v.formants.f2,v.times,n):null),t.$$.dirty&131073&&l(12,h=v?yt(v.formants.f3,v.times,n):null),t.$$.dirty&131073&&l(11,p=v?yt(v.formants.f4,v.times,n):null),t.$$.dirty&131073&&l(10,y=v?yt(v.formants.b1,v.times,n):null),t.$$.dirty&131073&&l(9,w=v?yt(v.formants.b2,v.times,n):null),t.$$.dirty&131073&&l(8,_=v?yt(v.formants.b3,v.times,n):null),t.$$.dirty&131073&&l(7,T=v?yt(v.formants.b4,v.times,n):null),t.$$.dirty&131073&&l(6,C=v?yt(v.harmonicity,v.times,n):null),t.$$.dirty&131073&&l(5,M=v!=null&&v.cog?yt(v.cog,v.times,n):null),t.$$.dirty&131073&&l(4,E=v!=null&&v.spectralTilt?yt(v.spectralTilt,v.times,n):null),t.$$.dirty&131073&&l(3,N=v!=null&&v.a1p0?yt(v.a1p0,v.times,n):null),t.$$.dirty&131073&&l(2,S=v!=null&&v.nmr?yt(v.nmr,v.times,n):null),t.$$.dirty&1&&l(1,U=F(n))},[n,U,S,N,E,M,C,T,_,w,y,p,h,d,u,r,a,v,P,B]}class Ua extends an{constructor(e){super(),rn(this,e,Fa,La,sn,{})}}function za(t){let e,l,n,a,r='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',u,d,h,p,y='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><rect x="6" y="6" width="12" height="12"></rect></svg>',w,_,T,C='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>',M,E,N,S,U,v,x=ol(t[21])+"",P,B,F=ol(t[0].length/t[20])+"",A,V,H,Z,ge,be,We,ze,Fe,Ce,Be='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.03 7.03 0 00-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.49.49 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.01-1.58zM12 15.6a3.6 3.6 0 110-7.2 3.6 3.6 0 010 7.2z"></path></svg>',Te,De,xe,W,me,re,Pe,Ae,Ve="Pitch",ye,_e,Se,Ge,I,q="Formants",ae,$,te,fe,ce,we="Intensity",oe,D,z,le,Le,it="HNR",_t,rt,Ke,qt,gt,wl="CoG",ot,k,Y,Q,j,de="Sp.Tilt",pe,ne,ee,ct,Ee,Ue="A1-P0",je,Xe,Wt,Pl,bt,yl="NMR",kl,ul,$t,ut,Et,Al,et,el="Points",Wl,Nt,ft="Import",Mt,Vt,Cl,xl,dt,It,Sl="Voice:",Bl,Re,Ye,on="Female",Dt,fl="Male",ht,Ml="Child",Vl,Je,pt,cn="Max Freq:",Ll,Oe,vt,Rl="5 kHz",Pt,Kt="7.5 kHz",Ze,un="10 kHz",Fl,tt,At,Ul="Backend:",zl,ke,ie,ue="praatfan (local)",Lt,Kl="praatfan (remote)",wt,dl="praatfan-gpl (remote)",Tl,Xt,Qe,hl,Rt,Xl,Yt,He,tl,pl,ll,nl,vl,sl,al,il,Yl,mt,Jt,Jl,rl=ol(t[22].start)+"",xt,El,Nl=ol(t[22].end)+"",ml,Zl,Zt,fn="Space: play | Tab: play visible | Arrows: navigate/zoom",$e,Ql,Qn;function $n(L,J){return L[25]?ja:Ga}let _n=$n(t),_l=_n(t);function es(L,J){return L[6]?Wa:qa}let gn=es(t),Qt=gn(t),lt=t[26]&&Os(t),nt=t[27]&&Hs(t);function ts(L,J){return L[3]?Xa:Ka}let bn=ts(t),gl=bn(t),st=t[23].length>0&&Gs(t);return Rt=new oa({}),He=new ca({props:{showPitch:t[8],showFormants:t[9],showIntensity:t[10],showHNR:t[11],showCoG:t[12],showSpectralTilt:t[13],showA1P0:t[14],showNMR:t[15],showDataPoints:t[16],maxFreq:t[17]}}),ll=new ua({}),sl=new Va({}),il=new Ua({}),{c(){e=c("div"),l=c("header"),n=c("div"),a=c("button"),a.innerHTML=r,u=b(),d=c("button"),_l.c(),h=b(),p=c("button"),p.innerHTML=y,w=b(),Qt.c(),_=b(),T=c("button"),T.innerHTML=C,M=b(),E=c("span"),N=X(t[19]),S=b(),U=c("div"),v=c("span"),P=X(x),B=X(" / "),A=X(F),V=b(),lt&&lt.c(),H=b(),Z=c("div"),nt&&nt.c(),ge=b(),be=c("span"),We=X(t[20]),ze=X(" Hz"),Fe=b(),Ce=c("button"),Ce.innerHTML=Be,Te=b(),De=c("button"),gl.c(),xe=b(),W=c("div"),me=c("label"),re=c("input"),Pe=b(),Ae=c("span"),Ae.textContent=Ve,ye=b(),_e=c("label"),Se=c("input"),Ge=b(),I=c("span"),I.textContent=q,ae=b(),$=c("label"),te=c("input"),fe=b(),ce=c("span"),ce.textContent=we,oe=b(),D=c("label"),z=c("input"),le=b(),Le=c("span"),Le.textContent=it,_t=b(),rt=c("label"),Ke=c("input"),qt=b(),gt=c("span"),gt.textContent=wl,ot=b(),k=c("label"),Y=c("input"),Q=b(),j=c("span"),j.textContent=de,pe=b(),ne=c("label"),ee=c("input"),ct=b(),Ee=c("span"),Ee.textContent=Ue,je=b(),Xe=c("label"),Wt=c("input"),Pl=b(),bt=c("span"),bt.textContent=yl,kl=b(),ul=c("span"),$t=b(),ut=c("label"),Et=c("input"),Al=b(),et=c("span"),et.textContent=el,Wl=b(),Nt=c("button"),Nt.textContent=ft,Mt=b(),st&&st.c(),Vt=b(),Cl=c("span"),xl=b(),dt=c("label"),It=c("span"),It.textContent=Sl,Bl=b(),Re=c("select"),Ye=c("option"),Ye.textContent=on,Dt=c("option"),Dt.textContent=fl,ht=c("option"),ht.textContent=Ml,Vl=b(),Je=c("label"),pt=c("span"),pt.textContent=cn,Ll=b(),Oe=c("select"),vt=c("option"),vt.textContent=Rl,Pt=c("option"),Pt.textContent=Kt,Ze=c("option"),Ze.textContent=un,Fl=b(),tt=c("label"),At=c("span"),At.textContent=Ul,zl=b(),ke=c("select"),ie=c("option"),ie.textContent=ue,Lt=c("option"),Lt.textContent=Kl,wt=c("option"),wt.textContent=dl,Tl=b(),Xt=c("div"),Qe=c("div"),hl=c("div"),Ht(Rt.$$.fragment),Xl=b(),Yt=c("div"),Ht(He.$$.fragment),tl=b(),pl=c("div"),Ht(ll.$$.fragment),nl=b(),vl=c("div"),Ht(sl.$$.fragment),al=b(),Ht(il.$$.fragment),Yl=b(),mt=c("footer"),Jt=c("span"),Jl=X("View: "),xt=X(rl),El=X(" - "),ml=X(Nl),Zl=b(),Zt=c("span"),Zt.textContent=fn,this.h()},l(L){e=o(L,"DIV",{class:!0});var J=m(e);l=o(J,"HEADER",{class:!0});var qe=m(l);n=o(qe,"DIV",{class:!0});var Ft=m(n);a=o(Ft,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(a)!=="svelte-1lvwg3g"&&(a.innerHTML=r),u=g(Ft),d=o(Ft,"BUTTON",{class:!0,title:!0});var ls=m(d);_l.l(ls),ls.forEach(f),h=g(Ft),p=o(Ft,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(p)!=="svelte-1ictkst"&&(p.innerHTML=y),w=g(Ft),Qt.l(Ft),_=g(Ft),T=o(Ft,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(T)!=="svelte-u6ddbp"&&(T.innerHTML=C),M=g(Ft),E=o(Ft,"SPAN",{class:!0});var ns=m(E);N=K(ns,t[19]),ns.forEach(f),Ft.forEach(f),S=g(qe),U=o(qe,"DIV",{class:!0});var wn=m(U);v=o(wn,"SPAN",{class:!0});var yn=m(v);P=K(yn,x),B=K(yn," / "),A=K(yn,F),yn.forEach(f),V=g(wn),lt&&lt.l(wn),wn.forEach(f),H=g(qe),Z=o(qe,"DIV",{class:!0});var Il=m(Z);nt&&nt.l(Il),ge=g(Il),be=o(Il,"SPAN",{class:!0});var Gn=m(be);We=K(Gn,t[20]),ze=K(Gn," Hz"),Gn.forEach(f),Fe=g(Il),Ce=o(Il,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(Ce)!=="svelte-px3wau"&&(Ce.innerHTML=Be),Te=g(Il),De=o(Il,"BUTTON",{class:!0,title:!0});var ss=m(De);gl.l(ss),ss.forEach(f),Il.forEach(f),qe.forEach(f),xe=g(J),W=o(J,"DIV",{class:!0});var he=m(W);me=o(he,"LABEL",{class:!0,title:!0});var kn=m(me);re=o(kn,"INPUT",{type:!0,class:!0}),Pe=g(kn),Ae=o(kn,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ae)!=="svelte-1k01z98"&&(Ae.textContent=Ve),kn.forEach(f),ye=g(he),_e=o(he,"LABEL",{class:!0,title:!0});var Cn=m(_e);Se=o(Cn,"INPUT",{type:!0,class:!0}),Ge=g(Cn),I=o(Cn,"SPAN",{class:!0,"data-svelte-h":!0}),O(I)!=="svelte-6cthmg"&&(I.textContent=q),Cn.forEach(f),ae=g(he),$=o(he,"LABEL",{class:!0,title:!0});var Tn=m($);te=o(Tn,"INPUT",{type:!0,class:!0}),fe=g(Tn),ce=o(Tn,"SPAN",{class:!0,"data-svelte-h":!0}),O(ce)!=="svelte-1el2ji2"&&(ce.textContent=we),Tn.forEach(f),oe=g(he),D=o(he,"LABEL",{class:!0,title:!0});var En=m(D);z=o(En,"INPUT",{type:!0,class:!0}),le=g(En),Le=o(En,"SPAN",{class:!0,"data-svelte-h":!0}),O(Le)!=="svelte-177jta0"&&(Le.textContent=it),En.forEach(f),_t=g(he),rt=o(he,"LABEL",{class:!0,title:!0});var Nn=m(rt);Ke=o(Nn,"INPUT",{type:!0,class:!0}),qt=g(Nn),gt=o(Nn,"SPAN",{class:!0,"data-svelte-h":!0}),O(gt)!=="svelte-1myrnh2"&&(gt.textContent=wl),Nn.forEach(f),ot=g(he),k=o(he,"LABEL",{class:!0,title:!0});var In=m(k);Y=o(In,"INPUT",{type:!0,class:!0}),Q=g(In),j=o(In,"SPAN",{class:!0,"data-svelte-h":!0}),O(j)!=="svelte-1pame47"&&(j.textContent=de),In.forEach(f),pe=g(he),ne=o(he,"LABEL",{class:!0,title:!0});var Dn=m(ne);ee=o(Dn,"INPUT",{type:!0,class:!0}),ct=g(Dn),Ee=o(Dn,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ee)!=="svelte-kia4wx"&&(Ee.textContent=Ue),Dn.forEach(f),je=g(he),Xe=o(he,"LABEL",{class:!0,title:!0});var Pn=m(Xe);Wt=o(Pn,"INPUT",{type:!0,class:!0}),Pl=g(Pn),bt=o(Pn,"SPAN",{class:!0,"data-svelte-h":!0}),O(bt)!=="svelte-1idlrfi"&&(bt.textContent=yl),Pn.forEach(f),kl=g(he),ul=o(he,"SPAN",{class:!0}),m(ul).forEach(f),$t=g(he),ut=o(he,"LABEL",{class:!0,title:!0});var An=m(ut);Et=o(An,"INPUT",{type:!0,class:!0}),Al=g(An),et=o(An,"SPAN",{class:!0,"data-svelte-h":!0}),O(et)!=="svelte-16btzso"&&(et.textContent=el),An.forEach(f),Wl=g(he),Nt=o(he,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(Nt)!=="svelte-13z3t6e"&&(Nt.textContent=ft),Mt=g(he),st&&st.l(he),Vt=g(he),Cl=o(he,"SPAN",{class:!0}),m(Cl).forEach(f),xl=g(he),dt=o(he,"LABEL",{class:!0});var xn=m(dt);It=o(xn,"SPAN",{class:!0,"data-svelte-h":!0}),O(It)!=="svelte-1d25ili"&&(It.textContent=Sl),Bl=g(xn),Re=o(xn,"SELECT",{class:!0});var Sn=m(Re);Ye=o(Sn,"OPTION",{"data-svelte-h":!0}),O(Ye)!=="svelte-kgyr86"&&(Ye.textContent=on),Dt=o(Sn,"OPTION",{"data-svelte-h":!0}),O(Dt)!=="svelte-8wnvoi"&&(Dt.textContent=fl),ht=o(Sn,"OPTION",{"data-svelte-h":!0}),O(ht)!=="svelte-7fkmwe"&&(ht.textContent=Ml),Sn.forEach(f),xn.forEach(f),Vl=g(he),Je=o(he,"LABEL",{class:!0});var Bn=m(Je);pt=o(Bn,"SPAN",{class:!0,"data-svelte-h":!0}),O(pt)!=="svelte-rpytas"&&(pt.textContent=cn),Ll=g(Bn),Oe=o(Bn,"SELECT",{class:!0});var Mn=m(Oe);vt=o(Mn,"OPTION",{"data-svelte-h":!0}),O(vt)!=="svelte-1awwqhf"&&(vt.textContent=Rl),Pt=o(Mn,"OPTION",{"data-svelte-h":!0}),O(Pt)!=="svelte-1xbdoff"&&(Pt.textContent=Kt),Ze=o(Mn,"OPTION",{"data-svelte-h":!0}),O(Ze)!=="svelte-1o5m333"&&(Ze.textContent=un),Mn.forEach(f),Bn.forEach(f),Fl=g(he),tt=o(he,"LABEL",{class:!0,title:!0});var Vn=m(tt);At=o(Vn,"SPAN",{class:!0,"data-svelte-h":!0}),O(At)!=="svelte-bjtusk"&&(At.textContent=Ul),zl=g(Vn),ke=o(Vn,"SELECT",{class:!0});var Ln=m(ke);ie=o(Ln,"OPTION",{"data-svelte-h":!0}),O(ie)!=="svelte-x3trnu"&&(ie.textContent=ue),Lt=o(Ln,"OPTION",{"data-svelte-h":!0}),O(Lt)!=="svelte-10tohf9"&&(Lt.textContent=Kl),wt=o(Ln,"OPTION",{"data-svelte-h":!0}),O(wt)!=="svelte-pzpi85"&&(wt.textContent=dl),Ln.forEach(f),Vn.forEach(f),he.forEach(f),Tl=g(J),Xt=o(J,"DIV",{class:!0});var Rn=m(Xt);Qe=o(Rn,"DIV",{class:!0});var Dl=m(Qe);hl=o(Dl,"DIV",{class:!0});var as=m(hl);Ot(Rt.$$.fragment,as),as.forEach(f),Xl=g(Dl),Yt=o(Dl,"DIV",{class:!0});var is=m(Yt);Ot(He.$$.fragment,is),is.forEach(f),tl=g(Dl),pl=o(Dl,"DIV",{class:!0});var rs=m(pl);Ot(ll.$$.fragment,rs),rs.forEach(f),nl=g(Dl),vl=o(Dl,"DIV",{class:!0});var os=m(vl);Ot(sl.$$.fragment,os),os.forEach(f),Dl.forEach(f),al=g(Rn),Ot(il.$$.fragment,Rn),Rn.forEach(f),Yl=g(J),mt=o(J,"FOOTER",{class:!0});var Fn=m(mt);Jt=o(Fn,"SPAN",{});var dn=m(Jt);Jl=K(dn,"View: "),xt=K(dn,rl),El=K(dn," - "),ml=K(dn,Nl),dn.forEach(f),Zl=g(Fn),Zt=o(Fn,"SPAN",{"data-svelte-h":!0}),O(Zt)!=="svelte-109nybm"&&(Zt.textContent=fn),Fn.forEach(f),J.forEach(f),this.h()},h(){i(a,"class","open-btn svelte-80ypxb"),i(a,"title","Open audio file"),i(d,"class","play-btn svelte-80ypxb"),i(d,"title","Play/Pause (Space)"),cl(d,"playing",t[25]),i(p,"class","stop-btn svelte-80ypxb"),i(p,"title","Stop (Escape)"),i(T,"class","save-btn svelte-80ypxb"),i(T,"title","Save audio as WAV"),i(E,"class","filename svelte-80ypxb"),i(n,"class","toolbar-left svelte-80ypxb"),i(v,"class","time-display svelte-80ypxb"),i(U,"class","toolbar-center svelte-80ypxb"),i(be,"class","sample-rate svelte-80ypxb"),i(Ce,"class","settings-btn svelte-80ypxb"),i(Ce,"title","Load configuration file"),i(De,"class","theme-btn svelte-80ypxb"),i(De,"title","Toggle theme"),i(Z,"class","toolbar-right svelte-80ypxb"),i(l,"class","toolbar svelte-80ypxb"),i(re,"type","checkbox"),i(re,"class","svelte-80ypxb"),i(Ae,"class","toggle-label pitch svelte-80ypxb"),i(me,"class","overlay-toggle svelte-80ypxb"),i(me,"title","Fundamental frequency (F0) - the perceived pitch of voiced speech"),i(Se,"type","checkbox"),i(Se,"class","svelte-80ypxb"),i(I,"class","toggle-label formants svelte-80ypxb"),i(_e,"class","overlay-toggle svelte-80ypxb"),i(_e,"title","Formants (F1-F4) - resonant frequencies of the vocal tract that distinguish vowels"),i(te,"type","checkbox"),i(te,"class","svelte-80ypxb"),i(ce,"class","toggle-label intensity svelte-80ypxb"),i($,"class","overlay-toggle svelte-80ypxb"),i($,"title","Intensity - sound pressure level in decibels (dB)"),i(z,"type","checkbox"),i(z,"class","svelte-80ypxb"),i(Le,"class","toggle-label hnr svelte-80ypxb"),i(D,"class","overlay-toggle svelte-80ypxb"),i(D,"title","Harmonics-to-Noise Ratio - measure of voice quality (higher = clearer voice)"),i(Ke,"type","checkbox"),i(Ke,"class","svelte-80ypxb"),i(gt,"class","toggle-label cog svelte-80ypxb"),i(rt,"class","overlay-toggle svelte-80ypxb"),i(rt,"title","Center of Gravity - spectral centroid, indicates brightness of sound"),i(Y,"type","checkbox"),i(Y,"class","svelte-80ypxb"),i(j,"class","toggle-label tilt svelte-80ypxb"),i(k,"class","overlay-toggle svelte-80ypxb"),i(k,"title","Spectral Tilt - balance between low and high frequencies (dB difference 0-500 Hz vs 2000-4000 Hz)"),i(ee,"type","checkbox"),i(ee,"class","svelte-80ypxb"),i(Ee,"class","toggle-label a1p0 svelte-80ypxb"),i(ne,"class","overlay-toggle svelte-80ypxb"),i(ne,"title","A1-P0 Nasal Ratio - amplitude at F0 minus nasal pole (~250 Hz), indicates nasality"),i(Wt,"type","checkbox"),i(Wt,"class","svelte-80ypxb"),i(bt,"class","toggle-label nmr svelte-80ypxb"),i(Xe,"class","overlay-toggle svelte-80ypxb"),i(Xe,"title","Nasal Murmur Ratio - low-freq energy (0-500Hz) / total energy (0-5000Hz)"),i(ul,"class","controls-separator svelte-80ypxb"),i(Et,"type","checkbox"),i(Et,"class","svelte-80ypxb"),i(et,"class","toggle-label points svelte-80ypxb"),i(ut,"class","overlay-toggle svelte-80ypxb"),i(ut,"title","Data collection points - double-click to add, right-click to remove"),i(Nt,"class","import-points-btn svelte-80ypxb"),i(Nt,"title","Import data points from TSV"),i(Cl,"class","controls-separator svelte-80ypxb"),i(It,"class","freq-label svelte-80ypxb"),Ye.__value="female",St(Ye,Ye.__value),Dt.__value="male",St(Dt,Dt.__value),ht.__value="child",St(ht,ht.__value),i(Re,"class","svelte-80ypxb"),t[2]===void 0&&cs(()=>t[56].call(Re)),i(dt,"class","freq-selector svelte-80ypxb"),i(pt,"class","freq-label svelte-80ypxb"),vt.__value=5e3,St(vt,vt.__value),Pt.__value=7500,St(Pt,Pt.__value),Ze.__value=1e4,St(Ze,Ze.__value),i(Oe,"class","svelte-80ypxb"),t[17]===void 0&&cs(()=>t[57].call(Oe)),i(Je,"class","freq-selector svelte-80ypxb"),i(At,"class","freq-label svelte-80ypxb"),ie.__value="praatfan-local",St(ie,ie.__value),Lt.__value="praatfan",St(Lt,Lt.__value),wt.__value="praatfan-gpl",St(wt,wt.__value),i(ke,"class","svelte-80ypxb"),i(tt,"class","freq-selector svelte-80ypxb"),i(tt,"title","Acoustic analysis backend"),i(W,"class","overlay-controls svelte-80ypxb"),i(hl,"class","display-panel waveform-panel svelte-80ypxb"),i(Yt,"class","display-panel spectrogram-panel svelte-80ypxb"),i(pl,"class","time-axis-panel svelte-80ypxb"),i(vl,"class","display-panel annotation-panel svelte-80ypxb"),i(Qe,"class","displays svelte-80ypxb"),i(Xt,"class","main-content svelte-80ypxb"),i(mt,"class","status-bar svelte-80ypxb"),i(e,"class","app-container svelte-80ypxb")},m(L,J){G(L,e,J),s(e,l),s(l,n),s(n,a),s(n,u),s(n,d),_l.m(d,null),s(n,h),s(n,p),s(n,w),Qt.m(n,null),s(n,_),s(n,T),s(n,M),s(n,E),s(E,N),s(l,S),s(l,U),s(U,v),s(v,P),s(v,B),s(v,A),s(U,V),lt&&lt.m(U,null),s(l,H),s(l,Z),nt&&nt.m(Z,null),s(Z,ge),s(Z,be),s(be,We),s(be,ze),s(Z,Fe),s(Z,Ce),s(Z,Te),s(Z,De),gl.m(De,null),s(e,xe),s(e,W),s(W,me),s(me,re),re.checked=t[8],s(me,Pe),s(me,Ae),s(W,ye),s(W,_e),s(_e,Se),Se.checked=t[9],s(_e,Ge),s(_e,I),s(W,ae),s(W,$),s($,te),te.checked=t[10],s($,fe),s($,ce),s(W,oe),s(W,D),s(D,z),z.checked=t[11],s(D,le),s(D,Le),s(W,_t),s(W,rt),s(rt,Ke),Ke.checked=t[12],s(rt,qt),s(rt,gt),s(W,ot),s(W,k),s(k,Y),Y.checked=t[13],s(k,Q),s(k,j),s(W,pe),s(W,ne),s(ne,ee),ee.checked=t[14],s(ne,ct),s(ne,Ee),s(W,je),s(W,Xe),s(Xe,Wt),Wt.checked=t[15],s(Xe,Pl),s(Xe,bt),s(W,kl),s(W,ul),s(W,$t),s(W,ut),s(ut,Et),Et.checked=t[16],s(ut,Al),s(ut,et),s(W,Wl),s(W,Nt),s(W,Mt),st&&st.m(W,null),s(W,Vt),s(W,Cl),s(W,xl),s(W,dt),s(dt,It),s(dt,Bl),s(dt,Re),s(Re,Ye),s(Re,Dt),s(Re,ht),$l(Re,t[2],!0),s(W,Vl),s(W,Je),s(Je,pt),s(Je,Ll),s(Je,Oe),s(Oe,vt),s(Oe,Pt),s(Oe,Ze),$l(Oe,t[17],!0),s(W,Fl),s(W,tt),s(tt,At),s(tt,zl),s(tt,ke),s(ke,ie),s(ke,Lt),s(ke,wt),$l(ke,t[24]),s(e,Tl),s(e,Xt),s(Xt,Qe),s(Qe,hl),zt(Rt,hl,null),s(Qe,Xl),s(Qe,Yt),zt(He,Yt,null),s(Qe,tl),s(Qe,pl),zt(ll,pl,null),s(Qe,nl),s(Qe,vl),zt(sl,vl,null),s(Xt,al),zt(il,Xt,null),s(e,Yl),s(e,mt),s(mt,Jt),s(Jt,Jl),s(Jt,xt),s(Jt,El),s(Jt,ml),s(mt,Zl),s(mt,Zt),$e=!0,Ql||(Qn=[R(a,"click",t[36]),R(d,"click",Xs),R(p,"click",Ks),R(T,"click",t[35]),R(Ce,"click",t[38]),R(De,"click",t[30]),R(re,"change",t[47]),R(Se,"change",t[48]),R(te,"change",t[49]),R(z,"change",t[50]),R(Ke,"change",t[51]),R(Y,"change",t[52]),R(ee,"change",t[53]),R(Wt,"change",t[54]),R(Et,"change",t[55]),R(Nt,"click",t[41]),R(Re,"change",t[56]),R(Oe,"change",t[57]),R(ke,"change",t[29])],Ql=!0)},p(L,J){_n!==(_n=$n(L))&&(_l.d(1),_l=_n(L),_l&&(_l.c(),_l.m(d,null))),(!$e||J[0]&33554432)&&cl(d,"playing",L[25]),gn===(gn=es(L))&&Qt?Qt.p(L,J):(Qt.d(1),Qt=gn(L),Qt&&(Qt.c(),Qt.m(n,_))),(!$e||J[0]&524288)&&se(N,L[19]),(!$e||J[0]&2097152)&&x!==(x=ol(L[21])+"")&&se(P,x),(!$e||J[0]&1048577)&&F!==(F=ol(L[0].length/L[20])+"")&&se(A,F),L[26]?lt?lt.p(L,J):(lt=Os(L),lt.c(),lt.m(U,null)):lt&&(lt.d(1),lt=null),L[27]?nt?nt.p(L,J):(nt=Hs(L),nt.c(),nt.m(Z,ge)):nt&&(nt.d(1),nt=null),(!$e||J[0]&1048576)&&se(We,L[20]),bn!==(bn=ts(L))&&(gl.d(1),gl=bn(L),gl&&(gl.c(),gl.m(De,null))),J[0]&256&&(re.checked=L[8]),J[0]&512&&(Se.checked=L[9]),J[0]&1024&&(te.checked=L[10]),J[0]&2048&&(z.checked=L[11]),J[0]&4096&&(Ke.checked=L[12]),J[0]&8192&&(Y.checked=L[13]),J[0]&16384&&(ee.checked=L[14]),J[0]&32768&&(Wt.checked=L[15]),J[0]&65536&&(Et.checked=L[16]),L[23].length>0?st?st.p(L,J):(st=Gs(L),st.c(),st.m(W,Vt)):st&&(st.d(1),st=null),J[0]&4&&$l(Re,L[2]),J[0]&131072&&$l(Oe,L[17]),(!$e||J[0]&16777216)&&$l(ke,L[24]);const qe={};J[0]&256&&(qe.showPitch=L[8]),J[0]&512&&(qe.showFormants=L[9]),J[0]&1024&&(qe.showIntensity=L[10]),J[0]&2048&&(qe.showHNR=L[11]),J[0]&4096&&(qe.showCoG=L[12]),J[0]&8192&&(qe.showSpectralTilt=L[13]),J[0]&16384&&(qe.showA1P0=L[14]),J[0]&32768&&(qe.showNMR=L[15]),J[0]&65536&&(qe.showDataPoints=L[16]),J[0]&131072&&(qe.maxFreq=L[17]),He.$set(qe),(!$e||J[0]&4194304)&&rl!==(rl=ol(L[22].start)+"")&&se(xt,rl),(!$e||J[0]&4194304)&&Nl!==(Nl=ol(L[22].end)+"")&&se(ml,Nl)},i(L){$e||(ve(Rt.$$.fragment,L),ve(He.$$.fragment,L),ve(ll.$$.fragment,L),ve(sl.$$.fragment,L),ve(il.$$.fragment,L),$e=!0)},o(L){Ie(Rt.$$.fragment,L),Ie(He.$$.fragment,L),Ie(ll.$$.fragment,L),Ie(sl.$$.fragment,L),Ie(il.$$.fragment,L),$e=!1},d(L){L&&f(e),_l.d(),Qt.d(),lt&&lt.d(),nt&&nt.d(),gl.d(),st&&st.d(),Ut(Rt),Ut(He),Ut(ll),Ut(sl),Ut(il),Ql=!1,Bt(Qn)}}}function Oa(t){let e,l;return e=new Ea({props:{onFile:t[31],onRecordedBlob:t[32]}}),{c(){Ht(e.$$.fragment)},l(n){Ot(e.$$.fragment,n)},m(n,a){zt(e,n,a),l=!0},p:Tt,i(n){l||(ve(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ut(e,n)}}}function Ha(t){let e,l="Loading acoustic analysis engine...";return{c(){e=c("div"),e.textContent=l,this.h()},l(n){e=o(n,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-plgi30"&&(e.textContent=l),this.h()},h(){i(e,"class","loading svelte-80ypxb")},m(n,a){G(n,e,a)},p:Tt,i:Tt,o:Tt,d(n){n&&f(e)}}}function Ga(t){let e,l;return{c(){e=jt("svg"),l=jt("path"),this.h()},l(n){e=Gt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=m(e);l=Gt(a,"path",{d:!0}),m(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M8 5v14l11-7z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(n,a){G(n,e,a),s(e,l)},d(n){n&&f(e)}}}function ja(t){let e,l,n;return{c(){e=jt("svg"),l=jt("rect"),n=jt("rect"),this.h()},l(a){e=Gt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=m(e);l=Gt(r,"rect",{x:!0,y:!0,width:!0,height:!0}),m(l).forEach(f),n=Gt(r,"rect",{x:!0,y:!0,width:!0,height:!0}),m(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"x","6"),i(l,"y","4"),i(l,"width","4"),i(l,"height","16"),i(n,"x","14"),i(n,"y","4"),i(n,"width","4"),i(n,"height","16"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(a,r){G(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function qa(t){let e,l='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><circle cx="12" cy="12" r="6"></circle></svg>',n,a;return{c(){e=c("button"),e.innerHTML=l,this.h()},l(r){e=o(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(e)!=="svelte-d9ton6"&&(e.innerHTML=l),this.h()},h(){i(e,"class","record-btn svelte-80ypxb"),i(e,"title","Record from microphone")},m(r,u){G(r,e,u),n||(a=R(e,"click",t[33]),n=!0)},p:Tt,d(r){r&&f(e),n=!1,a()}}}function Wa(t){let e,l,n,a,r,u=t[7].toFixed(1)+"",d,h,p,y;return{c(){e=c("button"),l=jt("svg"),n=jt("rect"),a=b(),r=c("span"),d=X(u),h=X("s"),this.h()},l(w){e=o(w,"BUTTON",{class:!0,title:!0});var _=m(e);l=Gt(_,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var T=m(l);n=Gt(T,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),m(n).forEach(f),T.forEach(f),a=g(_),r=o(_,"SPAN",{class:!0});var C=m(r);d=K(C,u),h=K(C,"s"),C.forEach(f),_.forEach(f),this.h()},h(){i(n,"x","6"),i(n,"y","6"),i(n,"width","12"),i(n,"height","12"),i(n,"rx","2"),i(l,"viewBox","0 0 24 24"),i(l,"fill","currentColor"),i(l,"width","16"),i(l,"height","16"),i(r,"class","recording-time svelte-80ypxb"),i(e,"class","record-btn recording svelte-80ypxb"),i(e,"title","Stop recording")},m(w,_){G(w,e,_),s(e,l),s(l,n),s(e,a),s(e,r),s(r,d),s(r,h),p||(y=R(e,"click",t[34]),p=!0)},p(w,_){_[0]&128&&u!==(u=w[7].toFixed(1)+"")&&se(d,u)},d(w){w&&f(e),p=!1,y()}}}function Os(t){let e,l,n=ol(t[26].end-t[26].start)+"",a;return{c(){e=c("span"),l=X("Sel: "),a=X(n),this.h()},l(r){e=o(r,"SPAN",{class:!0});var u=m(e);l=K(u,"Sel: "),a=K(u,n),u.forEach(f),this.h()},h(){i(e,"class","selection-info svelte-80ypxb")},m(r,u){G(r,e,u),s(e,l),s(e,a)},p(r,u){u[0]&67108864&&n!==(n=ol(r[26].end-r[26].start)+"")&&se(a,n)},d(r){r&&f(e)}}}function Hs(t){let e,l,n,a;return{c(){e=c("span"),l=X("Analyzing... "),n=X(t[28]),a=X("%"),this.h()},l(r){e=o(r,"SPAN",{class:!0});var u=m(e);l=K(u,"Analyzing... "),n=K(u,t[28]),a=K(u,"%"),u.forEach(f),this.h()},h(){i(e,"class","analysis-progress svelte-80ypxb")},m(r,u){G(r,e,u),s(e,l),s(e,n),s(e,a)},p(r,u){u[0]&268435456&&se(n,r[28])},d(r){r&&f(e)}}}function Ka(t){let e,l,n;return{c(){e=jt("svg"),l=jt("circle"),n=jt("path"),this.h()},l(a){e=Gt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=m(e);l=Gt(r,"circle",{cx:!0,cy:!0,r:!0}),m(l).forEach(f),n=Gt(r,"path",{d:!0}),m(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"cx","12"),i(l,"cy","12"),i(l,"r","5"),i(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(a,r){G(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Xa(t){let e,l;return{c(){e=jt("svg"),l=jt("path"),this.h()},l(n){e=Gt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=m(e);l=Gt(a,"path",{d:!0}),m(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(n,a){G(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Gs(t){let e,l,n=t[23].length+"",a,r,u,d;return{c(){e=c("button"),l=X("Export ("),a=X(n),r=X(")"),this.h()},l(h){e=o(h,"BUTTON",{class:!0,title:!0});var p=m(e);l=K(p,"Export ("),a=K(p,n),r=K(p,")"),p.forEach(f),this.h()},h(){i(e,"class","export-points-btn svelte-80ypxb"),i(e,"title","Export data points to TSV")},m(h,p){G(h,e,p),s(e,l),s(e,a),s(e,r),u||(d=R(e,"click",t[40]),u=!0)},p(h,p){p[0]&8388608&&n!==(n=h[23].length+"")&&se(a,n)},d(h){h&&f(e),u=!1,d()}}}function Ya(t){let e,l,n,a,r,u,d,h,p,y,w,_;const T=[Ha,Oa,za],C=[];function M(E,N){return E[1]?E[0]?2:1:0}return h=M(t),p=C[h]=T[h](t),{c(){e=c("input"),l=b(),n=c("input"),a=b(),r=c("input"),u=b(),d=c("main"),p.c(),this.h()},l(E){e=o(E,"INPUT",{type:!0,accept:!0,style:!0}),l=g(E),n=o(E,"INPUT",{type:!0,accept:!0,style:!0}),a=g(E),r=o(E,"INPUT",{type:!0,accept:!0,style:!0}),u=g(E),d=o(E,"MAIN",{class:!0});var N=m(d);p.l(N),N.forEach(f),this.h()},h(){i(e,"type","file"),i(e,"accept","audio/*"),Me(e,"display","none"),i(n,"type","file"),i(n,"accept",".yaml,.yml"),Me(n,"display","none"),i(r,"type","file"),i(r,"accept",".tsv,.txt"),Me(r,"display","none"),i(d,"class","svelte-80ypxb")},m(E,N){G(E,e,N),t[44](e),G(E,l,N),G(E,n,N),t[45](n),G(E,a,N),G(E,r,N),t[46](r),G(E,u,N),G(E,d,N),C[h].m(d,null),y=!0,w||(_=[R(e,"change",t[37]),R(n,"change",t[39]),R(r,"change",t[42])],w=!0)},p(E,N){let S=h;h=M(E),h===S?C[h].p(E,N):(Ol(),Ie(C[S],1,1,()=>{C[S]=null}),Hl(),p=C[h],p?p.p(E,N):(p=C[h]=T[h](E),p.c()),ve(p,1),p.m(d,null))},i(E){y||(ve(p),y=!0)},o(E){Ie(p),y=!1},d(E){E&&(f(e),f(l),f(n),f(a),f(r),f(u),f(d)),t[44](null),t[45](null),t[46](null),C[h].d(),w=!1,Bt(_)}}}function ol(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toFixed(2).padStart(5,"0")}`}function Ja(t,e,l){let n,a,r,u,d,h,p,y,w,_,T,C,M,E,N;Ne(t,zn,k=>l(19,n=k)),Ne(t,Wn,k=>l(0,a=k)),Ne(t,da,k=>l(61,r=k)),Ne(t,Kn,k=>l(20,u=k)),Ne(t,ql,k=>l(21,d=k)),Ne(t,tn,k=>l(22,h=k)),Ne(t,On,k=>l(62,p=k)),Ne(t,vs,k=>l(23,y=k)),Ne(t,ha,k=>l(1,w=k)),Ne(t,ms,k=>l(2,_=k)),Ne(t,Xn,k=>l(24,T=k)),Ne(t,pa,k=>l(25,C=k)),Ne(t,ln,k=>l(26,M=k)),Ne(t,va,k=>l(27,E=k)),Ne(t,ma,k=>l(28,N=k));let S=!0,U,v,x=!1,P=null,B=[],F=0,A=null;Hn(()=>{const k=localStorage.getItem("ozen-backend");return(k==="praatfan-gpl"||k==="praatfan"||k==="praatfan-local")&&Xn.set(k),qn(T),_a(On,vs),localStorage.getItem("ozen-theme")==="light"&&(l(3,S=!1),document.documentElement.classList.add("light")),window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)}),Zn(()=>{A&&clearInterval(A),P&&x&&P.stop()});async function V(k){const Q=k.target.value;Xn.set(Q),localStorage.setItem("ozen-backend",Q);try{await qn(Q),a&&(hn(),pn().catch(j=>console.error("Analysis failed:",j)))}catch(j){console.error("Failed to switch backend:",j)}}let H=_;function Z(){l(3,S=!S),S?(document.documentElement.classList.remove("light"),localStorage.setItem("ozen-theme","dark")):(document.documentElement.classList.add("light"),localStorage.setItem("ozen-theme","light"))}async function ge(){if(y.length===0){console.log("No data points to copy");return}const k=hs({showPitch:xe,showFormants:W,showIntensity:me,showHNR:re,showCoG:Pe,showSpectralTilt:Ae,showA1P0:Ve,showNMR:ye});try{await navigator.clipboard.writeText(k),console.log(`Copied ${y.length} data points to clipboard`)}catch(Y){console.error("Failed to copy to clipboard:",Y)}}function be(k){if(!(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)){if(k.ctrlKey||k.metaKey)switch(k.key.toLowerCase()){case"z":k.preventDefault(),k.shiftKey?Jn():Ws();return;case"y":k.preventDefault(),Jn();return;case"c":k.preventDefault(),ge();return}switch(k.code){case"Space":k.preventDefault(),Xs();break;case"Escape":k.preventDefault(),Ks(),ln.set(null);break;case"Tab":k.preventDefault(),ra();break;case"ArrowLeft":k.preventDefault(),We(-.1);break;case"ArrowRight":k.preventDefault(),We(.1);break;case"ArrowUp":k.preventDefault(),ze(.91,!0);break;case"ArrowDown":k.preventDefault(),ze(1.1,!0);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":const Y=parseInt(k.code.slice(-1))-1;Y<p.length&&bl.set(Y);break}}}function We(k){if(!a)return;const Y=a.length/u,{start:Q,end:j}=h,de=j-Q,pe=de*k;let ne=Q+pe,ee=j+pe;ne<0&&(ne=0,ee=de),ee>Y&&(ee=Y,ne=Y-de),tn.set({start:ne,end:ee})}function ze(k,Y=!1){if(!a)return;const Q=a.length/u,{start:j,end:de}=h,pe=de-j,ne=Y?(j+de)/2:d,ee=Math.max(.01,Math.min(Q,pe*k)),ct=(ne-j)/pe;let Ee=Math.max(0,ne-ct*ee),Ue=Math.min(Q,Ee+ee);Ue===Q&&(Ee=Math.max(0,Ue-ee)),tn.set({start:Ee,end:Ue})}async function Fe(k){hn();const Y=await k.arrayBuffer(),j=await new AudioContext().decodeAudioData(Y),de=new Float64Array(j.length),pe=j.getChannelData(0);for(let ee=0;ee<j.length;ee++)de[ee]=pe[ee];Wn.set(de),Kn.set(j.sampleRate),zn.set(k.name);const ne=j.length/j.sampleRate;ps.set(ne),tn.set({start:0,end:Math.min(ne,10)}),ql.set(0),ln.set(null),pn().catch(ee=>console.error("Analysis failed:",ee))}async function Ce(k){hn();const Y=await k.arrayBuffer(),j=await new AudioContext().decodeAudioData(Y),de=new Float64Array(j.length),pe=j.getChannelData(0);for(let ee=0;ee<j.length;ee++)de[ee]=pe[ee];Wn.set(de),Kn.set(j.sampleRate),zn.set(`Recording ${new Date().toLocaleTimeString()}`);const ne=j.length/j.sampleRate;ps.set(ne),tn.set({start:0,end:Math.min(ne,10)}),ql.set(0),ln.set(null),pn().catch(ee=>console.error("Analysis failed:",ee))}async function Be(){try{const k=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});B=[],P=new MediaRecorder(k,{mimeType:"audio/webm"}),P.ondataavailable=Y=>{Y.data.size>0&&B.push(Y.data)},P.onstop=async()=>{k.getTracks().forEach(Q=>Q.stop());const Y=new Blob(B,{type:"audio/webm"});await Ce(Y)},P.start(100),l(6,x=!0),l(7,F=0),A=setInterval(()=>{l(7,F+=.1)},100)}catch(k){console.error("Failed to start recording:",k),alert("Could not access microphone. Please allow microphone access.")}}function Te(){P&&x&&(P.stop(),l(6,x=!1),A&&(clearInterval(A),A=null))}async function De(){if(!a||!u)return;const k=a.length,Y=new ArrayBuffer(44+k*2),Q=new DataView(Y),j=(Ee,Ue)=>{for(let je=0;je<Ue.length;je++)Q.setUint8(Ee+je,Ue.charCodeAt(je))};j(0,"RIFF"),Q.setUint32(4,36+k*2,!0),j(8,"WAVE"),j(12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,1,!0),Q.setUint16(22,1,!0),Q.setUint32(24,u,!0),Q.setUint32(28,u*2,!0),Q.setUint16(32,2,!0),Q.setUint16(34,16,!0),j(36,"data"),Q.setUint32(40,k*2,!0);let de=44;for(let Ee=0;Ee<k;Ee++){const Ue=Math.max(-1,Math.min(1,a[Ee]));Q.setInt16(de,Ue<0?Ue*32768:Ue*32767,!0),de+=2}const pe=new Blob([Y],{type:"audio/wav"});let ne="audio.wav";if(n&&(ne=n.replace(/\.[^/.]+$/,"")+".wav"),"showSaveFilePicker"in window)try{const Ue=await(await window.showSaveFilePicker({suggestedName:ne,types:[{description:"WAV Audio",accept:{"audio/wav":[".wav"]}}]})).createWritable();await Ue.write(pe),await Ue.close();return}catch(Ee){if(Ee.name==="AbortError")return}const ee=URL.createObjectURL(pe),ct=document.createElement("a");ct.href=ee,ct.download=ne,ct.click(),URL.revokeObjectURL(ee)}let xe=!0,W=!0,me=!1,re=!1,Pe=!1,Ae=!1,Ve=!1,ye=!1,_e=!0,Se=5e3,Ge;function I(){Ge.click()}async function q(k){var j;const Y=k.target,Q=(j=Y.files)==null?void 0:j[0];Q&&await Fe(Q),Y.value=""}function ae(){U.click()}async function $(k){var j;const Y=k.target,Q=(j=Y.files)==null?void 0:j[0];if(Q){const de=await Q.text(),pe=ga(de);if(pe&&pe.backend!==r)try{await qn(pe.backend),localStorage.setItem("ozen-backend",pe.backend),a&&(hn(),pn().catch(ne=>console.error("Analysis failed:",ne)))}catch(ne){console.error("Failed to switch backend:",ne)}}Y.value=""}async function te(){const k=hs({showPitch:xe,showFormants:W,showIntensity:me,showHNR:re,showCoG:Pe,showSpectralTilt:Ae,showA1P0:Ve,showNMR:ye});let Y="data_points.tsv";if(n&&(Y=n.replace(/\.[^/.]+$/,"")+"_points.tsv"),"showSaveFilePicker"in window)try{const ne=await(await window.showSaveFilePicker({suggestedName:Y,types:[{description:"Tab-Separated Values",accept:{"text/tab-separated-values":[".tsv"]}}]})).createWritable();await ne.write(k),await ne.close();return}catch(pe){if(pe.name==="AbortError")return}const Q=new Blob([k],{type:"text/tab-separated-values"}),j=URL.createObjectURL(Q),de=document.createElement("a");de.href=j,de.download=Y,de.click(),URL.revokeObjectURL(j)}function fe(){v.click()}async function ce(k){var j;const Y=k.target,Q=(j=Y.files)==null?void 0:j[0];if(Q){const de=await Q.text();fa(de)===-1&&console.error("Failed to import data points: invalid TSV format (need time and frequency columns)")}Y.value=""}function we(k){jl[k?"unshift":"push"](()=>{Ge=k,l(18,Ge)})}function oe(k){jl[k?"unshift":"push"](()=>{U=k,l(4,U)})}function D(k){jl[k?"unshift":"push"](()=>{v=k,l(5,v)})}function z(){xe=this.checked,l(8,xe)}function le(){W=this.checked,l(9,W)}function Le(){me=this.checked,l(10,me)}function it(){re=this.checked,l(11,re)}function _t(){Pe=this.checked,l(12,Pe)}function rt(){Ae=this.checked,l(13,Ae)}function Ke(){Ve=this.checked,l(14,Ve)}function qt(){ye=this.checked,l(15,ye)}function gt(){_e=this.checked,l(16,_e)}function wl(){_=us(this),ms.set(_)}function ot(){Se=us(this),l(17,Se)}return t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&4096&&_!==H&&(l(43,H=_),a&&w&&(hn(),pn().catch(k=>console.error("Analysis failed:",k))))},[a,w,_,S,U,v,x,F,xe,W,me,re,Pe,Ae,Ve,ye,_e,Se,Ge,n,u,d,h,y,T,C,M,E,N,V,Z,Fe,Ce,Be,Te,De,I,q,ae,$,te,fe,ce,H,we,oe,D,z,le,Le,it,_t,rt,Ke,qt,gt,wl,ot]}class ti extends an{constructor(e){super(),rn(this,e,Ja,Ya,sn,{},null,[-1,-1,-1])}}export{ti as component};

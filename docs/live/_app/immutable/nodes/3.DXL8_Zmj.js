import{r as St,s as Ql,n as pt,d as f,i as H,x as vt,G as Hn,D as Ml,a as ae,b as s,E as U,B as i,c,e as m,g as _,f as Y,H as x,h as u,j as g,t as J,I as cl,_ as Rs,C as Me,k as Ee,$ as Fs,w as Vn,L as At,a0 as Hs,K as Kl,M as ls,J as ns,N as xt,O as Ht}from"../chunks/DzR6qLkJ.js";import{a as he,t as De,S as $l,i as en,g as Sl,c as Bl,d as Ft,m as Ut,e as zt,b as Ot}from"../chunks/CbSE4UIZ.js";import{n as wl,o as Gs,q as qs,u as rn,v as Ws,x as Ln,e as Jl,b as jl,y as ss,z as Ks,t as Yl,A as Us,B as xn,C as Xs,D as Ys,E as as,F as Js,G as Zs,H as Qs,I as Bn,f as Sn,g as $s,i as Rn,p as ea,l as zs,J as Os,W as ta,S as la,T as na,K as is,c as sn,r as an,a as Fn,s as Un,d as rs,L as sa,M as aa,N as os,w as ia,h as ra,j as oa,k as ca,O as ua}from"../chunks/DvzqY-dd.js";import{s as zn,l as fa,a as cs}from"../chunks/BmAGY9Gp.js";function Zl(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function da(t,e){t.d(1),e.delete(t.key)}function ha(t,e){De(t,1,1,()=>{e.delete(t.key)})}function xs(t,e,l,n,a,r,o,d,h,v,k,b){let p=t.length,y=r.length,w=p;const M={};for(;w--;)M[t[w].key]=w;const E=[],I=new Map,B=new Map,C=[];for(w=y;w--;){const j=b(a,r,w),L=l(j);let V=o.get(L);V?C.push(()=>V.p(j,e)):(V=v(L,j),V.c()),I.set(L,E[w]=V),L in M&&B.set(L,Math.abs(w-M[L]))}const D=new Set,S=new Set;function P(j){he(j,1),j.m(d,k),o.set(j.key,j),k=j.first,y--}for(;p&&y;){const j=E[y-1],L=t[p-1],V=j.key,R=L.key;j===L?(k=j.first,p--,y--):I.has(R)?!o.has(V)||D.has(V)?P(j):S.has(R)?p--:B.get(V)>B.get(R)?(S.add(V),P(j)):(D.add(R),p--):(h(L,o),p--)}for(;p--;){const j=t[p];I.has(j.key)||h(j,o)}for(;y;)P(E[y-1]);return St(C),E}function va(t){let e,l,n='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 15V3m0 0l-4 4m4-4l4 4"></path><path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17"></path></svg>',a,r,o="Drop an audio file here",d,h,v="or click to select",k,b,p,y="Supports WAV, FLAC, MP3, OGG",w,M,E,I,B=t[0]&&us(t);return{c(){e=u("div"),l=u("div"),l.innerHTML=n,a=g(),r=u("p"),r.textContent=o,d=g(),h=u("p"),h.textContent=v,k=g(),B&&B.c(),b=g(),p=u("p"),p.textContent=y,w=g(),M=u("input"),this.h()},l(C){e=c(C,"DIV",{class:!0,role:!0,tabindex:!0});var D=m(e);l=c(D,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-hj89uc"&&(l.innerHTML=n),a=_(D),r=c(D,"P",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-nangy9"&&(r.textContent=o),d=_(D),h=c(D,"P",{class:!0,"data-svelte-h":!0}),x(h)!=="svelte-fp1l9p"&&(h.textContent=v),k=_(D),B&&B.l(D),b=_(D),p=c(D,"P",{class:!0,"data-svelte-h":!0}),x(p)!=="svelte-tb4emq"&&(p.textContent=y),w=_(D),M=c(D,"INPUT",{type:!0,accept:!0,class:!0}),D.forEach(f),this.h()},h(){i(l,"class","icon svelte-lmmgcl"),i(r,"class","primary svelte-lmmgcl"),i(h,"class","secondary svelte-lmmgcl"),i(p,"class","formats svelte-lmmgcl"),i(M,"type","file"),i(M,"accept","audio/*"),i(M,"class","svelte-lmmgcl"),i(e,"class","drop-zone svelte-lmmgcl"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"drag-over",t[1])},m(C,D){H(C,e,D),s(e,l),s(e,a),s(e,r),s(e,d),s(e,h),s(e,k),B&&B.m(e,null),s(e,b),s(e,p),s(e,w),s(e,M),t[13](M),E||(I=[U(M,"change",t[9]),U(e,"drop",t[5]),U(e,"dragover",t[6]),U(e,"dragleave",t[7]),U(e,"click",t[8]),U(e,"keydown",t[14])],E=!0)},p(C,D){C[0]?B?B.p(C,D):(B=us(C),B.c(),B.m(e,b)):B&&(B.d(1),B=null),D&2&&cl(e,"drag-over",C[1])},d(C){C&&f(e),B&&B.d(),t[13](null),E=!1,St(I)}}}function pa(t){let e,l,n,a,r,o=t[4].toFixed(1)+"",d,h,v,k,b='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop Recording</span>',p,y;return{c(){e=u("div"),l=u("div"),n=u("div"),a=g(),r=u("span"),d=J(o),h=J("s"),v=g(),k=u("button"),k.innerHTML=b,this.h()},l(w){e=c(w,"DIV",{class:!0});var M=m(e);l=c(M,"DIV",{class:!0});var E=m(l);n=c(E,"DIV",{class:!0}),m(n).forEach(f),a=_(E),r=c(E,"SPAN",{class:!0});var I=m(r);d=Y(I,o),h=Y(I,"s"),I.forEach(f),E.forEach(f),v=_(M),k=c(M,"BUTTON",{class:!0,"data-svelte-h":!0}),x(k)!=="svelte-135d7zb"&&(k.innerHTML=b),M.forEach(f),this.h()},h(){i(n,"class","recording-pulse svelte-lmmgcl"),i(r,"class","recording-time svelte-lmmgcl"),i(l,"class","recording-indicator svelte-lmmgcl"),i(k,"class","stop-record-btn svelte-lmmgcl"),i(e,"class","drop-zone recording svelte-lmmgcl")},m(w,M){H(w,e,M),s(e,l),s(l,n),s(l,a),s(l,r),s(r,d),s(r,h),s(e,v),s(e,k),p||(y=U(k,"click",t[11]),p=!0)},p(w,M){M&16&&o!==(o=w[4].toFixed(1)+"")&&ae(d,o)},d(w){w&&f(e),p=!1,y()}}}function us(t){let e,l,n="or",a,r,o='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" class="svelte-lmmgcl"><circle cx="12" cy="12" r="8"></circle></svg> <span>Record from Microphone</span>',d,h;return{c(){e=u("div"),l=u("span"),l.textContent=n,a=g(),r=u("button"),r.innerHTML=o,this.h()},l(v){e=c(v,"DIV",{class:!0});var k=m(e);l=c(k,"SPAN",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-1wtgm67"&&(l.textContent=n),a=_(k),r=c(k,"BUTTON",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-8eds6f"&&(r.innerHTML=o),k.forEach(f),this.h()},h(){i(l,"class","divider-text svelte-lmmgcl"),i(r,"class","record-btn svelte-lmmgcl"),i(e,"class","record-section svelte-lmmgcl")},m(v,k){H(v,e,k),s(e,l),s(e,a),s(e,r),d||(h=U(r,"click",Rs(t[10])),d=!0)},p:pt,d(v){v&&f(e),d=!1,h()}}}function ma(t){let e;function l(r,o){return r[3]?pa:va}let n=l(t),a=n(t);return{c(){a.c(),e=vt()},l(r){a.l(r),e=vt()},m(r,o){a.m(r,o),H(r,e,o)},p(r,[o]){n===(n=l(r))&&a?a.p(r,o):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},i:pt,o:pt,d(r){r&&f(e),a.d(r)}}}function _a(t,e,l){let{onFile:n}=e,{onRecordedBlob:a=void 0}=e,r=!1,o,d=!1,h=null,v=null,k=[],b=0,p=null;Hn(()=>{p&&clearInterval(p),h&&d&&h.stop(),v&&(v.getTracks().forEach(P=>P.stop()),v=null)});function y(P){var L;P.preventDefault(),l(1,r=!1);const j=(L=P.dataTransfer)==null?void 0:L.files[0];j&&n(j)}function w(P){P.preventDefault(),l(1,r=!0)}function M(){l(1,r=!1)}function E(){o.click()}function I(P){var V;const L=(V=P.target.files)==null?void 0:V[0];L&&n(L)}async function B(){if(a)try{const P=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});v=P,k=[],h=new MediaRecorder(P,{mimeType:"audio/webm"}),h.ondataavailable=j=>{j.data.size>0&&k.push(j.data)},h.onstop=async()=>{P.getTracks().forEach(L=>L.stop()),v=null;const j=new Blob(k,{type:"audio/webm"});a==null||a(j)},h.start(100),l(3,d=!0),l(4,b=0),p=setInterval(()=>{l(4,b+=.1)},100)}catch(P){console.error("Failed to start recording:",P),alert("Could not access microphone. Please allow microphone access.")}}function C(){h&&d&&(h.stop(),l(3,d=!1),p&&(clearInterval(p),p=null))}function D(P){Ml[P?"unshift":"push"](()=>{o=P,l(2,o)})}const S=P=>P.key==="Enter"&&E();return t.$$set=P=>{"onFile"in P&&l(12,n=P.onFile),"onRecordedBlob"in P&&l(0,a=P.onRecordedBlob)},[a,r,o,d,b,y,w,M,E,I,B,C,n,D,S]}class ga extends $l{constructor(e){super(),en(this,e,_a,ma,Ql,{onFile:12,onRecordedBlob:0})}}function fs(t,e,l){const n=t.slice();n[48]=e[l];const a=Math.max(ht,n[17](n[48].start));n[49]=a;const r=Math.min(n[9],n[17](n[48].end));n[50]=r;const o=n[50]-n[49];n[51]=o;const d=n[49]-ht;return n[52]=d,n}function On(t){const e=t.slice(),l=e[48].end-e[48].start;e[55]=l;const n=e[55]>=1?e[55].toFixed(2)+"s":(e[55]*1e3).toFixed(0)+"ms";return e[56]=n,e}function ds(t){let e,l,n,a,r;function o(y,w){return y[4]===y[48].index?ka:ba}let d=o(t),h=d(t);function v(...y){return t[34](t[48],...y)}function k(...y){return t[35](t[48],...y)}function b(...y){return t[36](t[48],...y)}let p=t[48].index>0&&vs(t);return{c(){e=u("div"),h.c(),l=g(),p&&p.c(),n=vt(),this.h()},l(y){e=c(y,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var w=m(e);h.l(w),w.forEach(f),l=_(y),p&&p.l(y),n=vt(),this.h()},h(){i(e,"class","interval svelte-1h3ij0x"),Me(e,"left",t[52]+"px"),Me(e,"width",t[51]+"px"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]&&t[10]===t[48].index)},m(y,w){H(y,e,w),h.m(e,null),H(y,l,w),p&&p.m(y,w),H(y,n,w),a||(r=[U(e,"click",v),U(e,"dblclick",k),U(e,"keydown",b)],a=!0)},p(y,w){t=y,d===(d=o(t))&&h?h.p(t,w):(h.d(1),h=d(t),h&&(h.c(),h.m(e,null))),w[0]&256&&Me(e,"left",t[52]+"px"),w[0]&768&&Me(e,"width",t[51]+"px"),w[0]&1284&&cl(e,"selected",t[2]&&t[10]===t[48].index),t[48].index>0?p?p.p(t,w):(p=vs(t),p.c(),p.m(n.parentNode,n)):p&&(p.d(1),p=null)},d(y){y&&(f(e),f(l),f(n)),h.d(),p&&p.d(y),a=!1,St(r)}}}function ba(t){let e,l=(t[48].text||" ")+"",n,a,r,o,d;function h(){return t[32](t[48])}function v(...b){return t[33](t[48],...b)}let k=t[51]>30&&hs(t);return{c(){e=u("span"),n=J(l),a=g(),k&&k.c(),r=vt(),this.h()},l(b){e=c(b,"SPAN",{class:!0,role:!0,tabindex:!0});var p=m(e);n=Y(p,l),p.forEach(f),a=_(b),k&&k.l(b),r=vt(),this.h()},h(){i(e,"class","interval-text svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0")},m(b,p){H(b,e,p),s(e,n),H(b,a,p),k&&k.m(b,p),H(b,r,p),o||(d=[U(e,"click",Rs(h)),U(e,"keydown",v)],o=!0)},p(b,p){t=b,p[0]&256&&l!==(l=(t[48].text||" ")+"")&&ae(n,l),t[51]>30?k?k.p(t,p):(k=hs(t),k.c(),k.m(r.parentNode,r)):k&&(k.d(1),k=null)},d(b){b&&(f(e),f(a),f(r)),k&&k.d(b),o=!1,St(d)}}}function ka(t){let e,l,n;return{c(){e=u("input"),this.h()},l(a){e=c(a,"INPUT",{type:!0,class:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","interval-input svelte-1h3ij0x"),e.autofocus=!0},m(a,r){H(a,e,r),At(e,t[5]),e.focus(),l||(n=[U(e,"input",t[31]),U(e,"blur",t[26]),U(e,"keydown",t[27])],l=!0)},p(a,r){r[0]&32&&e.value!==a[5]&&At(e,a[5])},d(a){a&&f(e),l=!1,St(n)}}}function hs(t){let e,l=t[56]+"",n;return{c(){e=u("span"),n=J(l),this.h()},l(a){e=c(a,"SPAN",{class:!0});var r=m(e);n=Y(r,l),r.forEach(f),this.h()},h(){i(e,"class","interval-duration svelte-1h3ij0x")},m(a,r){H(a,e,r),s(e,n)},p(a,r){r[0]&256&&l!==(l=a[56]+"")&&ae(n,l)},d(a){a&&f(e)}}}function vs(t){let e,l,n,a;function r(...h){return t[37](t[48],...h)}function o(...h){return t[38](t[48],...h)}function d(...h){return t[39](t[48],...h)}return{c(){e=u("div"),this.h()},l(h){e=c(h,"DIV",{class:!0,style:!0,title:!0,role:!0,tabindex:!0,"aria-valuenow":!0}),m(e).forEach(f),this.h()},h(){i(e,"class","boundary svelte-1h3ij0x"),Me(e,"left",t[52]+"px"),i(e,"title","Drag to move, right-click to remove"),i(e,"role","slider"),i(e,"tabindex","0"),i(e,"aria-valuenow",l=t[48].start)},m(h,v){H(h,e,v),n||(a=[U(e,"mousedown",r),U(e,"contextmenu",o),U(e,"keydown",d)],n=!0)},p(h,v){t=h,v[0]&256&&Me(e,"left",t[52]+"px"),v[0]&256&&l!==(l=t[48].start)&&i(e,"aria-valuenow",l)},d(h){h&&f(e),n=!1,St(a)}}}function ps(t,e){let l,n,a=e[51]>2&&ds(On(e));return{key:t,first:null,c(){l=vt(),a&&a.c(),n=vt(),this.h()},l(r){l=vt(),a&&a.l(r),n=vt(),this.h()},h(){this.first=l},m(r,o){H(r,l,o),a&&a.m(r,o),H(r,n,o)},p(r,o){e=r,e[51]>2?a?a.p(On(e),o):(a=ds(On(e)),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(r){r&&(f(l),f(n)),a&&a.d(r)}}}function ms(t){let e;return{c(){e=u("div"),this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0}),m(e).forEach(f),this.h()},h(){i(e,"class","hover-cursor svelte-1h3ij0x"),Me(e,"left",t[17](t[11])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&2048&&Me(e,"left",l[17](l[11])+"px")},d(l){l&&f(e)}}}function _s(t){let e;return{c(){e=u("div"),this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0}),m(e).forEach(f),this.h()},h(){i(e,"class","cursor svelte-1h3ij0x"),Me(e,"left",t[17](t[12])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&4096&&Me(e,"left",l[17](l[12])+"px")},d(l){l&&f(e)}}}function gs(t){let e,l,n,a,r="Remove boundary",o,d;return{c(){e=u("div"),l=g(),n=u("div"),a=u("button"),a.textContent=r,this.h()},l(h){e=c(h,"DIV",{class:!0}),m(e).forEach(f),l=_(h),n=c(h,"DIV",{class:!0,style:!0});var v=m(n);a=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-ypaiql"&&(a.textContent=r),v.forEach(f),this.h()},h(){i(e,"class","context-menu-backdrop svelte-1h3ij0x"),i(a,"class","context-menu-item svelte-1h3ij0x"),i(n,"class","context-menu svelte-1h3ij0x"),Me(n,"left",t[7].x+"px"),Me(n,"top",t[7].y+"px")},m(h,v){H(h,e,v),H(h,l,v),H(h,n,v),s(n,a),o||(d=[U(e,"click",t[15]),U(a,"click",t[16])],o=!0)},p(h,v){v[0]&128&&Me(n,"left",h[7].x+"px"),v[0]&128&&Me(n,"top",h[7].y+"px")},d(h){h&&(f(e),f(l),f(n)),o=!1,St(d)}}}function wa(t){let e,l,n,a,r,o,d=t[0].name+"",h,v,k,b=[],p=new Map,y,w=t[11]!==null&&t[17](t[11])>=ht&&t[17](t[11])<=t[9],M,E=t[17](t[12])>=ht&&t[17](t[12])<=t[9],I,B,C,D,S=Zl(t[8]);const P=R=>R[48].index;for(let R=0;R<S.length;R+=1){let O=fs(t,S,R),Q=P(O);p.set(Q,b[R]=ps(Q,O))}let j=w&&ms(t),L=E&&_s(t),V=t[7]&&gs(t);return{c(){e=u("div"),l=u("div"),n=g(),a=u("div"),r=g(),o=u("div"),h=J(d),v=g(),k=u("div");for(let R=0;R<b.length;R+=1)b[R].c();y=g(),j&&j.c(),M=g(),L&&L.c(),I=g(),V&&V.c(),B=vt(),this.h()},l(R){e=c(R,"DIV",{class:!0,role:!0,tabindex:!0});var O=m(e);l=c(O,"DIV",{class:!0,style:!0}),m(l).forEach(f),n=_(O),a=c(O,"DIV",{class:!0,style:!0}),m(a).forEach(f),r=_(O),o=c(O,"DIV",{class:!0});var Q=m(o);h=Y(Q,d),Q.forEach(f),v=_(O),k=c(O,"DIV",{class:!0,style:!0});var Ce=m(k);for(let _e=0;_e<b.length;_e+=1)b[_e].l(Ce);Ce.forEach(f),y=_(O),j&&j.l(O),M=_(O),L&&L.l(O),O.forEach(f),I=_(R),V&&V.l(R),B=vt(),this.h()},h(){i(l,"class","margin-area left svelte-1h3ij0x"),Me(l,"width",ht+"px"),i(a,"class","margin-area right svelte-1h3ij0x"),Me(a,"width",Vl+"px"),i(o,"class","tier-label svelte-1h3ij0x"),i(k,"class","intervals svelte-1h3ij0x"),Me(k,"left",ht+"px"),Me(k,"right",Vl+"px"),i(e,"class","tier-container svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]),cl(e,"dragging",t[6])},m(R,O){H(R,e,O),s(e,l),s(e,n),s(e,a),s(e,r),s(e,o),s(o,h),s(e,v),s(e,k);for(let Q=0;Q<b.length;Q+=1)b[Q]&&b[Q].m(k,null);s(e,y),j&&j.m(e,null),s(e,M),L&&L.m(e,null),t[40](e),H(R,I,O),V&&V.m(R,O),H(R,B,O),C||(D=[U(window,"keydown",t[30]),U(window,"mouseup",t[20]),U(e,"click",t[18]),U(e,"dblclick",t[24]),U(e,"mousemove",t[19]),U(e,"mouseup",t[20]),U(e,"mouseleave",t[21]),U(e,"keydown",t[41])],C=!0)},p(R,O){O[0]&1&&d!==(d=R[0].name+"")&&ae(h,d),O[0]&247621430&&(S=Zl(R[8]),b=xs(b,O,P,1,R,S,p,k,da,ps,null,fs)),O[0]&2560&&(w=R[11]!==null&&R[17](R[11])>=ht&&R[17](R[11])<=R[9]),w?j?j.p(R,O):(j=ms(R),j.c(),j.m(e,M)):j&&(j.d(1),j=null),O[0]&4608&&(E=R[17](R[12])>=ht&&R[17](R[12])<=R[9]),E?L?L.p(R,O):(L=_s(R),L.c(),L.m(e,null)):L&&(L.d(1),L=null),O[0]&4&&cl(e,"selected",R[2]),O[0]&64&&cl(e,"dragging",R[6]),R[7]?V?V.p(R,O):(V=gs(R),V.c(),V.m(B.parentNode,B)):V&&(V.d(1),V=null)},i:pt,o:pt,d(R){R&&(f(e),f(I),f(B));for(let O=0;O<b.length;O+=1)b[O].d();j&&j.d(),L&&L.d(),t[40](null),V&&V.d(R),C=!1,St(D)}}}const ht=45,Vl=45;function ya(t,e,l){let n,a,r,o,d,h,v;Ee(t,Yl,N=>l(29,o=N)),Ee(t,Ln,N=>l(10,d=N)),Ee(t,rn,N=>l(11,h=N)),Ee(t,jl,N=>l(12,v=N));let{tier:k}=e,{index:b}=e,{isSelected:p=!1}=e;Fs();let y,w=0,M,E=null,I="",B=!1,C=null,D=null;function S(N,q){N.preventDefault(),N.stopPropagation(),wl.set(b),Gs(),l(6,B=!0),C=q}function P(N,q){N.preventDefault(),N.stopPropagation(),l(7,D={x:N.clientX,y:N.clientY,intervalIndex:q})}function j(){l(7,D=null)}function L(){D&&(wl.set(b),qs(D.intervalIndex),l(7,D=null))}Vn(()=>{M=new ResizeObserver(N=>{const q=N[0].contentRect;l(28,w=q.width),q.height}),M.observe(y)}),Hn(()=>{M==null||M.disconnect()});function V(N){const{start:q,end:ne}=o;return ht+(N-q)/(ne-q)*n}function R(N){const{start:q,end:ne}=o;return q+(N-ht)/n*(ne-q)}function O(){wl.set(b)}function Q(N){const q=y.getBoundingClientRect(),ne=N.clientX-q.left;if((ne<ht||ne>w-Vl)&&(rn.set(null),!B))return;const $=R(ne);rn.set($),B&&C!==null&&Ws(C,$)}function Ce(){B&&(l(6,B=!1),C=null)}function _e(){rn.set(null),B&&(l(6,B=!1),C=null)}function xe(N,q){N.stopPropagation(),wl.set(b),Ln.set(q);const ne=k.intervals[q];ne&&(Jl.set({start:ne.start,end:ne.end}),jl.set(ne.start))}function Fe(N,q){N.stopPropagation();const ne=y.getBoundingClientRect(),$=N.clientX-ne.left;if($<ht||$>w-Vl)return;const te=R($);wl.set(b),ss(te)}function Re(N){const q=y.getBoundingClientRect(),ne=N.clientX-q.left;if(ne<ht||ne>w-Vl)return;const $=R(ne);wl.set(b),ss($)}function we(N){l(4,E=N),l(5,I=k.intervals[N].text)}function Be(){E!==null&&(Ks(b,E,I),l(4,E=null),l(5,I=""))}function ye(N){N.key==="Enter"?Be():N.key==="Escape"&&(l(4,E=null),l(5,I=""))}const Ie=N=>N.key==="Escape"&&D&&j();function Se(){I=this.value,l(5,I)}const X=N=>{Jl.set({start:N.start,end:N.end}),jl.set(N.start),we(N.index)},ve=(N,q)=>q.key==="Enter"&&we(N.index),ie=(N,q)=>xe(q,N.index),Ne=(N,q)=>Fe(q,N.index),Pe=(N,q)=>{q.key==="Enter"&&(wl.set(b),Ln.set(N.index))},je=(N,q)=>S(q,N.index),Te=(N,q)=>P(q,N.index),pe=(N,q)=>q.key==="Enter"&&we(N.index);function Ae(N){Ml[N?"unshift":"push"](()=>{y=N,l(3,y)})}const $e=N=>N.key==="Enter"&&O();return t.$$set=N=>{"tier"in N&&l(0,k=N.tier),"index"in N&&l(1,b=N.index),"isSelected"in N&&l(2,p=N.isSelected)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&(n=Math.max(0,w-ht-Vl)),t.$$.dirty[0]&268435456&&l(9,a=w-Vl),t.$$.dirty[0]&536870913&&l(8,r=(()=>{const{start:N,end:q}=o;return k.intervals.map((ne,$)=>({...ne,index:$})).filter(ne=>ne.end>N&&ne.start<q)})())},[k,b,p,y,E,I,B,D,r,a,d,h,v,S,P,j,L,V,O,Q,Ce,_e,xe,Fe,Re,we,Be,ye,w,o,Ie,Se,X,ve,ie,Ne,Pe,je,Te,pe,Ae,$e]}class Ca extends $l{constructor(e){super(),en(this,e,ya,wa,Ql,{tier:0,index:1,isSelected:2},null,[-1,-1])}}function bs(t){let e,l;return{c(){e=u("div"),l=J(t[0]),this.h()},l(n){e=c(n,"DIV",{class:!0});var a=m(e);l=Y(a,t[0]),a.forEach(f),this.h()},h(){i(e,"class","modal-header svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&1&&ae(l,n[0])},d(n){n&&f(e)}}}function ks(t){let e,l;return{c(){e=u("p"),l=J(t[2]),this.h()},l(n){e=c(n,"P",{class:!0});var a=m(e);l=Y(a,t[2]),a.forEach(f),this.h()},h(){i(e,"class","modal-message svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&4&&ae(l,n[2])},d(n){n&&f(e)}}}function ws(t){let e,l,n;return{c(){e=u("input"),this.h()},l(a){e=c(a,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","modal-input svelte-1vzci29"),i(e,"placeholder",t[3])},m(a,r){H(a,e,r),t[14](e),At(e,t[6]),l||(n=[U(e,"input",t[15]),U(e,"keydown",t[11])],l=!0)},p(a,r){r&8&&i(e,"placeholder",a[3]),r&64&&e.value!==a[6]&&At(e,a[6])},d(a){a&&f(e),t[14](null),l=!1,St(n)}}}function ys(t){let e,l,n,a;return{c(){e=u("button"),l=J(t[5]),this.h()},l(r){e=c(r,"BUTTON",{class:!0});var o=m(e);l=Y(o,t[5]),o.forEach(f),this.h()},h(){i(e,"class","modal-btn cancel svelte-1vzci29")},m(r,o){H(r,e,o),s(e,l),n||(a=U(e,"click",t[9]),n=!0)},p(r,o){o&32&&ae(l,r[5])},d(r){r&&f(e),n=!1,a()}}}function Ta(t){let e,l,n,a,r,o,d,h,v,k,b,p,y=t[0]&&bs(t),w=t[2]&&ks(t),M=t[1]==="prompt"&&ws(t),E=t[1]!=="alert"&&ys(t);return{c(){e=u("div"),l=u("div"),y&&y.c(),n=g(),a=u("div"),w&&w.c(),r=g(),M&&M.c(),o=g(),d=u("div"),E&&E.c(),h=g(),v=u("button"),k=J(t[4]),this.h()},l(I){e=c(I,"DIV",{class:!0,role:!0,"aria-modal":!0});var B=m(e);l=c(B,"DIV",{class:!0});var C=m(l);y&&y.l(C),n=_(C),a=c(C,"DIV",{class:!0});var D=m(a);w&&w.l(D),r=_(D),M&&M.l(D),D.forEach(f),o=_(C),d=c(C,"DIV",{class:!0});var S=m(d);E&&E.l(S),h=_(S),v=c(S,"BUTTON",{class:!0});var P=m(v);k=Y(P,t[4]),P.forEach(f),S.forEach(f),C.forEach(f),B.forEach(f),this.h()},h(){i(a,"class","modal-body svelte-1vzci29"),i(v,"class","modal-btn confirm svelte-1vzci29"),i(d,"class","modal-footer svelte-1vzci29"),i(l,"class","modal svelte-1vzci29"),i(e,"class","modal-backdrop svelte-1vzci29"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(I,B){H(I,e,B),s(e,l),y&&y.m(l,null),s(l,n),s(l,a),w&&w.m(a,null),s(a,r),M&&M.m(a,null),s(l,o),s(l,d),E&&E.m(d,null),s(d,h),s(d,v),s(v,k),b||(p=[U(window,"keydown",t[10]),U(v,"click",t[8]),U(e,"click",t[12])],b=!0)},p(I,[B]){I[0]?y?y.p(I,B):(y=bs(I),y.c(),y.m(l,n)):y&&(y.d(1),y=null),I[2]?w?w.p(I,B):(w=ks(I),w.c(),w.m(a,r)):w&&(w.d(1),w=null),I[1]==="prompt"?M?M.p(I,B):(M=ws(I),M.c(),M.m(a,null)):M&&(M.d(1),M=null),I[1]!=="alert"?E?E.p(I,B):(E=ys(I),E.c(),E.m(d,h)):E&&(E.d(1),E=null),B&16&&ae(k,I[4])},i:pt,o:pt,d(I){I&&f(e),y&&y.d(),w&&w.d(),M&&M.d(),E&&E.d(),b=!1,St(p)}}}function Ea(t,e,l){let{title:n=""}=e,{type:a="alert"}=e,{message:r=""}=e,{placeholder:o=""}=e,{initialValue:d=""}=e,{confirmText:h="OK"}=e,{cancelText:v="Cancel"}=e;const k=Fs();let b=d,p;Vn(()=>{a==="prompt"&&p&&(p.focus(),p.select())});function y(){a==="prompt"?k("confirm",b):k("confirm")}function w(){k("cancel")}function M(D){D.key==="Escape"?w():D.key==="Enter"&&a!=="prompt"&&y()}function E(D){D.key==="Enter"?y():D.key==="Escape"&&w()}function I(D){D.target===D.currentTarget&&w()}function B(D){Ml[D?"unshift":"push"](()=>{p=D,l(7,p)})}function C(){b=this.value,l(6,b)}return t.$$set=D=>{"title"in D&&l(0,n=D.title),"type"in D&&l(1,a=D.type),"message"in D&&l(2,r=D.message),"placeholder"in D&&l(3,o=D.placeholder),"initialValue"in D&&l(13,d=D.initialValue),"confirmText"in D&&l(4,h=D.confirmText),"cancelText"in D&&l(5,v=D.cancelText)},[n,a,r,o,h,v,b,p,y,w,M,E,I,d,B,C]}class on extends $l{constructor(e){super(),en(this,e,Ea,Ta,Ql,{title:0,type:1,message:2,placeholder:3,initialValue:13,confirmText:4,cancelText:5})}}function Cs(t,e,l){const n=t.slice();return n[18]=e[l],n[20]=l,n}function Ts(t,e){let l,n,a;return n=new Ca({props:{tier:e[18],index:e[20],isSelected:e[20]===e[4]}}),{key:t,first:null,c(){l=u("div"),Ot(n.$$.fragment),this.h()},l(r){l=c(r,"DIV",{class:!0});var o=m(l);zt(n.$$.fragment,o),o.forEach(f),this.h()},h(){i(l,"class","tier-row svelte-13sadlc"),this.first=l},m(r,o){H(r,l,o),Ut(n,l,null),a=!0},p(r,o){e=r;const d={};o&32&&(d.tier=e[18]),o&32&&(d.index=e[20]),o&48&&(d.isSelected=e[20]===e[4]),n.$set(d)},i(r){a||(he(n.$$.fragment,r),a=!0)},o(r){De(n.$$.fragment,r),a=!1},d(r){r&&f(l),Ft(n)}}}function Es(t){let e,l='No annotation tiers. Click "+ Tier" to add one, or import a TextGrid.';return{c(){e=u("div"),e.textContent=l,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-11870wl"&&(e.textContent=l),this.h()},h(){i(e,"class","empty-message svelte-13sadlc")},m(n,a){H(n,e,a)},d(n){n&&f(e)}}}function Ds(t){let e,l;return e=new on({props:{title:"Add Tier",type:"prompt",message:"Enter a name for the new tier:",placeholder:"Tier name",initialValue:`Tier ${t[5].length+1}`,confirmText:"Add"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&32&&(r.initialValue=`Tier ${n[5].length+1}`),e.$set(r)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Is(t){var n;let e,l;return e=new on({props:{title:"Rename Tier",type:"prompt",message:"Enter a new name for the tier:",placeholder:"Tier name",initialValue:((n=t[5][t[4]])==null?void 0:n.name)||"",confirmText:"Rename"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const o={};r&48&&(o.initialValue=((d=a[5][a[4]])==null?void 0:d.name)||""),e.$set(o)},i(a){l||(he(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ns(t){var n;let e,l;return e=new on({props:{title:"Remove Tier",type:"confirm",message:`Are you sure you want to remove tier "${(n=t[5][t[4]])==null?void 0:n.name}"?`,confirmText:"Remove"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const o={};r&48&&(o.message=`Are you sure you want to remove tier "${(d=a[5][a[4]])==null?void 0:d.name}"?`),e.$set(o)},i(a){l||(he(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ps(t){let e,l;return e=new on({props:{title:"Notice",type:"alert",message:t[2]}}),e.$on("confirm",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&4&&(r.message=n[2]),e.$set(r)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function As(t){let e,l;return e=new on({props:{title:"Export TextGrid",type:"prompt",message:"Enter a filename for the TextGrid:",placeholder:"filename.TextGrid",initialValue:t[3],confirmText:"Export"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&8&&(r.initialValue=n[3]),e.$set(r)},i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Da(t){let e,l,n,a="Import",r,o,d="Export",h,v,k,b,p="+ Tier",y,w,M="Rename",E,I,B="- Tier",C,D,S,P,j="Undo",L,V,R="Redo",O,Q,Ce=t[5].length+"",_e,xe,Fe=t[5].length!==1?"s":"",Re,we,Be,ye=[],Ie=new Map,Se,X,ve,ie,Ne,Pe,je,Te,pe,Ae,$e,N,q=Zl(t[5]);const ne=A=>A[20];for(let A=0;A<q.length;A+=1){let z=Cs(t,q,A),le=ne(z);Ie.set(le,ye[A]=Ts(le,z))}let $=t[5].length===0&&Es(),te=t[1]==="addTier"&&Ds(t),fe=t[1]==="renameTier"&&Is(t),oe=t[1]==="removeTier"&&Ns(t),ge=t[1]==="alert"&&Ps(t),re=t[1]==="exportTextGrid"&&As(t);return{c(){e=u("div"),l=u("div"),n=u("button"),n.textContent=a,r=g(),o=u("button"),o.textContent=d,h=g(),v=u("span"),k=g(),b=u("button"),b.textContent=p,y=g(),w=u("button"),w.textContent=M,E=g(),I=u("button"),I.textContent=B,C=g(),D=u("span"),S=g(),P=u("button"),P.textContent=j,L=g(),V=u("button"),V.textContent=R,O=g(),Q=u("span"),_e=J(Ce),xe=J(" tier"),Re=J(Fe),we=g(),Be=u("div");for(let A=0;A<ye.length;A+=1)ye[A].c();Se=g(),$&&$.c(),X=g(),ve=u("input"),ie=g(),te&&te.c(),Ne=g(),fe&&fe.c(),Pe=g(),oe&&oe.c(),je=g(),ge&&ge.c(),Te=g(),re&&re.c(),pe=vt(),this.h()},l(A){e=c(A,"DIV",{class:!0});var z=m(e);l=c(z,"DIV",{class:!0});var le=m(l);n=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(n)!=="svelte-1yaizdz"&&(n.textContent=a),r=_(le),o=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(o)!=="svelte-1aay3nq"&&(o.textContent=d),h=_(le),v=c(le,"SPAN",{class:!0}),m(v).forEach(f),k=_(le),b=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(b)!=="svelte-269lo2"&&(b.textContent=p),y=_(le),w=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(w)!=="svelte-6whcxg"&&(w.textContent=M),E=_(le),I=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(I)!=="svelte-1kr0wch"&&(I.textContent=B),C=_(le),D=c(le,"SPAN",{class:!0}),m(D).forEach(f),S=_(le),P=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(P)!=="svelte-wb3yww"&&(P.textContent=j),L=_(le),V=c(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),x(V)!=="svelte-2mf54l"&&(V.textContent=R),O=_(le),Q=c(le,"SPAN",{class:!0});var Le=m(Q);_e=Y(Le,Ce),xe=Y(Le," tier"),Re=Y(Le,Fe),Le.forEach(f),le.forEach(f),we=_(z),Be=c(z,"DIV",{class:!0});var et=m(Be);for(let it=0;it<ye.length;it+=1)ye[it].l(et);Se=_(et),$&&$.l(et),et.forEach(f),X=_(z),ve=c(z,"INPUT",{type:!0,accept:!0,style:!0}),z.forEach(f),ie=_(A),te&&te.l(A),Ne=_(A),fe&&fe.l(A),Pe=_(A),oe&&oe.l(A),je=_(A),ge&&ge.l(A),Te=_(A),re&&re.l(A),pe=vt(),this.h()},h(){i(n,"title","Import TextGrid"),i(n,"class","svelte-13sadlc"),i(o,"title","Export TextGrid"),i(o,"class","svelte-13sadlc"),i(v,"class","separator svelte-13sadlc"),i(b,"title","Add new tier"),i(b,"class","svelte-13sadlc"),i(w,"title","Rename selected tier"),i(w,"class","svelte-13sadlc"),i(I,"title","Remove selected tier"),i(I,"class","svelte-13sadlc"),i(D,"class","separator svelte-13sadlc"),i(P,"title","Undo (Ctrl+Z)"),i(P,"class","svelte-13sadlc"),i(V,"title","Redo (Ctrl+Y)"),i(V,"class","svelte-13sadlc"),i(Q,"class","tier-count svelte-13sadlc"),i(l,"class","annotation-toolbar svelte-13sadlc"),i(Be,"class","tiers-container svelte-13sadlc"),i(ve,"type","file"),i(ve,"accept",".TextGrid,.textgrid,.txt,text/plain"),Me(ve,"display","none"),i(e,"class","annotation-editor svelte-13sadlc")},m(A,z){H(A,e,z),s(e,l),s(l,n),s(l,r),s(l,o),s(l,h),s(l,v),s(l,k),s(l,b),s(l,y),s(l,w),s(l,E),s(l,I),s(l,C),s(l,D),s(l,S),s(l,P),s(l,L),s(l,V),s(l,O),s(l,Q),s(Q,_e),s(Q,xe),s(Q,Re),s(e,we),s(e,Be);for(let le=0;le<ye.length;le+=1)ye[le]&&ye[le].m(Be,null);s(Be,Se),$&&$.m(Be,null),s(e,X),s(e,ve),t[14](ve),H(A,ie,z),te&&te.m(A,z),H(A,Ne,z),fe&&fe.m(A,z),H(A,Pe,z),oe&&oe.m(A,z),H(A,je,z),ge&&ge.m(A,z),H(A,Te,z),re&&re.m(A,z),H(A,pe,z),Ae=!0,$e||(N=[U(n,"click",t[6]),U(o,"click",t[8]),U(b,"click",t[9]),U(w,"click",t[11]),U(I,"click",t[10]),U(P,"click",Us),U(V,"click",xn),U(ve,"change",t[7])],$e=!0)},p(A,[z]){(!Ae||z&32)&&Ce!==(Ce=A[5].length+"")&&ae(_e,Ce),(!Ae||z&32)&&Fe!==(Fe=A[5].length!==1?"s":"")&&ae(Re,Fe),z&48&&(q=Zl(A[5]),Sl(),ye=xs(ye,z,ne,1,A,q,Ie,Be,ha,Ts,Se,Cs),Bl()),A[5].length===0?$||($=Es(),$.c(),$.m(Be,null)):$&&($.d(1),$=null),A[1]==="addTier"?te?(te.p(A,z),z&2&&he(te,1)):(te=Ds(A),te.c(),he(te,1),te.m(Ne.parentNode,Ne)):te&&(Sl(),De(te,1,1,()=>{te=null}),Bl()),A[1]==="renameTier"?fe?(fe.p(A,z),z&2&&he(fe,1)):(fe=Is(A),fe.c(),he(fe,1),fe.m(Pe.parentNode,Pe)):fe&&(Sl(),De(fe,1,1,()=>{fe=null}),Bl()),A[1]==="removeTier"?oe?(oe.p(A,z),z&2&&he(oe,1)):(oe=Ns(A),oe.c(),he(oe,1),oe.m(je.parentNode,je)):oe&&(Sl(),De(oe,1,1,()=>{oe=null}),Bl()),A[1]==="alert"?ge?(ge.p(A,z),z&2&&he(ge,1)):(ge=Ps(A),ge.c(),he(ge,1),ge.m(Te.parentNode,Te)):ge&&(Sl(),De(ge,1,1,()=>{ge=null}),Bl()),A[1]==="exportTextGrid"?re?(re.p(A,z),z&2&&he(re,1)):(re=As(A),re.c(),he(re,1),re.m(pe.parentNode,pe)):re&&(Sl(),De(re,1,1,()=>{re=null}),Bl())},i(A){if(!Ae){for(let z=0;z<q.length;z+=1)he(ye[z]);he(te),he(fe),he(oe),he(ge),he(re),Ae=!0}},o(A){for(let z=0;z<ye.length;z+=1)De(ye[z]);De(te),De(fe),De(oe),De(ge),De(re),Ae=!1},d(A){A&&(f(e),f(ie),f(Ne),f(Pe),f(je),f(Te),f(pe));for(let z=0;z<ye.length;z+=1)ye[z].d();$&&$.d(),t[14](null),te&&te.d(A),fe&&fe.d(A),oe&&oe.d(A),ge&&ge.d(A),re&&re.d(A),$e=!1,St(N)}}}function Ia(t,e,l){let n,a,r;Ee(t,wl,S=>l(4,n=S)),Ee(t,Bn,S=>l(5,a=S)),Ee(t,Sn,S=>l(15,r=S));let o,d=null,h="",v="annotations.TextGrid";Vn(()=>{a.length===0&&Xs()});function k(S){l(2,h=S),l(1,d="alert")}function b(){o.click()}async function p(S){var L;const P=S.target,j=(L=P.files)==null?void 0:L[0];if(j){try{const V=await j.text();Ys(V)}catch(V){console.error("Failed to load TextGrid:",V),k("Failed to parse TextGrid file: "+(V instanceof Error?V.message:String(V)))}P.value=""}}async function y(){if(r){const S=r.replace(/\.[^/.]+$/,"");l(3,v=S+".TextGrid")}else l(3,v="annotations.TextGrid");if("showSaveFilePicker"in window)try{const S=as(),j=await(await window.showSaveFilePicker({suggestedName:v,types:[{description:"Praat TextGrid",accept:{"text/plain":[".TextGrid"]}}]})).createWritable();await j.write(S),await j.close();return}catch(S){if(S.name==="AbortError")return}l(1,d="exportTextGrid")}function w(S){const P=as(),j=new Blob([P],{type:"text/plain"}),L=URL.createObjectURL(j),V=document.createElement("a");V.href=L,V.download=S.endsWith(".TextGrid")?S:S+".TextGrid",V.click(),URL.revokeObjectURL(L)}function M(){l(1,d="addTier")}function E(){if(a.length<=1){k("Cannot remove the last tier");return}l(1,d="removeTier")}function I(){l(1,d="renameTier")}function B(S){var j;const P=d;if(l(1,d=null),P==="addTier"&&typeof S.detail=="string"&&S.detail)Js(S.detail);else if(P==="renameTier"&&typeof S.detail=="string"&&S.detail){const L=((j=a[n])==null?void 0:j.name)||"";S.detail!==L&&Zs(n,S.detail)}else P==="removeTier"?Qs(n):P==="exportTextGrid"&&typeof S.detail=="string"&&S.detail&&w(S.detail)}function C(){l(1,d=null)}function D(S){Ml[S?"unshift":"push"](()=>{o=S,l(0,o)})}return[o,d,h,v,n,a,b,p,y,M,E,I,B,C,D]}class Na extends $l{constructor(e){super(),en(this,e,Ia,Da,Ql,{})}}function Ss(t,e,l){const n=t.slice();return n[21]=e[l],n}function Bs(t){let e,l,n="Annotation",a,r=Zl(t[1]),o=[];for(let d=0;d<r.length;d+=1)o[d]=Vs(Ss(t,r,d));return{c(){e=u("div"),l=u("div"),l.textContent=n,a=g();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=c(d,"DIV",{class:!0});var h=m(e);l=c(h,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-16eifwe"&&(l.textContent=n),a=_(h);for(let v=0;v<o.length;v+=1)o[v].l(h);h.forEach(f),this.h()},h(){i(l,"class","section-title svelte-k4aoyj"),i(e,"class","section svelte-k4aoyj")},m(d,h){H(d,e,h),s(e,l),s(e,a);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(e,null)},p(d,h){if(h&2){r=Zl(d[1]);let v;for(v=0;v<r.length;v+=1){const k=Ss(d,r,v);o[v]?o[v].p(k,h):(o[v]=Vs(k),o[v].c(),o[v].m(e,null))}for(;v<o.length;v+=1)o[v].d(1);o.length=r.length}},d(d){d&&f(e),Hs(o,d)}}}function Vs(t){let e,l,n=t[21].tierName+"",a,r,o,d=t[21].text+"",h,v;return{c(){e=u("div"),l=u("span"),a=J(n),r=g(),o=u("span"),h=J(d),v=g(),this.h()},l(k){e=c(k,"DIV",{class:!0});var b=m(e);l=c(b,"SPAN",{class:!0});var p=m(l);a=Y(p,n),p.forEach(f),r=_(b),o=c(b,"SPAN",{class:!0});var y=m(o);h=Y(y,d),y.forEach(f),v=_(b),b.forEach(f),this.h()},h(){i(l,"class","tier-name svelte-k4aoyj"),i(o,"class","interval-text svelte-k4aoyj"),i(e,"class","annotation-row svelte-k4aoyj")},m(k,b){H(k,e,b),s(e,l),s(l,a),s(e,r),s(e,o),s(o,h),s(e,v)},p(k,b){b&2&&n!==(n=k[21].tierName+"")&&ae(a,n),b&2&&d!==(d=k[21].text+"")&&ae(h,d)},d(k){k&&f(e)}}}function Pa(t){let e,l,n,a=t[0].toFixed(3)+"",r,o,d,h,v,k="Pitch & Voice",b,p,y,w,M="F0",E,I,B=An(t[15])+"",C,D,S,P,j="Int",L,V,R=Xl(t[14])+"",O,Q,Ce,_e,xe="HNR",Fe,Re,we=Xl(t[5])+"",Be,ye,Ie,Se,X="Formants",ve,ie,Ne,Pe='<th class="svelte-k4aoyj"></th> <th class="svelte-k4aoyj">Freq</th> <th class="svelte-k4aoyj">BW</th>',je,Te,pe,Ae="F1",$e,N,q=Qe(t[13])+"",ne,$,te,fe=Qe(t[9])+"",oe,ge,re,A,z="F2",le,Le,et=Qe(t[12])+"",it,tt,He,Gt=Qe(t[8])+"",rt,T,K,G,W="F3",de,se,ue=Qe(t[11])+"",ce,Ue,be,Ve=Qe(t[7])+"",Ge,Ll,mt,_t,Rl="F4",gt,lt,ul=Qe(t[10])+"",Bt,Fl,nl,nt=Qe(t[6])+"",Il,Nl,bt,kt,Ul="Spectral",Vt,Oe,qt,Wt,st="CoG",wt,fl,at=An(t[4])+"",Pl,yt,Kt,Xt,Yt="Tilt",Jt,dl,hl=t[3]!==null?`${t[3].toFixed(1)} dB/oct`:"—",qe,Ct,Zt,We,tn="A1-P0",Tt,vl,pl=Xl(t[2])+"",ot,Qt,ze=t[1].length>0&&Bs(t);return{c(){e=u("div"),l=u("div"),n=u("span"),r=J(a),o=J("s"),d=g(),h=u("div"),v=u("div"),v.textContent=k,b=g(),p=u("div"),y=u("div"),w=u("span"),w.textContent=M,E=g(),I=u("span"),C=J(B),D=g(),S=u("div"),P=u("span"),P.textContent=j,L=g(),V=u("span"),O=J(R),Q=g(),Ce=u("div"),_e=u("span"),_e.textContent=xe,Fe=g(),Re=u("span"),Be=J(we),ye=g(),Ie=u("div"),Se=u("div"),Se.textContent=X,ve=g(),ie=u("table"),Ne=u("tr"),Ne.innerHTML=Pe,je=g(),Te=u("tr"),pe=u("td"),pe.textContent=Ae,$e=g(),N=u("td"),ne=J(q),$=g(),te=u("td"),oe=J(fe),ge=g(),re=u("tr"),A=u("td"),A.textContent=z,le=g(),Le=u("td"),it=J(et),tt=g(),He=u("td"),rt=J(Gt),T=g(),K=u("tr"),G=u("td"),G.textContent=W,de=g(),se=u("td"),ce=J(ue),Ue=g(),be=u("td"),Ge=J(Ve),Ll=g(),mt=u("tr"),_t=u("td"),_t.textContent=Rl,gt=g(),lt=u("td"),Bt=J(ul),Fl=g(),nl=u("td"),Il=J(nt),Nl=g(),bt=u("div"),kt=u("div"),kt.textContent=Ul,Vt=g(),Oe=u("div"),qt=u("div"),Wt=u("span"),Wt.textContent=st,wt=g(),fl=u("span"),Pl=J(at),yt=g(),Kt=u("div"),Xt=u("span"),Xt.textContent=Yt,Jt=g(),dl=u("span"),qe=J(hl),Ct=g(),Zt=u("div"),We=u("span"),We.textContent=tn,Tt=g(),vl=u("span"),ot=J(pl),Qt=g(),ze&&ze.c(),this.h()},l(ke){e=c(ke,"DIV",{class:!0});var ee=m(e);l=c(ee,"DIV",{class:!0});var Mt=m(l);n=c(Mt,"SPAN",{class:!0});var zl=m(n);r=Y(zl,a),o=Y(zl,"s"),zl.forEach(f),Mt.forEach(f),d=_(ee),h=c(ee,"DIV",{class:!0});var ct=m(h);v=c(ct,"DIV",{class:!0,"data-svelte-h":!0}),x(v)!=="svelte-d0x3ep"&&(v.textContent=k),b=_(ct),p=c(ct,"DIV",{class:!0});var ml=m(p);y=c(ml,"DIV",{class:!0});var ut=m(y);w=c(ut,"SPAN",{class:!0,"data-svelte-h":!0}),x(w)!=="svelte-1cn36l0"&&(w.textContent=M),E=_(ut),I=c(ut,"SPAN",{class:!0});var ln=m(I);C=Y(ln,B),ln.forEach(f),ut.forEach(f),D=_(ml),S=c(ml,"DIV",{class:!0});var yl=m(S);P=c(yl,"SPAN",{class:!0,"data-svelte-h":!0}),x(P)!=="svelte-1kbwfyu"&&(P.textContent=j),L=_(yl),V=c(yl,"SPAN",{class:!0});var $t=m(V);O=Y($t,R),$t.forEach(f),yl.forEach(f),Q=_(ml),Ce=c(ml,"DIV",{class:!0});var Ke=m(Ce);_e=c(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),x(_e)!=="svelte-1wxjkk8"&&(_e.textContent=xe),Fe=_(Ke),Re=c(Ke,"SPAN",{class:!0});var _l=m(Re);Be=Y(_l,we),_l.forEach(f),Ke.forEach(f),ml.forEach(f),ct.forEach(f),ye=_(ee),Ie=c(ee,"DIV",{class:!0});var jt=m(Ie);Se=c(jt,"DIV",{class:!0,"data-svelte-h":!0}),x(Se)!=="svelte-sqr9el"&&(Se.textContent=X),ve=_(jt),ie=c(jt,"TABLE",{class:!0});var ft=m(ie);Ne=c(ft,"TR",{"data-svelte-h":!0}),x(Ne)!=="svelte-316y0v"&&(Ne.innerHTML=Pe),je=_(ft),Te=c(ft,"TR",{});var Et=m(Te);pe=c(Et,"TD",{class:!0,"data-svelte-h":!0}),x(pe)!=="svelte-1iujy6z"&&(pe.textContent=Ae),$e=_(Et),N=c(Et,"TD",{class:!0});var el=m(N);ne=Y(el,q),el.forEach(f),$=_(Et),te=c(Et,"TD",{class:!0});var Ol=m(te);oe=Y(Ol,fe),Ol.forEach(f),Et.forEach(f),ge=_(ft),re=c(ft,"TR",{});var Dt=m(re);A=c(Dt,"TD",{class:!0,"data-svelte-h":!0}),x(A)!=="svelte-kfs2py"&&(A.textContent=z),le=_(Dt),Le=c(Dt,"TD",{class:!0});var sl=m(Le);it=Y(sl,et),sl.forEach(f),tt=_(Dt),He=c(Dt,"TD",{class:!0});var xl=m(He);rt=Y(xl,Gt),xl.forEach(f),Dt.forEach(f),T=_(ft),K=c(ft,"TR",{});var It=m(K);G=c(It,"TD",{class:!0,"data-svelte-h":!0}),x(G)!=="svelte-h8k9fd"&&(G.textContent=W),de=_(It),se=c(It,"TD",{class:!0});var al=m(se);ce=Y(al,ue),al.forEach(f),Ue=_(It),be=c(It,"TD",{class:!0});var Hl=m(be);Ge=Y(Hl,Ve),Hl.forEach(f),It.forEach(f),Ll=_(ft),mt=c(ft,"TR",{});var dt=m(mt);_t=c(dt,"TD",{class:!0,"data-svelte-h":!0}),x(_t)!=="svelte-zz0m8k"&&(_t.textContent=Rl),gt=_(dt),lt=c(dt,"TD",{class:!0});var Gl=m(lt);Bt=Y(Gl,ul),Gl.forEach(f),Fl=_(dt),nl=c(dt,"TD",{class:!0});var tl=m(nl);Il=Y(tl,nt),tl.forEach(f),dt.forEach(f),ft.forEach(f),jt.forEach(f),Nl=_(ee),bt=c(ee,"DIV",{class:!0});var Nt=m(bt);kt=c(Nt,"DIV",{class:!0,"data-svelte-h":!0}),x(kt)!=="svelte-19lj3il"&&(kt.textContent=Ul),Vt=_(Nt),Oe=c(Nt,"DIV",{class:!0});var il=m(Oe);qt=c(il,"DIV",{class:!0});var rl=m(qt);Wt=c(rl,"SPAN",{class:!0,"data-svelte-h":!0}),x(Wt)!=="svelte-m4uzze"&&(Wt.textContent=st),wt=_(rl),fl=c(rl,"SPAN",{class:!0});var Al=m(fl);Pl=Y(Al,at),Al.forEach(f),rl.forEach(f),yt=_(il),Kt=c(il,"DIV",{class:!0});var Cl=m(Kt);Xt=c(Cl,"SPAN",{class:!0,"data-svelte-h":!0}),x(Xt)!=="svelte-124pemq"&&(Xt.textContent=Yt),Jt=_(Cl),dl=c(Cl,"SPAN",{class:!0});var Tl=m(dl);qe=Y(Tl,hl),Tl.forEach(f),Cl.forEach(f),Ct=_(il),Zt=c(il,"DIV",{class:!0});var gl=m(Zt);We=c(gl,"SPAN",{class:!0,"data-svelte-h":!0}),x(We)!=="svelte-hotqe4"&&(We.textContent=tn),Tt=_(gl),vl=c(gl,"SPAN",{class:!0});var ql=m(vl);ot=Y(ql,pl),ql.forEach(f),gl.forEach(f),il.forEach(f),Nt.forEach(f),Qt=_(ee),ze&&ze.l(ee),ee.forEach(f),this.h()},h(){i(n,"class","time-label svelte-k4aoyj"),i(l,"class","panel-header svelte-k4aoyj"),i(v,"class","section-title svelte-k4aoyj"),i(w,"class","label pitch-label svelte-k4aoyj"),i(I,"class","value svelte-k4aoyj"),i(y,"class","value-row svelte-k4aoyj"),i(P,"class","label intensity-label svelte-k4aoyj"),i(V,"class","value svelte-k4aoyj"),i(S,"class","value-row svelte-k4aoyj"),i(_e,"class","label hnr-label svelte-k4aoyj"),i(Re,"class","value svelte-k4aoyj"),i(Ce,"class","value-row svelte-k4aoyj"),i(p,"class","values-grid svelte-k4aoyj"),i(h,"class","section svelte-k4aoyj"),i(Se,"class","section-title svelte-k4aoyj"),i(pe,"class","label f-label svelte-k4aoyj"),i(N,"class","value svelte-k4aoyj"),i(te,"class","value bw svelte-k4aoyj"),i(A,"class","label f-label svelte-k4aoyj"),i(Le,"class","value svelte-k4aoyj"),i(He,"class","value bw svelte-k4aoyj"),i(G,"class","label f-label svelte-k4aoyj"),i(se,"class","value svelte-k4aoyj"),i(be,"class","value bw svelte-k4aoyj"),i(_t,"class","label f-label svelte-k4aoyj"),i(lt,"class","value svelte-k4aoyj"),i(nl,"class","value bw svelte-k4aoyj"),i(ie,"class","formant-table svelte-k4aoyj"),i(Ie,"class","section svelte-k4aoyj"),i(kt,"class","section-title svelte-k4aoyj"),i(Wt,"class","label cog-label svelte-k4aoyj"),i(fl,"class","value svelte-k4aoyj"),i(qt,"class","value-row svelte-k4aoyj"),i(Xt,"class","label tilt-label svelte-k4aoyj"),i(dl,"class","value svelte-k4aoyj"),i(Kt,"class","value-row svelte-k4aoyj"),i(We,"class","label nasal-label svelte-k4aoyj"),i(vl,"class","value svelte-k4aoyj"),i(Zt,"class","value-row svelte-k4aoyj"),i(Oe,"class","values-grid svelte-k4aoyj"),i(bt,"class","section svelte-k4aoyj"),i(e,"class","values-panel svelte-k4aoyj")},m(ke,ee){H(ke,e,ee),s(e,l),s(l,n),s(n,r),s(n,o),s(e,d),s(e,h),s(h,v),s(h,b),s(h,p),s(p,y),s(y,w),s(y,E),s(y,I),s(I,C),s(p,D),s(p,S),s(S,P),s(S,L),s(S,V),s(V,O),s(p,Q),s(p,Ce),s(Ce,_e),s(Ce,Fe),s(Ce,Re),s(Re,Be),s(e,ye),s(e,Ie),s(Ie,Se),s(Ie,ve),s(Ie,ie),s(ie,Ne),s(ie,je),s(ie,Te),s(Te,pe),s(Te,$e),s(Te,N),s(N,ne),s(Te,$),s(Te,te),s(te,oe),s(ie,ge),s(ie,re),s(re,A),s(re,le),s(re,Le),s(Le,it),s(re,tt),s(re,He),s(He,rt),s(ie,T),s(ie,K),s(K,G),s(K,de),s(K,se),s(se,ce),s(K,Ue),s(K,be),s(be,Ge),s(ie,Ll),s(ie,mt),s(mt,_t),s(mt,gt),s(mt,lt),s(lt,Bt),s(mt,Fl),s(mt,nl),s(nl,Il),s(e,Nl),s(e,bt),s(bt,kt),s(bt,Vt),s(bt,Oe),s(Oe,qt),s(qt,Wt),s(qt,wt),s(qt,fl),s(fl,Pl),s(Oe,yt),s(Oe,Kt),s(Kt,Xt),s(Kt,Jt),s(Kt,dl),s(dl,qe),s(Oe,Ct),s(Oe,Zt),s(Zt,We),s(Zt,Tt),s(Zt,vl),s(vl,ot),s(e,Qt),ze&&ze.m(e,null)},p(ke,[ee]){ee&1&&a!==(a=ke[0].toFixed(3)+"")&&ae(r,a),ee&32768&&B!==(B=An(ke[15])+"")&&ae(C,B),ee&16384&&R!==(R=Xl(ke[14])+"")&&ae(O,R),ee&32&&we!==(we=Xl(ke[5])+"")&&ae(Be,we),ee&8192&&q!==(q=Qe(ke[13])+"")&&ae(ne,q),ee&512&&fe!==(fe=Qe(ke[9])+"")&&ae(oe,fe),ee&4096&&et!==(et=Qe(ke[12])+"")&&ae(it,et),ee&256&&Gt!==(Gt=Qe(ke[8])+"")&&ae(rt,Gt),ee&2048&&ue!==(ue=Qe(ke[11])+"")&&ae(ce,ue),ee&128&&Ve!==(Ve=Qe(ke[7])+"")&&ae(Ge,Ve),ee&1024&&ul!==(ul=Qe(ke[10])+"")&&ae(Bt,ul),ee&64&&nt!==(nt=Qe(ke[6])+"")&&ae(Il,nt),ee&16&&at!==(at=An(ke[4])+"")&&ae(Pl,at),ee&8&&hl!==(hl=ke[3]!==null?`${ke[3].toFixed(1)} dB/oct`:"—")&&ae(qe,hl),ee&4&&pl!==(pl=Xl(ke[2])+"")&&ae(ot,pl),ke[1].length>0?ze?ze.p(ke,ee):(ze=Bs(ke),ze.c(),ze.m(e,null)):ze&&(ze.d(1),ze=null)},i:pt,o:pt,d(ke){ke&&f(e),ze&&ze.d()}}}function Pt(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const r=Math.floor((n+a)/2);e[r]<l?n=r+1:a=r}return n>0&&Math.abs(e[n-1]-l)<Math.abs(e[n]-l)&&(n=n-1),t[n]}function Aa(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const p=Math.floor((n+a+1)/2);e[p]<=l?n=p:a=p-1}const r=n,o=e[r],d=t[r];if(r>=e.length-1)return d;const h=e[r+1],v=t[r+1],k=d!==null&&d>0,b=v!==null&&v>0;if(k&&b){const p=(l-o)/(h-o);return Math.exp(Math.log(d)+p*(Math.log(v)-Math.log(d)))}else return k?d:b?v:null}function Qe(t){return t===null?"—":`${t.toFixed(0)}`}function An(t){return t===null?"—":`${t.toFixed(1)} Hz`}function Xl(t){return t===null?"—":`${t.toFixed(1)} dB`}function Sa(t,e,l){let n,a,r,o,d,h,v,k,b,p,y,w,M,E,I,B,C,D,S,P;Ee(t,$s,L=>l(16,C=L)),Ee(t,Bn,L=>l(19,D=L)),Ee(t,jl,L=>l(17,S=L)),Ee(t,rn,L=>l(18,P=L));function j(L){if(!D||D.length===0)return[];const V=[];for(const R of D){const O=R.intervals.find(Q=>L>=Q.start&&L<Q.end);O&&O.text&&V.push({tierName:R.name,text:O.text})}return V}return t.$$.update=()=>{t.$$.dirty&393216&&l(0,n=P!==null?P:S),t.$$.dirty&65537&&l(15,a=C?Aa(C.pitch,C.times,n):null),t.$$.dirty&65537&&l(14,r=C?Pt(C.intensity,C.times,n):null),t.$$.dirty&65537&&l(13,o=C?Pt(C.formants.f1,C.times,n):null),t.$$.dirty&65537&&l(12,d=C?Pt(C.formants.f2,C.times,n):null),t.$$.dirty&65537&&l(11,h=C?Pt(C.formants.f3,C.times,n):null),t.$$.dirty&65537&&l(10,v=C?Pt(C.formants.f4,C.times,n):null),t.$$.dirty&65537&&l(9,k=C?Pt(C.formants.b1,C.times,n):null),t.$$.dirty&65537&&l(8,b=C?Pt(C.formants.b2,C.times,n):null),t.$$.dirty&65537&&l(7,p=C?Pt(C.formants.b3,C.times,n):null),t.$$.dirty&65537&&l(6,y=C?Pt(C.formants.b4,C.times,n):null),t.$$.dirty&65537&&l(5,w=C?Pt(C.harmonicity,C.times,n):null),t.$$.dirty&65537&&l(4,M=C!=null&&C.cog?Pt(C.cog,C.times,n):null),t.$$.dirty&65537&&l(3,E=C!=null&&C.spectralTilt?Pt(C.spectralTilt,C.times,n):null),t.$$.dirty&65537&&l(2,I=C!=null&&C.a1p0?Pt(C.a1p0,C.times,n):null),t.$$.dirty&1&&l(1,B=j(n))},[n,B,I,E,M,w,y,p,b,k,v,h,d,o,r,a,C,S,P]}class Ba extends $l{constructor(e){super(),en(this,e,Sa,Pa,Ql,{})}}function Va(t){let e,l,n,a,r='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',o,d,h,v,k='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><rect x="6" y="6" width="12" height="12"></rect></svg>',b,p,y,w='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>',M,E,I,B,C,D,S=ol(t[20])+"",P,j,L=ol(t[0].length/t[19])+"",V,R,O,Q,Ce,_e,xe,Fe,Re,we,Be='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.03 7.03 0 00-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.49.49 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.01-1.58zM12 15.6a3.6 3.6 0 110-7.2 3.6 3.6 0 010 7.2z"></path></svg>',ye,Ie,Se,X,ve,ie,Ne,Pe,je="Pitch",Te,pe,Ae,$e,N,q="Formants",ne,$,te,fe,oe,ge="Intensity",re,A,z,le,Le,et="HNR",it,tt,He,Gt,rt,T="CoG",K,G,W,de,se,ue="Sp.Tilt",ce,Ue,be,Ve,Ge,Ll="A1-P0",mt,_t,Rl,gt,lt,ul,Bt,Fl="Points",nl,nt,Il="Import",Nl,bt,kt,Ul,Vt,Oe,qt="Voice:",Wt,st,wt,fl="Female",at,Pl="Male",yt,Kt="Child",Xt,Yt,Jt,dl="Max Freq:",hl,qe,Ct,Zt="5 kHz",We,tn="7.5 kHz",Tt,vl="10 kHz",pl,ot,Qt,ze="Backend:",ke,ee,Mt,zl="praatfan (local)",ct,ml="praatfan (remote)",ut,ln="praatfan-gpl (remote)",yl,$t,Ke,_l,jt,ft,Et,el,Ol,Dt,sl,xl,It,al,Hl,dt,Gl,tl,Nt,il,rl=ol(t[21].start)+"",Al,Cl,Tl=ol(t[21].end)+"",gl,ql,Wl,Gn="Space: play | Tab: play visible | Arrows: navigate/zoom",Lt,Mn,qn;function Wn(F,Z){return F[24]?Ra:La}let cn=Wn(t),bl=cn(t);function Kn(F,Z){return F[6]?Ua:Fa}let un=Kn(t),ll=un(t),Ye=t[25]&&Ms(t),Je=t[26]&&js(t);function Xn(F,Z){return F[3]?Oa:za}let fn=Xn(t),kl=fn(t),Ze=t[22].length>0&&Ls(t);return jt=new ta({}),el=new la({props:{showPitch:t[8],showFormants:t[9],showIntensity:t[10],showHNR:t[11],showCoG:t[12],showSpectralTilt:t[13],showA1P0:t[14],showDataPoints:t[15],maxFreq:t[16]}}),sl=new na({}),al=new Na({}),dt=new Ba({}),{c(){e=u("div"),l=u("header"),n=u("div"),a=u("button"),a.innerHTML=r,o=g(),d=u("button"),bl.c(),h=g(),v=u("button"),v.innerHTML=k,b=g(),ll.c(),p=g(),y=u("button"),y.innerHTML=w,M=g(),E=u("span"),I=J(t[18]),B=g(),C=u("div"),D=u("span"),P=J(S),j=J(" / "),V=J(L),R=g(),Ye&&Ye.c(),O=g(),Q=u("div"),Je&&Je.c(),Ce=g(),_e=u("span"),xe=J(t[19]),Fe=J(" Hz"),Re=g(),we=u("button"),we.innerHTML=Be,ye=g(),Ie=u("button"),kl.c(),Se=g(),X=u("div"),ve=u("label"),ie=u("input"),Ne=g(),Pe=u("span"),Pe.textContent=je,Te=g(),pe=u("label"),Ae=u("input"),$e=g(),N=u("span"),N.textContent=q,ne=g(),$=u("label"),te=u("input"),fe=g(),oe=u("span"),oe.textContent=ge,re=g(),A=u("label"),z=u("input"),le=g(),Le=u("span"),Le.textContent=et,it=g(),tt=u("label"),He=u("input"),Gt=g(),rt=u("span"),rt.textContent=T,K=g(),G=u("label"),W=u("input"),de=g(),se=u("span"),se.textContent=ue,ce=g(),Ue=u("label"),be=u("input"),Ve=g(),Ge=u("span"),Ge.textContent=Ll,mt=g(),_t=u("span"),Rl=g(),gt=u("label"),lt=u("input"),ul=g(),Bt=u("span"),Bt.textContent=Fl,nl=g(),nt=u("button"),nt.textContent=Il,Nl=g(),Ze&&Ze.c(),bt=g(),kt=u("span"),Ul=g(),Vt=u("label"),Oe=u("span"),Oe.textContent=qt,Wt=g(),st=u("select"),wt=u("option"),wt.textContent=fl,at=u("option"),at.textContent=Pl,yt=u("option"),yt.textContent=Kt,Xt=g(),Yt=u("label"),Jt=u("span"),Jt.textContent=dl,hl=g(),qe=u("select"),Ct=u("option"),Ct.textContent=Zt,We=u("option"),We.textContent=tn,Tt=u("option"),Tt.textContent=vl,pl=g(),ot=u("label"),Qt=u("span"),Qt.textContent=ze,ke=g(),ee=u("select"),Mt=u("option"),Mt.textContent=zl,ct=u("option"),ct.textContent=ml,ut=u("option"),ut.textContent=ln,yl=g(),$t=u("div"),Ke=u("div"),_l=u("div"),Ot(jt.$$.fragment),ft=g(),Et=u("div"),Ot(el.$$.fragment),Ol=g(),Dt=u("div"),Ot(sl.$$.fragment),xl=g(),It=u("div"),Ot(al.$$.fragment),Hl=g(),Ot(dt.$$.fragment),Gl=g(),tl=u("footer"),Nt=u("span"),il=J("View: "),Al=J(rl),Cl=J(" - "),gl=J(Tl),ql=g(),Wl=u("span"),Wl.textContent=Gn,this.h()},l(F){e=c(F,"DIV",{class:!0});var Z=m(e);l=c(Z,"HEADER",{class:!0});var Xe=m(l);n=c(Xe,"DIV",{class:!0});var Rt=m(n);a=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(a)!=="svelte-1lvwg3g"&&(a.innerHTML=r),o=_(Rt),d=c(Rt,"BUTTON",{class:!0,title:!0});var Yn=m(d);bl.l(Yn),Yn.forEach(f),h=_(Rt),v=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(v)!=="svelte-1ictkst"&&(v.innerHTML=k),b=_(Rt),ll.l(Rt),p=_(Rt),y=c(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(y)!=="svelte-u6ddbp"&&(y.innerHTML=w),M=_(Rt),E=c(Rt,"SPAN",{class:!0});var Jn=m(E);I=Y(Jn,t[18]),Jn.forEach(f),Rt.forEach(f),B=_(Xe),C=c(Xe,"DIV",{class:!0});var dn=m(C);D=c(dn,"SPAN",{class:!0});var hn=m(D);P=Y(hn,S),j=Y(hn," / "),V=Y(hn,L),hn.forEach(f),R=_(dn),Ye&&Ye.l(dn),dn.forEach(f),O=_(Xe),Q=c(Xe,"DIV",{class:!0});var El=m(Q);Je&&Je.l(El),Ce=_(El),_e=c(El,"SPAN",{class:!0});var jn=m(_e);xe=Y(jn,t[19]),Fe=Y(jn," Hz"),jn.forEach(f),Re=_(El),we=c(El,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(we)!=="svelte-px3wau"&&(we.innerHTML=Be),ye=_(El),Ie=c(El,"BUTTON",{class:!0,title:!0});var Zn=m(Ie);kl.l(Zn),Zn.forEach(f),El.forEach(f),Xe.forEach(f),Se=_(Z),X=c(Z,"DIV",{class:!0});var me=m(X);ve=c(me,"LABEL",{class:!0,title:!0});var vn=m(ve);ie=c(vn,"INPUT",{type:!0,class:!0}),Ne=_(vn),Pe=c(vn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Pe)!=="svelte-1k01z98"&&(Pe.textContent=je),vn.forEach(f),Te=_(me),pe=c(me,"LABEL",{class:!0,title:!0});var pn=m(pe);Ae=c(pn,"INPUT",{type:!0,class:!0}),$e=_(pn),N=c(pn,"SPAN",{class:!0,"data-svelte-h":!0}),x(N)!=="svelte-6cthmg"&&(N.textContent=q),pn.forEach(f),ne=_(me),$=c(me,"LABEL",{class:!0,title:!0});var mn=m($);te=c(mn,"INPUT",{type:!0,class:!0}),fe=_(mn),oe=c(mn,"SPAN",{class:!0,"data-svelte-h":!0}),x(oe)!=="svelte-1el2ji2"&&(oe.textContent=ge),mn.forEach(f),re=_(me),A=c(me,"LABEL",{class:!0,title:!0});var _n=m(A);z=c(_n,"INPUT",{type:!0,class:!0}),le=_(_n),Le=c(_n,"SPAN",{class:!0,"data-svelte-h":!0}),x(Le)!=="svelte-177jta0"&&(Le.textContent=et),_n.forEach(f),it=_(me),tt=c(me,"LABEL",{class:!0,title:!0});var gn=m(tt);He=c(gn,"INPUT",{type:!0,class:!0}),Gt=_(gn),rt=c(gn,"SPAN",{class:!0,"data-svelte-h":!0}),x(rt)!=="svelte-1myrnh2"&&(rt.textContent=T),gn.forEach(f),K=_(me),G=c(me,"LABEL",{class:!0,title:!0});var bn=m(G);W=c(bn,"INPUT",{type:!0,class:!0}),de=_(bn),se=c(bn,"SPAN",{class:!0,"data-svelte-h":!0}),x(se)!=="svelte-1pame47"&&(se.textContent=ue),bn.forEach(f),ce=_(me),Ue=c(me,"LABEL",{class:!0,title:!0});var kn=m(Ue);be=c(kn,"INPUT",{type:!0,class:!0}),Ve=_(kn),Ge=c(kn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Ge)!=="svelte-kia4wx"&&(Ge.textContent=Ll),kn.forEach(f),mt=_(me),_t=c(me,"SPAN",{class:!0}),m(_t).forEach(f),Rl=_(me),gt=c(me,"LABEL",{class:!0,title:!0});var wn=m(gt);lt=c(wn,"INPUT",{type:!0,class:!0}),ul=_(wn),Bt=c(wn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Bt)!=="svelte-16btzso"&&(Bt.textContent=Fl),wn.forEach(f),nl=_(me),nt=c(me,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(nt)!=="svelte-13z3t6e"&&(nt.textContent=Il),Nl=_(me),Ze&&Ze.l(me),bt=_(me),kt=c(me,"SPAN",{class:!0}),m(kt).forEach(f),Ul=_(me),Vt=c(me,"LABEL",{class:!0});var yn=m(Vt);Oe=c(yn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Oe)!=="svelte-1d25ili"&&(Oe.textContent=qt),Wt=_(yn),st=c(yn,"SELECT",{class:!0});var Cn=m(st);wt=c(Cn,"OPTION",{"data-svelte-h":!0}),x(wt)!=="svelte-kgyr86"&&(wt.textContent=fl),at=c(Cn,"OPTION",{"data-svelte-h":!0}),x(at)!=="svelte-8wnvoi"&&(at.textContent=Pl),yt=c(Cn,"OPTION",{"data-svelte-h":!0}),x(yt)!=="svelte-7fkmwe"&&(yt.textContent=Kt),Cn.forEach(f),yn.forEach(f),Xt=_(me),Yt=c(me,"LABEL",{class:!0});var Tn=m(Yt);Jt=c(Tn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Jt)!=="svelte-rpytas"&&(Jt.textContent=dl),hl=_(Tn),qe=c(Tn,"SELECT",{class:!0});var En=m(qe);Ct=c(En,"OPTION",{"data-svelte-h":!0}),x(Ct)!=="svelte-1awwqhf"&&(Ct.textContent=Zt),We=c(En,"OPTION",{"data-svelte-h":!0}),x(We)!=="svelte-1xbdoff"&&(We.textContent=tn),Tt=c(En,"OPTION",{"data-svelte-h":!0}),x(Tt)!=="svelte-1o5m333"&&(Tt.textContent=vl),En.forEach(f),Tn.forEach(f),pl=_(me),ot=c(me,"LABEL",{class:!0,title:!0});var Dn=m(ot);Qt=c(Dn,"SPAN",{class:!0,"data-svelte-h":!0}),x(Qt)!=="svelte-bjtusk"&&(Qt.textContent=ze),ke=_(Dn),ee=c(Dn,"SELECT",{class:!0});var In=m(ee);Mt=c(In,"OPTION",{"data-svelte-h":!0}),x(Mt)!=="svelte-x3trnu"&&(Mt.textContent=zl),ct=c(In,"OPTION",{"data-svelte-h":!0}),x(ct)!=="svelte-10tohf9"&&(ct.textContent=ml),ut=c(In,"OPTION",{"data-svelte-h":!0}),x(ut)!=="svelte-pzpi85"&&(ut.textContent=ln),In.forEach(f),Dn.forEach(f),me.forEach(f),yl=_(Z),$t=c(Z,"DIV",{class:!0});var Nn=m($t);Ke=c(Nn,"DIV",{class:!0});var Dl=m(Ke);_l=c(Dl,"DIV",{class:!0});var Qn=m(_l);zt(jt.$$.fragment,Qn),Qn.forEach(f),ft=_(Dl),Et=c(Dl,"DIV",{class:!0});var $n=m(Et);zt(el.$$.fragment,$n),$n.forEach(f),Ol=_(Dl),Dt=c(Dl,"DIV",{class:!0});var es=m(Dt);zt(sl.$$.fragment,es),es.forEach(f),xl=_(Dl),It=c(Dl,"DIV",{class:!0});var ts=m(It);zt(al.$$.fragment,ts),ts.forEach(f),Dl.forEach(f),Hl=_(Nn),zt(dt.$$.fragment,Nn),Nn.forEach(f),Gl=_(Z),tl=c(Z,"FOOTER",{class:!0});var Pn=m(tl);Nt=c(Pn,"SPAN",{});var nn=m(Nt);il=Y(nn,"View: "),Al=Y(nn,rl),Cl=Y(nn," - "),gl=Y(nn,Tl),nn.forEach(f),ql=_(Pn),Wl=c(Pn,"SPAN",{"data-svelte-h":!0}),x(Wl)!=="svelte-109nybm"&&(Wl.textContent=Gn),Pn.forEach(f),Z.forEach(f),this.h()},h(){i(a,"class","open-btn svelte-1euarcl"),i(a,"title","Open audio file"),i(d,"class","play-btn svelte-1euarcl"),i(d,"title","Play/Pause (Space)"),cl(d,"playing",t[24]),i(v,"class","stop-btn svelte-1euarcl"),i(v,"title","Stop (Escape)"),i(y,"class","save-btn svelte-1euarcl"),i(y,"title","Save audio as WAV"),i(E,"class","filename svelte-1euarcl"),i(n,"class","toolbar-left svelte-1euarcl"),i(D,"class","time-display svelte-1euarcl"),i(C,"class","toolbar-center svelte-1euarcl"),i(_e,"class","sample-rate svelte-1euarcl"),i(we,"class","settings-btn svelte-1euarcl"),i(we,"title","Load configuration file"),i(Ie,"class","theme-btn svelte-1euarcl"),i(Ie,"title","Toggle theme"),i(Q,"class","toolbar-right svelte-1euarcl"),i(l,"class","toolbar svelte-1euarcl"),i(ie,"type","checkbox"),i(ie,"class","svelte-1euarcl"),i(Pe,"class","toggle-label pitch svelte-1euarcl"),i(ve,"class","overlay-toggle svelte-1euarcl"),i(ve,"title","Fundamental frequency (F0) - the perceived pitch of voiced speech"),i(Ae,"type","checkbox"),i(Ae,"class","svelte-1euarcl"),i(N,"class","toggle-label formants svelte-1euarcl"),i(pe,"class","overlay-toggle svelte-1euarcl"),i(pe,"title","Formants (F1-F4) - resonant frequencies of the vocal tract that distinguish vowels"),i(te,"type","checkbox"),i(te,"class","svelte-1euarcl"),i(oe,"class","toggle-label intensity svelte-1euarcl"),i($,"class","overlay-toggle svelte-1euarcl"),i($,"title","Intensity - sound pressure level in decibels (dB)"),i(z,"type","checkbox"),i(z,"class","svelte-1euarcl"),i(Le,"class","toggle-label hnr svelte-1euarcl"),i(A,"class","overlay-toggle svelte-1euarcl"),i(A,"title","Harmonics-to-Noise Ratio - measure of voice quality (higher = clearer voice)"),i(He,"type","checkbox"),i(He,"class","svelte-1euarcl"),i(rt,"class","toggle-label cog svelte-1euarcl"),i(tt,"class","overlay-toggle svelte-1euarcl"),i(tt,"title","Center of Gravity - spectral centroid, indicates brightness of sound"),i(W,"type","checkbox"),i(W,"class","svelte-1euarcl"),i(se,"class","toggle-label tilt svelte-1euarcl"),i(G,"class","overlay-toggle svelte-1euarcl"),i(G,"title","Spectral Tilt - balance between low and high frequencies (dB difference 0-500 Hz vs 2000-4000 Hz)"),i(be,"type","checkbox"),i(be,"class","svelte-1euarcl"),i(Ge,"class","toggle-label a1p0 svelte-1euarcl"),i(Ue,"class","overlay-toggle svelte-1euarcl"),i(Ue,"title","A1-P0 Nasal Ratio - amplitude at F0 minus nasal pole (~250 Hz), indicates nasality"),i(_t,"class","controls-separator svelte-1euarcl"),i(lt,"type","checkbox"),i(lt,"class","svelte-1euarcl"),i(Bt,"class","toggle-label points svelte-1euarcl"),i(gt,"class","overlay-toggle svelte-1euarcl"),i(gt,"title","Data collection points - double-click to add, right-click to remove"),i(nt,"class","import-points-btn svelte-1euarcl"),i(nt,"title","Import data points from TSV"),i(kt,"class","controls-separator svelte-1euarcl"),i(Oe,"class","freq-label svelte-1euarcl"),wt.__value="female",At(wt,wt.__value),at.__value="male",At(at,at.__value),yt.__value="child",At(yt,yt.__value),i(st,"class","svelte-1euarcl"),t[2]===void 0&&ls(()=>t[54].call(st)),i(Vt,"class","freq-selector svelte-1euarcl"),i(Jt,"class","freq-label svelte-1euarcl"),Ct.__value=5e3,At(Ct,Ct.__value),We.__value=7500,At(We,We.__value),Tt.__value=1e4,At(Tt,Tt.__value),i(qe,"class","svelte-1euarcl"),t[16]===void 0&&ls(()=>t[55].call(qe)),i(Yt,"class","freq-selector svelte-1euarcl"),i(Qt,"class","freq-label svelte-1euarcl"),Mt.__value="praatfan-local",At(Mt,Mt.__value),ct.__value="praatfan",At(ct,ct.__value),ut.__value="praatfan-gpl",At(ut,ut.__value),i(ee,"class","svelte-1euarcl"),i(ot,"class","freq-selector svelte-1euarcl"),i(ot,"title","Acoustic analysis backend"),i(X,"class","overlay-controls svelte-1euarcl"),i(_l,"class","display-panel waveform-panel svelte-1euarcl"),i(Et,"class","display-panel spectrogram-panel svelte-1euarcl"),i(Dt,"class","time-axis-panel svelte-1euarcl"),i(It,"class","display-panel annotation-panel svelte-1euarcl"),i(Ke,"class","displays svelte-1euarcl"),i($t,"class","main-content svelte-1euarcl"),i(tl,"class","status-bar svelte-1euarcl"),i(e,"class","app-container svelte-1euarcl")},m(F,Z){H(F,e,Z),s(e,l),s(l,n),s(n,a),s(n,o),s(n,d),bl.m(d,null),s(n,h),s(n,v),s(n,b),ll.m(n,null),s(n,p),s(n,y),s(n,M),s(n,E),s(E,I),s(l,B),s(l,C),s(C,D),s(D,P),s(D,j),s(D,V),s(C,R),Ye&&Ye.m(C,null),s(l,O),s(l,Q),Je&&Je.m(Q,null),s(Q,Ce),s(Q,_e),s(_e,xe),s(_e,Fe),s(Q,Re),s(Q,we),s(Q,ye),s(Q,Ie),kl.m(Ie,null),s(e,Se),s(e,X),s(X,ve),s(ve,ie),ie.checked=t[8],s(ve,Ne),s(ve,Pe),s(X,Te),s(X,pe),s(pe,Ae),Ae.checked=t[9],s(pe,$e),s(pe,N),s(X,ne),s(X,$),s($,te),te.checked=t[10],s($,fe),s($,oe),s(X,re),s(X,A),s(A,z),z.checked=t[11],s(A,le),s(A,Le),s(X,it),s(X,tt),s(tt,He),He.checked=t[12],s(tt,Gt),s(tt,rt),s(X,K),s(X,G),s(G,W),W.checked=t[13],s(G,de),s(G,se),s(X,ce),s(X,Ue),s(Ue,be),be.checked=t[14],s(Ue,Ve),s(Ue,Ge),s(X,mt),s(X,_t),s(X,Rl),s(X,gt),s(gt,lt),lt.checked=t[15],s(gt,ul),s(gt,Bt),s(X,nl),s(X,nt),s(X,Nl),Ze&&Ze.m(X,null),s(X,bt),s(X,kt),s(X,Ul),s(X,Vt),s(Vt,Oe),s(Vt,Wt),s(Vt,st),s(st,wt),s(st,at),s(st,yt),Kl(st,t[2],!0),s(X,Xt),s(X,Yt),s(Yt,Jt),s(Yt,hl),s(Yt,qe),s(qe,Ct),s(qe,We),s(qe,Tt),Kl(qe,t[16],!0),s(X,pl),s(X,ot),s(ot,Qt),s(ot,ke),s(ot,ee),s(ee,Mt),s(ee,ct),s(ee,ut),Kl(ee,t[23]),s(e,yl),s(e,$t),s($t,Ke),s(Ke,_l),Ut(jt,_l,null),s(Ke,ft),s(Ke,Et),Ut(el,Et,null),s(Ke,Ol),s(Ke,Dt),Ut(sl,Dt,null),s(Ke,xl),s(Ke,It),Ut(al,It,null),s($t,Hl),Ut(dt,$t,null),s(e,Gl),s(e,tl),s(tl,Nt),s(Nt,il),s(Nt,Al),s(Nt,Cl),s(Nt,gl),s(tl,ql),s(tl,Wl),Lt=!0,Mn||(qn=[U(a,"click",t[35]),U(d,"click",Os),U(v,"click",zs),U(y,"click",t[34]),U(we,"click",t[37]),U(Ie,"click",t[29]),U(ie,"change",t[46]),U(Ae,"change",t[47]),U(te,"change",t[48]),U(z,"change",t[49]),U(He,"change",t[50]),U(W,"change",t[51]),U(be,"change",t[52]),U(lt,"change",t[53]),U(nt,"click",t[40]),U(st,"change",t[54]),U(qe,"change",t[55]),U(ee,"change",t[28])],Mn=!0)},p(F,Z){cn!==(cn=Wn(F))&&(bl.d(1),bl=cn(F),bl&&(bl.c(),bl.m(d,null))),(!Lt||Z[0]&16777216)&&cl(d,"playing",F[24]),un===(un=Kn(F))&&ll?ll.p(F,Z):(ll.d(1),ll=un(F),ll&&(ll.c(),ll.m(n,p))),(!Lt||Z[0]&262144)&&ae(I,F[18]),(!Lt||Z[0]&1048576)&&S!==(S=ol(F[20])+"")&&ae(P,S),(!Lt||Z[0]&524289)&&L!==(L=ol(F[0].length/F[19])+"")&&ae(V,L),F[25]?Ye?Ye.p(F,Z):(Ye=Ms(F),Ye.c(),Ye.m(C,null)):Ye&&(Ye.d(1),Ye=null),F[26]?Je?Je.p(F,Z):(Je=js(F),Je.c(),Je.m(Q,Ce)):Je&&(Je.d(1),Je=null),(!Lt||Z[0]&524288)&&ae(xe,F[19]),fn!==(fn=Xn(F))&&(kl.d(1),kl=fn(F),kl&&(kl.c(),kl.m(Ie,null))),Z[0]&256&&(ie.checked=F[8]),Z[0]&512&&(Ae.checked=F[9]),Z[0]&1024&&(te.checked=F[10]),Z[0]&2048&&(z.checked=F[11]),Z[0]&4096&&(He.checked=F[12]),Z[0]&8192&&(W.checked=F[13]),Z[0]&16384&&(be.checked=F[14]),Z[0]&32768&&(lt.checked=F[15]),F[22].length>0?Ze?Ze.p(F,Z):(Ze=Ls(F),Ze.c(),Ze.m(X,bt)):Ze&&(Ze.d(1),Ze=null),Z[0]&4&&Kl(st,F[2]),Z[0]&65536&&Kl(qe,F[16]),(!Lt||Z[0]&8388608)&&Kl(ee,F[23]);const Xe={};Z[0]&256&&(Xe.showPitch=F[8]),Z[0]&512&&(Xe.showFormants=F[9]),Z[0]&1024&&(Xe.showIntensity=F[10]),Z[0]&2048&&(Xe.showHNR=F[11]),Z[0]&4096&&(Xe.showCoG=F[12]),Z[0]&8192&&(Xe.showSpectralTilt=F[13]),Z[0]&16384&&(Xe.showA1P0=F[14]),Z[0]&32768&&(Xe.showDataPoints=F[15]),Z[0]&65536&&(Xe.maxFreq=F[16]),el.$set(Xe),(!Lt||Z[0]&2097152)&&rl!==(rl=ol(F[21].start)+"")&&ae(Al,rl),(!Lt||Z[0]&2097152)&&Tl!==(Tl=ol(F[21].end)+"")&&ae(gl,Tl)},i(F){Lt||(he(jt.$$.fragment,F),he(el.$$.fragment,F),he(sl.$$.fragment,F),he(al.$$.fragment,F),he(dt.$$.fragment,F),Lt=!0)},o(F){De(jt.$$.fragment,F),De(el.$$.fragment,F),De(sl.$$.fragment,F),De(al.$$.fragment,F),De(dt.$$.fragment,F),Lt=!1},d(F){F&&f(e),bl.d(),ll.d(),Ye&&Ye.d(),Je&&Je.d(),kl.d(),Ze&&Ze.d(),Ft(jt),Ft(el),Ft(sl),Ft(al),Ft(dt),Mn=!1,St(qn)}}}function Ma(t){let e,l;return e=new ga({props:{onFile:t[30],onRecordedBlob:t[31]}}),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p:pt,i(n){l||(he(e.$$.fragment,n),l=!0)},o(n){De(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function ja(t){let e,l="Loading acoustic analysis engine...";return{c(){e=u("div"),e.textContent=l,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-plgi30"&&(e.textContent=l),this.h()},h(){i(e,"class","loading svelte-1euarcl")},m(n,a){H(n,e,a)},p:pt,i:pt,o:pt,d(n){n&&f(e)}}}function La(t){let e,l;return{c(){e=Ht("svg"),l=Ht("path"),this.h()},l(n){e=xt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=m(e);l=xt(a,"path",{d:!0}),m(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M8 5v14l11-7z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ra(t){let e,l,n;return{c(){e=Ht("svg"),l=Ht("rect"),n=Ht("rect"),this.h()},l(a){e=xt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=m(e);l=xt(r,"rect",{x:!0,y:!0,width:!0,height:!0}),m(l).forEach(f),n=xt(r,"rect",{x:!0,y:!0,width:!0,height:!0}),m(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"x","6"),i(l,"y","4"),i(l,"width","4"),i(l,"height","16"),i(n,"x","14"),i(n,"y","4"),i(n,"width","4"),i(n,"height","16"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(a,r){H(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Fa(t){let e,l='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><circle cx="12" cy="12" r="6"></circle></svg>',n,a;return{c(){e=u("button"),e.innerHTML=l,this.h()},l(r){e=c(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(e)!=="svelte-d9ton6"&&(e.innerHTML=l),this.h()},h(){i(e,"class","record-btn svelte-1euarcl"),i(e,"title","Record from microphone")},m(r,o){H(r,e,o),n||(a=U(e,"click",t[32]),n=!0)},p:pt,d(r){r&&f(e),n=!1,a()}}}function Ua(t){let e,l,n,a,r,o=t[7].toFixed(1)+"",d,h,v,k;return{c(){e=u("button"),l=Ht("svg"),n=Ht("rect"),a=g(),r=u("span"),d=J(o),h=J("s"),this.h()},l(b){e=c(b,"BUTTON",{class:!0,title:!0});var p=m(e);l=xt(p,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var y=m(l);n=xt(y,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),m(n).forEach(f),y.forEach(f),a=_(p),r=c(p,"SPAN",{class:!0});var w=m(r);d=Y(w,o),h=Y(w,"s"),w.forEach(f),p.forEach(f),this.h()},h(){i(n,"x","6"),i(n,"y","6"),i(n,"width","12"),i(n,"height","12"),i(n,"rx","2"),i(l,"viewBox","0 0 24 24"),i(l,"fill","currentColor"),i(l,"width","16"),i(l,"height","16"),i(r,"class","recording-time svelte-1euarcl"),i(e,"class","record-btn recording svelte-1euarcl"),i(e,"title","Stop recording")},m(b,p){H(b,e,p),s(e,l),s(l,n),s(e,a),s(e,r),s(r,d),s(r,h),v||(k=U(e,"click",t[33]),v=!0)},p(b,p){p[0]&128&&o!==(o=b[7].toFixed(1)+"")&&ae(d,o)},d(b){b&&f(e),v=!1,k()}}}function Ms(t){let e,l,n=ol(t[25].end-t[25].start)+"",a;return{c(){e=u("span"),l=J("Sel: "),a=J(n),this.h()},l(r){e=c(r,"SPAN",{class:!0});var o=m(e);l=Y(o,"Sel: "),a=Y(o,n),o.forEach(f),this.h()},h(){i(e,"class","selection-info svelte-1euarcl")},m(r,o){H(r,e,o),s(e,l),s(e,a)},p(r,o){o[0]&33554432&&n!==(n=ol(r[25].end-r[25].start)+"")&&ae(a,n)},d(r){r&&f(e)}}}function js(t){let e,l,n,a;return{c(){e=u("span"),l=J("Analyzing... "),n=J(t[27]),a=J("%"),this.h()},l(r){e=c(r,"SPAN",{class:!0});var o=m(e);l=Y(o,"Analyzing... "),n=Y(o,t[27]),a=Y(o,"%"),o.forEach(f),this.h()},h(){i(e,"class","analysis-progress svelte-1euarcl")},m(r,o){H(r,e,o),s(e,l),s(e,n),s(e,a)},p(r,o){o[0]&134217728&&ae(n,r[27])},d(r){r&&f(e)}}}function za(t){let e,l,n;return{c(){e=Ht("svg"),l=Ht("circle"),n=Ht("path"),this.h()},l(a){e=xt(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=m(e);l=xt(r,"circle",{cx:!0,cy:!0,r:!0}),m(l).forEach(f),n=xt(r,"path",{d:!0}),m(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"cx","12"),i(l,"cy","12"),i(l,"r","5"),i(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(a,r){H(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Oa(t){let e,l;return{c(){e=Ht("svg"),l=Ht("path"),this.h()},l(n){e=xt(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=m(e);l=xt(a,"path",{d:!0}),m(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ls(t){let e,l,n=t[22].length+"",a,r,o,d;return{c(){e=u("button"),l=J("Export ("),a=J(n),r=J(")"),this.h()},l(h){e=c(h,"BUTTON",{class:!0,title:!0});var v=m(e);l=Y(v,"Export ("),a=Y(v,n),r=Y(v,")"),v.forEach(f),this.h()},h(){i(e,"class","export-points-btn svelte-1euarcl"),i(e,"title","Export data points to TSV")},m(h,v){H(h,e,v),s(e,l),s(e,a),s(e,r),o||(d=U(e,"click",t[39]),o=!0)},p(h,v){v[0]&4194304&&n!==(n=h[22].length+"")&&ae(a,n)},d(h){h&&f(e),o=!1,d()}}}function xa(t){let e,l,n,a,r,o,d,h,v,k,b,p;const y=[ja,Ma,Va],w=[];function M(E,I){return E[1]?E[0]?2:1:0}return h=M(t),v=w[h]=y[h](t),{c(){e=u("input"),l=g(),n=u("input"),a=g(),r=u("input"),o=g(),d=u("main"),v.c(),this.h()},l(E){e=c(E,"INPUT",{type:!0,accept:!0,style:!0}),l=_(E),n=c(E,"INPUT",{type:!0,accept:!0,style:!0}),a=_(E),r=c(E,"INPUT",{type:!0,accept:!0,style:!0}),o=_(E),d=c(E,"MAIN",{class:!0});var I=m(d);v.l(I),I.forEach(f),this.h()},h(){i(e,"type","file"),i(e,"accept","audio/*"),Me(e,"display","none"),i(n,"type","file"),i(n,"accept",".yaml,.yml"),Me(n,"display","none"),i(r,"type","file"),i(r,"accept",".tsv,.txt"),Me(r,"display","none"),i(d,"class","svelte-1euarcl")},m(E,I){H(E,e,I),t[43](e),H(E,l,I),H(E,n,I),t[44](n),H(E,a,I),H(E,r,I),t[45](r),H(E,o,I),H(E,d,I),w[h].m(d,null),k=!0,b||(p=[U(e,"change",t[36]),U(n,"change",t[38]),U(r,"change",t[41])],b=!0)},p(E,I){let B=h;h=M(E),h===B?w[h].p(E,I):(Sl(),De(w[B],1,1,()=>{w[B]=null}),Bl(),v=w[h],v?v.p(E,I):(v=w[h]=y[h](E),v.c()),he(v,1),v.m(d,null))},i(E){k||(he(v),k=!0)},o(E){De(v),k=!1},d(E){E&&(f(e),f(l),f(n),f(a),f(r),f(o),f(d)),t[43](null),t[44](null),t[45](null),w[h].d(),b=!1,St(p)}}}function ol(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toFixed(2).padStart(5,"0")}`}function Ha(t,e,l){let n,a,r,o,d,h,v,k,b,p,y,w,M,E,I;Ee(t,Sn,T=>l(18,n=T)),Ee(t,Fn,T=>l(0,a=T)),Ee(t,aa,T=>l(59,r=T)),Ee(t,Un,T=>l(19,o=T)),Ee(t,jl,T=>l(20,d=T)),Ee(t,Yl,T=>l(21,h=T)),Ee(t,Bn,T=>l(60,v=T)),Ee(t,os,T=>l(22,k=T)),Ee(t,ia,T=>l(1,b=T)),Ee(t,cs,T=>l(2,p=T)),Ee(t,zn,T=>l(23,y=T)),Ee(t,ra,T=>l(24,w=T)),Ee(t,Jl,T=>l(25,M=T)),Ee(t,oa,T=>l(26,E=T)),Ee(t,ca,T=>l(27,I=T));let B=!0,C,D,S=!1,P=null,j=[],L=0,V=null;Vn(()=>{const T=localStorage.getItem("ozen-backend");return(T==="praatfan-gpl"||T==="praatfan"||T==="praatfan-local")&&zn.set(T),Rn(y),ua(Bn,os),localStorage.getItem("ozen-theme")==="light"&&(l(3,B=!1),document.documentElement.classList.add("light")),window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)}),Hn(()=>{V&&clearInterval(V),P&&S&&P.stop()});async function R(T){const G=T.target.value;zn.set(G),localStorage.setItem("ozen-backend",G);try{await Rn(G),a&&(sn(),an().catch(W=>console.error("Analysis failed:",W)))}catch(W){console.error("Failed to switch backend:",W)}}let O=p;function Q(){l(3,B=!B),B?(document.documentElement.classList.remove("light"),localStorage.setItem("ozen-theme","dark")):(document.documentElement.classList.add("light"),localStorage.setItem("ozen-theme","light"))}async function Ce(){if(k.length===0){console.log("No data points to copy");return}const T=is({showPitch:Se,showFormants:X,showIntensity:ve,showHNR:ie,showCoG:Ne,showSpectralTilt:Pe,showA1P0:je});try{await navigator.clipboard.writeText(T),console.log(`Copied ${k.length} data points to clipboard`)}catch(K){console.error("Failed to copy to clipboard:",K)}}function _e(T){if(!(T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement)){if(T.ctrlKey||T.metaKey)switch(T.key.toLowerCase()){case"z":T.preventDefault(),T.shiftKey?xn():Us();return;case"y":T.preventDefault(),xn();return;case"c":T.preventDefault(),Ce();return}switch(T.code){case"Space":T.preventDefault(),Os();break;case"Escape":T.preventDefault(),zs(),Jl.set(null);break;case"Tab":T.preventDefault(),ea();break;case"ArrowLeft":T.preventDefault(),xe(-.1);break;case"ArrowRight":T.preventDefault(),xe(.1);break;case"ArrowUp":T.preventDefault(),Fe(.91,!0);break;case"ArrowDown":T.preventDefault(),Fe(1.1,!0);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":const K=parseInt(T.code.slice(-1))-1;K<v.length&&wl.set(K);break}}}function xe(T){if(!a)return;const K=a.length/o,{start:G,end:W}=h,de=W-G,se=de*T;let ue=G+se,ce=W+se;ue<0&&(ue=0,ce=de),ce>K&&(ce=K,ue=K-de),Yl.set({start:ue,end:ce})}function Fe(T,K=!1){if(!a)return;const G=a.length/o,{start:W,end:de}=h,se=de-W,ue=K?(W+de)/2:d,ce=Math.max(.01,Math.min(G,se*T)),Ue=(ue-W)/se;let be=Math.max(0,ue-Ue*ce),Ve=Math.min(G,be+ce);Ve===G&&(be=Math.max(0,Ve-ce)),Yl.set({start:be,end:Ve})}async function Re(T){sn();const K=await T.arrayBuffer(),W=await new AudioContext().decodeAudioData(K),de=new Float64Array(W.length),se=W.getChannelData(0);for(let ce=0;ce<W.length;ce++)de[ce]=se[ce];Fn.set(de),Un.set(W.sampleRate),Sn.set(T.name);const ue=W.length/W.sampleRate;rs.set(ue),Yl.set({start:0,end:Math.min(ue,10)}),jl.set(0),Jl.set(null),an().catch(ce=>console.error("Analysis failed:",ce))}async function we(T){sn();const K=await T.arrayBuffer(),W=await new AudioContext().decodeAudioData(K),de=new Float64Array(W.length),se=W.getChannelData(0);for(let ce=0;ce<W.length;ce++)de[ce]=se[ce];Fn.set(de),Un.set(W.sampleRate),Sn.set(`Recording ${new Date().toLocaleTimeString()}`);const ue=W.length/W.sampleRate;rs.set(ue),Yl.set({start:0,end:Math.min(ue,10)}),jl.set(0),Jl.set(null),an().catch(ce=>console.error("Analysis failed:",ce))}async function Be(){try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});j=[],P=new MediaRecorder(T,{mimeType:"audio/webm"}),P.ondataavailable=K=>{K.data.size>0&&j.push(K.data)},P.onstop=async()=>{T.getTracks().forEach(G=>G.stop());const K=new Blob(j,{type:"audio/webm"});await we(K)},P.start(100),l(6,S=!0),l(7,L=0),V=setInterval(()=>{l(7,L+=.1)},100)}catch(T){console.error("Failed to start recording:",T),alert("Could not access microphone. Please allow microphone access.")}}function ye(){P&&S&&(P.stop(),l(6,S=!1),V&&(clearInterval(V),V=null))}async function Ie(){if(!a||!o)return;const T=a.length,K=new ArrayBuffer(44+T*2),G=new DataView(K),W=(be,Ve)=>{for(let Ge=0;Ge<Ve.length;Ge++)G.setUint8(be+Ge,Ve.charCodeAt(Ge))};W(0,"RIFF"),G.setUint32(4,36+T*2,!0),W(8,"WAVE"),W(12,"fmt "),G.setUint32(16,16,!0),G.setUint16(20,1,!0),G.setUint16(22,1,!0),G.setUint32(24,o,!0),G.setUint32(28,o*2,!0),G.setUint16(32,2,!0),G.setUint16(34,16,!0),W(36,"data"),G.setUint32(40,T*2,!0);let de=44;for(let be=0;be<T;be++){const Ve=Math.max(-1,Math.min(1,a[be]));G.setInt16(de,Ve<0?Ve*32768:Ve*32767,!0),de+=2}const se=new Blob([K],{type:"audio/wav"});let ue="audio.wav";if(n&&(ue=n.replace(/\.[^/.]+$/,"")+".wav"),"showSaveFilePicker"in window)try{const Ve=await(await window.showSaveFilePicker({suggestedName:ue,types:[{description:"WAV Audio",accept:{"audio/wav":[".wav"]}}]})).createWritable();await Ve.write(se),await Ve.close();return}catch(be){if(be.name==="AbortError")return}const ce=URL.createObjectURL(se),Ue=document.createElement("a");Ue.href=ce,Ue.download=ue,Ue.click(),URL.revokeObjectURL(ce)}let Se=!0,X=!0,ve=!1,ie=!1,Ne=!1,Pe=!1,je=!1,Te=!0,pe=5e3,Ae;function $e(){Ae.click()}async function N(T){var W;const K=T.target,G=(W=K.files)==null?void 0:W[0];G&&await Re(G),K.value=""}function q(){C.click()}async function ne(T){var W;const K=T.target,G=(W=K.files)==null?void 0:W[0];if(G){const de=await G.text(),se=fa(de);if(se&&se.backend!==r)try{await Rn(se.backend),localStorage.setItem("ozen-backend",se.backend),a&&(sn(),an().catch(ue=>console.error("Analysis failed:",ue)))}catch(ue){console.error("Failed to switch backend:",ue)}}K.value=""}async function $(){const T=is({showPitch:Se,showFormants:X,showIntensity:ve,showHNR:ie,showCoG:Ne,showSpectralTilt:Pe,showA1P0:je});let K="data_points.tsv";if(n&&(K=n.replace(/\.[^/.]+$/,"")+"_points.tsv"),"showSaveFilePicker"in window)try{const ue=await(await window.showSaveFilePicker({suggestedName:K,types:[{description:"Tab-Separated Values",accept:{"text/tab-separated-values":[".tsv"]}}]})).createWritable();await ue.write(T),await ue.close();return}catch(se){if(se.name==="AbortError")return}const G=new Blob([T],{type:"text/tab-separated-values"}),W=URL.createObjectURL(G),de=document.createElement("a");de.href=W,de.download=K,de.click(),URL.revokeObjectURL(W)}function te(){D.click()}async function fe(T){var W;const K=T.target,G=(W=K.files)==null?void 0:W[0];if(G){const de=await G.text();sa(de)===-1&&console.error("Failed to import data points: invalid TSV format (need time and frequency columns)")}K.value=""}function oe(T){Ml[T?"unshift":"push"](()=>{Ae=T,l(17,Ae)})}function ge(T){Ml[T?"unshift":"push"](()=>{C=T,l(4,C)})}function re(T){Ml[T?"unshift":"push"](()=>{D=T,l(5,D)})}function A(){Se=this.checked,l(8,Se)}function z(){X=this.checked,l(9,X)}function le(){ve=this.checked,l(10,ve)}function Le(){ie=this.checked,l(11,ie)}function et(){Ne=this.checked,l(12,Ne)}function it(){Pe=this.checked,l(13,Pe)}function tt(){je=this.checked,l(14,je)}function He(){Te=this.checked,l(15,Te)}function Gt(){p=ns(this),cs.set(p)}function rt(){pe=ns(this),l(16,pe)}return t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&2048&&p!==O&&(l(42,O=p),a&&b&&(sn(),an().catch(T=>console.error("Analysis failed:",T))))},[a,b,p,B,C,D,S,L,Se,X,ve,ie,Ne,Pe,je,Te,pe,Ae,n,o,d,h,k,y,w,M,E,I,R,Q,Re,we,Be,ye,Ie,$e,N,q,ne,$,te,fe,O,oe,ge,re,A,z,le,Le,et,it,tt,He,Gt,rt]}class Xa extends $l{constructor(e){super(),en(this,e,Ha,xa,Ql,{},null,[-1,-1,-1])}}export{Xa as component};

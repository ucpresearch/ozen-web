import{s as Kt,d as c,b as l,i as O,E as ie,B as s,F as Zt,c as i,g as w,e as y,h as r,j as C,k as Fe,w as Jt,G as Rt,n as Ke,H as U,r as Pt,a as xe,I as bt,f as Ce,x as Bt,t as ye,D as Qt,J as $t,K as Ht,L as Tt,M as el,N as ze,O as Ue}from"../chunks/DzR6qLkJ.js";import{S as tl,i as ll,t as tt,a as lt,c as sl,d as At,m as Nt,e as St,b as Lt,g as nl}from"../chunks/CbSE4UIZ.js";import{p as al}from"../chunks/vZPbq70e.js";import{i as ol,c as Mt,a as wt,s as Ct,f as yt,d as Dt,t as Ze,b as We,e as Ye,r as Et,W as il,S as rl,T as cl,p as ul,g as fl,h as hl,j as dl,w as vl,k as pl,l as ml,m as gl}from"../chunks/D2kIyrJ3.js";const _l=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,zt=10,bl=300;function wl(a,e){const t=new Map;let n=null,f=null,o=!1;function d(p){if(p.pointerType==="touch"&&(a.setPointerCapture(p.pointerId),t.set(p.pointerId,{id:p.pointerId,x:p.clientX,y:p.clientY,startX:p.clientX,startY:p.clientY,startTime:Date.now()}),t.size===2)){const A=Array.from(t.values());n=Ut(A[0],A[1]),f=(A[0].x+A[1].x)/2,o&&(o=!1,e.onSelectionEnd())}}function k(p){if(p.pointerType!=="touch")return;const A=t.get(p.pointerId);if(A){if(A.x=p.clientX,A.y=p.clientY,t.size===2){const E=Array.from(t.values());if(n!==null&&n>0){const _=Ut(E[0],E[1]),b=_/n;if(Math.abs(b-1)>.02){const x=(E[0].x+E[1].x)/2,T=e.getTimeFromX(x);e.onZoom(b,T),n=_}}if(f!==null){const _=(E[0].x+E[1].x)/2,b=_-f;if(Math.abs(b)>2){const x=a.getBoundingClientRect();if(x.width<=0)return;const T=e.getVisibleDuration(),R=b/x.width*T;e.onPan(-R),f=_}}}else if(t.size===1){const E=A.x-A.startX,_=A.y-A.startY,b=Math.sqrt(E*E+_*_);if(!o&&b>zt){o=!0;const x=e.getTimeFromX(A.startX);e.onSelectionStart(x)}if(o){const x=e.getTimeFromX(A.x);e.onSelectionMove(x)}}}}function h(p){if(p.pointerType!=="touch")return;const A=t.get(p.pointerId);if(A&&t.size===1){const E=A.x-A.startX,_=A.y-A.startY,b=Math.sqrt(E*E+_*_),x=Date.now()-A.startTime;if(b<zt&&x<bl){const T=e.getTimeFromX(A.x);e.onTap(T)}else o&&e.onSelectionEnd();o=!1}a.releasePointerCapture(p.pointerId),t.delete(p.pointerId),(t.size===0||t.size===1)&&(n=null,f=null)}function v(p){o&&(o=!1,e.onSelectionEnd()),h(p)}function g(p){p.preventDefault()}return a.addEventListener("pointerdown",d),a.addEventListener("pointermove",k),a.addEventListener("pointerup",h),a.addEventListener("pointercancel",v),a.addEventListener("touchstart",g,{passive:!1}),()=>{a.removeEventListener("pointerdown",d),a.removeEventListener("pointermove",k),a.removeEventListener("pointerup",h),a.removeEventListener("pointercancel",v),a.removeEventListener("touchstart",g)}}function Ut(a,e){const t=a.x-e.x,n=a.y-e.y;return Math.hypot(t,n)}const{document:et,window:Cl}=_l;function yl(a){let e,t,n,f,o,d,k='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg>',h,v,g,p,A,E="T:",_,b,x=Ft(a[1])+"",T,R,V,q,M,L,N,F,I,Q,G,$,le,se,ne,J,B,fe,W,Y,K,D,ve,Re,ee=a[3]&&Ot(a),ce=a[21]&&Vt(a),ae=a[22]&&Xt(a),te=a[21]&&jt(a);I=new il({}),$=new rl({props:{showPitch:a[5],showFormants:a[6],showIntensity:a[7],showHNR:a[8],showCoG:a[9],showSpectralTilt:a[10],showA1P0:a[11],showNMR:a[12],showDataPoints:!1,maxFreq:a[14]}}),ne=new cl({});function Ee(m,S){return m[23]?xl:Pl}let Ae=Ee(a),we=Ae(a),ge=a[20]&&Wt(),he=a[13]&&Yt(a);return{c(){e=r("header"),t=r("span"),n=ye(a[24]),f=C(),ee&&ee.c(),o=C(),d=r("button"),d.innerHTML=k,h=C(),v=r("div"),g=r("div"),p=r("span"),A=r("span"),A.textContent=E,_=C(),b=r("span"),T=ye(x),R=ye("s"),V=C(),ce&&ce.c(),q=C(),ae&&ae.c(),M=C(),te&&te.c(),L=C(),N=r("div"),F=r("div"),Lt(I.$$.fragment),Q=C(),G=r("div"),Lt($.$$.fragment),le=C(),se=r("div"),Lt(ne.$$.fragment),J=C(),B=r("button"),we.c(),W=C(),ge&&ge.c(),Y=C(),he&&he.c(),K=Bt(),this.h()},l(m){e=i(m,"HEADER",{class:!0});var S=y(e);t=i(S,"SPAN",{class:!0});var ue=y(t);n=Ce(ue,a[24]),ue.forEach(c),f=w(S),ee&&ee.l(S),o=w(S),d=i(S,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),U(d)!=="svelte-1lsad6w"&&(d.innerHTML=k),S.forEach(c),h=w(m),v=i(m,"DIV",{class:!0});var ke=y(v);g=i(ke,"DIV",{class:!0});var Se=y(g);p=i(Se,"SPAN",{class:!0});var Oe=y(p);A=i(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),U(A)!=="svelte-11bjv01"&&(A.textContent=E),_=w(Oe),b=i(Oe,"SPAN",{class:!0});var de=y(b);T=Ce(de,x),R=Ce(de,"s"),de.forEach(c),Oe.forEach(c),V=w(Se),ce&&ce.l(Se),q=w(Se),ae&&ae.l(Se),Se.forEach(c),M=w(ke),te&&te.l(ke),ke.forEach(c),L=w(m),N=i(m,"DIV",{class:!0});var pe=y(N);F=i(pe,"DIV",{class:!0});var Ne=y(F);St(I.$$.fragment,Ne),Ne.forEach(c),Q=w(pe),G=i(pe,"DIV",{class:!0});var Le=y(G);St($.$$.fragment,Le),Le.forEach(c),le=w(pe),se=i(pe,"DIV",{class:!0});var Ge=y(se);St(ne.$$.fragment,Ge),Ge.forEach(c),pe.forEach(c),J=w(m),B=i(m,"BUTTON",{class:!0,"aria-label":!0});var qe=y(B);we.l(qe),qe.forEach(c),W=w(m),ge&&ge.l(m),Y=w(m),he&&he.l(m),K=Bt(),this.h()},h(){s(t,"class","filename svelte-mi1fc5"),s(d,"class","settings-toggle svelte-mi1fc5"),s(d,"aria-label","Toggle overlay settings"),bt(d,"active",a[13]),s(e,"class","viewer-header svelte-mi1fc5"),s(A,"class","value-label svelte-mi1fc5"),s(b,"class","value-num svelte-mi1fc5"),s(p,"class","value-item svelte-mi1fc5"),s(g,"class","values-row svelte-mi1fc5"),s(v,"class","values-bar svelte-mi1fc5"),s(F,"class","waveform-panel svelte-mi1fc5"),s(G,"class","spectrogram-panel svelte-mi1fc5"),s(se,"class","time-axis-panel svelte-mi1fc5"),s(N,"class","gesture-container svelte-mi1fc5"),s(B,"class","fab-play svelte-mi1fc5"),s(B,"aria-label",fe=a[23]?"Pause":"Play"),bt(B,"playing",a[23])},m(m,S){O(m,e,S),l(e,t),l(t,n),l(e,f),ee&&ee.m(e,null),l(e,o),l(e,d),O(m,h,S),O(m,v,S),l(v,g),l(g,p),l(p,A),l(p,_),l(p,b),l(b,T),l(b,R),l(g,V),ce&&ce.m(g,null),l(g,q),ae&&ae.m(g,null),l(v,M),te&&te.m(v,null),O(m,L,S),O(m,N,S),l(N,F),Nt(I,F,null),l(N,Q),l(N,G),Nt($,G,null),l(N,le),l(N,se),Nt(ne,se,null),a[39](N),O(m,J,S),O(m,B,S),we.m(B,null),O(m,W,S),ge&&ge.m(m,S),O(m,Y,S),he&&he.m(m,S),O(m,K,S),D=!0,ve||(Re=[ie(d,"click",a[38]),ie(N,"touchstart",a[34]),ie(N,"touchmove",a[35]),ie(N,"touchend",a[36],{passive:!0}),ie(N,"touchcancel",a[36],{passive:!0}),ie(B,"click",a[30])],ve=!0)},p(m,S){(!D||S[0]&16777216)&&xe(n,m[24]),m[3]?ee?ee.p(m,S):(ee=Ot(m),ee.c(),ee.m(e,o)):ee&&(ee.d(1),ee=null),(!D||S[0]&8192)&&bt(d,"active",m[13]),(!D||S[0]&2)&&x!==(x=Ft(m[1])+"")&&xe(T,x),m[21]?ce?ce.p(m,S):(ce=Vt(m),ce.c(),ce.m(g,q)):ce&&(ce.d(1),ce=null),m[22]?ae?ae.p(m,S):(ae=Xt(m),ae.c(),ae.m(g,null)):ae&&(ae.d(1),ae=null),m[21]?te?te.p(m,S):(te=jt(m),te.c(),te.m(v,null)):te&&(te.d(1),te=null);const ue={};S[0]&32&&(ue.showPitch=m[5]),S[0]&64&&(ue.showFormants=m[6]),S[0]&128&&(ue.showIntensity=m[7]),S[0]&256&&(ue.showHNR=m[8]),S[0]&512&&(ue.showCoG=m[9]),S[0]&1024&&(ue.showSpectralTilt=m[10]),S[0]&2048&&(ue.showA1P0=m[11]),S[0]&4096&&(ue.showNMR=m[12]),S[0]&16384&&(ue.maxFreq=m[14]),$.$set(ue),Ae!==(Ae=Ee(m))&&(we.d(1),we=Ae(m),we&&(we.c(),we.m(B,null))),(!D||S[0]&8388608&&fe!==(fe=m[23]?"Pause":"Play"))&&s(B,"aria-label",fe),(!D||S[0]&8388608)&&bt(B,"playing",m[23]),m[20]?ge||(ge=Wt(),ge.c(),ge.m(Y.parentNode,Y)):ge&&(ge.d(1),ge=null),m[13]?he?he.p(m,S):(he=Yt(m),he.c(),he.m(K.parentNode,K)):he&&(he.d(1),he=null)},i(m){D||(lt(I.$$.fragment,m),lt($.$$.fragment,m),lt(ne.$$.fragment,m),D=!0)},o(m){tt(I.$$.fragment,m),tt($.$$.fragment,m),tt(ne.$$.fragment,m),D=!1},d(m){m&&(c(e),c(h),c(v),c(L),c(N),c(J),c(B),c(W),c(Y),c(K)),ee&&ee.d(),ce&&ce.d(),ae&&ae.d(),te&&te.d(),At(I),At($),At(ne),a[39](null),we.d(),ge&&ge.d(m),he&&he.d(m),ve=!1,Pt(Re)}}}function El(a){let e;function t(o,d){return o[18]?Sl:o[19]?Nl:o[16]?Al:Tl}let n=t(a),f=n(a);return{c(){e=r("div"),f.c(),this.h()},l(o){e=i(o,"DIV",{class:!0});var d=y(e);f.l(d),d.forEach(c),this.h()},h(){s(e,"class","start-screen svelte-mi1fc5")},m(o,d){O(o,e,d),f.m(e,null)},p(o,d){n===(n=t(o))&&f?f.p(o,d):(f.d(1),f=n(o),f&&(f.c(),f.m(e,null)))},i:Ke,o:Ke,d(o){o&&c(e),f.d()}}}function kl(a){let e,t="Loading acoustic analysis engine...";return{c(){e=r("div"),e.textContent=t,this.h()},l(n){e=i(n,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-plgi30"&&(e.textContent=t),this.h()},h(){s(e,"class","loading svelte-mi1fc5")},m(n,f){O(n,e,f)},p:Ke,i:Ke,o:Ke,d(n){n&&c(e)}}}function Ot(a){let e,t,n;return{c(){e=r("span"),t=ye(a[25]),n=ye("%"),this.h()},l(f){e=i(f,"SPAN",{class:!0});var o=y(e);t=Ce(o,a[25]),n=Ce(o,"%"),o.forEach(c),this.h()},h(){s(e,"class","analysis-progress svelte-mi1fc5")},m(f,o){O(f,e,o),l(e,t),l(e,n)},p(f,o){o[0]&33554432&&xe(t,f[25])},d(f){f&&c(e)}}}function Vt(a){let e,t,n="F0:",f,o,d=Ie(a[21].pitch)+"",k,h,v,g,p="Int:",A,E,_=kt(a[21].intensity)+"",b,x,T,R,V="HNR:",q,M,L=kt(a[21].hnr)+"",N;return{c(){e=r("span"),t=r("span"),t.textContent=n,f=C(),o=r("span"),k=ye(d),h=C(),v=r("span"),g=r("span"),g.textContent=p,A=C(),E=r("span"),b=ye(_),x=C(),T=r("span"),R=r("span"),R.textContent=V,q=C(),M=r("span"),N=ye(L),this.h()},l(F){e=i(F,"SPAN",{class:!0});var I=y(e);t=i(I,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1jceyqb"&&(t.textContent=n),f=w(I),o=i(I,"SPAN",{class:!0});var Q=y(o);k=Ce(Q,d),Q.forEach(c),I.forEach(c),h=w(F),v=i(F,"SPAN",{class:!0});var G=y(v);g=i(G,"SPAN",{class:!0,"data-svelte-h":!0}),U(g)!=="svelte-19u81py"&&(g.textContent=p),A=w(G),E=i(G,"SPAN",{class:!0});var $=y(E);b=Ce($,_),$.forEach(c),G.forEach(c),x=w(F),T=i(F,"SPAN",{class:!0});var le=y(T);R=i(le,"SPAN",{class:!0,"data-svelte-h":!0}),U(R)!=="svelte-v2btb1"&&(R.textContent=V),q=w(le),M=i(le,"SPAN",{class:!0});var se=y(M);N=Ce(se,L),se.forEach(c),le.forEach(c),this.h()},h(){s(t,"class","value-label svelte-mi1fc5"),s(o,"class","value-num svelte-mi1fc5"),s(e,"class","value-item pitch svelte-mi1fc5"),s(g,"class","value-label svelte-mi1fc5"),s(E,"class","value-num svelte-mi1fc5"),s(v,"class","value-item intensity svelte-mi1fc5"),s(R,"class","value-label svelte-mi1fc5"),s(M,"class","value-num svelte-mi1fc5"),s(T,"class","value-item hnr svelte-mi1fc5")},m(F,I){O(F,e,I),l(e,t),l(e,f),l(e,o),l(o,k),O(F,h,I),O(F,v,I),l(v,g),l(v,A),l(v,E),l(E,b),O(F,x,I),O(F,T,I),l(T,R),l(T,q),l(T,M),l(M,N)},p(F,I){I[0]&2097152&&d!==(d=Ie(F[21].pitch)+"")&&xe(k,d),I[0]&2097152&&_!==(_=kt(F[21].intensity)+"")&&xe(b,_),I[0]&2097152&&L!==(L=kt(F[21].hnr)+"")&&xe(N,L)},d(F){F&&(c(e),c(h),c(v),c(x),c(T))}}}function Xt(a){let e,t,n="Sel:",f,o,d=(a[22].end-a[22].start).toFixed(3)+"",k,h;return{c(){e=r("span"),t=r("span"),t.textContent=n,f=C(),o=r("span"),k=ye(d),h=ye("s"),this.h()},l(v){e=i(v,"SPAN",{class:!0});var g=y(e);t=i(g,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1j5x27x"&&(t.textContent=n),f=w(g),o=i(g,"SPAN",{class:!0});var p=y(o);k=Ce(p,d),h=Ce(p,"s"),p.forEach(c),g.forEach(c),this.h()},h(){s(t,"class","value-label svelte-mi1fc5"),s(o,"class","value-num svelte-mi1fc5"),s(e,"class","value-item selection svelte-mi1fc5")},m(v,g){O(v,e,g),l(e,t),l(e,f),l(e,o),l(o,k),l(o,h)},p(v,g){g[0]&4194304&&d!==(d=(v[22].end-v[22].start).toFixed(3)+"")&&xe(k,d)},d(v){v&&c(e)}}}function jt(a){let e,t,n,f="F1:",o,d,k=Ie(a[21].f1)+"",h,v,g,p,A="F2:",E,_,b=Ie(a[21].f2)+"",x,T,R,V,q="F3:",M,L,N=Ie(a[21].f3)+"",F,I,Q,G,$="F4:",le,se,ne=Ie(a[21].f4)+"",J,B,fe,W=a[21].cog!==null&&qt(a),Y=a[21].nmr!==null&&Gt(a);return{c(){e=r("div"),t=r("span"),n=r("span"),n.textContent=f,o=C(),d=r("span"),h=ye(k),v=C(),g=r("span"),p=r("span"),p.textContent=A,E=C(),_=r("span"),x=ye(b),T=C(),R=r("span"),V=r("span"),V.textContent=q,M=C(),L=r("span"),F=ye(N),I=C(),Q=r("span"),G=r("span"),G.textContent=$,le=C(),se=r("span"),J=ye(ne),B=C(),W&&W.c(),fe=C(),Y&&Y.c(),this.h()},l(K){e=i(K,"DIV",{class:!0});var D=y(e);t=i(D,"SPAN",{class:!0});var ve=y(t);n=i(ve,"SPAN",{class:!0,"data-svelte-h":!0}),U(n)!=="svelte-3ihkqc"&&(n.textContent=f),o=w(ve),d=i(ve,"SPAN",{class:!0});var Re=y(d);h=Ce(Re,k),Re.forEach(c),ve.forEach(c),v=w(D),g=i(D,"SPAN",{class:!0});var ee=y(g);p=i(ee,"SPAN",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1kixf0h"&&(p.textContent=A),E=w(ee),_=i(ee,"SPAN",{class:!0});var ce=y(_);x=Ce(ce,b),ce.forEach(c),ee.forEach(c),T=w(D),R=i(D,"SPAN",{class:!0});var ae=y(R);V=i(ae,"SPAN",{class:!0,"data-svelte-h":!0}),U(V)!=="svelte-emc1du"&&(V.textContent=q),M=w(ae),L=i(ae,"SPAN",{class:!0});var te=y(L);F=Ce(te,N),te.forEach(c),ae.forEach(c),I=w(D),Q=i(D,"SPAN",{class:!0});var Ee=y(Q);G=i(Ee,"SPAN",{class:!0,"data-svelte-h":!0}),U(G)!=="svelte-1xq9m1r"&&(G.textContent=$),le=w(Ee),se=i(Ee,"SPAN",{class:!0});var Ae=y(se);J=Ce(Ae,ne),Ae.forEach(c),Ee.forEach(c),B=w(D),W&&W.l(D),fe=w(D),Y&&Y.l(D),D.forEach(c),this.h()},h(){s(n,"class","value-label svelte-mi1fc5"),s(d,"class","value-num svelte-mi1fc5"),s(t,"class","value-item formant svelte-mi1fc5"),s(p,"class","value-label svelte-mi1fc5"),s(_,"class","value-num svelte-mi1fc5"),s(g,"class","value-item formant svelte-mi1fc5"),s(V,"class","value-label svelte-mi1fc5"),s(L,"class","value-num svelte-mi1fc5"),s(R,"class","value-item formant svelte-mi1fc5"),s(G,"class","value-label svelte-mi1fc5"),s(se,"class","value-num svelte-mi1fc5"),s(Q,"class","value-item formant svelte-mi1fc5"),s(e,"class","values-row svelte-mi1fc5")},m(K,D){O(K,e,D),l(e,t),l(t,n),l(t,o),l(t,d),l(d,h),l(e,v),l(e,g),l(g,p),l(g,E),l(g,_),l(_,x),l(e,T),l(e,R),l(R,V),l(R,M),l(R,L),l(L,F),l(e,I),l(e,Q),l(Q,G),l(Q,le),l(Q,se),l(se,J),l(e,B),W&&W.m(e,null),l(e,fe),Y&&Y.m(e,null)},p(K,D){D[0]&2097152&&k!==(k=Ie(K[21].f1)+"")&&xe(h,k),D[0]&2097152&&b!==(b=Ie(K[21].f2)+"")&&xe(x,b),D[0]&2097152&&N!==(N=Ie(K[21].f3)+"")&&xe(F,N),D[0]&2097152&&ne!==(ne=Ie(K[21].f4)+"")&&xe(J,ne),K[21].cog!==null?W?W.p(K,D):(W=qt(K),W.c(),W.m(e,fe)):W&&(W.d(1),W=null),K[21].nmr!==null?Y?Y.p(K,D):(Y=Gt(K),Y.c(),Y.m(e,null)):Y&&(Y.d(1),Y=null)},d(K){K&&c(e),W&&W.d(),Y&&Y.d()}}}function qt(a){let e,t,n="CoG:",f,o,d=Ie(a[21].cog)+"",k;return{c(){e=r("span"),t=r("span"),t.textContent=n,f=C(),o=r("span"),k=ye(d),this.h()},l(h){e=i(h,"SPAN",{class:!0});var v=y(e);t=i(v,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1xvmg40"&&(t.textContent=n),f=w(v),o=i(v,"SPAN",{class:!0});var g=y(o);k=Ce(g,d),g.forEach(c),v.forEach(c),this.h()},h(){s(t,"class","value-label svelte-mi1fc5"),s(o,"class","value-num svelte-mi1fc5"),s(e,"class","value-item cog svelte-mi1fc5")},m(h,v){O(h,e,v),l(e,t),l(e,f),l(e,o),l(o,k)},p(h,v){v[0]&2097152&&d!==(d=Ie(h[21].cog)+"")&&xe(k,d)},d(h){h&&c(e)}}}function Gt(a){let e,t,n="NMR:",f,o,d=a[21].nmr.toFixed(3)+"",k;return{c(){e=r("span"),t=r("span"),t.textContent=n,f=C(),o=r("span"),k=ye(d),this.h()},l(h){e=i(h,"SPAN",{class:!0});var v=y(e);t=i(v,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-7y8wwu"&&(t.textContent=n),f=w(v),o=i(v,"SPAN",{class:!0});var g=y(o);k=Ce(g,d),g.forEach(c),v.forEach(c),this.h()},h(){s(t,"class","value-label svelte-mi1fc5"),s(o,"class","value-num svelte-mi1fc5"),s(e,"class","value-item nmr svelte-mi1fc5")},m(h,v){O(h,e,v),l(e,t),l(e,f),l(e,o),l(o,k)},p(h,v){v[0]&2097152&&d!==(d=h[21].nmr.toFixed(3)+"")&&xe(k,d)},d(h){h&&c(e)}}}function Pl(a){let e,t;return{c(){e=Ue("svg"),t=Ue("path"),this.h()},l(n){e=ze(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var f=y(e);t=ze(f,"path",{d:!0}),y(t).forEach(c),f.forEach(c),this.h()},h(){s(t,"d","M8 5v14l11-7z"),s(e,"viewBox","0 0 24 24"),s(e,"fill","currentColor"),s(e,"width","28"),s(e,"height","28")},m(n,f){O(n,e,f),l(e,t)},d(n){n&&c(e)}}}function xl(a){let e,t,n;return{c(){e=Ue("svg"),t=Ue("rect"),n=Ue("rect"),this.h()},l(f){e=ze(f,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var o=y(e);t=ze(o,"rect",{x:!0,y:!0,width:!0,height:!0}),y(t).forEach(c),n=ze(o,"rect",{x:!0,y:!0,width:!0,height:!0}),y(n).forEach(c),o.forEach(c),this.h()},h(){s(t,"x","6"),s(t,"y","4"),s(t,"width","4"),s(t,"height","16"),s(n,"x","14"),s(n,"y","4"),s(n,"width","4"),s(n,"height","16"),s(e,"viewBox","0 0 24 24"),s(e,"fill","currentColor"),s(e,"width","28"),s(e,"height","28")},m(f,o){O(f,e,o),l(e,t),l(e,n)},d(f){f&&c(e)}}}function Wt(a){let e,t="Copied!";return{c(){e=r("div"),e.textContent=t,this.h()},l(n){e=i(n,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1brkzeu"&&(e.textContent=t),this.h()},h(){s(e,"class","copy-notification svelte-mi1fc5")},m(n,f){O(n,e,f)},d(n){n&&c(e)}}}function Yt(a){let e,t,n,f,o,d="Settings",k,h,v='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',g,p,A="Overlays",E,_,b,x,T,R="Pitch",V,q,M,L,N,F="Formants",I,Q,G,$,le,se="Intensity",ne,J,B,fe,W,Y="HNR",K,D,ve,Re,ee,ce="CoG",ae,te,Ee,Ae,we,ge="Spectral Tilt",he,m,S,ue,ke,Se="A1-P0",Oe,de,pe,Ne,Le,Ge="NMR",qe,Xe,st="Display",Je,Ve,je,nt="Max Frequency",Qe,Te,Be,at="5 kHz",He,ot="7.5 kHz",u,X="10 kHz",H,P,oe="Developer",_e,Z,j,Me,me,re="Debug Console",De,Pe,$e=`<strong class="svelte-mi1fc5">Gestures:</strong><br/>
					Tap: position cursor<br/>
					Long press: copy values<br/>
					Drag (1 finger): select region<br/>
					Drag (2 fingers): pan view<br/>
					Pinch: zoom in/out`,xt,It;return{c(){e=r("div"),t=C(),n=r("div"),f=r("div"),o=r("h3"),o.textContent=d,k=C(),h=r("button"),h.innerHTML=v,g=C(),p=r("h4"),p.textContent=A,E=C(),_=r("label"),b=r("input"),x=C(),T=r("span"),T.textContent=R,V=C(),q=r("label"),M=r("input"),L=C(),N=r("span"),N.textContent=F,I=C(),Q=r("label"),G=r("input"),$=C(),le=r("span"),le.textContent=se,ne=C(),J=r("label"),B=r("input"),fe=C(),W=r("span"),W.textContent=Y,K=C(),D=r("label"),ve=r("input"),Re=C(),ee=r("span"),ee.textContent=ce,ae=C(),te=r("label"),Ee=r("input"),Ae=C(),we=r("span"),we.textContent=ge,he=C(),m=r("label"),S=r("input"),ue=C(),ke=r("span"),ke.textContent=Se,Oe=C(),de=r("label"),pe=r("input"),Ne=C(),Le=r("span"),Le.textContent=Ge,qe=C(),Xe=r("h4"),Xe.textContent=st,Je=C(),Ve=r("label"),je=r("span"),je.textContent=nt,Qe=C(),Te=r("select"),Be=r("option"),Be.textContent=at,He=r("option"),He.textContent=ot,u=r("option"),u.textContent=X,H=C(),P=r("h4"),P.textContent=oe,_e=C(),Z=r("label"),j=r("input"),Me=C(),me=r("span"),me.textContent=re,De=C(),Pe=r("div"),Pe.innerHTML=$e,this.h()},l(be){e=i(be,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0}),y(e).forEach(c),t=w(be),n=i(be,"DIV",{class:!0});var z=y(n);f=i(z,"DIV",{class:!0});var it=y(f);o=i(it,"H3",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1qq2p5h"&&(o.textContent=d),k=w(it),h=i(it,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),U(h)!=="svelte-zmgmiz"&&(h.innerHTML=v),it.forEach(c),g=w(z),p=i(z,"H4",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1ytkcxr"&&(p.textContent=A),E=w(z),_=i(z,"LABEL",{class:!0});var rt=y(_);b=i(rt,"INPUT",{type:!0,class:!0}),x=w(rt),T=i(rt,"SPAN",{class:!0,"data-svelte-h":!0}),U(T)!=="svelte-1k01z98"&&(T.textContent=R),rt.forEach(c),V=w(z),q=i(z,"LABEL",{class:!0});var ct=y(q);M=i(ct,"INPUT",{type:!0,class:!0}),L=w(ct),N=i(ct,"SPAN",{class:!0,"data-svelte-h":!0}),U(N)!=="svelte-6cthmg"&&(N.textContent=F),ct.forEach(c),I=w(z),Q=i(z,"LABEL",{class:!0});var ut=y(Q);G=i(ut,"INPUT",{type:!0,class:!0}),$=w(ut),le=i(ut,"SPAN",{class:!0,"data-svelte-h":!0}),U(le)!=="svelte-1el2ji2"&&(le.textContent=se),ut.forEach(c),ne=w(z),J=i(z,"LABEL",{class:!0});var ft=y(J);B=i(ft,"INPUT",{type:!0,class:!0}),fe=w(ft),W=i(ft,"SPAN",{class:!0,"data-svelte-h":!0}),U(W)!=="svelte-177jta0"&&(W.textContent=Y),ft.forEach(c),K=w(z),D=i(z,"LABEL",{class:!0});var ht=y(D);ve=i(ht,"INPUT",{type:!0,class:!0}),Re=w(ht),ee=i(ht,"SPAN",{class:!0,"data-svelte-h":!0}),U(ee)!=="svelte-1myrnh2"&&(ee.textContent=ce),ht.forEach(c),ae=w(z),te=i(z,"LABEL",{class:!0});var dt=y(te);Ee=i(dt,"INPUT",{type:!0,class:!0}),Ae=w(dt),we=i(dt,"SPAN",{class:!0,"data-svelte-h":!0}),U(we)!=="svelte-apa4eu"&&(we.textContent=ge),dt.forEach(c),he=w(z),m=i(z,"LABEL",{class:!0});var vt=y(m);S=i(vt,"INPUT",{type:!0,class:!0}),ue=w(vt),ke=i(vt,"SPAN",{class:!0,"data-svelte-h":!0}),U(ke)!=="svelte-kia4wx"&&(ke.textContent=Se),vt.forEach(c),Oe=w(z),de=i(z,"LABEL",{class:!0});var pt=y(de);pe=i(pt,"INPUT",{type:!0,class:!0}),Ne=w(pt),Le=i(pt,"SPAN",{class:!0,"data-svelte-h":!0}),U(Le)!=="svelte-1idlrfi"&&(Le.textContent=Ge),pt.forEach(c),qe=w(z),Xe=i(z,"H4",{class:!0,"data-svelte-h":!0}),U(Xe)!=="svelte-1v5wz70"&&(Xe.textContent=st),Je=w(z),Ve=i(z,"LABEL",{class:!0});var mt=y(Ve);je=i(mt,"SPAN",{class:!0,"data-svelte-h":!0}),U(je)!=="svelte-8ejmam"&&(je.textContent=nt),Qe=w(mt),Te=i(mt,"SELECT",{class:!0});var gt=y(Te);Be=i(gt,"OPTION",{"data-svelte-h":!0}),U(Be)!=="svelte-1awwqhf"&&(Be.textContent=at),He=i(gt,"OPTION",{"data-svelte-h":!0}),U(He)!=="svelte-1xbdoff"&&(He.textContent=ot),u=i(gt,"OPTION",{"data-svelte-h":!0}),U(u)!=="svelte-1o5m333"&&(u.textContent=X),gt.forEach(c),mt.forEach(c),H=w(z),P=i(z,"H4",{class:!0,"data-svelte-h":!0}),U(P)!=="svelte-96eps0"&&(P.textContent=oe),_e=w(z),Z=i(z,"LABEL",{class:!0});var _t=y(Z);j=i(_t,"INPUT",{type:!0,class:!0}),Me=w(_t),me=i(_t,"SPAN",{class:!0,"data-svelte-h":!0}),U(me)!=="svelte-6vrejm"&&(me.textContent=re),_t.forEach(c),De=w(z),Pe=i(z,"DIV",{class:!0,"data-svelte-h":!0}),U(Pe)!=="svelte-eah9nh"&&(Pe.innerHTML=$e),z.forEach(c),this.h()},h(){s(e,"class","settings-backdrop svelte-mi1fc5"),s(e,"role","button"),s(e,"tabindex","0"),s(e,"aria-label","Close settings"),s(o,"class","svelte-mi1fc5"),s(h,"class","close-btn svelte-mi1fc5"),s(h,"aria-label","Close"),s(f,"class","drawer-header svelte-mi1fc5"),s(p,"class","svelte-mi1fc5"),s(b,"type","checkbox"),s(b,"class","svelte-mi1fc5"),s(T,"class","toggle-label pitch svelte-mi1fc5"),s(_,"class","toggle-row svelte-mi1fc5"),s(M,"type","checkbox"),s(M,"class","svelte-mi1fc5"),s(N,"class","toggle-label formants svelte-mi1fc5"),s(q,"class","toggle-row svelte-mi1fc5"),s(G,"type","checkbox"),s(G,"class","svelte-mi1fc5"),s(le,"class","toggle-label intensity svelte-mi1fc5"),s(Q,"class","toggle-row svelte-mi1fc5"),s(B,"type","checkbox"),s(B,"class","svelte-mi1fc5"),s(W,"class","toggle-label hnr svelte-mi1fc5"),s(J,"class","toggle-row svelte-mi1fc5"),s(ve,"type","checkbox"),s(ve,"class","svelte-mi1fc5"),s(ee,"class","toggle-label cog svelte-mi1fc5"),s(D,"class","toggle-row svelte-mi1fc5"),s(Ee,"type","checkbox"),s(Ee,"class","svelte-mi1fc5"),s(we,"class","toggle-label tilt svelte-mi1fc5"),s(te,"class","toggle-row svelte-mi1fc5"),s(S,"type","checkbox"),s(S,"class","svelte-mi1fc5"),s(ke,"class","toggle-label a1p0 svelte-mi1fc5"),s(m,"class","toggle-row svelte-mi1fc5"),s(pe,"type","checkbox"),s(pe,"class","svelte-mi1fc5"),s(Le,"class","toggle-label nmr svelte-mi1fc5"),s(de,"class","toggle-row svelte-mi1fc5"),s(Xe,"class","svelte-mi1fc5"),s(je,"class","svelte-mi1fc5"),Be.__value=5e3,Tt(Be,Be.__value),He.__value=7500,Tt(He,He.__value),u.__value=1e4,Tt(u,u.__value),s(Te,"class","svelte-mi1fc5"),a[14]===void 0&&el(()=>a[49].call(Te)),s(Ve,"class","select-row svelte-mi1fc5"),s(P,"class","svelte-mi1fc5"),s(j,"type","checkbox"),j.checked=a[15],s(j,"class","svelte-mi1fc5"),s(me,"class","toggle-label svelte-mi1fc5"),s(Z,"class","toggle-row svelte-mi1fc5"),s(Pe,"class","help-text svelte-mi1fc5"),s(n,"class","settings-drawer svelte-mi1fc5")},m(be,z){O(be,e,z),O(be,t,z),O(be,n,z),l(n,f),l(f,o),l(f,k),l(f,h),l(n,g),l(n,p),l(n,E),l(n,_),l(_,b),b.checked=a[5],l(_,x),l(_,T),l(n,V),l(n,q),l(q,M),M.checked=a[6],l(q,L),l(q,N),l(n,I),l(n,Q),l(Q,G),G.checked=a[7],l(Q,$),l(Q,le),l(n,ne),l(n,J),l(J,B),B.checked=a[8],l(J,fe),l(J,W),l(n,K),l(n,D),l(D,ve),ve.checked=a[9],l(D,Re),l(D,ee),l(n,ae),l(n,te),l(te,Ee),Ee.checked=a[10],l(te,Ae),l(te,we),l(n,he),l(n,m),l(m,S),S.checked=a[11],l(m,ue),l(m,ke),l(n,Oe),l(n,de),l(de,pe),pe.checked=a[12],l(de,Ne),l(de,Le),l(n,qe),l(n,Xe),l(n,Je),l(n,Ve),l(Ve,je),l(Ve,Qe),l(Ve,Te),l(Te,Be),l(Te,He),l(Te,u),Ht(Te,a[14],!0),l(n,H),l(n,P),l(n,_e),l(n,Z),l(Z,j),l(Z,Me),l(Z,me),l(n,De),l(n,Pe),xt||(It=[ie(e,"click",a[31]),ie(e,"keydown",a[40]),ie(h,"click",a[31]),ie(b,"change",a[41]),ie(M,"change",a[42]),ie(G,"change",a[43]),ie(B,"change",a[44]),ie(ve,"change",a[45]),ie(Ee,"change",a[46]),ie(S,"change",a[47]),ie(pe,"change",a[48]),ie(Te,"change",a[49]),ie(j,"change",a[32])],xt=!0)},p(be,z){z[0]&32&&(b.checked=be[5]),z[0]&64&&(M.checked=be[6]),z[0]&128&&(G.checked=be[7]),z[0]&256&&(B.checked=be[8]),z[0]&512&&(ve.checked=be[9]),z[0]&1024&&(Ee.checked=be[10]),z[0]&2048&&(S.checked=be[11]),z[0]&4096&&(pe.checked=be[12]),z[0]&16384&&Ht(Te,be[14]),z[0]&32768&&(j.checked=be[15])},d(be){be&&(c(e),c(t),c(n)),xt=!1,Pt(It)}}}function Tl(a){let e,t="Ozen Viewer",n,f,o,d,k,h,v,g,p,A="Load File",E,_,b='<svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32" class="svelte-mi1fc5"><circle cx="12" cy="12" r="8"></circle></svg> <span class="svelte-mi1fc5">Record</span>',x,T,R="Load an audio file or record from microphone",V,q;return{c(){e=r("h2"),e.textContent=t,n=C(),f=r("div"),o=r("label"),d=r("input"),k=C(),h=Ue("svg"),v=Ue("path"),g=C(),p=r("span"),p.textContent=A,E=C(),_=r("button"),_.innerHTML=b,x=C(),T=r("p"),T.textContent=R,this.h()},l(M){e=i(M,"H2",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-mnbvxu"&&(e.textContent=t),n=w(M),f=i(M,"DIV",{class:!0});var L=y(f);o=i(L,"LABEL",{class:!0});var N=y(o);d=i(N,"INPUT",{type:!0,accept:!0,class:!0}),k=w(N),h=ze(N,"svg",{viewBox:!0,fill:!0,width:!0,height:!0,class:!0});var F=y(h);v=ze(F,"path",{d:!0}),y(v).forEach(c),F.forEach(c),g=w(N),p=i(N,"SPAN",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-uiqi90"&&(p.textContent=A),N.forEach(c),E=w(L),_=i(L,"BUTTON",{class:!0,"data-svelte-h":!0}),U(_)!=="svelte-1ihwn15"&&(_.innerHTML=b),L.forEach(c),x=w(M),T=i(M,"P",{class:!0,"data-svelte-h":!0}),U(T)!=="svelte-vzth4g"&&(T.textContent=R),this.h()},h(){s(e,"class","svelte-mi1fc5"),s(d,"type","file"),s(d,"accept","audio/*"),s(d,"class","svelte-mi1fc5"),s(v,"d","M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"),s(h,"viewBox","0 0 24 24"),s(h,"fill","currentColor"),s(h,"width","32"),s(h,"height","32"),s(h,"class","svelte-mi1fc5"),s(p,"class","svelte-mi1fc5"),s(o,"class","start-btn load-btn svelte-mi1fc5"),s(_,"class","start-btn record-btn svelte-mi1fc5"),s(f,"class","start-buttons svelte-mi1fc5"),s(T,"class","start-hint svelte-mi1fc5")},m(M,L){O(M,e,L),O(M,n,L),O(M,f,L),l(f,o),l(o,d),l(o,k),l(o,h),l(h,v),l(o,g),l(o,p),l(f,E),l(f,_),O(M,x,L),O(M,T,L),V||(q=[ie(d,"change",a[28]),ie(_,"click",a[26])],V=!0)},p:Ke,d(M){M&&(c(e),c(n),c(f),c(x),c(T)),V=!1,Pt(q)}}}function Al(a){let e,t,n,f,o=a[17].toFixed(1)+"",d,k,h,v,g='<svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop</span>',p,A;return{c(){e=r("div"),t=r("div"),n=C(),f=r("span"),d=ye(o),k=ye("s"),h=C(),v=r("button"),v.innerHTML=g,this.h()},l(E){e=i(E,"DIV",{class:!0});var _=y(e);t=i(_,"DIV",{class:!0}),y(t).forEach(c),n=w(_),f=i(_,"SPAN",{class:!0});var b=y(f);d=Ce(b,o),k=Ce(b,"s"),b.forEach(c),_.forEach(c),h=w(E),v=i(E,"BUTTON",{class:!0,"data-svelte-h":!0}),U(v)!=="svelte-1lyeckk"&&(v.innerHTML=g),this.h()},h(){s(t,"class","recording-pulse svelte-mi1fc5"),s(f,"class","recording-time svelte-mi1fc5"),s(e,"class","recording-indicator svelte-mi1fc5"),s(v,"class","stop-record-btn svelte-mi1fc5")},m(E,_){O(E,e,_),l(e,t),l(e,n),l(e,f),l(f,d),l(f,k),O(E,h,_),O(E,v,_),p||(A=ie(v,"click",a[27]),p=!0)},p(E,_){_[0]&131072&&o!==(o=E[17].toFixed(1)+"")&&xe(d,o)},d(E){E&&(c(e),c(h),c(v)),p=!1,A()}}}function Nl(a){let e,t,n,f,o,d="Failed to Load Audio",k,h,v,g,p,A="Retry",E,_,b,x="or load a different file:",T,R,V,q,M,L,N,F,I,Q="Load File",G,$,le='<svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32" class="svelte-mi1fc5"><circle cx="12" cy="12" r="8"></circle></svg> <span class="svelte-mi1fc5">Record</span>',se,ne;return{c(){e=r("div"),t=Ue("svg"),n=Ue("path"),f=C(),o=r("h3"),o.textContent=d,k=C(),h=r("p"),v=ye(a[19]),g=C(),p=r("button"),p.textContent=A,E=C(),_=r("div"),b=r("p"),b.textContent=x,T=C(),R=r("div"),V=r("label"),q=r("input"),M=C(),L=Ue("svg"),N=Ue("path"),F=C(),I=r("span"),I.textContent=Q,G=C(),$=r("button"),$.innerHTML=le,this.h()},l(J){e=i(J,"DIV",{class:!0});var B=y(e);t=ze(B,"svg",{viewBox:!0,fill:!0,width:!0,height:!0,class:!0});var fe=y(t);n=ze(fe,"path",{d:!0}),y(n).forEach(c),fe.forEach(c),f=w(B),o=i(B,"H3",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1ajsa28"&&(o.textContent=d),k=w(B),h=i(B,"P",{class:!0});var W=y(h);v=Ce(W,a[19]),W.forEach(c),g=w(B),p=i(B,"BUTTON",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1qdjdc1"&&(p.textContent=A),B.forEach(c),E=w(J),_=i(J,"DIV",{class:!0});var Y=y(_);b=i(Y,"P",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-12u93jx"&&(b.textContent=x),T=w(Y),R=i(Y,"DIV",{class:!0});var K=y(R);V=i(K,"LABEL",{class:!0});var D=y(V);q=i(D,"INPUT",{type:!0,accept:!0,class:!0}),M=w(D),L=ze(D,"svg",{viewBox:!0,fill:!0,width:!0,height:!0,class:!0});var ve=y(L);N=ze(ve,"path",{d:!0}),y(N).forEach(c),ve.forEach(c),F=w(D),I=i(D,"SPAN",{class:!0,"data-svelte-h":!0}),U(I)!=="svelte-uiqi90"&&(I.textContent=Q),D.forEach(c),G=w(K),$=i(K,"BUTTON",{class:!0,"data-svelte-h":!0}),U($)!=="svelte-1czl2da"&&($.innerHTML=le),K.forEach(c),Y.forEach(c),this.h()},h(){s(n,"d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"),s(t,"viewBox","0 0 24 24"),s(t,"fill","currentColor"),s(t,"width","48"),s(t,"height","48"),s(t,"class","error-icon svelte-mi1fc5"),s(o,"class","svelte-mi1fc5"),s(h,"class","error-detail svelte-mi1fc5"),s(p,"class","retry-btn svelte-mi1fc5"),s(e,"class","error-message svelte-mi1fc5"),s(b,"class","or-text svelte-mi1fc5"),s(q,"type","file"),s(q,"accept","audio/*"),s(q,"class","svelte-mi1fc5"),s(N,"d","M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"),s(L,"viewBox","0 0 24 24"),s(L,"fill","currentColor"),s(L,"width","32"),s(L,"height","32"),s(L,"class","svelte-mi1fc5"),s(I,"class","svelte-mi1fc5"),s(V,"class","start-btn load-btn svelte-mi1fc5"),s($,"class","start-btn record-btn svelte-mi1fc5"),s(R,"class","start-buttons svelte-mi1fc5"),s(_,"class","fallback-options svelte-mi1fc5")},m(J,B){O(J,e,B),l(e,t),l(t,n),l(e,f),l(e,o),l(e,k),l(e,h),l(h,v),l(e,g),l(e,p),O(J,E,B),O(J,_,B),l(_,b),l(_,T),l(_,R),l(R,V),l(V,q),l(V,M),l(V,L),l(L,N),l(V,F),l(V,I),l(R,G),l(R,$),se||(ne=[ie(p,"click",a[29]),ie(q,"change",a[28]),ie($,"click",a[26])],se=!0)},p(J,B){B[0]&524288&&xe(v,J[19])},d(J){J&&(c(e),c(E),c(_)),se=!1,Pt(ne)}}}function Sl(a){let e,t='<div class="spinner svelte-mi1fc5"></div> <p class="loading-text svelte-mi1fc5">Loading audio from URL...</p>';return{c(){e=r("div"),e.innerHTML=t,this.h()},l(n){e=i(n,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-7vvwx3"&&(e.innerHTML=t),this.h()},h(){s(e,"class","loading-url svelte-mi1fc5")},m(n,f){O(n,e,f)},p:Ke,d(n){n&&c(e)}}}function Ll(a){let e,t,n,f,o,d,k,h,v,g,p;const A=[kl,El,yl],E=[];function _(b,x){return b[4]?b[2]?2:1:0}return k=_(a),h=E[k]=A[k](a),{c(){e=r("meta"),t=r("meta"),n=r("meta"),f=r("meta"),o=C(),d=r("main"),h.c(),this.h()},l(b){const x=Zt("svelte-lx7wv1",et.head);e=i(x,"META",{name:!0,content:!0}),t=i(x,"META",{name:!0,content:!0}),n=i(x,"META",{name:!0,content:!0}),f=i(x,"META",{name:!0,content:!0}),x.forEach(c),o=w(b),d=i(b,"MAIN",{class:!0});var T=y(d);h.l(T),T.forEach(c),this.h()},h(){s(e,"name","viewport"),s(e,"content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"),s(t,"name","mobile-web-app-capable"),s(t,"content","yes"),s(n,"name","apple-mobile-web-app-capable"),s(n,"content","yes"),s(f,"name","apple-mobile-web-app-status-bar-style"),s(f,"content","black-translucent"),s(d,"class","viewer-main svelte-mi1fc5")},m(b,x){l(et.head,e),l(et.head,t),l(et.head,n),l(et.head,f),O(b,o,x),O(b,d,x),E[k].m(d,null),v=!0,g||(p=ie(Cl,"keydown",a[33]),g=!0)},p(b,x){let T=k;k=_(b),k===T?E[k].p(b,x):(nl(),tt(E[T],1,1,()=>{E[T]=null}),sl(),h=E[k],h?h.p(b,x):(h=E[k]=A[k](b),h.c()),lt(h,1),h.m(d,null))},i(b){v||(lt(h),v=!0)},o(b){tt(h),v=!1},d(b){b&&(c(o),c(d)),c(e),c(t),c(n),c(f),E[k].d(),g=!1,p()}}}const Ml=500,Dl=10;function Ft(a){return a.toFixed(3)}function Ie(a){return a===null?"-":Math.round(a).toString()}function kt(a){return a===null?"-":a.toFixed(1)}function Fl(a){const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{const t=document.execCommand("copy");return document.body.removeChild(e),t}catch{return document.body.removeChild(e),!1}}function Il(a,e,t){let n,f,o,d,k,h,v,g,p,A,E,_,b;Fe(a,We,u=>t(1,f=u)),Fe(a,fl,u=>t(37,o=u)),Fe(a,Ye,u=>t(22,d=u)),Fe(a,hl,u=>t(23,k=u)),Fe(a,Ze,u=>t(60,h=u)),Fe(a,Ct,u=>t(61,v=u)),Fe(a,wt,u=>t(2,g=u)),Fe(a,dl,u=>t(3,p=u)),Fe(a,vl,u=>t(4,A=u)),Fe(a,al,u=>t(62,E=u)),Fe(a,yt,u=>t(24,_=u)),Fe(a,pl,u=>t(25,b=u));let x,T=null,R=!0,V=!0,q=!1,M=!1,L=!1,N=!1,F=!1,I=!1,Q=!1,G=5e3,$=!1,le=null,se=!1,ne=null,J=[],B=0,fe=null,W=!1,Y=null,K=!1;Jt(()=>{ol();const u=E.url.searchParams.get("overlays");u&&Ae(u);const X=ae();X&&!K&&(K=!0,te(X))}),Rt(()=>{T&&T(),fe&&clearInterval(fe),ne&&se&&ne.stop()});async function D(){try{const u=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});J=[],ne=new MediaRecorder(u,{mimeType:"audio/webm"}),ne.ondataavailable=X=>{X.data.size>0&&J.push(X.data)},ne.onstop=async()=>{u.getTracks().forEach(H=>H.stop());const X=new Blob(J,{type:"audio/webm"});await Re(X)},ne.start(100),t(16,se=!0),t(17,B=0),fe=setInterval(()=>{t(17,B+=.1)},100)}catch(u){console.error("Failed to start recording:",u),alert("Could not access microphone. Please allow microphone access.")}}function ve(){ne&&se&&(ne.stop(),t(16,se=!1),fe&&(clearInterval(fe),fe=null))}async function Re(u){Mt();const X=await u.arrayBuffer(),P=await new AudioContext().decodeAudioData(X),oe=new Float64Array(P.length),_e=P.getChannelData(0);for(let j=0;j<P.length;j++)oe[j]=_e[j];wt.set(oe),Ct.set(P.sampleRate),yt.set(`Recording ${new Date().toLocaleTimeString()}`),Dt.set(P.length/P.sampleRate);const Z=P.length/P.sampleRate;Ze.set({start:0,end:Math.min(Z,10)}),We.set(0),Ye.set(null),Et().catch(j=>console.error("Analysis failed:",j))}function ee(u){var P;const X=u.target,H=(P=X.files)==null?void 0:P[0];H&&ce(H),X.value=""}async function ce(u){Mt();const X=await u.arrayBuffer(),P=await new AudioContext().decodeAudioData(X),oe=new Float64Array(P.length),_e=P.getChannelData(0);for(let j=0;j<P.length;j++)oe[j]=_e[j];wt.set(oe),Ct.set(P.sampleRate),yt.set(u.name),Dt.set(P.length/P.sampleRate);const Z=P.length/P.sampleRate;Ze.set({start:0,end:Math.min(Z,10)}),We.set(0),Ye.set(null),Et().catch(j=>console.error("Analysis failed:",j))}function ae(){const u=E.url.searchParams.get("audio");return!u||u.trim()===""?null:u.trim()}async function te(u){t(18,W=!0),t(19,Y=null),Mt();try{const H=u.startsWith("data:")?`data URL (${(u.length/1024).toFixed(1)}KB)`:u;console.log(`Fetching audio from: ${H}`),u.length>2e6&&console.warn(`Warning: URL is ${(u.length/1024/1024).toFixed(1)}MB. Some browsers limit URLs to ~2MB.`);const P=await fetch(u,{method:"GET",mode:"cors",cache:"default"});if(!P.ok)throw new Error(`Failed to fetch audio: ${P.status} ${P.statusText}`);const oe=await P.arrayBuffer();if(oe.byteLength===0)throw new Error("Audio file is empty (0 bytes)");console.log(`Fetched ${oe.byteLength} bytes, decoding...`);const Z=await new AudioContext().decodeAudioData(oe),j=new Float64Array(Z.length),Me=Z.getChannelData(0);for(let De=0;De<Z.length;De++)j[De]=Me[De];wt.set(j),Ct.set(Z.sampleRate);let me="audio.wav";if(u.startsWith("data:"))me="embedded-audio.wav";else{const Pe=new URL(u,window.location.href).pathname.split("/");me=Pe[Pe.length-1]||"audio.wav"}yt.set(me),Dt.set(Z.length/Z.sampleRate);const re=Z.length/Z.sampleRate;Ze.set({start:0,end:Math.min(re,10)}),We.set(0),Ye.set(null),console.log(`Audio loaded: ${re.toFixed(2)}s at ${Z.sampleRate}Hz`),A?await Et():console.log("Waiting for WASM to initialize before analysis...")}catch(X){console.error("Failed to load audio from URL:",X);let H="Failed to load audio from URL.";X instanceof TypeError&&X.message.includes("Failed to fetch")?H="Network error: Could not fetch audio. Check CORS settings.":X instanceof DOMException&&X.name==="EncodingError"?H="Audio decoding failed: Unsupported format or corrupted file.":X instanceof Error&&(H=`Error: ${X.message}`),t(19,Y=H)}finally{t(18,W=!1)}}function Ee(){const u=ae();u&&(t(19,Y=null),te(u))}function Ae(u){const X=u.toLowerCase().trim();if(X==="all"){t(5,R=!0),t(6,V=!0),t(7,q=!0),t(8,M=!0),t(9,L=!0),t(10,N=!0),t(11,F=!0),t(12,I=!0),console.log("Overlays: all enabled");return}const H=X.split(",").map(P=>P.trim()).filter(P=>P.length>0);if(H.length===0){console.warn("Empty overlays parameter, using defaults");return}t(5,R=!1),t(6,V=!1),t(7,q=!1),t(8,M=!1),t(9,L=!1),t(10,N=!1),t(11,F=!1),t(12,I=!1);for(const P of H)switch(P){case"pitch":case"f0":t(5,R=!0);break;case"formants":case"formant":t(6,V=!0);break;case"intensity":case"int":t(7,q=!0);break;case"hnr":t(8,M=!0);break;case"cog":t(9,L=!0);break;case"spectraltilt":case"tilt":t(10,N=!0);break;case"a1p0":case"a1-p0":t(11,F=!0);break;case"nmr":t(12,I=!0);break;default:console.warn(`Unknown overlay: ${P}`)}console.log(`Overlays configured: ${H.join(", ")}`)}function we(){if(T&&T(),!x||!g)return;const u=g.length/v;T=wl(x,{onPan:H=>{const{start:P,end:oe}=h,_e=oe-P;let Z=P+H,j=oe+H;Z<0&&(Z=0,j=_e),j>u&&(j=u,Z=Math.max(0,u-_e)),Ze.set({start:Z,end:j})},onZoom:(H,P)=>{const{start:oe,end:_e}=h,Z=_e-oe,j=Math.max(.01,Math.min(u,Z/H)),Me=(P-oe)/Z;let me=P-Me*j,re=P+(1-Me)*j;me<0&&(me=0,re=Math.min(u,j)),re>u&&(re=u,me=Math.max(0,u-j)),Ze.set({start:me,end:re})},onTap:H=>{We.set(H),Ye.set(null)},onSelectionStart:H=>{le=H,We.set(H),Ye.set(null)},onSelectionMove:H=>{if(le!==null){const P=Math.min(le,H),oe=Math.max(le,H);oe-P>.001&&Ye.set({start:P,end:oe}),We.set(H)}},onSelectionEnd:()=>{le=null},getTimeFromX:H=>{const P=x.getBoundingClientRect(),oe=H-P.left,{start:_e,end:Z}=h,j=45,me=P.width-j-45;if(me<=0)return _e;const re=oe-j;return _e+re/me*(Z-_e)},getVisibleDuration:()=>{const{start:H,end:P}=h;return P-H}})}function ge(){k?ml():d?gl(d.start,d.end):ul()}function he(){t(13,Q=!1)}function m(){if(t(15,$=!$),$)if(window.eruda)window.eruda.show();else{const u=document.createElement("script");u.src="https://cdn.jsdelivr.net/npm/eruda",u.onload=()=>{window.eruda.init()},document.head.appendChild(u)}else window.eruda&&window.eruda.hide()}let S=!1,ue=null;function ke(){t(20,S=!0),ue&&clearTimeout(ue),ue=setTimeout(()=>{t(20,S=!1),ue=null},2e3)}async function Se(){if(!n)return;const u=[];u.push(`T: ${Ft(f)}s`),R&&n.pitch!==null&&n.pitch!==void 0&&u.push(`F0: ${n.pitch.toFixed(1)} Hz`),q&&n.intensity!==null&&n.intensity!==void 0&&u.push(`Intensity: ${n.intensity.toFixed(1)} dB`),V&&(n.f1!==null&&n.f1!==void 0&&u.push(`F1: ${n.f1.toFixed(0)} Hz`),n.f2!==null&&n.f2!==void 0&&u.push(`F2: ${n.f2.toFixed(0)} Hz`),n.f3!==null&&n.f3!==void 0&&u.push(`F3: ${n.f3.toFixed(0)} Hz`),n.f4!==null&&n.f4!==void 0&&u.push(`F4: ${n.f4.toFixed(0)} Hz`)),M&&n.hnr!==null&&n.hnr!==void 0&&u.push(`HNR: ${n.hnr.toFixed(1)} dB`),L&&n.cog!==null&&n.cog!==void 0&&u.push(`CoG: ${n.cog.toFixed(0)} Hz`),N&&n.spectralTilt!==null&&n.spectralTilt!==void 0&&u.push(`Spectral Tilt: ${n.spectralTilt.toFixed(1)} dB`),F&&n.a1p0!==null&&n.a1p0!==void 0&&u.push(`A1-P0: ${n.a1p0.toFixed(1)} dB`),I&&n.nmr!==null&&n.nmr!==void 0&&u.push(`NMR: ${n.nmr.toFixed(3)}`);const X=u.join(", ");try{await navigator.clipboard.writeText(X),ke()}catch{Fl(X)&&ke()}}function Oe(u){(u.ctrlKey||u.metaKey)&&u.key.toLowerCase()==="c"&&(u.preventDefault(),Se())}let de=null,pe=null,Ne=null;function Le(u){if(u.touches.length!==1)return;const X=u.touches[0];pe=X.clientX,Ne=X.clientY,de=window.setTimeout(()=>{Se(),de=null,pe=null,Ne=null},Ml)}function Ge(u){if(de===null||u.touches.length!==1||pe===null||Ne===null)return;const X=u.touches[0],H=X.clientX-pe,P=X.clientY-Ne;Math.sqrt(H*H+P*P)>Dl&&(clearTimeout(de),de=null,pe=null,Ne=null)}function qe(){de!==null&&(clearTimeout(de),de=null),pe=null,Ne=null}Rt(()=>{de!==null&&clearTimeout(de),ue!==null&&clearTimeout(ue)});const Xe=()=>t(13,Q=!Q);function st(u){Qt[u?"unshift":"push"](()=>{x=u,t(0,x)})}const Je=u=>u.key==="Escape"&&he();function Ve(){R=this.checked,t(5,R)}function je(){V=this.checked,t(6,V)}function nt(){q=this.checked,t(7,q)}function Qe(){M=this.checked,t(8,M)}function Te(){L=this.checked,t(9,L)}function Be(){N=this.checked,t(10,N)}function at(){F=this.checked,t(11,F)}function He(){I=this.checked,t(12,I)}function ot(){G=$t(this),t(14,G)}return a.$$.update=()=>{a.$$.dirty[0]&5&&x&&g&&we(),a.$$.dirty[0]&28&&A&&g&&!p&&Et().catch(u=>console.error("Analysis failed:",u)),a.$$.dirty[0]&2|a.$$.dirty[1]&64&&t(21,n=(()=>{if(!o)return null;const{times:u,pitch:X,intensity:H,formants:P,harmonicity:oe,cog:_e,spectralTilt:Z,a1p0:j,nmr:Me}=o,me=f;let re=0,De=1/0;for(let Pe=0;Pe<u.length;Pe++){const $e=Math.abs(u[Pe]-me);$e<De&&(De=$e,re=Pe)}return{pitch:X[re],intensity:H[re],f1:P.f1[re],f2:P.f2[re],f3:P.f3[re],f4:P.f4[re],hnr:oe[re],cog:_e?_e[re]:null,spectralTilt:Z?Z[re]:null,a1p0:j?j[re]:null,nmr:Me?Me[re]:null}})())},[x,f,g,p,A,R,V,q,M,L,N,F,I,Q,G,$,se,B,W,Y,S,n,d,k,_,b,D,ve,ee,Ee,ge,he,m,Oe,Le,Ge,qe,o,Xe,st,Je,Ve,je,nt,Qe,Te,Be,at,He,ot]}class Ul extends tl{constructor(e){super(),ll(this,e,Il,Ll,Kt,{},null,[-1,-1,-1])}}export{Ul as component};

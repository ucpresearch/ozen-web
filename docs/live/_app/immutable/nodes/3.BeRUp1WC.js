import{r as Dt,s as Zl,n as ht,d as f,i as x,x as dt,G as xn,D as Ml,a as se,b as s,E as U,B as i,c as o,e as p,g,f as W,H,h as c,j as b,t as K,I as ol,_ as Rs,C as Ve,k as Te,$ as Fs,w as Vn,L as Pt,a0 as xs,K as Kl,M as ls,J as ns,N as Ht,O as xt}from"../chunks/DzR6qLkJ.js";import{a as de,t as Ee,S as Ql,i as $l,g as Sl,c as Bl,d as Ft,m as Ut,e as zt,b as Ot}from"../chunks/CbSE4UIZ.js";import{n as wl,o as Gs,q as qs,u as an,v as Ws,x as Ln,e as Yl,b as jl,y as ss,z as Ks,t as An,A as Us,B as Hn,C as Xs,D as Ys,E as as,F as Js,G as Zs,H as Qs,I as Bn,f as Sn,g as $s,i as Rn,p as ea,l as zs,J as Os,W as ta,S as la,T as na,K as is,c as nn,r as sn,a as Fn,s as Un,d as rs,L as sa,M as aa,N as os,w as ia,h as ra,j as oa,k as ca,O as ua}from"../chunks/KBt31WpC.js";import{s as zn,l as fa,a as cs}from"../chunks/BmAGY9Gp.js";function Jl(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function da(t,e){t.d(1),e.delete(t.key)}function ha(t,e){Ee(t,1,1,()=>{e.delete(t.key)})}function Hs(t,e,l,n,a,r,u,d,h,v,_,m){let k=t.length,y=r.length,w=k;const B={};for(;w--;)B[t[w].key]=w;const I=[],P=new Map,S=new Map,C=[];for(w=y;w--;){const V=m(a,r,w),R=l(V);let j=u.get(R);j?C.push(()=>j.p(V,e)):(j=v(R,V),j.c()),P.set(R,I[w]=j),R in B&&S.set(R,Math.abs(w-B[R]))}const N=new Set,T=new Set;function L(V){de(V,1),V.m(d,_),u.set(V.key,V),_=V.first,y--}for(;k&&y;){const V=I[y-1],R=t[k-1],j=V.key,M=R.key;V===R?(_=V.first,k--,y--):P.has(M)?!u.has(j)||N.has(j)?L(V):T.has(M)?k--:S.get(j)>S.get(M)?(T.add(j),L(V)):(N.add(M),k--):(h(R,u),k--)}for(;k--;){const V=t[k];P.has(V.key)||h(V,u)}for(;y;)L(I[y-1]);return Dt(C),I}function va(t){let e,l,n='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 15V3m0 0l-4 4m4-4l4 4"></path><path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17"></path></svg>',a,r,u="Drop an audio file here",d,h,v="or click to select",_,m,k,y="Supports WAV, FLAC, MP3, OGG",w,B,I,P,S=t[0]&&us(t);return{c(){e=c("div"),l=c("div"),l.innerHTML=n,a=b(),r=c("p"),r.textContent=u,d=b(),h=c("p"),h.textContent=v,_=b(),S&&S.c(),m=b(),k=c("p"),k.textContent=y,w=b(),B=c("input"),this.h()},l(C){e=o(C,"DIV",{class:!0,role:!0,tabindex:!0});var N=p(e);l=o(N,"DIV",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-hj89uc"&&(l.innerHTML=n),a=g(N),r=o(N,"P",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-nangy9"&&(r.textContent=u),d=g(N),h=o(N,"P",{class:!0,"data-svelte-h":!0}),H(h)!=="svelte-fp1l9p"&&(h.textContent=v),_=g(N),S&&S.l(N),m=g(N),k=o(N,"P",{class:!0,"data-svelte-h":!0}),H(k)!=="svelte-tb4emq"&&(k.textContent=y),w=g(N),B=o(N,"INPUT",{type:!0,accept:!0,class:!0}),N.forEach(f),this.h()},h(){i(l,"class","icon svelte-lmmgcl"),i(r,"class","primary svelte-lmmgcl"),i(h,"class","secondary svelte-lmmgcl"),i(k,"class","formats svelte-lmmgcl"),i(B,"type","file"),i(B,"accept","audio/*"),i(B,"class","svelte-lmmgcl"),i(e,"class","drop-zone svelte-lmmgcl"),i(e,"role","button"),i(e,"tabindex","0"),ol(e,"drag-over",t[1])},m(C,N){x(C,e,N),s(e,l),s(e,a),s(e,r),s(e,d),s(e,h),s(e,_),S&&S.m(e,null),s(e,m),s(e,k),s(e,w),s(e,B),t[13](B),I||(P=[U(B,"change",t[9]),U(e,"drop",t[5]),U(e,"dragover",t[6]),U(e,"dragleave",t[7]),U(e,"click",t[8]),U(e,"keydown",t[14])],I=!0)},p(C,N){C[0]?S?S.p(C,N):(S=us(C),S.c(),S.m(e,m)):S&&(S.d(1),S=null),N&2&&ol(e,"drag-over",C[1])},d(C){C&&f(e),S&&S.d(),t[13](null),I=!1,Dt(P)}}}function pa(t){let e,l,n,a,r,u=t[4].toFixed(1)+"",d,h,v,_,m='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop Recording</span>',k,y;return{c(){e=c("div"),l=c("div"),n=c("div"),a=b(),r=c("span"),d=K(u),h=K("s"),v=b(),_=c("button"),_.innerHTML=m,this.h()},l(w){e=o(w,"DIV",{class:!0});var B=p(e);l=o(B,"DIV",{class:!0});var I=p(l);n=o(I,"DIV",{class:!0}),p(n).forEach(f),a=g(I),r=o(I,"SPAN",{class:!0});var P=p(r);d=W(P,u),h=W(P,"s"),P.forEach(f),I.forEach(f),v=g(B),_=o(B,"BUTTON",{class:!0,"data-svelte-h":!0}),H(_)!=="svelte-135d7zb"&&(_.innerHTML=m),B.forEach(f),this.h()},h(){i(n,"class","recording-pulse svelte-lmmgcl"),i(r,"class","recording-time svelte-lmmgcl"),i(l,"class","recording-indicator svelte-lmmgcl"),i(_,"class","stop-record-btn svelte-lmmgcl"),i(e,"class","drop-zone recording svelte-lmmgcl")},m(w,B){x(w,e,B),s(e,l),s(l,n),s(l,a),s(l,r),s(r,d),s(r,h),s(e,v),s(e,_),k||(y=U(_,"click",t[11]),k=!0)},p(w,B){B&16&&u!==(u=w[4].toFixed(1)+"")&&se(d,u)},d(w){w&&f(e),k=!1,y()}}}function us(t){let e,l,n="or",a,r,u='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" class="svelte-lmmgcl"><circle cx="12" cy="12" r="8"></circle></svg> <span>Record from Microphone</span>',d,h;return{c(){e=c("div"),l=c("span"),l.textContent=n,a=b(),r=c("button"),r.innerHTML=u,this.h()},l(v){e=o(v,"DIV",{class:!0});var _=p(e);l=o(_,"SPAN",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-1wtgm67"&&(l.textContent=n),a=g(_),r=o(_,"BUTTON",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-8eds6f"&&(r.innerHTML=u),_.forEach(f),this.h()},h(){i(l,"class","divider-text svelte-lmmgcl"),i(r,"class","record-btn svelte-lmmgcl"),i(e,"class","record-section svelte-lmmgcl")},m(v,_){x(v,e,_),s(e,l),s(e,a),s(e,r),d||(h=U(r,"click",Rs(t[10])),d=!0)},p:ht,d(v){v&&f(e),d=!1,h()}}}function ma(t){let e;function l(r,u){return r[3]?pa:va}let n=l(t),a=n(t);return{c(){a.c(),e=dt()},l(r){a.l(r),e=dt()},m(r,u){a.m(r,u),x(r,e,u)},p(r,[u]){n===(n=l(r))&&a?a.p(r,u):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},i:ht,o:ht,d(r){r&&f(e),a.d(r)}}}function _a(t,e,l){let{onFile:n}=e,{onRecordedBlob:a=void 0}=e,r=!1,u,d=!1,h=null,v=[],_=0,m=null;xn(()=>{m&&clearInterval(m),h&&d&&h.stop()});function k(T){var V;T.preventDefault(),l(1,r=!1);const L=(V=T.dataTransfer)==null?void 0:V.files[0];L&&n(L)}function y(T){T.preventDefault(),l(1,r=!0)}function w(){l(1,r=!1)}function B(){u.click()}function I(T){var R;const V=(R=T.target.files)==null?void 0:R[0];V&&n(V)}async function P(){if(a)try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});v=[],h=new MediaRecorder(T,{mimeType:"audio/webm"}),h.ondataavailable=L=>{L.data.size>0&&v.push(L.data)},h.onstop=async()=>{T.getTracks().forEach(V=>V.stop());const L=new Blob(v,{type:"audio/webm"});a==null||a(L)},h.start(100),l(3,d=!0),l(4,_=0),m=setInterval(()=>{l(4,_+=.1)},100)}catch(T){console.error("Failed to start recording:",T),alert("Could not access microphone. Please allow microphone access.")}}function S(){h&&d&&(h.stop(),l(3,d=!1),m&&(clearInterval(m),m=null))}function C(T){Ml[T?"unshift":"push"](()=>{u=T,l(2,u)})}const N=T=>T.key==="Enter"&&B();return t.$$set=T=>{"onFile"in T&&l(12,n=T.onFile),"onRecordedBlob"in T&&l(0,a=T.onRecordedBlob)},[a,r,u,d,_,k,y,w,B,I,P,S,n,C,N]}class ga extends Ql{constructor(e){super(),$l(this,e,_a,ma,Zl,{onFile:12,onRecordedBlob:0})}}function fs(t,e,l){const n=t.slice();n[48]=e[l];const a=Math.max(ft,n[17](n[48].start));n[49]=a;const r=Math.min(n[9],n[17](n[48].end));n[50]=r;const u=n[50]-n[49];n[51]=u;const d=n[49]-ft;return n[52]=d,n}function On(t){const e=t.slice(),l=e[48].end-e[48].start;e[55]=l;const n=e[55]>=1?e[55].toFixed(2)+"s":(e[55]*1e3).toFixed(0)+"ms";return e[56]=n,e}function ds(t){let e,l,n,a,r;function u(y,w){return y[4]===y[48].index?ka:ba}let d=u(t),h=d(t);function v(...y){return t[34](t[48],...y)}function _(...y){return t[35](t[48],...y)}function m(...y){return t[36](t[48],...y)}let k=t[48].index>0&&vs(t);return{c(){e=c("div"),h.c(),l=b(),k&&k.c(),n=dt(),this.h()},l(y){e=o(y,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var w=p(e);h.l(w),w.forEach(f),l=g(y),k&&k.l(y),n=dt(),this.h()},h(){i(e,"class","interval svelte-1h3ij0x"),Ve(e,"left",t[52]+"px"),Ve(e,"width",t[51]+"px"),i(e,"role","button"),i(e,"tabindex","0"),ol(e,"selected",t[2]&&t[10]===t[48].index)},m(y,w){x(y,e,w),h.m(e,null),x(y,l,w),k&&k.m(y,w),x(y,n,w),a||(r=[U(e,"click",v),U(e,"dblclick",_),U(e,"keydown",m)],a=!0)},p(y,w){t=y,d===(d=u(t))&&h?h.p(t,w):(h.d(1),h=d(t),h&&(h.c(),h.m(e,null))),w[0]&256&&Ve(e,"left",t[52]+"px"),w[0]&768&&Ve(e,"width",t[51]+"px"),w[0]&1284&&ol(e,"selected",t[2]&&t[10]===t[48].index),t[48].index>0?k?k.p(t,w):(k=vs(t),k.c(),k.m(n.parentNode,n)):k&&(k.d(1),k=null)},d(y){y&&(f(e),f(l),f(n)),h.d(),k&&k.d(y),a=!1,Dt(r)}}}function ba(t){let e,l=(t[48].text||" ")+"",n,a,r,u,d;function h(){return t[32](t[48])}function v(...m){return t[33](t[48],...m)}let _=t[51]>30&&hs(t);return{c(){e=c("span"),n=K(l),a=b(),_&&_.c(),r=dt(),this.h()},l(m){e=o(m,"SPAN",{class:!0,role:!0,tabindex:!0});var k=p(e);n=W(k,l),k.forEach(f),a=g(m),_&&_.l(m),r=dt(),this.h()},h(){i(e,"class","interval-text svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0")},m(m,k){x(m,e,k),s(e,n),x(m,a,k),_&&_.m(m,k),x(m,r,k),u||(d=[U(e,"click",Rs(h)),U(e,"keydown",v)],u=!0)},p(m,k){t=m,k[0]&256&&l!==(l=(t[48].text||" ")+"")&&se(n,l),t[51]>30?_?_.p(t,k):(_=hs(t),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},d(m){m&&(f(e),f(a),f(r)),_&&_.d(m),u=!1,Dt(d)}}}function ka(t){let e,l,n;return{c(){e=c("input"),this.h()},l(a){e=o(a,"INPUT",{type:!0,class:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","interval-input svelte-1h3ij0x"),e.autofocus=!0},m(a,r){x(a,e,r),Pt(e,t[5]),e.focus(),l||(n=[U(e,"input",t[31]),U(e,"blur",t[26]),U(e,"keydown",t[27])],l=!0)},p(a,r){r[0]&32&&e.value!==a[5]&&Pt(e,a[5])},d(a){a&&f(e),l=!1,Dt(n)}}}function hs(t){let e,l=t[56]+"",n;return{c(){e=c("span"),n=K(l),this.h()},l(a){e=o(a,"SPAN",{class:!0});var r=p(e);n=W(r,l),r.forEach(f),this.h()},h(){i(e,"class","interval-duration svelte-1h3ij0x")},m(a,r){x(a,e,r),s(e,n)},p(a,r){r[0]&256&&l!==(l=a[56]+"")&&se(n,l)},d(a){a&&f(e)}}}function vs(t){let e,l,n,a;function r(...h){return t[37](t[48],...h)}function u(...h){return t[38](t[48],...h)}function d(...h){return t[39](t[48],...h)}return{c(){e=c("div"),this.h()},l(h){e=o(h,"DIV",{class:!0,style:!0,title:!0,role:!0,tabindex:!0,"aria-valuenow":!0}),p(e).forEach(f),this.h()},h(){i(e,"class","boundary svelte-1h3ij0x"),Ve(e,"left",t[52]+"px"),i(e,"title","Drag to move, right-click to remove"),i(e,"role","slider"),i(e,"tabindex","0"),i(e,"aria-valuenow",l=t[48].start)},m(h,v){x(h,e,v),n||(a=[U(e,"mousedown",r),U(e,"contextmenu",u),U(e,"keydown",d)],n=!0)},p(h,v){t=h,v[0]&256&&Ve(e,"left",t[52]+"px"),v[0]&256&&l!==(l=t[48].start)&&i(e,"aria-valuenow",l)},d(h){h&&f(e),n=!1,Dt(a)}}}function ps(t,e){let l,n,a=e[51]>2&&ds(On(e));return{key:t,first:null,c(){l=dt(),a&&a.c(),n=dt(),this.h()},l(r){l=dt(),a&&a.l(r),n=dt(),this.h()},h(){this.first=l},m(r,u){x(r,l,u),a&&a.m(r,u),x(r,n,u)},p(r,u){e=r,e[51]>2?a?a.p(On(e),u):(a=ds(On(e)),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(r){r&&(f(l),f(n)),a&&a.d(r)}}}function ms(t){let e;return{c(){e=c("div"),this.h()},l(l){e=o(l,"DIV",{class:!0,style:!0}),p(e).forEach(f),this.h()},h(){i(e,"class","hover-cursor svelte-1h3ij0x"),Ve(e,"left",t[17](t[11])+"px")},m(l,n){x(l,e,n)},p(l,n){n[0]&2048&&Ve(e,"left",l[17](l[11])+"px")},d(l){l&&f(e)}}}function _s(t){let e;return{c(){e=c("div"),this.h()},l(l){e=o(l,"DIV",{class:!0,style:!0}),p(e).forEach(f),this.h()},h(){i(e,"class","cursor svelte-1h3ij0x"),Ve(e,"left",t[17](t[12])+"px")},m(l,n){x(l,e,n)},p(l,n){n[0]&4096&&Ve(e,"left",l[17](l[12])+"px")},d(l){l&&f(e)}}}function gs(t){let e,l,n,a,r="Remove boundary",u,d;return{c(){e=c("div"),l=b(),n=c("div"),a=c("button"),a.textContent=r,this.h()},l(h){e=o(h,"DIV",{class:!0}),p(e).forEach(f),l=g(h),n=o(h,"DIV",{class:!0,style:!0});var v=p(n);a=o(v,"BUTTON",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-ypaiql"&&(a.textContent=r),v.forEach(f),this.h()},h(){i(e,"class","context-menu-backdrop svelte-1h3ij0x"),i(a,"class","context-menu-item svelte-1h3ij0x"),i(n,"class","context-menu svelte-1h3ij0x"),Ve(n,"left",t[7].x+"px"),Ve(n,"top",t[7].y+"px")},m(h,v){x(h,e,v),x(h,l,v),x(h,n,v),s(n,a),u||(d=[U(e,"click",t[15]),U(a,"click",t[16])],u=!0)},p(h,v){v[0]&128&&Ve(n,"left",h[7].x+"px"),v[0]&128&&Ve(n,"top",h[7].y+"px")},d(h){h&&(f(e),f(l),f(n)),u=!1,Dt(d)}}}function wa(t){let e,l,n,a,r,u,d=t[0].name+"",h,v,_,m=[],k=new Map,y,w=t[11]!==null&&t[17](t[11])>=ft&&t[17](t[11])<=t[9],B,I=t[17](t[12])>=ft&&t[17](t[12])<=t[9],P,S,C,N,T=Jl(t[8]);const L=M=>M[48].index;for(let M=0;M<T.length;M+=1){let O=fs(t,T,M),J=L(O);k.set(J,m[M]=ps(J,O))}let V=w&&ms(t),R=I&&_s(t),j=t[7]&&gs(t);return{c(){e=c("div"),l=c("div"),n=b(),a=c("div"),r=b(),u=c("div"),h=K(d),v=b(),_=c("div");for(let M=0;M<m.length;M+=1)m[M].c();y=b(),V&&V.c(),B=b(),R&&R.c(),P=b(),j&&j.c(),S=dt(),this.h()},l(M){e=o(M,"DIV",{class:!0,role:!0,tabindex:!0});var O=p(e);l=o(O,"DIV",{class:!0,style:!0}),p(l).forEach(f),n=g(O),a=o(O,"DIV",{class:!0,style:!0}),p(a).forEach(f),r=g(O),u=o(O,"DIV",{class:!0});var J=p(u);h=W(J,d),J.forEach(f),v=g(O),_=o(O,"DIV",{class:!0,style:!0});var ye=p(_);for(let pe=0;pe<m.length;pe+=1)m[pe].l(ye);ye.forEach(f),y=g(O),V&&V.l(O),B=g(O),R&&R.l(O),O.forEach(f),P=g(M),j&&j.l(M),S=dt(),this.h()},h(){i(l,"class","margin-area left svelte-1h3ij0x"),Ve(l,"width",ft+"px"),i(a,"class","margin-area right svelte-1h3ij0x"),Ve(a,"width",Vl+"px"),i(u,"class","tier-label svelte-1h3ij0x"),i(_,"class","intervals svelte-1h3ij0x"),Ve(_,"left",ft+"px"),Ve(_,"right",Vl+"px"),i(e,"class","tier-container svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0"),ol(e,"selected",t[2]),ol(e,"dragging",t[6])},m(M,O){x(M,e,O),s(e,l),s(e,n),s(e,a),s(e,r),s(e,u),s(u,h),s(e,v),s(e,_);for(let J=0;J<m.length;J+=1)m[J]&&m[J].m(_,null);s(e,y),V&&V.m(e,null),s(e,B),R&&R.m(e,null),t[40](e),x(M,P,O),j&&j.m(M,O),x(M,S,O),C||(N=[U(window,"keydown",t[30]),U(window,"mouseup",t[20]),U(e,"click",t[18]),U(e,"dblclick",t[24]),U(e,"mousemove",t[19]),U(e,"mouseup",t[20]),U(e,"mouseleave",t[21]),U(e,"keydown",t[41])],C=!0)},p(M,O){O[0]&1&&d!==(d=M[0].name+"")&&se(h,d),O[0]&247621430&&(T=Jl(M[8]),m=Hs(m,O,L,1,M,T,k,_,da,ps,null,fs)),O[0]&2560&&(w=M[11]!==null&&M[17](M[11])>=ft&&M[17](M[11])<=M[9]),w?V?V.p(M,O):(V=ms(M),V.c(),V.m(e,B)):V&&(V.d(1),V=null),O[0]&4608&&(I=M[17](M[12])>=ft&&M[17](M[12])<=M[9]),I?R?R.p(M,O):(R=_s(M),R.c(),R.m(e,null)):R&&(R.d(1),R=null),O[0]&4&&ol(e,"selected",M[2]),O[0]&64&&ol(e,"dragging",M[6]),M[7]?j?j.p(M,O):(j=gs(M),j.c(),j.m(S.parentNode,S)):j&&(j.d(1),j=null)},i:ht,o:ht,d(M){M&&(f(e),f(P),f(S));for(let O=0;O<m.length;O+=1)m[O].d();V&&V.d(),R&&R.d(),t[40](null),j&&j.d(M),C=!1,Dt(N)}}}const ft=45,Vl=45;function ya(t,e,l){let n,a,r,u,d,h,v;Te(t,An,D=>l(29,u=D)),Te(t,Ln,D=>l(10,d=D)),Te(t,an,D=>l(11,h=D)),Te(t,jl,D=>l(12,v=D));let{tier:_}=e,{index:m}=e,{isSelected:k=!1}=e;Fs();let y,w=0,B,I=null,P="",S=!1,C=null,N=null;function T(D,G){D.preventDefault(),D.stopPropagation(),wl.set(m),Gs(),l(6,S=!0),C=G}function L(D,G){D.preventDefault(),D.stopPropagation(),l(7,N={x:D.clientX,y:D.clientY,intervalIndex:G})}function V(){l(7,N=null)}function R(){N&&(wl.set(m),qs(N.intervalIndex),l(7,N=null))}Vn(()=>{B=new ResizeObserver(D=>{const G=D[0].contentRect;l(28,w=G.width),G.height}),B.observe(y)}),xn(()=>{B==null||B.disconnect()});function j(D){const{start:G,end:le}=u;return ft+(D-G)/(le-G)*n}function M(D){const{start:G,end:le}=u;return G+(D-ft)/n*(le-G)}function O(){wl.set(m)}function J(D){const G=y.getBoundingClientRect(),le=D.clientX-G.left;if((le<ft||le>w-Vl)&&(an.set(null),!S))return;const Q=M(le);an.set(Q),S&&C!==null&&Ws(C,Q)}function ye(){S&&(l(6,S=!1),C=null)}function pe(){an.set(null),S&&(l(6,S=!1),C=null)}function He(D,G){D.stopPropagation(),wl.set(m),Ln.set(G);const le=_.intervals[G];le&&(Yl.set({start:le.start,end:le.end}),jl.set(le.start))}function Le(D,G){D.stopPropagation();const le=y.getBoundingClientRect(),Q=D.clientX-le.left;if(Q<ft||Q>w-Vl)return;const ee=M(Q);wl.set(m),ss(ee)}function Re(D){const G=y.getBoundingClientRect(),le=D.clientX-G.left;if(le<ft||le>w-Vl)return;const Q=M(le);wl.set(m),ss(Q)}function Ce(D){l(4,I=D),l(5,P=_.intervals[D].text)}function De(){I!==null&&(Ks(m,I,P),l(4,I=null),l(5,P=""))}function ue(D){D.key==="Enter"?De():D.key==="Escape"&&(l(4,I=null),l(5,P=""))}const me=D=>D.key==="Escape"&&N&&V();function Ne(){P=this.value,l(5,P)}const q=D=>{Yl.set({start:D.start,end:D.end}),jl.set(D.start),Ce(D.index)},he=(D,G)=>G.key==="Enter"&&Ce(D.index),ae=(D,G)=>He(G,D.index),Ie=(D,G)=>Le(G,D.index),Ae=(D,G)=>{G.key==="Enter"&&(wl.set(m),Ln.set(D.index))},Fe=(D,G)=>T(G,D.index),we=(D,G)=>L(G,D.index),be=(D,G)=>G.key==="Enter"&&Ce(D.index);function Be(D){Ml[D?"unshift":"push"](()=>{y=D,l(3,y)})}const Qe=D=>D.key==="Enter"&&O();return t.$$set=D=>{"tier"in D&&l(0,_=D.tier),"index"in D&&l(1,m=D.index),"isSelected"in D&&l(2,k=D.isSelected)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&(n=Math.max(0,w-ft-Vl)),t.$$.dirty[0]&268435456&&l(9,a=w-Vl),t.$$.dirty[0]&536870913&&l(8,r=(()=>{const{start:D,end:G}=u;return _.intervals.map((le,Q)=>({...le,index:Q})).filter(le=>le.end>D&&le.start<G)})())},[_,m,k,y,I,P,S,N,r,a,d,h,v,T,L,V,R,j,O,J,ye,pe,He,Le,Re,Ce,De,ue,w,u,me,Ne,q,he,ae,Ie,Ae,Fe,we,be,Be,Qe]}class Ca extends Ql{constructor(e){super(),$l(this,e,ya,wa,Zl,{tier:0,index:1,isSelected:2},null,[-1,-1])}}function bs(t){let e,l;return{c(){e=c("div"),l=K(t[0]),this.h()},l(n){e=o(n,"DIV",{class:!0});var a=p(e);l=W(a,t[0]),a.forEach(f),this.h()},h(){i(e,"class","modal-header svelte-1vzci29")},m(n,a){x(n,e,a),s(e,l)},p(n,a){a&1&&se(l,n[0])},d(n){n&&f(e)}}}function ks(t){let e,l;return{c(){e=c("p"),l=K(t[2]),this.h()},l(n){e=o(n,"P",{class:!0});var a=p(e);l=W(a,t[2]),a.forEach(f),this.h()},h(){i(e,"class","modal-message svelte-1vzci29")},m(n,a){x(n,e,a),s(e,l)},p(n,a){a&4&&se(l,n[2])},d(n){n&&f(e)}}}function ws(t){let e,l,n;return{c(){e=c("input"),this.h()},l(a){e=o(a,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","modal-input svelte-1vzci29"),i(e,"placeholder",t[3])},m(a,r){x(a,e,r),t[14](e),Pt(e,t[6]),l||(n=[U(e,"input",t[15]),U(e,"keydown",t[11])],l=!0)},p(a,r){r&8&&i(e,"placeholder",a[3]),r&64&&e.value!==a[6]&&Pt(e,a[6])},d(a){a&&f(e),t[14](null),l=!1,Dt(n)}}}function ys(t){let e,l,n,a;return{c(){e=c("button"),l=K(t[5]),this.h()},l(r){e=o(r,"BUTTON",{class:!0});var u=p(e);l=W(u,t[5]),u.forEach(f),this.h()},h(){i(e,"class","modal-btn cancel svelte-1vzci29")},m(r,u){x(r,e,u),s(e,l),n||(a=U(e,"click",t[9]),n=!0)},p(r,u){u&32&&se(l,r[5])},d(r){r&&f(e),n=!1,a()}}}function Ta(t){let e,l,n,a,r,u,d,h,v,_,m,k,y=t[0]&&bs(t),w=t[2]&&ks(t),B=t[1]==="prompt"&&ws(t),I=t[1]!=="alert"&&ys(t);return{c(){e=c("div"),l=c("div"),y&&y.c(),n=b(),a=c("div"),w&&w.c(),r=b(),B&&B.c(),u=b(),d=c("div"),I&&I.c(),h=b(),v=c("button"),_=K(t[4]),this.h()},l(P){e=o(P,"DIV",{class:!0,role:!0,"aria-modal":!0});var S=p(e);l=o(S,"DIV",{class:!0});var C=p(l);y&&y.l(C),n=g(C),a=o(C,"DIV",{class:!0});var N=p(a);w&&w.l(N),r=g(N),B&&B.l(N),N.forEach(f),u=g(C),d=o(C,"DIV",{class:!0});var T=p(d);I&&I.l(T),h=g(T),v=o(T,"BUTTON",{class:!0});var L=p(v);_=W(L,t[4]),L.forEach(f),T.forEach(f),C.forEach(f),S.forEach(f),this.h()},h(){i(a,"class","modal-body svelte-1vzci29"),i(v,"class","modal-btn confirm svelte-1vzci29"),i(d,"class","modal-footer svelte-1vzci29"),i(l,"class","modal svelte-1vzci29"),i(e,"class","modal-backdrop svelte-1vzci29"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(P,S){x(P,e,S),s(e,l),y&&y.m(l,null),s(l,n),s(l,a),w&&w.m(a,null),s(a,r),B&&B.m(a,null),s(l,u),s(l,d),I&&I.m(d,null),s(d,h),s(d,v),s(v,_),m||(k=[U(window,"keydown",t[10]),U(v,"click",t[8]),U(e,"click",t[12])],m=!0)},p(P,[S]){P[0]?y?y.p(P,S):(y=bs(P),y.c(),y.m(l,n)):y&&(y.d(1),y=null),P[2]?w?w.p(P,S):(w=ks(P),w.c(),w.m(a,r)):w&&(w.d(1),w=null),P[1]==="prompt"?B?B.p(P,S):(B=ws(P),B.c(),B.m(a,null)):B&&(B.d(1),B=null),P[1]!=="alert"?I?I.p(P,S):(I=ys(P),I.c(),I.m(d,h)):I&&(I.d(1),I=null),S&16&&se(_,P[4])},i:ht,o:ht,d(P){P&&f(e),y&&y.d(),w&&w.d(),B&&B.d(),I&&I.d(),m=!1,Dt(k)}}}function Ea(t,e,l){let{title:n=""}=e,{type:a="alert"}=e,{message:r=""}=e,{placeholder:u=""}=e,{initialValue:d=""}=e,{confirmText:h="OK"}=e,{cancelText:v="Cancel"}=e;const _=Fs();let m=d,k;Vn(()=>{a==="prompt"&&k&&(k.focus(),k.select())});function y(){a==="prompt"?_("confirm",m):_("confirm")}function w(){_("cancel")}function B(N){N.key==="Escape"?w():N.key==="Enter"&&a!=="prompt"&&y()}function I(N){N.key==="Enter"?y():N.key==="Escape"&&w()}function P(N){N.target===N.currentTarget&&w()}function S(N){Ml[N?"unshift":"push"](()=>{k=N,l(7,k)})}function C(){m=this.value,l(6,m)}return t.$$set=N=>{"title"in N&&l(0,n=N.title),"type"in N&&l(1,a=N.type),"message"in N&&l(2,r=N.message),"placeholder"in N&&l(3,u=N.placeholder),"initialValue"in N&&l(13,d=N.initialValue),"confirmText"in N&&l(4,h=N.confirmText),"cancelText"in N&&l(5,v=N.cancelText)},[n,a,r,u,h,v,m,k,y,w,B,I,P,d,S,C]}class rn extends Ql{constructor(e){super(),$l(this,e,Ea,Ta,Zl,{title:0,type:1,message:2,placeholder:3,initialValue:13,confirmText:4,cancelText:5})}}function Cs(t,e,l){const n=t.slice();return n[18]=e[l],n[20]=l,n}function Ts(t,e){let l,n,a;return n=new Ca({props:{tier:e[18],index:e[20],isSelected:e[20]===e[4]}}),{key:t,first:null,c(){l=c("div"),Ot(n.$$.fragment),this.h()},l(r){l=o(r,"DIV",{class:!0});var u=p(l);zt(n.$$.fragment,u),u.forEach(f),this.h()},h(){i(l,"class","tier-row svelte-13sadlc"),this.first=l},m(r,u){x(r,l,u),Ut(n,l,null),a=!0},p(r,u){e=r;const d={};u&32&&(d.tier=e[18]),u&32&&(d.index=e[20]),u&48&&(d.isSelected=e[20]===e[4]),n.$set(d)},i(r){a||(de(n.$$.fragment,r),a=!0)},o(r){Ee(n.$$.fragment,r),a=!1},d(r){r&&f(l),Ft(n)}}}function Es(t){let e,l='No annotation tiers. Click "+ Tier" to add one, or import a TextGrid.';return{c(){e=c("div"),e.textContent=l,this.h()},l(n){e=o(n,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-11870wl"&&(e.textContent=l),this.h()},h(){i(e,"class","empty-message svelte-13sadlc")},m(n,a){x(n,e,a)},d(n){n&&f(e)}}}function Is(t){let e,l;return e=new rn({props:{title:"Add Tier",type:"prompt",message:"Enter a name for the new tier:",placeholder:"Tier name",initialValue:`Tier ${t[5].length+1}`,confirmText:"Add"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&32&&(r.initialValue=`Tier ${n[5].length+1}`),e.$set(r)},i(n){l||(de(e.$$.fragment,n),l=!0)},o(n){Ee(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Ns(t){var n;let e,l;return e=new rn({props:{title:"Rename Tier",type:"prompt",message:"Enter a new name for the tier:",placeholder:"Tier name",initialValue:((n=t[5][t[4]])==null?void 0:n.name)||"",confirmText:"Rename"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const u={};r&48&&(u.initialValue=((d=a[5][a[4]])==null?void 0:d.name)||""),e.$set(u)},i(a){l||(de(e.$$.fragment,a),l=!0)},o(a){Ee(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ps(t){var n;let e,l;return e=new rn({props:{title:"Remove Tier",type:"confirm",message:`Are you sure you want to remove tier "${(n=t[5][t[4]])==null?void 0:n.name}"?`,confirmText:"Remove"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const u={};r&48&&(u.message=`Are you sure you want to remove tier "${(d=a[5][a[4]])==null?void 0:d.name}"?`),e.$set(u)},i(a){l||(de(e.$$.fragment,a),l=!0)},o(a){Ee(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ds(t){let e,l;return e=new rn({props:{title:"Notice",type:"alert",message:t[2]}}),e.$on("confirm",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&4&&(r.message=n[2]),e.$set(r)},i(n){l||(de(e.$$.fragment,n),l=!0)},o(n){Ee(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function As(t){let e,l;return e=new rn({props:{title:"Export TextGrid",type:"prompt",message:"Enter a filename for the TextGrid:",placeholder:"filename.TextGrid",initialValue:t[3],confirmText:"Export"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&8&&(r.initialValue=n[3]),e.$set(r)},i(n){l||(de(e.$$.fragment,n),l=!0)},o(n){Ee(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Ia(t){let e,l,n,a="Import",r,u,d="Export",h,v,_,m,k="+ Tier",y,w,B="Rename",I,P,S="- Tier",C,N,T,L,V="Undo",R,j,M="Redo",O,J,ye=t[5].length+"",pe,He,Le=t[5].length!==1?"s":"",Re,Ce,De,ue=[],me=new Map,Ne,q,he,ae,Ie,Ae,Fe,we,be,Be,Qe,D,G=Jl(t[5]);const le=A=>A[20];for(let A=0;A<G.length;A+=1){let z=Cs(t,G,A),te=le(z);me.set(te,ue[A]=Ts(te,z))}let Q=t[5].length===0&&Es(),ee=t[1]==="addTier"&&Is(t),ce=t[1]==="renameTier"&&Ns(t),re=t[1]==="removeTier"&&Ps(t),_e=t[1]==="alert"&&Ds(t),ie=t[1]==="exportTextGrid"&&As(t);return{c(){e=c("div"),l=c("div"),n=c("button"),n.textContent=a,r=b(),u=c("button"),u.textContent=d,h=b(),v=c("span"),_=b(),m=c("button"),m.textContent=k,y=b(),w=c("button"),w.textContent=B,I=b(),P=c("button"),P.textContent=S,C=b(),N=c("span"),T=b(),L=c("button"),L.textContent=V,R=b(),j=c("button"),j.textContent=M,O=b(),J=c("span"),pe=K(ye),He=K(" tier"),Re=K(Le),Ce=b(),De=c("div");for(let A=0;A<ue.length;A+=1)ue[A].c();Ne=b(),Q&&Q.c(),q=b(),he=c("input"),ae=b(),ee&&ee.c(),Ie=b(),ce&&ce.c(),Ae=b(),re&&re.c(),Fe=b(),_e&&_e.c(),we=b(),ie&&ie.c(),be=dt(),this.h()},l(A){e=o(A,"DIV",{class:!0});var z=p(e);l=o(z,"DIV",{class:!0});var te=p(l);n=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1yaizdz"&&(n.textContent=a),r=g(te),u=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(u)!=="svelte-1aay3nq"&&(u.textContent=d),h=g(te),v=o(te,"SPAN",{class:!0}),p(v).forEach(f),_=g(te),m=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(m)!=="svelte-269lo2"&&(m.textContent=k),y=g(te),w=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(w)!=="svelte-6whcxg"&&(w.textContent=B),I=g(te),P=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(P)!=="svelte-1kr0wch"&&(P.textContent=S),C=g(te),N=o(te,"SPAN",{class:!0}),p(N).forEach(f),T=g(te),L=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(L)!=="svelte-wb3yww"&&(L.textContent=V),R=g(te),j=o(te,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),H(j)!=="svelte-2mf54l"&&(j.textContent=M),O=g(te),J=o(te,"SPAN",{class:!0});var Me=p(J);pe=W(Me,ye),He=W(Me," tier"),Re=W(Me,Le),Me.forEach(f),te.forEach(f),Ce=g(z),De=o(z,"DIV",{class:!0});var $e=p(De);for(let at=0;at<ue.length;at+=1)ue[at].l($e);Ne=g($e),Q&&Q.l($e),$e.forEach(f),q=g(z),he=o(z,"INPUT",{type:!0,accept:!0,style:!0}),z.forEach(f),ae=g(A),ee&&ee.l(A),Ie=g(A),ce&&ce.l(A),Ae=g(A),re&&re.l(A),Fe=g(A),_e&&_e.l(A),we=g(A),ie&&ie.l(A),be=dt(),this.h()},h(){i(n,"title","Import TextGrid"),i(n,"class","svelte-13sadlc"),i(u,"title","Export TextGrid"),i(u,"class","svelte-13sadlc"),i(v,"class","separator svelte-13sadlc"),i(m,"title","Add new tier"),i(m,"class","svelte-13sadlc"),i(w,"title","Rename selected tier"),i(w,"class","svelte-13sadlc"),i(P,"title","Remove selected tier"),i(P,"class","svelte-13sadlc"),i(N,"class","separator svelte-13sadlc"),i(L,"title","Undo (Ctrl+Z)"),i(L,"class","svelte-13sadlc"),i(j,"title","Redo (Ctrl+Y)"),i(j,"class","svelte-13sadlc"),i(J,"class","tier-count svelte-13sadlc"),i(l,"class","annotation-toolbar svelte-13sadlc"),i(De,"class","tiers-container svelte-13sadlc"),i(he,"type","file"),i(he,"accept",".TextGrid,.textgrid,.txt,text/plain"),Ve(he,"display","none"),i(e,"class","annotation-editor svelte-13sadlc")},m(A,z){x(A,e,z),s(e,l),s(l,n),s(l,r),s(l,u),s(l,h),s(l,v),s(l,_),s(l,m),s(l,y),s(l,w),s(l,I),s(l,P),s(l,C),s(l,N),s(l,T),s(l,L),s(l,R),s(l,j),s(l,O),s(l,J),s(J,pe),s(J,He),s(J,Re),s(e,Ce),s(e,De);for(let te=0;te<ue.length;te+=1)ue[te]&&ue[te].m(De,null);s(De,Ne),Q&&Q.m(De,null),s(e,q),s(e,he),t[14](he),x(A,ae,z),ee&&ee.m(A,z),x(A,Ie,z),ce&&ce.m(A,z),x(A,Ae,z),re&&re.m(A,z),x(A,Fe,z),_e&&_e.m(A,z),x(A,we,z),ie&&ie.m(A,z),x(A,be,z),Be=!0,Qe||(D=[U(n,"click",t[6]),U(u,"click",t[8]),U(m,"click",t[9]),U(w,"click",t[11]),U(P,"click",t[10]),U(L,"click",Us),U(j,"click",Hn),U(he,"change",t[7])],Qe=!0)},p(A,[z]){(!Be||z&32)&&ye!==(ye=A[5].length+"")&&se(pe,ye),(!Be||z&32)&&Le!==(Le=A[5].length!==1?"s":"")&&se(Re,Le),z&48&&(G=Jl(A[5]),Sl(),ue=Hs(ue,z,le,1,A,G,me,De,ha,Ts,Ne,Cs),Bl()),A[5].length===0?Q||(Q=Es(),Q.c(),Q.m(De,null)):Q&&(Q.d(1),Q=null),A[1]==="addTier"?ee?(ee.p(A,z),z&2&&de(ee,1)):(ee=Is(A),ee.c(),de(ee,1),ee.m(Ie.parentNode,Ie)):ee&&(Sl(),Ee(ee,1,1,()=>{ee=null}),Bl()),A[1]==="renameTier"?ce?(ce.p(A,z),z&2&&de(ce,1)):(ce=Ns(A),ce.c(),de(ce,1),ce.m(Ae.parentNode,Ae)):ce&&(Sl(),Ee(ce,1,1,()=>{ce=null}),Bl()),A[1]==="removeTier"?re?(re.p(A,z),z&2&&de(re,1)):(re=Ps(A),re.c(),de(re,1),re.m(Fe.parentNode,Fe)):re&&(Sl(),Ee(re,1,1,()=>{re=null}),Bl()),A[1]==="alert"?_e?(_e.p(A,z),z&2&&de(_e,1)):(_e=Ds(A),_e.c(),de(_e,1),_e.m(we.parentNode,we)):_e&&(Sl(),Ee(_e,1,1,()=>{_e=null}),Bl()),A[1]==="exportTextGrid"?ie?(ie.p(A,z),z&2&&de(ie,1)):(ie=As(A),ie.c(),de(ie,1),ie.m(be.parentNode,be)):ie&&(Sl(),Ee(ie,1,1,()=>{ie=null}),Bl())},i(A){if(!Be){for(let z=0;z<G.length;z+=1)de(ue[z]);de(ee),de(ce),de(re),de(_e),de(ie),Be=!0}},o(A){for(let z=0;z<ue.length;z+=1)Ee(ue[z]);Ee(ee),Ee(ce),Ee(re),Ee(_e),Ee(ie),Be=!1},d(A){A&&(f(e),f(ae),f(Ie),f(Ae),f(Fe),f(we),f(be));for(let z=0;z<ue.length;z+=1)ue[z].d();Q&&Q.d(),t[14](null),ee&&ee.d(A),ce&&ce.d(A),re&&re.d(A),_e&&_e.d(A),ie&&ie.d(A),Qe=!1,Dt(D)}}}function Na(t,e,l){let n,a,r;Te(t,wl,T=>l(4,n=T)),Te(t,Bn,T=>l(5,a=T)),Te(t,Sn,T=>l(15,r=T));let u,d=null,h="",v="annotations.TextGrid";Vn(()=>{a.length===0&&Xs()});function _(T){l(2,h=T),l(1,d="alert")}function m(){u.click()}async function k(T){var R;const L=T.target,V=(R=L.files)==null?void 0:R[0];if(V){try{const j=await V.text();Ys(j)}catch(j){console.error("Failed to load TextGrid:",j),_("Failed to parse TextGrid file: "+(j instanceof Error?j.message:String(j)))}L.value=""}}async function y(){if(r){const T=r.replace(/\.[^/.]+$/,"");l(3,v=T+".TextGrid")}else l(3,v="annotations.TextGrid");if("showSaveFilePicker"in window)try{const T=as(),V=await(await window.showSaveFilePicker({suggestedName:v,types:[{description:"Praat TextGrid",accept:{"text/plain":[".TextGrid"]}}]})).createWritable();await V.write(T),await V.close();return}catch(T){if(T.name==="AbortError")return}l(1,d="exportTextGrid")}function w(T){const L=as(),V=new Blob([L],{type:"text/plain"}),R=URL.createObjectURL(V),j=document.createElement("a");j.href=R,j.download=T.endsWith(".TextGrid")?T:T+".TextGrid",j.click(),URL.revokeObjectURL(R)}function B(){l(1,d="addTier")}function I(){if(a.length<=1){_("Cannot remove the last tier");return}l(1,d="removeTier")}function P(){l(1,d="renameTier")}function S(T){var V;const L=d;if(l(1,d=null),L==="addTier"&&typeof T.detail=="string"&&T.detail)Js(T.detail);else if(L==="renameTier"&&typeof T.detail=="string"&&T.detail){const R=((V=a[n])==null?void 0:V.name)||"";T.detail!==R&&Zs(n,T.detail)}else L==="removeTier"?Qs(n):L==="exportTextGrid"&&typeof T.detail=="string"&&T.detail&&w(T.detail)}function C(){l(1,d=null)}function N(T){Ml[T?"unshift":"push"](()=>{u=T,l(0,u)})}return[u,d,h,v,n,a,m,k,y,B,I,P,S,C,N]}class Pa extends Ql{constructor(e){super(),$l(this,e,Na,Ia,Zl,{})}}function Ss(t,e,l){const n=t.slice();return n[21]=e[l],n}function Bs(t){let e,l,n="Annotation",a,r=Jl(t[1]),u=[];for(let d=0;d<r.length;d+=1)u[d]=Vs(Ss(t,r,d));return{c(){e=c("div"),l=c("div"),l.textContent=n,a=b();for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=o(d,"DIV",{class:!0});var h=p(e);l=o(h,"DIV",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-16eifwe"&&(l.textContent=n),a=g(h);for(let v=0;v<u.length;v+=1)u[v].l(h);h.forEach(f),this.h()},h(){i(l,"class","section-title svelte-k4aoyj"),i(e,"class","section svelte-k4aoyj")},m(d,h){x(d,e,h),s(e,l),s(e,a);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(e,null)},p(d,h){if(h&2){r=Jl(d[1]);let v;for(v=0;v<r.length;v+=1){const _=Ss(d,r,v);u[v]?u[v].p(_,h):(u[v]=Vs(_),u[v].c(),u[v].m(e,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=r.length}},d(d){d&&f(e),xs(u,d)}}}function Vs(t){let e,l,n=t[21].tierName+"",a,r,u,d=t[21].text+"",h,v;return{c(){e=c("div"),l=c("span"),a=K(n),r=b(),u=c("span"),h=K(d),v=b(),this.h()},l(_){e=o(_,"DIV",{class:!0});var m=p(e);l=o(m,"SPAN",{class:!0});var k=p(l);a=W(k,n),k.forEach(f),r=g(m),u=o(m,"SPAN",{class:!0});var y=p(u);h=W(y,d),y.forEach(f),v=g(m),m.forEach(f),this.h()},h(){i(l,"class","tier-name svelte-k4aoyj"),i(u,"class","interval-text svelte-k4aoyj"),i(e,"class","annotation-row svelte-k4aoyj")},m(_,m){x(_,e,m),s(e,l),s(l,a),s(e,r),s(e,u),s(u,h),s(e,v)},p(_,m){m&2&&n!==(n=_[21].tierName+"")&&se(a,n),m&2&&d!==(d=_[21].text+"")&&se(h,d)},d(_){_&&f(e)}}}function Da(t){let e,l,n,a=t[0].toFixed(3)+"",r,u,d,h,v,_="Pitch & Voice",m,k,y,w,B="F0",I,P,S=Dn(t[15])+"",C,N,T,L,V="Int",R,j,M=Xl(t[14])+"",O,J,ye,pe,He="HNR",Le,Re,Ce=Xl(t[5])+"",De,ue,me,Ne,q="Formants",he,ae,Ie,Ae='<th class="svelte-k4aoyj"></th> <th class="svelte-k4aoyj">Freq</th> <th class="svelte-k4aoyj">BW</th>',Fe,we,be,Be="F1",Qe,D,G=Ze(t[13])+"",le,Q,ee,ce=Ze(t[9])+"",re,_e,ie,A,z="F2",te,Me,$e=Ze(t[12])+"",at,et,xe,E=Ze(t[8])+"",Z,ne,X,oe,ke="F3",Pe,fe,At=Ze(t[11])+"",ze,Se,je,cl=Ze(t[7])+"",St,Ll,vt,pt,Rl="F4",mt,tt,ul=Ze(t[10])+"",Bt,Fl,ll,lt=Ze(t[6])+"",Nl,Pl,_t,gt,Ul="Spectral",Vt,Oe,Gt,qt,nt="CoG",bt,fl,st=Dn(t[4])+"",Dl,kt,Wt,Kt,Xt="Tilt",Yt,dl,hl=t[3]!==null?`${t[3].toFixed(1)} dB/oct`:"—",Ge,wt,Jt,qe,en="A1-P0",yt,vl,pl=Xl(t[2])+"",it,Zt,Ue=t[1].length>0&&Bs(t);return{c(){e=c("div"),l=c("div"),n=c("span"),r=K(a),u=K("s"),d=b(),h=c("div"),v=c("div"),v.textContent=_,m=b(),k=c("div"),y=c("div"),w=c("span"),w.textContent=B,I=b(),P=c("span"),C=K(S),N=b(),T=c("div"),L=c("span"),L.textContent=V,R=b(),j=c("span"),O=K(M),J=b(),ye=c("div"),pe=c("span"),pe.textContent=He,Le=b(),Re=c("span"),De=K(Ce),ue=b(),me=c("div"),Ne=c("div"),Ne.textContent=q,he=b(),ae=c("table"),Ie=c("tr"),Ie.innerHTML=Ae,Fe=b(),we=c("tr"),be=c("td"),be.textContent=Be,Qe=b(),D=c("td"),le=K(G),Q=b(),ee=c("td"),re=K(ce),_e=b(),ie=c("tr"),A=c("td"),A.textContent=z,te=b(),Me=c("td"),at=K($e),et=b(),xe=c("td"),Z=K(E),ne=b(),X=c("tr"),oe=c("td"),oe.textContent=ke,Pe=b(),fe=c("td"),ze=K(At),Se=b(),je=c("td"),St=K(cl),Ll=b(),vt=c("tr"),pt=c("td"),pt.textContent=Rl,mt=b(),tt=c("td"),Bt=K(ul),Fl=b(),ll=c("td"),Nl=K(lt),Pl=b(),_t=c("div"),gt=c("div"),gt.textContent=Ul,Vt=b(),Oe=c("div"),Gt=c("div"),qt=c("span"),qt.textContent=nt,bt=b(),fl=c("span"),Dl=K(st),kt=b(),Wt=c("div"),Kt=c("span"),Kt.textContent=Xt,Yt=b(),dl=c("span"),Ge=K(hl),wt=b(),Jt=c("div"),qe=c("span"),qe.textContent=en,yt=b(),vl=c("span"),it=K(pl),Zt=b(),Ue&&Ue.c(),this.h()},l(ge){e=o(ge,"DIV",{class:!0});var $=p(e);l=o($,"DIV",{class:!0});var Mt=p(l);n=o(Mt,"SPAN",{class:!0});var zl=p(n);r=W(zl,a),u=W(zl,"s"),zl.forEach(f),Mt.forEach(f),d=g($),h=o($,"DIV",{class:!0});var rt=p(h);v=o(rt,"DIV",{class:!0,"data-svelte-h":!0}),H(v)!=="svelte-d0x3ep"&&(v.textContent=_),m=g(rt),k=o(rt,"DIV",{class:!0});var ml=p(k);y=o(ml,"DIV",{class:!0});var ot=p(y);w=o(ot,"SPAN",{class:!0,"data-svelte-h":!0}),H(w)!=="svelte-1cn36l0"&&(w.textContent=B),I=g(ot),P=o(ot,"SPAN",{class:!0});var tn=p(P);C=W(tn,S),tn.forEach(f),ot.forEach(f),N=g(ml),T=o(ml,"DIV",{class:!0});var yl=p(T);L=o(yl,"SPAN",{class:!0,"data-svelte-h":!0}),H(L)!=="svelte-1kbwfyu"&&(L.textContent=V),R=g(yl),j=o(yl,"SPAN",{class:!0});var Qt=p(j);O=W(Qt,M),Qt.forEach(f),yl.forEach(f),J=g(ml),ye=o(ml,"DIV",{class:!0});var We=p(ye);pe=o(We,"SPAN",{class:!0,"data-svelte-h":!0}),H(pe)!=="svelte-1wxjkk8"&&(pe.textContent=He),Le=g(We),Re=o(We,"SPAN",{class:!0});var _l=p(Re);De=W(_l,Ce),_l.forEach(f),We.forEach(f),ml.forEach(f),rt.forEach(f),ue=g($),me=o($,"DIV",{class:!0});var jt=p(me);Ne=o(jt,"DIV",{class:!0,"data-svelte-h":!0}),H(Ne)!=="svelte-sqr9el"&&(Ne.textContent=q),he=g(jt),ae=o(jt,"TABLE",{class:!0});var ct=p(ae);Ie=o(ct,"TR",{"data-svelte-h":!0}),H(Ie)!=="svelte-316y0v"&&(Ie.innerHTML=Ae),Fe=g(ct),we=o(ct,"TR",{});var Ct=p(we);be=o(Ct,"TD",{class:!0,"data-svelte-h":!0}),H(be)!=="svelte-1iujy6z"&&(be.textContent=Be),Qe=g(Ct),D=o(Ct,"TD",{class:!0});var $t=p(D);le=W($t,G),$t.forEach(f),Q=g(Ct),ee=o(Ct,"TD",{class:!0});var Ol=p(ee);re=W(Ol,ce),Ol.forEach(f),Ct.forEach(f),_e=g(ct),ie=o(ct,"TR",{});var Tt=p(ie);A=o(Tt,"TD",{class:!0,"data-svelte-h":!0}),H(A)!=="svelte-kfs2py"&&(A.textContent=z),te=g(Tt),Me=o(Tt,"TD",{class:!0});var nl=p(Me);at=W(nl,$e),nl.forEach(f),et=g(Tt),xe=o(Tt,"TD",{class:!0});var Hl=p(xe);Z=W(Hl,E),Hl.forEach(f),Tt.forEach(f),ne=g(ct),X=o(ct,"TR",{});var Et=p(X);oe=o(Et,"TD",{class:!0,"data-svelte-h":!0}),H(oe)!=="svelte-h8k9fd"&&(oe.textContent=ke),Pe=g(Et),fe=o(Et,"TD",{class:!0});var sl=p(fe);ze=W(sl,At),sl.forEach(f),Se=g(Et),je=o(Et,"TD",{class:!0});var xl=p(je);St=W(xl,cl),xl.forEach(f),Et.forEach(f),Ll=g(ct),vt=o(ct,"TR",{});var ut=p(vt);pt=o(ut,"TD",{class:!0,"data-svelte-h":!0}),H(pt)!=="svelte-zz0m8k"&&(pt.textContent=Rl),mt=g(ut),tt=o(ut,"TD",{class:!0});var Gl=p(tt);Bt=W(Gl,ul),Gl.forEach(f),Fl=g(ut),ll=o(ut,"TD",{class:!0});var el=p(ll);Nl=W(el,lt),el.forEach(f),ut.forEach(f),ct.forEach(f),jt.forEach(f),Pl=g($),_t=o($,"DIV",{class:!0});var It=p(_t);gt=o(It,"DIV",{class:!0,"data-svelte-h":!0}),H(gt)!=="svelte-19lj3il"&&(gt.textContent=Ul),Vt=g(It),Oe=o(It,"DIV",{class:!0});var al=p(Oe);Gt=o(al,"DIV",{class:!0});var il=p(Gt);qt=o(il,"SPAN",{class:!0,"data-svelte-h":!0}),H(qt)!=="svelte-m4uzze"&&(qt.textContent=nt),bt=g(il),fl=o(il,"SPAN",{class:!0});var Al=p(fl);Dl=W(Al,st),Al.forEach(f),il.forEach(f),kt=g(al),Wt=o(al,"DIV",{class:!0});var Cl=p(Wt);Kt=o(Cl,"SPAN",{class:!0,"data-svelte-h":!0}),H(Kt)!=="svelte-124pemq"&&(Kt.textContent=Xt),Yt=g(Cl),dl=o(Cl,"SPAN",{class:!0});var Tl=p(dl);Ge=W(Tl,hl),Tl.forEach(f),Cl.forEach(f),wt=g(al),Jt=o(al,"DIV",{class:!0});var gl=p(Jt);qe=o(gl,"SPAN",{class:!0,"data-svelte-h":!0}),H(qe)!=="svelte-hotqe4"&&(qe.textContent=en),yt=g(gl),vl=o(gl,"SPAN",{class:!0});var ql=p(vl);it=W(ql,pl),ql.forEach(f),gl.forEach(f),al.forEach(f),It.forEach(f),Zt=g($),Ue&&Ue.l($),$.forEach(f),this.h()},h(){i(n,"class","time-label svelte-k4aoyj"),i(l,"class","panel-header svelte-k4aoyj"),i(v,"class","section-title svelte-k4aoyj"),i(w,"class","label pitch-label svelte-k4aoyj"),i(P,"class","value svelte-k4aoyj"),i(y,"class","value-row svelte-k4aoyj"),i(L,"class","label intensity-label svelte-k4aoyj"),i(j,"class","value svelte-k4aoyj"),i(T,"class","value-row svelte-k4aoyj"),i(pe,"class","label hnr-label svelte-k4aoyj"),i(Re,"class","value svelte-k4aoyj"),i(ye,"class","value-row svelte-k4aoyj"),i(k,"class","values-grid svelte-k4aoyj"),i(h,"class","section svelte-k4aoyj"),i(Ne,"class","section-title svelte-k4aoyj"),i(be,"class","label f-label svelte-k4aoyj"),i(D,"class","value svelte-k4aoyj"),i(ee,"class","value bw svelte-k4aoyj"),i(A,"class","label f-label svelte-k4aoyj"),i(Me,"class","value svelte-k4aoyj"),i(xe,"class","value bw svelte-k4aoyj"),i(oe,"class","label f-label svelte-k4aoyj"),i(fe,"class","value svelte-k4aoyj"),i(je,"class","value bw svelte-k4aoyj"),i(pt,"class","label f-label svelte-k4aoyj"),i(tt,"class","value svelte-k4aoyj"),i(ll,"class","value bw svelte-k4aoyj"),i(ae,"class","formant-table svelte-k4aoyj"),i(me,"class","section svelte-k4aoyj"),i(gt,"class","section-title svelte-k4aoyj"),i(qt,"class","label cog-label svelte-k4aoyj"),i(fl,"class","value svelte-k4aoyj"),i(Gt,"class","value-row svelte-k4aoyj"),i(Kt,"class","label tilt-label svelte-k4aoyj"),i(dl,"class","value svelte-k4aoyj"),i(Wt,"class","value-row svelte-k4aoyj"),i(qe,"class","label nasal-label svelte-k4aoyj"),i(vl,"class","value svelte-k4aoyj"),i(Jt,"class","value-row svelte-k4aoyj"),i(Oe,"class","values-grid svelte-k4aoyj"),i(_t,"class","section svelte-k4aoyj"),i(e,"class","values-panel svelte-k4aoyj")},m(ge,$){x(ge,e,$),s(e,l),s(l,n),s(n,r),s(n,u),s(e,d),s(e,h),s(h,v),s(h,m),s(h,k),s(k,y),s(y,w),s(y,I),s(y,P),s(P,C),s(k,N),s(k,T),s(T,L),s(T,R),s(T,j),s(j,O),s(k,J),s(k,ye),s(ye,pe),s(ye,Le),s(ye,Re),s(Re,De),s(e,ue),s(e,me),s(me,Ne),s(me,he),s(me,ae),s(ae,Ie),s(ae,Fe),s(ae,we),s(we,be),s(we,Qe),s(we,D),s(D,le),s(we,Q),s(we,ee),s(ee,re),s(ae,_e),s(ae,ie),s(ie,A),s(ie,te),s(ie,Me),s(Me,at),s(ie,et),s(ie,xe),s(xe,Z),s(ae,ne),s(ae,X),s(X,oe),s(X,Pe),s(X,fe),s(fe,ze),s(X,Se),s(X,je),s(je,St),s(ae,Ll),s(ae,vt),s(vt,pt),s(vt,mt),s(vt,tt),s(tt,Bt),s(vt,Fl),s(vt,ll),s(ll,Nl),s(e,Pl),s(e,_t),s(_t,gt),s(_t,Vt),s(_t,Oe),s(Oe,Gt),s(Gt,qt),s(Gt,bt),s(Gt,fl),s(fl,Dl),s(Oe,kt),s(Oe,Wt),s(Wt,Kt),s(Wt,Yt),s(Wt,dl),s(dl,Ge),s(Oe,wt),s(Oe,Jt),s(Jt,qe),s(Jt,yt),s(Jt,vl),s(vl,it),s(e,Zt),Ue&&Ue.m(e,null)},p(ge,[$]){$&1&&a!==(a=ge[0].toFixed(3)+"")&&se(r,a),$&32768&&S!==(S=Dn(ge[15])+"")&&se(C,S),$&16384&&M!==(M=Xl(ge[14])+"")&&se(O,M),$&32&&Ce!==(Ce=Xl(ge[5])+"")&&se(De,Ce),$&8192&&G!==(G=Ze(ge[13])+"")&&se(le,G),$&512&&ce!==(ce=Ze(ge[9])+"")&&se(re,ce),$&4096&&$e!==($e=Ze(ge[12])+"")&&se(at,$e),$&256&&E!==(E=Ze(ge[8])+"")&&se(Z,E),$&2048&&At!==(At=Ze(ge[11])+"")&&se(ze,At),$&128&&cl!==(cl=Ze(ge[7])+"")&&se(St,cl),$&1024&&ul!==(ul=Ze(ge[10])+"")&&se(Bt,ul),$&64&&lt!==(lt=Ze(ge[6])+"")&&se(Nl,lt),$&16&&st!==(st=Dn(ge[4])+"")&&se(Dl,st),$&8&&hl!==(hl=ge[3]!==null?`${ge[3].toFixed(1)} dB/oct`:"—")&&se(Ge,hl),$&4&&pl!==(pl=Xl(ge[2])+"")&&se(it,pl),ge[1].length>0?Ue?Ue.p(ge,$):(Ue=Bs(ge),Ue.c(),Ue.m(e,null)):Ue&&(Ue.d(1),Ue=null)},i:ht,o:ht,d(ge){ge&&f(e),Ue&&Ue.d()}}}function Nt(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const r=Math.floor((n+a)/2);e[r]<l?n=r+1:a=r}return n>0&&Math.abs(e[n-1]-l)<Math.abs(e[n]-l)&&(n=n-1),t[n]}function Aa(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const k=Math.floor((n+a+1)/2);e[k]<=l?n=k:a=k-1}const r=n,u=e[r],d=t[r];if(r>=e.length-1)return d;const h=e[r+1],v=t[r+1],_=d!==null&&d>0,m=v!==null&&v>0;if(_&&m){const k=(l-u)/(h-u);return Math.exp(Math.log(d)+k*(Math.log(v)-Math.log(d)))}else return _?d:m?v:null}function Ze(t){return t===null?"—":`${t.toFixed(0)}`}function Dn(t){return t===null?"—":`${t.toFixed(1)} Hz`}function Xl(t){return t===null?"—":`${t.toFixed(1)} dB`}function Sa(t,e,l){let n,a,r,u,d,h,v,_,m,k,y,w,B,I,P,S,C,N,T,L;Te(t,$s,R=>l(16,C=R)),Te(t,Bn,R=>l(19,N=R)),Te(t,jl,R=>l(17,T=R)),Te(t,an,R=>l(18,L=R));function V(R){if(!N||N.length===0)return[];const j=[];for(const M of N){const O=M.intervals.find(J=>R>=J.start&&R<J.end);O&&O.text&&j.push({tierName:M.name,text:O.text})}return j}return t.$$.update=()=>{t.$$.dirty&393216&&l(0,n=L!==null?L:T),t.$$.dirty&65537&&l(15,a=C?Aa(C.pitch,C.times,n):null),t.$$.dirty&65537&&l(14,r=C?Nt(C.intensity,C.times,n):null),t.$$.dirty&65537&&l(13,u=C?Nt(C.formants.f1,C.times,n):null),t.$$.dirty&65537&&l(12,d=C?Nt(C.formants.f2,C.times,n):null),t.$$.dirty&65537&&l(11,h=C?Nt(C.formants.f3,C.times,n):null),t.$$.dirty&65537&&l(10,v=C?Nt(C.formants.f4,C.times,n):null),t.$$.dirty&65537&&l(9,_=C?Nt(C.formants.b1,C.times,n):null),t.$$.dirty&65537&&l(8,m=C?Nt(C.formants.b2,C.times,n):null),t.$$.dirty&65537&&l(7,k=C?Nt(C.formants.b3,C.times,n):null),t.$$.dirty&65537&&l(6,y=C?Nt(C.formants.b4,C.times,n):null),t.$$.dirty&65537&&l(5,w=C?Nt(C.harmonicity,C.times,n):null),t.$$.dirty&65537&&l(4,B=C!=null&&C.cog?Nt(C.cog,C.times,n):null),t.$$.dirty&65537&&l(3,I=C!=null&&C.spectralTilt?Nt(C.spectralTilt,C.times,n):null),t.$$.dirty&65537&&l(2,P=C!=null&&C.a1p0?Nt(C.a1p0,C.times,n):null),t.$$.dirty&1&&l(1,S=V(n))},[n,S,P,I,B,w,y,k,m,_,v,h,d,u,r,a,C,T,L]}class Ba extends Ql{constructor(e){super(),$l(this,e,Sa,Da,Zl,{})}}function Va(t){let e,l,n,a,r='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',u,d,h,v,_='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><rect x="6" y="6" width="12" height="12"></rect></svg>',m,k,y,w='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>',B,I,P,S,C,N,T=rl(t[23])+"",L,V,R=rl(t[0].length/t[19])+"",j,M,O,J,ye,pe,He,Le,Re,Ce,De='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.03 7.03 0 00-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.49.49 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.01-1.58zM12 15.6a3.6 3.6 0 110-7.2 3.6 3.6 0 010 7.2z"></path></svg>',ue,me,Ne,q,he,ae,Ie,Ae,Fe="Pitch",we,be,Be,Qe,D,G="Formants",le,Q,ee,ce,re,_e="Intensity",ie,A,z,te,Me,$e="HNR",at,et,xe,E,Z,ne="CoG",X,oe,ke,Pe,fe,At="Sp.Tilt",ze,Se,je,cl,St,Ll="A1-P0",vt,pt,Rl,mt,tt,ul,Bt,Fl="Points",ll,lt,Nl="Import",Pl,_t,gt,Ul,Vt,Oe,Gt="Voice:",qt,nt,bt,fl="Female",st,Dl="Male",kt,Wt="Child",Kt,Xt,Yt,dl="Max Freq:",hl,Ge,wt,Jt="5 kHz",qe,en="7.5 kHz",yt,vl="10 kHz",pl,it,Zt,Ue="Backend:",ge,$,Mt,zl="praatfan (local)",rt,ml="praatfan (remote)",ot,tn="praatfan-gpl (remote)",yl,Qt,We,_l,jt,ct,Ct,$t,Ol,Tt,nl,Hl,Et,sl,xl,ut,Gl,el,It,al,il=rl(t[27].start)+"",Al,Cl,Tl=rl(t[27].end)+"",gl,ql,Wl,Gn="Space: play | Tab: play visible | Scroll: zoom",Lt,Mn,qn;function Wn(F,Y){return F[22]?Ra:La}let on=Wn(t),bl=on(t);function Kn(F,Y){return F[6]?Ua:Fa}let cn=Kn(t),tl=cn(t),Xe=t[24]&&Ms(t),Ye=t[25]&&js(t);function Xn(F,Y){return F[3]?Oa:za}let un=Xn(t),kl=un(t),Je=t[20].length>0&&Ls(t);return jt=new ta({}),$t=new la({props:{showPitch:t[8],showFormants:t[9],showIntensity:t[10],showHNR:t[11],showCoG:t[12],showSpectralTilt:t[13],showA1P0:t[14],showDataPoints:t[15],maxFreq:t[16]}}),nl=new na({}),sl=new Pa({}),ut=new Ba({}),{c(){e=c("div"),l=c("header"),n=c("div"),a=c("button"),a.innerHTML=r,u=b(),d=c("button"),bl.c(),h=b(),v=c("button"),v.innerHTML=_,m=b(),tl.c(),k=b(),y=c("button"),y.innerHTML=w,B=b(),I=c("span"),P=K(t[18]),S=b(),C=c("div"),N=c("span"),L=K(T),V=K(" / "),j=K(R),M=b(),Xe&&Xe.c(),O=b(),J=c("div"),Ye&&Ye.c(),ye=b(),pe=c("span"),He=K(t[19]),Le=K(" Hz"),Re=b(),Ce=c("button"),Ce.innerHTML=De,ue=b(),me=c("button"),kl.c(),Ne=b(),q=c("div"),he=c("label"),ae=c("input"),Ie=b(),Ae=c("span"),Ae.textContent=Fe,we=b(),be=c("label"),Be=c("input"),Qe=b(),D=c("span"),D.textContent=G,le=b(),Q=c("label"),ee=c("input"),ce=b(),re=c("span"),re.textContent=_e,ie=b(),A=c("label"),z=c("input"),te=b(),Me=c("span"),Me.textContent=$e,at=b(),et=c("label"),xe=c("input"),E=b(),Z=c("span"),Z.textContent=ne,X=b(),oe=c("label"),ke=c("input"),Pe=b(),fe=c("span"),fe.textContent=At,ze=b(),Se=c("label"),je=c("input"),cl=b(),St=c("span"),St.textContent=Ll,vt=b(),pt=c("span"),Rl=b(),mt=c("label"),tt=c("input"),ul=b(),Bt=c("span"),Bt.textContent=Fl,ll=b(),lt=c("button"),lt.textContent=Nl,Pl=b(),Je&&Je.c(),_t=b(),gt=c("span"),Ul=b(),Vt=c("label"),Oe=c("span"),Oe.textContent=Gt,qt=b(),nt=c("select"),bt=c("option"),bt.textContent=fl,st=c("option"),st.textContent=Dl,kt=c("option"),kt.textContent=Wt,Kt=b(),Xt=c("label"),Yt=c("span"),Yt.textContent=dl,hl=b(),Ge=c("select"),wt=c("option"),wt.textContent=Jt,qe=c("option"),qe.textContent=en,yt=c("option"),yt.textContent=vl,pl=b(),it=c("label"),Zt=c("span"),Zt.textContent=Ue,ge=b(),$=c("select"),Mt=c("option"),Mt.textContent=zl,rt=c("option"),rt.textContent=ml,ot=c("option"),ot.textContent=tn,yl=b(),Qt=c("div"),We=c("div"),_l=c("div"),Ot(jt.$$.fragment),ct=b(),Ct=c("div"),Ot($t.$$.fragment),Ol=b(),Tt=c("div"),Ot(nl.$$.fragment),Hl=b(),Et=c("div"),Ot(sl.$$.fragment),xl=b(),Ot(ut.$$.fragment),Gl=b(),el=c("footer"),It=c("span"),al=K("View: "),Al=K(il),Cl=K(" - "),gl=K(Tl),ql=b(),Wl=c("span"),Wl.textContent=Gn,this.h()},l(F){e=o(F,"DIV",{class:!0});var Y=p(e);l=o(Y,"HEADER",{class:!0});var Ke=p(l);n=o(Ke,"DIV",{class:!0});var Rt=p(n);a=o(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(a)!=="svelte-1lvwg3g"&&(a.innerHTML=r),u=g(Rt),d=o(Rt,"BUTTON",{class:!0,title:!0});var Yn=p(d);bl.l(Yn),Yn.forEach(f),h=g(Rt),v=o(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(v)!=="svelte-1ictkst"&&(v.innerHTML=_),m=g(Rt),tl.l(Rt),k=g(Rt),y=o(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(y)!=="svelte-u6ddbp"&&(y.innerHTML=w),B=g(Rt),I=o(Rt,"SPAN",{class:!0});var Jn=p(I);P=W(Jn,t[18]),Jn.forEach(f),Rt.forEach(f),S=g(Ke),C=o(Ke,"DIV",{class:!0});var fn=p(C);N=o(fn,"SPAN",{class:!0});var dn=p(N);L=W(dn,T),V=W(dn," / "),j=W(dn,R),dn.forEach(f),M=g(fn),Xe&&Xe.l(fn),fn.forEach(f),O=g(Ke),J=o(Ke,"DIV",{class:!0});var El=p(J);Ye&&Ye.l(El),ye=g(El),pe=o(El,"SPAN",{class:!0});var jn=p(pe);He=W(jn,t[19]),Le=W(jn," Hz"),jn.forEach(f),Re=g(El),Ce=o(El,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(Ce)!=="svelte-px3wau"&&(Ce.innerHTML=De),ue=g(El),me=o(El,"BUTTON",{class:!0,title:!0});var Zn=p(me);kl.l(Zn),Zn.forEach(f),El.forEach(f),Ke.forEach(f),Ne=g(Y),q=o(Y,"DIV",{class:!0});var ve=p(q);he=o(ve,"LABEL",{class:!0,title:!0});var hn=p(he);ae=o(hn,"INPUT",{type:!0,class:!0}),Ie=g(hn),Ae=o(hn,"SPAN",{class:!0,"data-svelte-h":!0}),H(Ae)!=="svelte-1k01z98"&&(Ae.textContent=Fe),hn.forEach(f),we=g(ve),be=o(ve,"LABEL",{class:!0,title:!0});var vn=p(be);Be=o(vn,"INPUT",{type:!0,class:!0}),Qe=g(vn),D=o(vn,"SPAN",{class:!0,"data-svelte-h":!0}),H(D)!=="svelte-6cthmg"&&(D.textContent=G),vn.forEach(f),le=g(ve),Q=o(ve,"LABEL",{class:!0,title:!0});var pn=p(Q);ee=o(pn,"INPUT",{type:!0,class:!0}),ce=g(pn),re=o(pn,"SPAN",{class:!0,"data-svelte-h":!0}),H(re)!=="svelte-1el2ji2"&&(re.textContent=_e),pn.forEach(f),ie=g(ve),A=o(ve,"LABEL",{class:!0,title:!0});var mn=p(A);z=o(mn,"INPUT",{type:!0,class:!0}),te=g(mn),Me=o(mn,"SPAN",{class:!0,"data-svelte-h":!0}),H(Me)!=="svelte-177jta0"&&(Me.textContent=$e),mn.forEach(f),at=g(ve),et=o(ve,"LABEL",{class:!0,title:!0});var _n=p(et);xe=o(_n,"INPUT",{type:!0,class:!0}),E=g(_n),Z=o(_n,"SPAN",{class:!0,"data-svelte-h":!0}),H(Z)!=="svelte-1myrnh2"&&(Z.textContent=ne),_n.forEach(f),X=g(ve),oe=o(ve,"LABEL",{class:!0,title:!0});var gn=p(oe);ke=o(gn,"INPUT",{type:!0,class:!0}),Pe=g(gn),fe=o(gn,"SPAN",{class:!0,"data-svelte-h":!0}),H(fe)!=="svelte-1pame47"&&(fe.textContent=At),gn.forEach(f),ze=g(ve),Se=o(ve,"LABEL",{class:!0,title:!0});var bn=p(Se);je=o(bn,"INPUT",{type:!0,class:!0}),cl=g(bn),St=o(bn,"SPAN",{class:!0,"data-svelte-h":!0}),H(St)!=="svelte-kia4wx"&&(St.textContent=Ll),bn.forEach(f),vt=g(ve),pt=o(ve,"SPAN",{class:!0}),p(pt).forEach(f),Rl=g(ve),mt=o(ve,"LABEL",{class:!0,title:!0});var kn=p(mt);tt=o(kn,"INPUT",{type:!0,class:!0}),ul=g(kn),Bt=o(kn,"SPAN",{class:!0,"data-svelte-h":!0}),H(Bt)!=="svelte-16btzso"&&(Bt.textContent=Fl),kn.forEach(f),ll=g(ve),lt=o(ve,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(lt)!=="svelte-13z3t6e"&&(lt.textContent=Nl),Pl=g(ve),Je&&Je.l(ve),_t=g(ve),gt=o(ve,"SPAN",{class:!0}),p(gt).forEach(f),Ul=g(ve),Vt=o(ve,"LABEL",{class:!0});var wn=p(Vt);Oe=o(wn,"SPAN",{class:!0,"data-svelte-h":!0}),H(Oe)!=="svelte-1d25ili"&&(Oe.textContent=Gt),qt=g(wn),nt=o(wn,"SELECT",{class:!0});var yn=p(nt);bt=o(yn,"OPTION",{"data-svelte-h":!0}),H(bt)!=="svelte-kgyr86"&&(bt.textContent=fl),st=o(yn,"OPTION",{"data-svelte-h":!0}),H(st)!=="svelte-8wnvoi"&&(st.textContent=Dl),kt=o(yn,"OPTION",{"data-svelte-h":!0}),H(kt)!=="svelte-7fkmwe"&&(kt.textContent=Wt),yn.forEach(f),wn.forEach(f),Kt=g(ve),Xt=o(ve,"LABEL",{class:!0});var Cn=p(Xt);Yt=o(Cn,"SPAN",{class:!0,"data-svelte-h":!0}),H(Yt)!=="svelte-rpytas"&&(Yt.textContent=dl),hl=g(Cn),Ge=o(Cn,"SELECT",{class:!0});var Tn=p(Ge);wt=o(Tn,"OPTION",{"data-svelte-h":!0}),H(wt)!=="svelte-1awwqhf"&&(wt.textContent=Jt),qe=o(Tn,"OPTION",{"data-svelte-h":!0}),H(qe)!=="svelte-1xbdoff"&&(qe.textContent=en),yt=o(Tn,"OPTION",{"data-svelte-h":!0}),H(yt)!=="svelte-1o5m333"&&(yt.textContent=vl),Tn.forEach(f),Cn.forEach(f),pl=g(ve),it=o(ve,"LABEL",{class:!0,title:!0});var En=p(it);Zt=o(En,"SPAN",{class:!0,"data-svelte-h":!0}),H(Zt)!=="svelte-bjtusk"&&(Zt.textContent=Ue),ge=g(En),$=o(En,"SELECT",{class:!0});var In=p($);Mt=o(In,"OPTION",{"data-svelte-h":!0}),H(Mt)!=="svelte-x3trnu"&&(Mt.textContent=zl),rt=o(In,"OPTION",{"data-svelte-h":!0}),H(rt)!=="svelte-10tohf9"&&(rt.textContent=ml),ot=o(In,"OPTION",{"data-svelte-h":!0}),H(ot)!=="svelte-pzpi85"&&(ot.textContent=tn),In.forEach(f),En.forEach(f),ve.forEach(f),yl=g(Y),Qt=o(Y,"DIV",{class:!0});var Nn=p(Qt);We=o(Nn,"DIV",{class:!0});var Il=p(We);_l=o(Il,"DIV",{class:!0});var Qn=p(_l);zt(jt.$$.fragment,Qn),Qn.forEach(f),ct=g(Il),Ct=o(Il,"DIV",{class:!0});var $n=p(Ct);zt($t.$$.fragment,$n),$n.forEach(f),Ol=g(Il),Tt=o(Il,"DIV",{class:!0});var es=p(Tt);zt(nl.$$.fragment,es),es.forEach(f),Hl=g(Il),Et=o(Il,"DIV",{class:!0});var ts=p(Et);zt(sl.$$.fragment,ts),ts.forEach(f),Il.forEach(f),xl=g(Nn),zt(ut.$$.fragment,Nn),Nn.forEach(f),Gl=g(Y),el=o(Y,"FOOTER",{class:!0});var Pn=p(el);It=o(Pn,"SPAN",{});var ln=p(It);al=W(ln,"View: "),Al=W(ln,il),Cl=W(ln," - "),gl=W(ln,Tl),ln.forEach(f),ql=g(Pn),Wl=o(Pn,"SPAN",{"data-svelte-h":!0}),H(Wl)!=="svelte-luglpz"&&(Wl.textContent=Gn),Pn.forEach(f),Y.forEach(f),this.h()},h(){i(a,"class","open-btn svelte-1euarcl"),i(a,"title","Open audio file"),i(d,"class","play-btn svelte-1euarcl"),i(d,"title","Play/Pause (Space)"),ol(d,"playing",t[22]),i(v,"class","stop-btn svelte-1euarcl"),i(v,"title","Stop (Escape)"),i(y,"class","save-btn svelte-1euarcl"),i(y,"title","Save audio as WAV"),i(I,"class","filename svelte-1euarcl"),i(n,"class","toolbar-left svelte-1euarcl"),i(N,"class","time-display svelte-1euarcl"),i(C,"class","toolbar-center svelte-1euarcl"),i(pe,"class","sample-rate svelte-1euarcl"),i(Ce,"class","settings-btn svelte-1euarcl"),i(Ce,"title","Load configuration file"),i(me,"class","theme-btn svelte-1euarcl"),i(me,"title","Toggle theme"),i(J,"class","toolbar-right svelte-1euarcl"),i(l,"class","toolbar svelte-1euarcl"),i(ae,"type","checkbox"),i(ae,"class","svelte-1euarcl"),i(Ae,"class","toggle-label pitch svelte-1euarcl"),i(he,"class","overlay-toggle svelte-1euarcl"),i(he,"title","Fundamental frequency (F0) - the perceived pitch of voiced speech"),i(Be,"type","checkbox"),i(Be,"class","svelte-1euarcl"),i(D,"class","toggle-label formants svelte-1euarcl"),i(be,"class","overlay-toggle svelte-1euarcl"),i(be,"title","Formants (F1-F4) - resonant frequencies of the vocal tract that distinguish vowels"),i(ee,"type","checkbox"),i(ee,"class","svelte-1euarcl"),i(re,"class","toggle-label intensity svelte-1euarcl"),i(Q,"class","overlay-toggle svelte-1euarcl"),i(Q,"title","Intensity - sound pressure level in decibels (dB)"),i(z,"type","checkbox"),i(z,"class","svelte-1euarcl"),i(Me,"class","toggle-label hnr svelte-1euarcl"),i(A,"class","overlay-toggle svelte-1euarcl"),i(A,"title","Harmonics-to-Noise Ratio - measure of voice quality (higher = clearer voice)"),i(xe,"type","checkbox"),i(xe,"class","svelte-1euarcl"),i(Z,"class","toggle-label cog svelte-1euarcl"),i(et,"class","overlay-toggle svelte-1euarcl"),i(et,"title","Center of Gravity - spectral centroid, indicates brightness of sound"),i(ke,"type","checkbox"),i(ke,"class","svelte-1euarcl"),i(fe,"class","toggle-label tilt svelte-1euarcl"),i(oe,"class","overlay-toggle svelte-1euarcl"),i(oe,"title","Spectral Tilt - balance between low and high frequencies (dB difference 0-500 Hz vs 2000-4000 Hz)"),i(je,"type","checkbox"),i(je,"class","svelte-1euarcl"),i(St,"class","toggle-label a1p0 svelte-1euarcl"),i(Se,"class","overlay-toggle svelte-1euarcl"),i(Se,"title","A1-P0 Nasal Ratio - amplitude at F0 minus nasal pole (~250 Hz), indicates nasality"),i(pt,"class","controls-separator svelte-1euarcl"),i(tt,"type","checkbox"),i(tt,"class","svelte-1euarcl"),i(Bt,"class","toggle-label points svelte-1euarcl"),i(mt,"class","overlay-toggle svelte-1euarcl"),i(mt,"title","Data collection points - double-click to add, right-click to remove"),i(lt,"class","import-points-btn svelte-1euarcl"),i(lt,"title","Import data points from TSV"),i(gt,"class","controls-separator svelte-1euarcl"),i(Oe,"class","freq-label svelte-1euarcl"),bt.__value="female",Pt(bt,bt.__value),st.__value="male",Pt(st,st.__value),kt.__value="child",Pt(kt,kt.__value),i(nt,"class","svelte-1euarcl"),t[2]===void 0&&ls(()=>t[54].call(nt)),i(Vt,"class","freq-selector svelte-1euarcl"),i(Yt,"class","freq-label svelte-1euarcl"),wt.__value=5e3,Pt(wt,wt.__value),qe.__value=7500,Pt(qe,qe.__value),yt.__value=1e4,Pt(yt,yt.__value),i(Ge,"class","svelte-1euarcl"),t[16]===void 0&&ls(()=>t[55].call(Ge)),i(Xt,"class","freq-selector svelte-1euarcl"),i(Zt,"class","freq-label svelte-1euarcl"),Mt.__value="praatfan-local",Pt(Mt,Mt.__value),rt.__value="praatfan",Pt(rt,rt.__value),ot.__value="praatfan-gpl",Pt(ot,ot.__value),i($,"class","svelte-1euarcl"),i(it,"class","freq-selector svelte-1euarcl"),i(it,"title","Acoustic analysis backend"),i(q,"class","overlay-controls svelte-1euarcl"),i(_l,"class","display-panel waveform-panel svelte-1euarcl"),i(Ct,"class","display-panel spectrogram-panel svelte-1euarcl"),i(Tt,"class","time-axis-panel svelte-1euarcl"),i(Et,"class","display-panel annotation-panel svelte-1euarcl"),i(We,"class","displays svelte-1euarcl"),i(Qt,"class","main-content svelte-1euarcl"),i(el,"class","status-bar svelte-1euarcl"),i(e,"class","app-container svelte-1euarcl")},m(F,Y){x(F,e,Y),s(e,l),s(l,n),s(n,a),s(n,u),s(n,d),bl.m(d,null),s(n,h),s(n,v),s(n,m),tl.m(n,null),s(n,k),s(n,y),s(n,B),s(n,I),s(I,P),s(l,S),s(l,C),s(C,N),s(N,L),s(N,V),s(N,j),s(C,M),Xe&&Xe.m(C,null),s(l,O),s(l,J),Ye&&Ye.m(J,null),s(J,ye),s(J,pe),s(pe,He),s(pe,Le),s(J,Re),s(J,Ce),s(J,ue),s(J,me),kl.m(me,null),s(e,Ne),s(e,q),s(q,he),s(he,ae),ae.checked=t[8],s(he,Ie),s(he,Ae),s(q,we),s(q,be),s(be,Be),Be.checked=t[9],s(be,Qe),s(be,D),s(q,le),s(q,Q),s(Q,ee),ee.checked=t[10],s(Q,ce),s(Q,re),s(q,ie),s(q,A),s(A,z),z.checked=t[11],s(A,te),s(A,Me),s(q,at),s(q,et),s(et,xe),xe.checked=t[12],s(et,E),s(et,Z),s(q,X),s(q,oe),s(oe,ke),ke.checked=t[13],s(oe,Pe),s(oe,fe),s(q,ze),s(q,Se),s(Se,je),je.checked=t[14],s(Se,cl),s(Se,St),s(q,vt),s(q,pt),s(q,Rl),s(q,mt),s(mt,tt),tt.checked=t[15],s(mt,ul),s(mt,Bt),s(q,ll),s(q,lt),s(q,Pl),Je&&Je.m(q,null),s(q,_t),s(q,gt),s(q,Ul),s(q,Vt),s(Vt,Oe),s(Vt,qt),s(Vt,nt),s(nt,bt),s(nt,st),s(nt,kt),Kl(nt,t[2],!0),s(q,Kt),s(q,Xt),s(Xt,Yt),s(Xt,hl),s(Xt,Ge),s(Ge,wt),s(Ge,qe),s(Ge,yt),Kl(Ge,t[16],!0),s(q,pl),s(q,it),s(it,Zt),s(it,ge),s(it,$),s($,Mt),s($,rt),s($,ot),Kl($,t[21]),s(e,yl),s(e,Qt),s(Qt,We),s(We,_l),Ut(jt,_l,null),s(We,ct),s(We,Ct),Ut($t,Ct,null),s(We,Ol),s(We,Tt),Ut(nl,Tt,null),s(We,Hl),s(We,Et),Ut(sl,Et,null),s(Qt,xl),Ut(ut,Qt,null),s(e,Gl),s(e,el),s(el,It),s(It,al),s(It,Al),s(It,Cl),s(It,gl),s(el,ql),s(el,Wl),Lt=!0,Mn||(qn=[U(a,"click",t[35]),U(d,"click",Os),U(v,"click",zs),U(y,"click",t[34]),U(Ce,"click",t[37]),U(me,"click",t[29]),U(ae,"change",t[46]),U(Be,"change",t[47]),U(ee,"change",t[48]),U(z,"change",t[49]),U(xe,"change",t[50]),U(ke,"change",t[51]),U(je,"change",t[52]),U(tt,"change",t[53]),U(lt,"click",t[40]),U(nt,"change",t[54]),U(Ge,"change",t[55]),U($,"change",t[28])],Mn=!0)},p(F,Y){on!==(on=Wn(F))&&(bl.d(1),bl=on(F),bl&&(bl.c(),bl.m(d,null))),(!Lt||Y[0]&4194304)&&ol(d,"playing",F[22]),cn===(cn=Kn(F))&&tl?tl.p(F,Y):(tl.d(1),tl=cn(F),tl&&(tl.c(),tl.m(n,k))),(!Lt||Y[0]&262144)&&se(P,F[18]),(!Lt||Y[0]&8388608)&&T!==(T=rl(F[23])+"")&&se(L,T),(!Lt||Y[0]&524289)&&R!==(R=rl(F[0].length/F[19])+"")&&se(j,R),F[24]?Xe?Xe.p(F,Y):(Xe=Ms(F),Xe.c(),Xe.m(C,null)):Xe&&(Xe.d(1),Xe=null),F[25]?Ye?Ye.p(F,Y):(Ye=js(F),Ye.c(),Ye.m(J,ye)):Ye&&(Ye.d(1),Ye=null),(!Lt||Y[0]&524288)&&se(He,F[19]),un!==(un=Xn(F))&&(kl.d(1),kl=un(F),kl&&(kl.c(),kl.m(me,null))),Y[0]&256&&(ae.checked=F[8]),Y[0]&512&&(Be.checked=F[9]),Y[0]&1024&&(ee.checked=F[10]),Y[0]&2048&&(z.checked=F[11]),Y[0]&4096&&(xe.checked=F[12]),Y[0]&8192&&(ke.checked=F[13]),Y[0]&16384&&(je.checked=F[14]),Y[0]&32768&&(tt.checked=F[15]),F[20].length>0?Je?Je.p(F,Y):(Je=Ls(F),Je.c(),Je.m(q,_t)):Je&&(Je.d(1),Je=null),Y[0]&4&&Kl(nt,F[2]),Y[0]&65536&&Kl(Ge,F[16]),(!Lt||Y[0]&2097152)&&Kl($,F[21]);const Ke={};Y[0]&256&&(Ke.showPitch=F[8]),Y[0]&512&&(Ke.showFormants=F[9]),Y[0]&1024&&(Ke.showIntensity=F[10]),Y[0]&2048&&(Ke.showHNR=F[11]),Y[0]&4096&&(Ke.showCoG=F[12]),Y[0]&8192&&(Ke.showSpectralTilt=F[13]),Y[0]&16384&&(Ke.showA1P0=F[14]),Y[0]&32768&&(Ke.showDataPoints=F[15]),Y[0]&65536&&(Ke.maxFreq=F[16]),$t.$set(Ke),(!Lt||Y[0]&134217728)&&il!==(il=rl(F[27].start)+"")&&se(Al,il),(!Lt||Y[0]&134217728)&&Tl!==(Tl=rl(F[27].end)+"")&&se(gl,Tl)},i(F){Lt||(de(jt.$$.fragment,F),de($t.$$.fragment,F),de(nl.$$.fragment,F),de(sl.$$.fragment,F),de(ut.$$.fragment,F),Lt=!0)},o(F){Ee(jt.$$.fragment,F),Ee($t.$$.fragment,F),Ee(nl.$$.fragment,F),Ee(sl.$$.fragment,F),Ee(ut.$$.fragment,F),Lt=!1},d(F){F&&f(e),bl.d(),tl.d(),Xe&&Xe.d(),Ye&&Ye.d(),kl.d(),Je&&Je.d(),Ft(jt),Ft($t),Ft(nl),Ft(sl),Ft(ut),Mn=!1,Dt(qn)}}}function Ma(t){let e,l;return e=new ga({props:{onFile:t[30],onRecordedBlob:t[31]}}),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p:ht,i(n){l||(de(e.$$.fragment,n),l=!0)},o(n){Ee(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function ja(t){let e,l="Loading acoustic analysis engine...";return{c(){e=c("div"),e.textContent=l,this.h()},l(n){e=o(n,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-plgi30"&&(e.textContent=l),this.h()},h(){i(e,"class","loading svelte-1euarcl")},m(n,a){x(n,e,a)},p:ht,i:ht,o:ht,d(n){n&&f(e)}}}function La(t){let e,l;return{c(){e=xt("svg"),l=xt("path"),this.h()},l(n){e=Ht(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=p(e);l=Ht(a,"path",{d:!0}),p(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M8 5v14l11-7z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(n,a){x(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ra(t){let e,l,n;return{c(){e=xt("svg"),l=xt("rect"),n=xt("rect"),this.h()},l(a){e=Ht(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=p(e);l=Ht(r,"rect",{x:!0,y:!0,width:!0,height:!0}),p(l).forEach(f),n=Ht(r,"rect",{x:!0,y:!0,width:!0,height:!0}),p(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"x","6"),i(l,"y","4"),i(l,"width","4"),i(l,"height","16"),i(n,"x","14"),i(n,"y","4"),i(n,"width","4"),i(n,"height","16"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(a,r){x(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Fa(t){let e,l='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><circle cx="12" cy="12" r="6"></circle></svg>',n,a;return{c(){e=c("button"),e.innerHTML=l,this.h()},l(r){e=o(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),H(e)!=="svelte-d9ton6"&&(e.innerHTML=l),this.h()},h(){i(e,"class","record-btn svelte-1euarcl"),i(e,"title","Record from microphone")},m(r,u){x(r,e,u),n||(a=U(e,"click",t[32]),n=!0)},p:ht,d(r){r&&f(e),n=!1,a()}}}function Ua(t){let e,l,n,a,r,u=t[7].toFixed(1)+"",d,h,v,_;return{c(){e=c("button"),l=xt("svg"),n=xt("rect"),a=b(),r=c("span"),d=K(u),h=K("s"),this.h()},l(m){e=o(m,"BUTTON",{class:!0,title:!0});var k=p(e);l=Ht(k,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var y=p(l);n=Ht(y,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),p(n).forEach(f),y.forEach(f),a=g(k),r=o(k,"SPAN",{class:!0});var w=p(r);d=W(w,u),h=W(w,"s"),w.forEach(f),k.forEach(f),this.h()},h(){i(n,"x","6"),i(n,"y","6"),i(n,"width","12"),i(n,"height","12"),i(n,"rx","2"),i(l,"viewBox","0 0 24 24"),i(l,"fill","currentColor"),i(l,"width","16"),i(l,"height","16"),i(r,"class","recording-time svelte-1euarcl"),i(e,"class","record-btn recording svelte-1euarcl"),i(e,"title","Stop recording")},m(m,k){x(m,e,k),s(e,l),s(l,n),s(e,a),s(e,r),s(r,d),s(r,h),v||(_=U(e,"click",t[33]),v=!0)},p(m,k){k[0]&128&&u!==(u=m[7].toFixed(1)+"")&&se(d,u)},d(m){m&&f(e),v=!1,_()}}}function Ms(t){let e,l,n=rl(t[24].end-t[24].start)+"",a;return{c(){e=c("span"),l=K("Sel: "),a=K(n),this.h()},l(r){e=o(r,"SPAN",{class:!0});var u=p(e);l=W(u,"Sel: "),a=W(u,n),u.forEach(f),this.h()},h(){i(e,"class","selection-info svelte-1euarcl")},m(r,u){x(r,e,u),s(e,l),s(e,a)},p(r,u){u[0]&16777216&&n!==(n=rl(r[24].end-r[24].start)+"")&&se(a,n)},d(r){r&&f(e)}}}function js(t){let e,l,n,a;return{c(){e=c("span"),l=K("Analyzing... "),n=K(t[26]),a=K("%"),this.h()},l(r){e=o(r,"SPAN",{class:!0});var u=p(e);l=W(u,"Analyzing... "),n=W(u,t[26]),a=W(u,"%"),u.forEach(f),this.h()},h(){i(e,"class","analysis-progress svelte-1euarcl")},m(r,u){x(r,e,u),s(e,l),s(e,n),s(e,a)},p(r,u){u[0]&67108864&&se(n,r[26])},d(r){r&&f(e)}}}function za(t){let e,l,n;return{c(){e=xt("svg"),l=xt("circle"),n=xt("path"),this.h()},l(a){e=Ht(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=p(e);l=Ht(r,"circle",{cx:!0,cy:!0,r:!0}),p(l).forEach(f),n=Ht(r,"path",{d:!0}),p(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"cx","12"),i(l,"cy","12"),i(l,"r","5"),i(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(a,r){x(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Oa(t){let e,l;return{c(){e=xt("svg"),l=xt("path"),this.h()},l(n){e=Ht(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=p(e);l=Ht(a,"path",{d:!0}),p(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(n,a){x(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ls(t){let e,l,n=t[20].length+"",a,r,u,d;return{c(){e=c("button"),l=K("Export ("),a=K(n),r=K(")"),this.h()},l(h){e=o(h,"BUTTON",{class:!0,title:!0});var v=p(e);l=W(v,"Export ("),a=W(v,n),r=W(v,")"),v.forEach(f),this.h()},h(){i(e,"class","export-points-btn svelte-1euarcl"),i(e,"title","Export data points to TSV")},m(h,v){x(h,e,v),s(e,l),s(e,a),s(e,r),u||(d=U(e,"click",t[39]),u=!0)},p(h,v){v[0]&1048576&&n!==(n=h[20].length+"")&&se(a,n)},d(h){h&&f(e),u=!1,d()}}}function Ha(t){let e,l,n,a,r,u,d,h,v,_,m,k;const y=[ja,Ma,Va],w=[];function B(I,P){return I[1]?I[0]?2:1:0}return h=B(t),v=w[h]=y[h](t),{c(){e=c("input"),l=b(),n=c("input"),a=b(),r=c("input"),u=b(),d=c("main"),v.c(),this.h()},l(I){e=o(I,"INPUT",{type:!0,accept:!0,style:!0}),l=g(I),n=o(I,"INPUT",{type:!0,accept:!0,style:!0}),a=g(I),r=o(I,"INPUT",{type:!0,accept:!0,style:!0}),u=g(I),d=o(I,"MAIN",{class:!0});var P=p(d);v.l(P),P.forEach(f),this.h()},h(){i(e,"type","file"),i(e,"accept","audio/*"),Ve(e,"display","none"),i(n,"type","file"),i(n,"accept",".yaml,.yml"),Ve(n,"display","none"),i(r,"type","file"),i(r,"accept",".tsv,.txt"),Ve(r,"display","none"),i(d,"class","svelte-1euarcl")},m(I,P){x(I,e,P),t[43](e),x(I,l,P),x(I,n,P),t[44](n),x(I,a,P),x(I,r,P),t[45](r),x(I,u,P),x(I,d,P),w[h].m(d,null),_=!0,m||(k=[U(e,"change",t[36]),U(n,"change",t[38]),U(r,"change",t[41])],m=!0)},p(I,P){let S=h;h=B(I),h===S?w[h].p(I,P):(Sl(),Ee(w[S],1,1,()=>{w[S]=null}),Bl(),v=w[h],v?v.p(I,P):(v=w[h]=y[h](I),v.c()),de(v,1),v.m(d,null))},i(I){_||(de(v),_=!0)},o(I){Ee(v),_=!1},d(I){I&&(f(e),f(l),f(n),f(a),f(r),f(u),f(d)),t[43](null),t[44](null),t[45](null),w[h].d(),m=!1,Dt(k)}}}function rl(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toFixed(2).padStart(5,"0")}`}function xa(t,e,l){let n,a,r,u,d,h,v,_,m,k,y,w,B,I,P;Te(t,Sn,E=>l(18,n=E)),Te(t,Fn,E=>l(0,a=E)),Te(t,aa,E=>l(59,r=E)),Te(t,Un,E=>l(19,u=E)),Te(t,Bn,E=>l(60,d=E)),Te(t,os,E=>l(20,h=E)),Te(t,ia,E=>l(1,v=E)),Te(t,cs,E=>l(2,_=E)),Te(t,zn,E=>l(21,m=E)),Te(t,ra,E=>l(22,k=E)),Te(t,jl,E=>l(23,y=E)),Te(t,Yl,E=>l(24,w=E)),Te(t,oa,E=>l(25,B=E)),Te(t,ca,E=>l(26,I=E)),Te(t,An,E=>l(27,P=E));let S=!0,C,N,T=!1,L=null,V=[],R=0,j=null;Vn(()=>{const E=localStorage.getItem("ozen-backend");return(E==="praatfan-gpl"||E==="praatfan"||E==="praatfan-local")&&zn.set(E),Rn(m),ua(Bn,os),localStorage.getItem("ozen-theme")==="light"&&(l(3,S=!1),document.documentElement.classList.add("light")),window.addEventListener("keydown",pe),()=>window.removeEventListener("keydown",pe)}),xn(()=>{j&&clearInterval(j),L&&T&&L.stop()});async function M(E){const ne=E.target.value;zn.set(ne),localStorage.setItem("ozen-backend",ne);try{await Rn(ne),a&&(nn(),sn().catch(X=>console.error("Analysis failed:",X)))}catch(X){console.error("Failed to switch backend:",X)}}let O=_;function J(){l(3,S=!S),S?(document.documentElement.classList.remove("light"),localStorage.setItem("ozen-theme","dark")):(document.documentElement.classList.add("light"),localStorage.setItem("ozen-theme","light"))}async function ye(){if(h.length===0){console.log("No data points to copy");return}const E=is({showPitch:ue,showFormants:me,showIntensity:Ne,showHNR:q,showCoG:he,showSpectralTilt:ae,showA1P0:Ie});try{await navigator.clipboard.writeText(E),console.log(`Copied ${h.length} data points to clipboard`)}catch(Z){console.error("Failed to copy to clipboard:",Z)}}function pe(E){if(!(E.target instanceof HTMLInputElement||E.target instanceof HTMLTextAreaElement)){if(E.ctrlKey||E.metaKey)switch(E.key.toLowerCase()){case"z":E.preventDefault(),E.shiftKey?Hn():Us();return;case"y":E.preventDefault(),Hn();return;case"c":E.preventDefault(),ye();return}switch(E.code){case"Space":E.preventDefault(),Os();break;case"Escape":E.preventDefault(),zs(),Yl.set(null);break;case"Tab":E.preventDefault(),ea();break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":const Z=parseInt(E.code.slice(-1))-1;Z<d.length&&wl.set(Z);break}}}async function He(E){nn();const Z=await E.arrayBuffer(),X=await new AudioContext().decodeAudioData(Z),oe=new Float64Array(X.length),ke=X.getChannelData(0);for(let fe=0;fe<X.length;fe++)oe[fe]=ke[fe];Fn.set(oe),Un.set(X.sampleRate),Sn.set(E.name);const Pe=X.length/X.sampleRate;rs.set(Pe),An.set({start:0,end:Math.min(Pe,10)}),jl.set(0),Yl.set(null),sn().catch(fe=>console.error("Analysis failed:",fe))}async function Le(E){nn();const Z=await E.arrayBuffer(),X=await new AudioContext().decodeAudioData(Z),oe=new Float64Array(X.length),ke=X.getChannelData(0);for(let fe=0;fe<X.length;fe++)oe[fe]=ke[fe];Fn.set(oe),Un.set(X.sampleRate),Sn.set(`Recording ${new Date().toLocaleTimeString()}`);const Pe=X.length/X.sampleRate;rs.set(Pe),An.set({start:0,end:Math.min(Pe,10)}),jl.set(0),Yl.set(null),sn().catch(fe=>console.error("Analysis failed:",fe))}async function Re(){try{const E=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});V=[],L=new MediaRecorder(E,{mimeType:"audio/webm"}),L.ondataavailable=Z=>{Z.data.size>0&&V.push(Z.data)},L.onstop=async()=>{E.getTracks().forEach(ne=>ne.stop());const Z=new Blob(V,{type:"audio/webm"});await Le(Z)},L.start(100),l(6,T=!0),l(7,R=0),j=setInterval(()=>{l(7,R+=.1)},100)}catch(E){console.error("Failed to start recording:",E),alert("Could not access microphone. Please allow microphone access.")}}function Ce(){L&&T&&(L.stop(),l(6,T=!1),j&&(clearInterval(j),j=null))}async function De(){if(!a||!u)return;const E=a.length,Z=new ArrayBuffer(44+E*2),ne=new DataView(Z),X=(ze,Se)=>{for(let je=0;je<Se.length;je++)ne.setUint8(ze+je,Se.charCodeAt(je))};X(0,"RIFF"),ne.setUint32(4,36+E*2,!0),X(8,"WAVE"),X(12,"fmt "),ne.setUint32(16,16,!0),ne.setUint16(20,1,!0),ne.setUint16(22,1,!0),ne.setUint32(24,u,!0),ne.setUint32(28,u*2,!0),ne.setUint16(32,2,!0),ne.setUint16(34,16,!0),X(36,"data"),ne.setUint32(40,E*2,!0);let oe=44;for(let ze=0;ze<E;ze++){const Se=Math.max(-1,Math.min(1,a[ze]));ne.setInt16(oe,Se<0?Se*32768:Se*32767,!0),oe+=2}const ke=new Blob([Z],{type:"audio/wav"});let Pe="audio.wav";if(n&&(Pe=n.replace(/\.[^/.]+$/,"")+".wav"),"showSaveFilePicker"in window)try{const Se=await(await window.showSaveFilePicker({suggestedName:Pe,types:[{description:"WAV Audio",accept:{"audio/wav":[".wav"]}}]})).createWritable();await Se.write(ke),await Se.close();return}catch(ze){if(ze.name==="AbortError")return}const fe=URL.createObjectURL(ke),At=document.createElement("a");At.href=fe,At.download=Pe,At.click(),URL.revokeObjectURL(fe)}let ue=!0,me=!0,Ne=!1,q=!1,he=!1,ae=!1,Ie=!1,Ae=!0,Fe=5e3,we;function be(){we.click()}async function Be(E){var X;const Z=E.target,ne=(X=Z.files)==null?void 0:X[0];ne&&await He(ne),Z.value=""}function Qe(){C.click()}async function D(E){var X;const Z=E.target,ne=(X=Z.files)==null?void 0:X[0];if(ne){const oe=await ne.text(),ke=fa(oe);if(ke&&ke.backend!==r)try{await Rn(ke.backend),localStorage.setItem("ozen-backend",ke.backend),a&&(nn(),sn().catch(Pe=>console.error("Analysis failed:",Pe)))}catch(Pe){console.error("Failed to switch backend:",Pe)}}Z.value=""}async function G(){const E=is({showPitch:ue,showFormants:me,showIntensity:Ne,showHNR:q,showCoG:he,showSpectralTilt:ae,showA1P0:Ie});let Z="data_points.tsv";if(n&&(Z=n.replace(/\.[^/.]+$/,"")+"_points.tsv"),"showSaveFilePicker"in window)try{const Pe=await(await window.showSaveFilePicker({suggestedName:Z,types:[{description:"Tab-Separated Values",accept:{"text/tab-separated-values":[".tsv"]}}]})).createWritable();await Pe.write(E),await Pe.close();return}catch(ke){if(ke.name==="AbortError")return}const ne=new Blob([E],{type:"text/tab-separated-values"}),X=URL.createObjectURL(ne),oe=document.createElement("a");oe.href=X,oe.download=Z,oe.click(),URL.revokeObjectURL(X)}function le(){N.click()}async function Q(E){var X;const Z=E.target,ne=(X=Z.files)==null?void 0:X[0];if(ne){const oe=await ne.text();sa(oe)===-1&&console.error("Failed to import data points: invalid TSV format (need time and frequency columns)")}Z.value=""}function ee(E){Ml[E?"unshift":"push"](()=>{we=E,l(17,we)})}function ce(E){Ml[E?"unshift":"push"](()=>{C=E,l(4,C)})}function re(E){Ml[E?"unshift":"push"](()=>{N=E,l(5,N)})}function _e(){ue=this.checked,l(8,ue)}function ie(){me=this.checked,l(9,me)}function A(){Ne=this.checked,l(10,Ne)}function z(){q=this.checked,l(11,q)}function te(){he=this.checked,l(12,he)}function Me(){ae=this.checked,l(13,ae)}function $e(){Ie=this.checked,l(14,Ie)}function at(){Ae=this.checked,l(15,Ae)}function et(){_=ns(this),cs.set(_)}function xe(){Fe=ns(this),l(16,Fe)}return t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&2048&&_!==O&&(l(42,O=_),a&&v&&(nn(),sn().catch(E=>console.error("Analysis failed:",E))))},[a,v,_,S,C,N,T,R,ue,me,Ne,q,he,ae,Ie,Ae,Fe,we,n,u,h,m,k,y,w,B,I,P,M,J,He,Le,Re,Ce,De,be,Be,Qe,D,G,le,Q,O,ee,ce,re,_e,ie,A,z,te,Me,$e,at,et,xe]}class Xa extends Ql{constructor(e){super(),$l(this,e,xa,Ha,Zl,{},null,[-1,-1,-1])}}export{Xa as component};

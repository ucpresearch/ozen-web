import{r as jt,s as sn,n as yt,d as f,i as H,x as Tt,G as Zn,D as Gl,a as se,b as s,E as L,B as i,c as o,e as m,g,f as K,H as z,h as c,j as b,t as X,I as cl,_ as Gs,C as Be,k as Ne,$ as qs,w as On,L as St,a0 as Js,K as $l,M as cs,J as us,N as Ht,O as Gt}from"../chunks/DzR6qLkJ.js";import{a as pe,t as Ie,S as an,i as rn,g as zl,c as Ol,d as Ft,m as Ut,e as zt,b as Ot}from"../chunks/CbSE4UIZ.js";import{n as bl,o as Zs,q as Qs,u as pn,v as $s,x as Gn,e as ln,b as ql,y as fs,z as ea,t as tn,A as Ws,B as Jn,C as ta,D as la,E as ds,F as na,G as sa,H as aa,I as zn,f as Un,g as ia,i as qn,p as ra,l as Ks,J as Xs,W as oa,S as ca,T as ua,K as hs,c as hn,r as vn,a as Wn,s as Kn,d as vs,L as fa,M as da,N as ps,w as ha,h as va,j as pa,k as ma,O as _a}from"../chunks/5zrgFzXf.js";import{s as Xn,l as ga,a as ms}from"../chunks/BmAGY9Gp.js";function nn(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ba(t,e){t.d(1),e.delete(t.key)}function wa(t,e){Ie(t,1,1,()=>{e.delete(t.key)})}function Ys(t,e,l,n,a,r,u,d,h,v,k,w){let _=t.length,y=r.length,T=_;const B={};for(;T--;)B[t[T].key]=T;const E=[],N=new Map,S=new Map,F=[];for(T=y;T--;){const j=w(a,r,T),R=l(j);let A=u.get(R);A?F.push(()=>A.p(j,e)):(A=v(R,j),A.c()),N.set(R,E[T]=A),R in B&&S.set(R,Math.abs(T-B[R]))}const p=new Set,x=new Set;function P(j){pe(j,1),j.m(d,k),u.set(j.key,j),k=j.first,y--}for(;_&&y;){const j=E[y-1],R=t[_-1],A=j.key,M=R.key;j===R?(k=j.first,_--,y--):N.has(M)?!u.has(A)||p.has(A)?P(j):x.has(M)?_--:S.get(A)>S.get(M)?(x.add(A),P(j)):(p.add(M),_--):(h(R,u),_--)}for(;_--;){const j=t[_];N.has(j.key)||h(j,u)}for(;y;)P(E[y-1]);return jt(F),E}function ka(t){let e,l,n='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 15V3m0 0l-4 4m4-4l4 4"></path><path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17"></path></svg>',a,r,u="Drop an audio file here",d,h,v="or click to select",k,w,_,y="Supports WAV, FLAC, MP3, OGG",T,B,E,N,S=t[0]&&_s(t);return{c(){e=c("div"),l=c("div"),l.innerHTML=n,a=b(),r=c("p"),r.textContent=u,d=b(),h=c("p"),h.textContent=v,k=b(),S&&S.c(),w=b(),_=c("p"),_.textContent=y,T=b(),B=c("input"),this.h()},l(F){e=o(F,"DIV",{class:!0,role:!0,tabindex:!0});var p=m(e);l=o(p,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-hj89uc"&&(l.innerHTML=n),a=g(p),r=o(p,"P",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-nangy9"&&(r.textContent=u),d=g(p),h=o(p,"P",{class:!0,"data-svelte-h":!0}),z(h)!=="svelte-fp1l9p"&&(h.textContent=v),k=g(p),S&&S.l(p),w=g(p),_=o(p,"P",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-tb4emq"&&(_.textContent=y),T=g(p),B=o(p,"INPUT",{type:!0,accept:!0,class:!0}),p.forEach(f),this.h()},h(){i(l,"class","icon svelte-lmmgcl"),i(r,"class","primary svelte-lmmgcl"),i(h,"class","secondary svelte-lmmgcl"),i(_,"class","formats svelte-lmmgcl"),i(B,"type","file"),i(B,"accept","audio/*"),i(B,"class","svelte-lmmgcl"),i(e,"class","drop-zone svelte-lmmgcl"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"drag-over",t[1])},m(F,p){H(F,e,p),s(e,l),s(e,a),s(e,r),s(e,d),s(e,h),s(e,k),S&&S.m(e,null),s(e,w),s(e,_),s(e,T),s(e,B),t[13](B),E||(N=[L(B,"change",t[9]),L(e,"drop",t[5]),L(e,"dragover",t[6]),L(e,"dragleave",t[7]),L(e,"click",t[8]),L(e,"keydown",t[14])],E=!0)},p(F,p){F[0]?S?S.p(F,p):(S=_s(F),S.c(),S.m(e,w)):S&&(S.d(1),S=null),p&2&&cl(e,"drag-over",F[1])},d(F){F&&f(e),S&&S.d(),t[13](null),E=!1,jt(N)}}}function Ca(t){let e,l,n,a,r,u=t[4].toFixed(1)+"",d,h,v,k,w='<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop Recording</span>',_,y;return{c(){e=c("div"),l=c("div"),n=c("div"),a=b(),r=c("span"),d=X(u),h=X("s"),v=b(),k=c("button"),k.innerHTML=w,this.h()},l(T){e=o(T,"DIV",{class:!0});var B=m(e);l=o(B,"DIV",{class:!0});var E=m(l);n=o(E,"DIV",{class:!0}),m(n).forEach(f),a=g(E),r=o(E,"SPAN",{class:!0});var N=m(r);d=K(N,u),h=K(N,"s"),N.forEach(f),E.forEach(f),v=g(B),k=o(B,"BUTTON",{class:!0,"data-svelte-h":!0}),z(k)!=="svelte-135d7zb"&&(k.innerHTML=w),B.forEach(f),this.h()},h(){i(n,"class","recording-pulse svelte-lmmgcl"),i(r,"class","recording-time svelte-lmmgcl"),i(l,"class","recording-indicator svelte-lmmgcl"),i(k,"class","stop-record-btn svelte-lmmgcl"),i(e,"class","drop-zone recording svelte-lmmgcl")},m(T,B){H(T,e,B),s(e,l),s(l,n),s(l,a),s(l,r),s(r,d),s(r,h),s(e,v),s(e,k),_||(y=L(k,"click",t[11]),_=!0)},p(T,B){B&16&&u!==(u=T[4].toFixed(1)+"")&&se(d,u)},d(T){T&&f(e),_=!1,y()}}}function _s(t){let e,l,n="or",a,r,u='<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" class="svelte-lmmgcl"><circle cx="12" cy="12" r="8"></circle></svg> <span>Record from Microphone</span>',d,h;return{c(){e=c("div"),l=c("span"),l.textContent=n,a=b(),r=c("button"),r.innerHTML=u,this.h()},l(v){e=o(v,"DIV",{class:!0});var k=m(e);l=o(k,"SPAN",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1wtgm67"&&(l.textContent=n),a=g(k),r=o(k,"BUTTON",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-8eds6f"&&(r.innerHTML=u),k.forEach(f),this.h()},h(){i(l,"class","divider-text svelte-lmmgcl"),i(r,"class","record-btn svelte-lmmgcl"),i(e,"class","record-section svelte-lmmgcl")},m(v,k){H(v,e,k),s(e,l),s(e,a),s(e,r),d||(h=L(r,"click",Gs(t[10])),d=!0)},p:yt,d(v){v&&f(e),d=!1,h()}}}function Ta(t){let e;function l(r,u){return r[3]?Ca:ka}let n=l(t),a=n(t);return{c(){a.c(),e=Tt()},l(r){a.l(r),e=Tt()},m(r,u){a.m(r,u),H(r,e,u)},p(r,[u]){n===(n=l(r))&&a?a.p(r,u):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},i:yt,o:yt,d(r){r&&f(e),a.d(r)}}}function ya(t,e,l){let{onFile:n}=e,{onRecordedBlob:a=void 0}=e,r=!1,u,d=!1,h=null,v=null,k=[],w=0,_=null;Zn(()=>{_&&clearInterval(_),h&&d&&h.stop(),v&&(v.getTracks().forEach(P=>P.stop()),v=null)});function y(P){var R;P.preventDefault(),l(1,r=!1);const j=(R=P.dataTransfer)==null?void 0:R.files[0];j&&n(j)}function T(P){P.preventDefault(),l(1,r=!0)}function B(){l(1,r=!1)}function E(){u.click()}function N(P){var A;const R=(A=P.target.files)==null?void 0:A[0];R&&n(R)}async function S(){if(a)try{const P=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});v=P,k=[],h=new MediaRecorder(P,{mimeType:"audio/webm"}),h.ondataavailable=j=>{j.data.size>0&&k.push(j.data)},h.onstop=async()=>{P.getTracks().forEach(R=>R.stop()),v=null;const j=new Blob(k,{type:"audio/webm"});a==null||a(j)},h.start(100),l(3,d=!0),l(4,w=0),_=setInterval(()=>{l(4,w+=.1)},100)}catch(P){console.error("Failed to start recording:",P),alert("Could not access microphone. Please allow microphone access.")}}function F(){h&&d&&(h.stop(),l(3,d=!1),_&&(clearInterval(_),_=null))}function p(P){Gl[P?"unshift":"push"](()=>{u=P,l(2,u)})}const x=P=>P.key==="Enter"&&E();return t.$$set=P=>{"onFile"in P&&l(12,n=P.onFile),"onRecordedBlob"in P&&l(0,a=P.onRecordedBlob)},[a,r,u,d,w,y,T,B,E,N,S,F,n,p,x]}class Ea extends an{constructor(e){super(),rn(this,e,ya,Ta,sn,{onFile:12,onRecordedBlob:0})}}function gs(t,e,l){const n=t.slice();n[48]=e[l];const a=Math.max(Ct,n[17](n[48].start));n[49]=a;const r=Math.min(n[9],n[17](n[48].end));n[50]=r;const u=n[50]-n[49];n[51]=u;const d=n[49]-Ct;return n[52]=d,n}function Yn(t){const e=t.slice(),l=e[48].end-e[48].start;e[55]=l;const n=e[55]>=1?e[55].toFixed(2)+"s":(e[55]*1e3).toFixed(0)+"ms";return e[56]=n,e}function bs(t){let e,l,n,a,r;function u(y,T){return y[4]===y[48].index?Ia:Na}let d=u(t),h=d(t);function v(...y){return t[34](t[48],...y)}function k(...y){return t[35](t[48],...y)}function w(...y){return t[36](t[48],...y)}let _=t[48].index>0&&ks(t);return{c(){e=c("div"),h.c(),l=b(),_&&_.c(),n=Tt(),this.h()},l(y){e=o(y,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var T=m(e);h.l(T),T.forEach(f),l=g(y),_&&_.l(y),n=Tt(),this.h()},h(){i(e,"class","interval svelte-1h3ij0x"),Be(e,"left",t[52]+"px"),Be(e,"width",t[51]+"px"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]&&t[10]===t[48].index)},m(y,T){H(y,e,T),h.m(e,null),H(y,l,T),_&&_.m(y,T),H(y,n,T),a||(r=[L(e,"click",v),L(e,"dblclick",k),L(e,"keydown",w)],a=!0)},p(y,T){t=y,d===(d=u(t))&&h?h.p(t,T):(h.d(1),h=d(t),h&&(h.c(),h.m(e,null))),T[0]&256&&Be(e,"left",t[52]+"px"),T[0]&768&&Be(e,"width",t[51]+"px"),T[0]&1284&&cl(e,"selected",t[2]&&t[10]===t[48].index),t[48].index>0?_?_.p(t,T):(_=ks(t),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null)},d(y){y&&(f(e),f(l),f(n)),h.d(),_&&_.d(y),a=!1,jt(r)}}}function Na(t){let e,l=(t[48].text||" ")+"",n,a,r,u,d;function h(){return t[32](t[48])}function v(...w){return t[33](t[48],...w)}let k=t[51]>30&&ws(t);return{c(){e=c("span"),n=X(l),a=b(),k&&k.c(),r=Tt(),this.h()},l(w){e=o(w,"SPAN",{class:!0,role:!0,tabindex:!0});var _=m(e);n=K(_,l),_.forEach(f),a=g(w),k&&k.l(w),r=Tt(),this.h()},h(){i(e,"class","interval-text svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0")},m(w,_){H(w,e,_),s(e,n),H(w,a,_),k&&k.m(w,_),H(w,r,_),u||(d=[L(e,"click",Gs(h)),L(e,"keydown",v)],u=!0)},p(w,_){t=w,_[0]&256&&l!==(l=(t[48].text||" ")+"")&&se(n,l),t[51]>30?k?k.p(t,_):(k=ws(t),k.c(),k.m(r.parentNode,r)):k&&(k.d(1),k=null)},d(w){w&&(f(e),f(a),f(r)),k&&k.d(w),u=!1,jt(d)}}}function Ia(t){let e,l,n;return{c(){e=c("input"),this.h()},l(a){e=o(a,"INPUT",{type:!0,class:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","interval-input svelte-1h3ij0x"),e.autofocus=!0},m(a,r){H(a,e,r),St(e,t[5]),e.focus(),l||(n=[L(e,"input",t[31]),L(e,"blur",t[26]),L(e,"keydown",t[27])],l=!0)},p(a,r){r[0]&32&&e.value!==a[5]&&St(e,a[5])},d(a){a&&f(e),l=!1,jt(n)}}}function ws(t){let e,l=t[56]+"",n;return{c(){e=c("span"),n=X(l),this.h()},l(a){e=o(a,"SPAN",{class:!0});var r=m(e);n=K(r,l),r.forEach(f),this.h()},h(){i(e,"class","interval-duration svelte-1h3ij0x")},m(a,r){H(a,e,r),s(e,n)},p(a,r){r[0]&256&&l!==(l=a[56]+"")&&se(n,l)},d(a){a&&f(e)}}}function ks(t){let e,l,n,a;function r(...h){return t[37](t[48],...h)}function u(...h){return t[38](t[48],...h)}function d(...h){return t[39](t[48],...h)}return{c(){e=c("div"),this.h()},l(h){e=o(h,"DIV",{class:!0,style:!0,title:!0,role:!0,tabindex:!0,"aria-valuenow":!0}),m(e).forEach(f),this.h()},h(){i(e,"class","boundary svelte-1h3ij0x"),Be(e,"left",t[52]+"px"),i(e,"title","Drag to move, right-click to remove"),i(e,"role","slider"),i(e,"tabindex","0"),i(e,"aria-valuenow",l=t[48].start)},m(h,v){H(h,e,v),n||(a=[L(e,"mousedown",r),L(e,"contextmenu",u),L(e,"keydown",d)],n=!0)},p(h,v){t=h,v[0]&256&&Be(e,"left",t[52]+"px"),v[0]&256&&l!==(l=t[48].start)&&i(e,"aria-valuenow",l)},d(h){h&&f(e),n=!1,jt(a)}}}function Cs(t,e){let l,n,a=e[51]>2&&bs(Yn(e));return{key:t,first:null,c(){l=Tt(),a&&a.c(),n=Tt(),this.h()},l(r){l=Tt(),a&&a.l(r),n=Tt(),this.h()},h(){this.first=l},m(r,u){H(r,l,u),a&&a.m(r,u),H(r,n,u)},p(r,u){e=r,e[51]>2?a?a.p(Yn(e),u):(a=bs(Yn(e)),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(r){r&&(f(l),f(n)),a&&a.d(r)}}}function Ts(t){let e;return{c(){e=c("div"),this.h()},l(l){e=o(l,"DIV",{class:!0,style:!0}),m(e).forEach(f),this.h()},h(){i(e,"class","hover-cursor svelte-1h3ij0x"),Be(e,"left",t[17](t[11])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&2048&&Be(e,"left",l[17](l[11])+"px")},d(l){l&&f(e)}}}function ys(t){let e;return{c(){e=c("div"),this.h()},l(l){e=o(l,"DIV",{class:!0,style:!0}),m(e).forEach(f),this.h()},h(){i(e,"class","cursor svelte-1h3ij0x"),Be(e,"left",t[17](t[12])+"px")},m(l,n){H(l,e,n)},p(l,n){n[0]&4096&&Be(e,"left",l[17](l[12])+"px")},d(l){l&&f(e)}}}function Es(t){let e,l,n,a,r="Remove boundary",u,d;return{c(){e=c("div"),l=b(),n=c("div"),a=c("button"),a.textContent=r,this.h()},l(h){e=o(h,"DIV",{class:!0}),m(e).forEach(f),l=g(h),n=o(h,"DIV",{class:!0,style:!0});var v=m(n);a=o(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-ypaiql"&&(a.textContent=r),v.forEach(f),this.h()},h(){i(e,"class","context-menu-backdrop svelte-1h3ij0x"),i(a,"class","context-menu-item svelte-1h3ij0x"),i(n,"class","context-menu svelte-1h3ij0x"),Be(n,"left",t[7].x+"px"),Be(n,"top",t[7].y+"px")},m(h,v){H(h,e,v),H(h,l,v),H(h,n,v),s(n,a),u||(d=[L(e,"click",t[15]),L(a,"click",t[16])],u=!0)},p(h,v){v[0]&128&&Be(n,"left",h[7].x+"px"),v[0]&128&&Be(n,"top",h[7].y+"px")},d(h){h&&(f(e),f(l),f(n)),u=!1,jt(d)}}}function Da(t){let e,l,n,a,r,u,d=t[0].name+"",h,v,k,w=[],_=new Map,y,T=t[11]!==null&&t[17](t[11])>=Ct&&t[17](t[11])<=t[9],B,E=t[17](t[12])>=Ct&&t[17](t[12])<=t[9],N,S,F,p,x=nn(t[8]);const P=M=>M[48].index;for(let M=0;M<x.length;M+=1){let O=gs(t,x,M),Z=P(O);_.set(Z,w[M]=Cs(Z,O))}let j=T&&Ts(t),R=E&&ys(t),A=t[7]&&Es(t);return{c(){e=c("div"),l=c("div"),n=b(),a=c("div"),r=b(),u=c("div"),h=X(d),v=b(),k=c("div");for(let M=0;M<w.length;M+=1)w[M].c();y=b(),j&&j.c(),B=b(),R&&R.c(),N=b(),A&&A.c(),S=Tt(),this.h()},l(M){e=o(M,"DIV",{class:!0,role:!0,tabindex:!0});var O=m(e);l=o(O,"DIV",{class:!0,style:!0}),m(l).forEach(f),n=g(O),a=o(O,"DIV",{class:!0,style:!0}),m(a).forEach(f),r=g(O),u=o(O,"DIV",{class:!0});var Z=m(u);h=K(Z,d),Z.forEach(f),v=g(O),k=o(O,"DIV",{class:!0,style:!0});var ge=m(k);for(let be=0;be<w.length;be+=1)w[be].l(ge);ge.forEach(f),y=g(O),j&&j.l(O),B=g(O),R&&R.l(O),O.forEach(f),N=g(M),A&&A.l(M),S=Tt(),this.h()},h(){i(l,"class","margin-area left svelte-1h3ij0x"),Be(l,"width",Ct+"px"),i(a,"class","margin-area right svelte-1h3ij0x"),Be(a,"width",Hl+"px"),i(u,"class","tier-label svelte-1h3ij0x"),i(k,"class","intervals svelte-1h3ij0x"),Be(k,"left",Ct+"px"),Be(k,"right",Hl+"px"),i(e,"class","tier-container svelte-1h3ij0x"),i(e,"role","button"),i(e,"tabindex","0"),cl(e,"selected",t[2]),cl(e,"dragging",t[6])},m(M,O){H(M,e,O),s(e,l),s(e,n),s(e,a),s(e,r),s(e,u),s(u,h),s(e,v),s(e,k);for(let Z=0;Z<w.length;Z+=1)w[Z]&&w[Z].m(k,null);s(e,y),j&&j.m(e,null),s(e,B),R&&R.m(e,null),t[40](e),H(M,N,O),A&&A.m(M,O),H(M,S,O),F||(p=[L(window,"keydown",t[30]),L(window,"mouseup",t[20]),L(e,"click",t[18]),L(e,"dblclick",t[24]),L(e,"mousemove",t[19]),L(e,"mouseup",t[20]),L(e,"mouseleave",t[21]),L(e,"keydown",t[41])],F=!0)},p(M,O){O[0]&1&&d!==(d=M[0].name+"")&&se(h,d),O[0]&247621430&&(x=nn(M[8]),w=Ys(w,O,P,1,M,x,_,k,ba,Cs,null,gs)),O[0]&2560&&(T=M[11]!==null&&M[17](M[11])>=Ct&&M[17](M[11])<=M[9]),T?j?j.p(M,O):(j=Ts(M),j.c(),j.m(e,B)):j&&(j.d(1),j=null),O[0]&4608&&(E=M[17](M[12])>=Ct&&M[17](M[12])<=M[9]),E?R?R.p(M,O):(R=ys(M),R.c(),R.m(e,null)):R&&(R.d(1),R=null),O[0]&4&&cl(e,"selected",M[2]),O[0]&64&&cl(e,"dragging",M[6]),M[7]?A?A.p(M,O):(A=Es(M),A.c(),A.m(S.parentNode,S)):A&&(A.d(1),A=null)},i:yt,o:yt,d(M){M&&(f(e),f(N),f(S));for(let O=0;O<w.length;O+=1)w[O].d();j&&j.d(),R&&R.d(),t[40](null),A&&A.d(M),F=!1,jt(p)}}}const Ct=45,Hl=45;function Pa(t,e,l){let n,a,r,u,d,h,v;Ne(t,tn,I=>l(29,u=I)),Ne(t,Gn,I=>l(10,d=I)),Ne(t,pn,I=>l(11,h=I)),Ne(t,ql,I=>l(12,v=I));let{tier:k}=e,{index:w}=e,{isSelected:_=!1}=e;qs();let y,T=0,B,E=null,N="",S=!1,F=null,p=null;function x(I,q){I.preventDefault(),I.stopPropagation(),bl.set(w),Zs(),l(6,S=!0),F=q}function P(I,q){I.preventDefault(),I.stopPropagation(),l(7,p={x:I.clientX,y:I.clientY,intervalIndex:q})}function j(){l(7,p=null)}function R(){p&&(bl.set(w),Qs(p.intervalIndex),l(7,p=null))}On(()=>{B=new ResizeObserver(I=>{const q=I[0].contentRect;l(28,T=q.width),q.height}),B.observe(y)}),Zn(()=>{B==null||B.disconnect()});function A(I){const{start:q,end:ae}=u;return Ct+(I-q)/(ae-q)*n}function M(I){const{start:q,end:ae}=u;return q+(I-Ct)/n*(ae-q)}function O(){bl.set(w)}function Z(I){const q=y.getBoundingClientRect(),ae=I.clientX-q.left;if((ae<Ct||ae>T-Hl)&&(pn.set(null),!S))return;const $=M(ae);pn.set($),S&&F!==null&&$s(F,$)}function ge(){S&&(l(6,S=!1),F=null)}function be(){pn.set(null),S&&(l(6,S=!1),F=null)}function We(I,q){I.stopPropagation(),bl.set(w),Gn.set(q);const ae=k.intervals[q];ae&&(ln.set({start:ae.start,end:ae.end}),ql.set(ae.start))}function Ue(I,q){I.stopPropagation();const ae=y.getBoundingClientRect(),$=I.clientX-ae.left;if($<Ct||$>T-Hl)return;const te=M($);bl.set(w),fs(te)}function Re(I){const q=y.getBoundingClientRect(),ae=I.clientX-q.left;if(ae<Ct||ae>T-Hl)return;const $=M(ae);bl.set(w),fs($)}function Te(I){l(4,E=I),l(5,N=k.intervals[I].text)}function je(){E!==null&&(ea(w,E,N),l(4,E=null),l(5,N=""))}function ye(I){I.key==="Enter"?je():I.key==="Escape"&&(l(4,E=null),l(5,N=""))}const De=I=>I.key==="Escape"&&p&&j();function xe(){N=this.value,l(5,N)}const W=I=>{ln.set({start:I.start,end:I.end}),ql.set(I.start),Te(I.index)},me=(I,q)=>q.key==="Enter"&&Te(I.index),re=(I,q)=>We(q,I.index),Pe=(I,q)=>Ue(q,I.index),Ae=(I,q)=>{q.key==="Enter"&&(bl.set(w),Gn.set(I.index))},Me=(I,q)=>x(q,I.index),ke=(I,q)=>P(q,I.index),_e=(I,q)=>q.key==="Enter"&&Te(I.index);function Se(I){Gl[I?"unshift":"push"](()=>{y=I,l(3,y)})}const He=I=>I.key==="Enter"&&O();return t.$$set=I=>{"tier"in I&&l(0,k=I.tier),"index"in I&&l(1,w=I.index),"isSelected"in I&&l(2,_=I.isSelected)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&(n=Math.max(0,T-Ct-Hl)),t.$$.dirty[0]&268435456&&l(9,a=T-Hl),t.$$.dirty[0]&536870913&&l(8,r=(()=>{const{start:I,end:q}=u;return k.intervals.map((ae,$)=>({...ae,index:$})).filter(ae=>ae.end>I&&ae.start<q)})())},[k,w,_,y,E,N,S,p,r,a,d,h,v,x,P,j,R,A,O,Z,ge,be,We,Ue,Re,Te,je,ye,T,u,De,xe,W,me,re,Pe,Ae,Me,ke,_e,Se,He]}class Aa extends an{constructor(e){super(),rn(this,e,Pa,Da,sn,{tier:0,index:1,isSelected:2},null,[-1,-1])}}function Ns(t){let e,l;return{c(){e=c("div"),l=X(t[0]),this.h()},l(n){e=o(n,"DIV",{class:!0});var a=m(e);l=K(a,t[0]),a.forEach(f),this.h()},h(){i(e,"class","modal-header svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&1&&se(l,n[0])},d(n){n&&f(e)}}}function Is(t){let e,l;return{c(){e=c("p"),l=X(t[2]),this.h()},l(n){e=o(n,"P",{class:!0});var a=m(e);l=K(a,t[2]),a.forEach(f),this.h()},h(){i(e,"class","modal-message svelte-1vzci29")},m(n,a){H(n,e,a),s(e,l)},p(n,a){a&4&&se(l,n[2])},d(n){n&&f(e)}}}function Ds(t){let e,l,n;return{c(){e=c("input"),this.h()},l(a){e=o(a,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","modal-input svelte-1vzci29"),i(e,"placeholder",t[3])},m(a,r){H(a,e,r),t[14](e),St(e,t[6]),l||(n=[L(e,"input",t[15]),L(e,"keydown",t[11])],l=!0)},p(a,r){r&8&&i(e,"placeholder",a[3]),r&64&&e.value!==a[6]&&St(e,a[6])},d(a){a&&f(e),t[14](null),l=!1,jt(n)}}}function Ps(t){let e,l,n,a;return{c(){e=c("button"),l=X(t[5]),this.h()},l(r){e=o(r,"BUTTON",{class:!0});var u=m(e);l=K(u,t[5]),u.forEach(f),this.h()},h(){i(e,"class","modal-btn cancel svelte-1vzci29")},m(r,u){H(r,e,u),s(e,l),n||(a=L(e,"click",t[9]),n=!0)},p(r,u){u&32&&se(l,r[5])},d(r){r&&f(e),n=!1,a()}}}function xa(t){let e,l,n,a,r,u,d,h,v,k,w,_,y=t[0]&&Ns(t),T=t[2]&&Is(t),B=t[1]==="prompt"&&Ds(t),E=t[1]!=="alert"&&Ps(t);return{c(){e=c("div"),l=c("div"),y&&y.c(),n=b(),a=c("div"),T&&T.c(),r=b(),B&&B.c(),u=b(),d=c("div"),E&&E.c(),h=b(),v=c("button"),k=X(t[4]),this.h()},l(N){e=o(N,"DIV",{class:!0,role:!0,"aria-modal":!0});var S=m(e);l=o(S,"DIV",{class:!0});var F=m(l);y&&y.l(F),n=g(F),a=o(F,"DIV",{class:!0});var p=m(a);T&&T.l(p),r=g(p),B&&B.l(p),p.forEach(f),u=g(F),d=o(F,"DIV",{class:!0});var x=m(d);E&&E.l(x),h=g(x),v=o(x,"BUTTON",{class:!0});var P=m(v);k=K(P,t[4]),P.forEach(f),x.forEach(f),F.forEach(f),S.forEach(f),this.h()},h(){i(a,"class","modal-body svelte-1vzci29"),i(v,"class","modal-btn confirm svelte-1vzci29"),i(d,"class","modal-footer svelte-1vzci29"),i(l,"class","modal svelte-1vzci29"),i(e,"class","modal-backdrop svelte-1vzci29"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(N,S){H(N,e,S),s(e,l),y&&y.m(l,null),s(l,n),s(l,a),T&&T.m(a,null),s(a,r),B&&B.m(a,null),s(l,u),s(l,d),E&&E.m(d,null),s(d,h),s(d,v),s(v,k),w||(_=[L(window,"keydown",t[10]),L(v,"click",t[8]),L(e,"click",t[12])],w=!0)},p(N,[S]){N[0]?y?y.p(N,S):(y=Ns(N),y.c(),y.m(l,n)):y&&(y.d(1),y=null),N[2]?T?T.p(N,S):(T=Is(N),T.c(),T.m(a,r)):T&&(T.d(1),T=null),N[1]==="prompt"?B?B.p(N,S):(B=Ds(N),B.c(),B.m(a,null)):B&&(B.d(1),B=null),N[1]!=="alert"?E?E.p(N,S):(E=Ps(N),E.c(),E.m(d,h)):E&&(E.d(1),E=null),S&16&&se(k,N[4])},i:yt,o:yt,d(N){N&&f(e),y&&y.d(),T&&T.d(),B&&B.d(),E&&E.d(),w=!1,jt(_)}}}function Sa(t,e,l){let{title:n=""}=e,{type:a="alert"}=e,{message:r=""}=e,{placeholder:u=""}=e,{initialValue:d=""}=e,{confirmText:h="OK"}=e,{cancelText:v="Cancel"}=e;const k=qs();let w=d,_;On(()=>{a==="prompt"&&_&&(_.focus(),_.select())});function y(){a==="prompt"?k("confirm",w):k("confirm")}function T(){k("cancel")}function B(p){p.key==="Escape"?T():p.key==="Enter"&&a!=="prompt"&&y()}function E(p){p.key==="Enter"?y():p.key==="Escape"&&T()}function N(p){p.target===p.currentTarget&&T()}function S(p){Gl[p?"unshift":"push"](()=>{_=p,l(7,_)})}function F(){w=this.value,l(6,w)}return t.$$set=p=>{"title"in p&&l(0,n=p.title),"type"in p&&l(1,a=p.type),"message"in p&&l(2,r=p.message),"placeholder"in p&&l(3,u=p.placeholder),"initialValue"in p&&l(13,d=p.initialValue),"confirmText"in p&&l(4,h=p.confirmText),"cancelText"in p&&l(5,v=p.cancelText)},[n,a,r,u,h,v,w,_,y,T,B,E,N,d,S,F]}class mn extends an{constructor(e){super(),rn(this,e,Sa,xa,sn,{title:0,type:1,message:2,placeholder:3,initialValue:13,confirmText:4,cancelText:5})}}function As(t,e,l){const n=t.slice();return n[18]=e[l],n[20]=l,n}function xs(t,e){let l,n,a;return n=new Aa({props:{tier:e[18],index:e[20],isSelected:e[20]===e[4]}}),{key:t,first:null,c(){l=c("div"),Ot(n.$$.fragment),this.h()},l(r){l=o(r,"DIV",{class:!0});var u=m(l);zt(n.$$.fragment,u),u.forEach(f),this.h()},h(){i(l,"class","tier-row svelte-13sadlc"),this.first=l},m(r,u){H(r,l,u),Ut(n,l,null),a=!0},p(r,u){e=r;const d={};u&32&&(d.tier=e[18]),u&32&&(d.index=e[20]),u&48&&(d.isSelected=e[20]===e[4]),n.$set(d)},i(r){a||(pe(n.$$.fragment,r),a=!0)},o(r){Ie(n.$$.fragment,r),a=!1},d(r){r&&f(l),Ft(n)}}}function Ss(t){let e,l='No annotation tiers. Click "+ Tier" to add one, or import a TextGrid.';return{c(){e=c("div"),e.textContent=l,this.h()},l(n){e=o(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-11870wl"&&(e.textContent=l),this.h()},h(){i(e,"class","empty-message svelte-13sadlc")},m(n,a){H(n,e,a)},d(n){n&&f(e)}}}function js(t){let e,l;return e=new mn({props:{title:"Add Tier",type:"prompt",message:"Enter a name for the new tier:",placeholder:"Tier name",initialValue:`Tier ${t[5].length+1}`,confirmText:"Add"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&32&&(r.initialValue=`Tier ${n[5].length+1}`),e.$set(r)},i(n){l||(pe(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Bs(t){var n;let e,l;return e=new mn({props:{title:"Rename Tier",type:"prompt",message:"Enter a new name for the tier:",placeholder:"Tier name",initialValue:((n=t[5][t[4]])==null?void 0:n.name)||"",confirmText:"Rename"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const u={};r&48&&(u.initialValue=((d=a[5][a[4]])==null?void 0:d.name)||""),e.$set(u)},i(a){l||(pe(e.$$.fragment,a),l=!0)},o(a){Ie(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Ms(t){var n;let e,l;return e=new mn({props:{title:"Remove Tier",type:"confirm",message:`Are you sure you want to remove tier "${(n=t[5][t[4]])==null?void 0:n.name}"?`,confirmText:"Remove"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(a){zt(e.$$.fragment,a)},m(a,r){Ut(e,a,r),l=!0},p(a,r){var d;const u={};r&48&&(u.message=`Are you sure you want to remove tier "${(d=a[5][a[4]])==null?void 0:d.name}"?`),e.$set(u)},i(a){l||(pe(e.$$.fragment,a),l=!0)},o(a){Ie(e.$$.fragment,a),l=!1},d(a){Ft(e,a)}}}function Vs(t){let e,l;return e=new mn({props:{title:"Notice",type:"alert",message:t[2]}}),e.$on("confirm",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&4&&(r.message=n[2]),e.$set(r)},i(n){l||(pe(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Ls(t){let e,l;return e=new mn({props:{title:"Export TextGrid",type:"prompt",message:"Enter a filename for the TextGrid:",placeholder:"filename.TextGrid",initialValue:t[3],confirmText:"Export"}}),e.$on("confirm",t[12]),e.$on("cancel",t[13]),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p(n,a){const r={};a&8&&(r.initialValue=n[3]),e.$set(r)},i(n){l||(pe(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function ja(t){let e,l,n,a="Import",r,u,d="Export",h,v,k,w,_="+ Tier",y,T,B="Rename",E,N,S="- Tier",F,p,x,P,j="Undo",R,A,M="Redo",O,Z,ge=t[5].length+"",be,We,Ue=t[5].length!==1?"s":"",Re,Te,je,ye=[],De=new Map,xe,W,me,re,Pe,Ae,Me,ke,_e,Se,He,I,q=nn(t[5]);const ae=D=>D[20];for(let D=0;D<q.length;D+=1){let U=As(t,q,D),le=ae(U);De.set(le,ye[D]=xs(le,U))}let $=t[5].length===0&&Ss(),te=t[1]==="addTier"&&js(t),fe=t[1]==="renameTier"&&Bs(t),ce=t[1]==="removeTier"&&Ms(t),we=t[1]==="alert"&&Vs(t),oe=t[1]==="exportTextGrid"&&Ls(t);return{c(){e=c("div"),l=c("div"),n=c("button"),n.textContent=a,r=b(),u=c("button"),u.textContent=d,h=b(),v=c("span"),k=b(),w=c("button"),w.textContent=_,y=b(),T=c("button"),T.textContent=B,E=b(),N=c("button"),N.textContent=S,F=b(),p=c("span"),x=b(),P=c("button"),P.textContent=j,R=b(),A=c("button"),A.textContent=M,O=b(),Z=c("span"),be=X(ge),We=X(" tier"),Re=X(Ue),Te=b(),je=c("div");for(let D=0;D<ye.length;D+=1)ye[D].c();xe=b(),$&&$.c(),W=b(),me=c("input"),re=b(),te&&te.c(),Pe=b(),fe&&fe.c(),Ae=b(),ce&&ce.c(),Me=b(),we&&we.c(),ke=b(),oe&&oe.c(),_e=Tt(),this.h()},l(D){e=o(D,"DIV",{class:!0});var U=m(e);l=o(U,"DIV",{class:!0});var le=m(l);n=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1yaizdz"&&(n.textContent=a),r=g(le),u=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(u)!=="svelte-1aay3nq"&&(u.textContent=d),h=g(le),v=o(le,"SPAN",{class:!0}),m(v).forEach(f),k=g(le),w=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(w)!=="svelte-269lo2"&&(w.textContent=_),y=g(le),T=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(T)!=="svelte-6whcxg"&&(T.textContent=B),E=g(le),N=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(N)!=="svelte-1kr0wch"&&(N.textContent=S),F=g(le),p=o(le,"SPAN",{class:!0}),m(p).forEach(f),x=g(le),P=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(P)!=="svelte-wb3yww"&&(P.textContent=j),R=g(le),A=o(le,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),z(A)!=="svelte-2mf54l"&&(A.textContent=M),O=g(le),Z=o(le,"SPAN",{class:!0});var Ve=m(Z);be=K(Ve,ge),We=K(Ve," tier"),Re=K(Ve,Ue),Ve.forEach(f),le.forEach(f),Te=g(U),je=o(U,"DIV",{class:!0});var it=m(je);for(let _t=0;_t<ye.length;_t+=1)ye[_t].l(it);xe=g(it),$&&$.l(it),it.forEach(f),W=g(U),me=o(U,"INPUT",{type:!0,accept:!0,style:!0}),U.forEach(f),re=g(D),te&&te.l(D),Pe=g(D),fe&&fe.l(D),Ae=g(D),ce&&ce.l(D),Me=g(D),we&&we.l(D),ke=g(D),oe&&oe.l(D),_e=Tt(),this.h()},h(){i(n,"title","Import TextGrid"),i(n,"class","svelte-13sadlc"),i(u,"title","Export TextGrid"),i(u,"class","svelte-13sadlc"),i(v,"class","separator svelte-13sadlc"),i(w,"title","Add new tier"),i(w,"class","svelte-13sadlc"),i(T,"title","Rename selected tier"),i(T,"class","svelte-13sadlc"),i(N,"title","Remove selected tier"),i(N,"class","svelte-13sadlc"),i(p,"class","separator svelte-13sadlc"),i(P,"title","Undo (Ctrl+Z)"),i(P,"class","svelte-13sadlc"),i(A,"title","Redo (Ctrl+Y)"),i(A,"class","svelte-13sadlc"),i(Z,"class","tier-count svelte-13sadlc"),i(l,"class","annotation-toolbar svelte-13sadlc"),i(je,"class","tiers-container svelte-13sadlc"),i(me,"type","file"),i(me,"accept",".TextGrid,.textgrid,.txt,text/plain"),Be(me,"display","none"),i(e,"class","annotation-editor svelte-13sadlc")},m(D,U){H(D,e,U),s(e,l),s(l,n),s(l,r),s(l,u),s(l,h),s(l,v),s(l,k),s(l,w),s(l,y),s(l,T),s(l,E),s(l,N),s(l,F),s(l,p),s(l,x),s(l,P),s(l,R),s(l,A),s(l,O),s(l,Z),s(Z,be),s(Z,We),s(Z,Re),s(e,Te),s(e,je);for(let le=0;le<ye.length;le+=1)ye[le]&&ye[le].m(je,null);s(je,xe),$&&$.m(je,null),s(e,W),s(e,me),t[14](me),H(D,re,U),te&&te.m(D,U),H(D,Pe,U),fe&&fe.m(D,U),H(D,Ae,U),ce&&ce.m(D,U),H(D,Me,U),we&&we.m(D,U),H(D,ke,U),oe&&oe.m(D,U),H(D,_e,U),Se=!0,He||(I=[L(n,"click",t[6]),L(u,"click",t[8]),L(w,"click",t[9]),L(T,"click",t[11]),L(N,"click",t[10]),L(P,"click",Ws),L(A,"click",Jn),L(me,"change",t[7])],He=!0)},p(D,[U]){(!Se||U&32)&&ge!==(ge=D[5].length+"")&&se(be,ge),(!Se||U&32)&&Ue!==(Ue=D[5].length!==1?"s":"")&&se(Re,Ue),U&48&&(q=nn(D[5]),zl(),ye=Ys(ye,U,ae,1,D,q,De,je,wa,xs,xe,As),Ol()),D[5].length===0?$||($=Ss(),$.c(),$.m(je,null)):$&&($.d(1),$=null),D[1]==="addTier"?te?(te.p(D,U),U&2&&pe(te,1)):(te=js(D),te.c(),pe(te,1),te.m(Pe.parentNode,Pe)):te&&(zl(),Ie(te,1,1,()=>{te=null}),Ol()),D[1]==="renameTier"?fe?(fe.p(D,U),U&2&&pe(fe,1)):(fe=Bs(D),fe.c(),pe(fe,1),fe.m(Ae.parentNode,Ae)):fe&&(zl(),Ie(fe,1,1,()=>{fe=null}),Ol()),D[1]==="removeTier"?ce?(ce.p(D,U),U&2&&pe(ce,1)):(ce=Ms(D),ce.c(),pe(ce,1),ce.m(Me.parentNode,Me)):ce&&(zl(),Ie(ce,1,1,()=>{ce=null}),Ol()),D[1]==="alert"?we?(we.p(D,U),U&2&&pe(we,1)):(we=Vs(D),we.c(),pe(we,1),we.m(ke.parentNode,ke)):we&&(zl(),Ie(we,1,1,()=>{we=null}),Ol()),D[1]==="exportTextGrid"?oe?(oe.p(D,U),U&2&&pe(oe,1)):(oe=Ls(D),oe.c(),pe(oe,1),oe.m(_e.parentNode,_e)):oe&&(zl(),Ie(oe,1,1,()=>{oe=null}),Ol())},i(D){if(!Se){for(let U=0;U<q.length;U+=1)pe(ye[U]);pe(te),pe(fe),pe(ce),pe(we),pe(oe),Se=!0}},o(D){for(let U=0;U<ye.length;U+=1)Ie(ye[U]);Ie(te),Ie(fe),Ie(ce),Ie(we),Ie(oe),Se=!1},d(D){D&&(f(e),f(re),f(Pe),f(Ae),f(Me),f(ke),f(_e));for(let U=0;U<ye.length;U+=1)ye[U].d();$&&$.d(),t[14](null),te&&te.d(D),fe&&fe.d(D),ce&&ce.d(D),we&&we.d(D),oe&&oe.d(D),He=!1,jt(I)}}}function Ba(t,e,l){let n,a,r;Ne(t,bl,x=>l(4,n=x)),Ne(t,zn,x=>l(5,a=x)),Ne(t,Un,x=>l(15,r=x));let u,d=null,h="",v="annotations.TextGrid";On(()=>{a.length===0&&ta()});function k(x){l(2,h=x),l(1,d="alert")}function w(){u.click()}async function _(x){var R;const P=x.target,j=(R=P.files)==null?void 0:R[0];if(j){try{const A=await j.text();la(A)}catch(A){console.error("Failed to load TextGrid:",A),k("Failed to parse TextGrid file: "+(A instanceof Error?A.message:String(A)))}P.value=""}}async function y(){if(r){const x=r.replace(/\.[^/.]+$/,"");l(3,v=x+".TextGrid")}else l(3,v="annotations.TextGrid");if("showSaveFilePicker"in window)try{const x=ds(),j=await(await window.showSaveFilePicker({suggestedName:v,types:[{description:"Praat TextGrid",accept:{"text/plain":[".TextGrid"]}}]})).createWritable();await j.write(x),await j.close();return}catch(x){if(x.name==="AbortError")return}l(1,d="exportTextGrid")}function T(x){const P=ds(),j=new Blob([P],{type:"text/plain"}),R=URL.createObjectURL(j),A=document.createElement("a");A.href=R,A.download=x.endsWith(".TextGrid")?x:x+".TextGrid",A.click(),URL.revokeObjectURL(R)}function B(){l(1,d="addTier")}function E(){if(a.length<=1){k("Cannot remove the last tier");return}l(1,d="removeTier")}function N(){l(1,d="renameTier")}function S(x){var j;const P=d;if(l(1,d=null),P==="addTier"&&typeof x.detail=="string"&&x.detail)na(x.detail);else if(P==="renameTier"&&typeof x.detail=="string"&&x.detail){const R=((j=a[n])==null?void 0:j.name)||"";x.detail!==R&&sa(n,x.detail)}else P==="removeTier"?aa(n):P==="exportTextGrid"&&typeof x.detail=="string"&&x.detail&&T(x.detail)}function F(){l(1,d=null)}function p(x){Gl[x?"unshift":"push"](()=>{u=x,l(0,u)})}return[u,d,h,v,n,a,w,_,y,B,E,N,S,F,p]}class Ma extends an{constructor(e){super(),rn(this,e,Ba,ja,sn,{})}}function Rs(t,e,l){const n=t.slice();return n[22]=e[l],n}function Fs(t){let e,l,n="Annotation",a,r=nn(t[1]),u=[];for(let d=0;d<r.length;d+=1)u[d]=Us(Rs(t,r,d));return{c(){e=c("div"),l=c("div"),l.textContent=n,a=b();for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=o(d,"DIV",{class:!0});var h=m(e);l=o(h,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-16eifwe"&&(l.textContent=n),a=g(h);for(let v=0;v<u.length;v+=1)u[v].l(h);h.forEach(f),this.h()},h(){i(l,"class","section-title svelte-1etf494"),i(e,"class","section svelte-1etf494")},m(d,h){H(d,e,h),s(e,l),s(e,a);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(e,null)},p(d,h){if(h&2){r=nn(d[1]);let v;for(v=0;v<r.length;v+=1){const k=Rs(d,r,v);u[v]?u[v].p(k,h):(u[v]=Us(k),u[v].c(),u[v].m(e,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=r.length}},d(d){d&&f(e),Js(u,d)}}}function Us(t){let e,l,n=t[22].tierName+"",a,r,u,d=t[22].text+"",h,v;return{c(){e=c("div"),l=c("span"),a=X(n),r=b(),u=c("span"),h=X(d),v=b(),this.h()},l(k){e=o(k,"DIV",{class:!0});var w=m(e);l=o(w,"SPAN",{class:!0});var _=m(l);a=K(_,n),_.forEach(f),r=g(w),u=o(w,"SPAN",{class:!0});var y=m(u);h=K(y,d),y.forEach(f),v=g(w),w.forEach(f),this.h()},h(){i(l,"class","tier-name svelte-1etf494"),i(u,"class","interval-text svelte-1etf494"),i(e,"class","annotation-row svelte-1etf494")},m(k,w){H(k,e,w),s(e,l),s(l,a),s(e,r),s(e,u),s(u,h),s(e,v)},p(k,w){w&2&&n!==(n=k[22].tierName+"")&&se(a,n),w&2&&d!==(d=k[22].text+"")&&se(h,d)},d(k){k&&f(e)}}}function Va(t){let e,l,n,a=t[0].toFixed(3)+"",r,u,d,h,v,k="Pitch & Voice",w,_,y,T,B="F0",E,N,S=Fn(t[16])+"",F,p,x,P,j="Int",R,A,M=en(t[15])+"",O,Z,ge,be,We="HNR",Ue,Re,Te=en(t[6])+"",je,ye,De,xe,W="Formants",me,re,Pe,Ae='<th class="svelte-1etf494"></th> <th class="svelte-1etf494">Freq</th> <th class="svelte-1etf494">BW</th>',Me,ke,_e,Se="F1",He,I,q=at(t[14])+"",ae,$,te,fe=at(t[10])+"",ce,we,oe,D,U="F2",le,Ve,it=at(t[13])+"",_t,rt,Ke,qt=at(t[9])+"",gt,wl,ot,C,Y="F3",Q,G,de=at(t[12])+"",ve,ne,ee,ct=at(t[8])+"",Ee,Fe,Ge,Xe,Wt="F4",Pl,bt,kl=at(t[11])+"",Cl,ul,$t,ut=at(t[7])+"",Et,Al,et,el,Wl="Spectral",Nt,ft,Bt,Mt,Tl="CoG",xl,dt,It=Fn(t[5])+"",Sl,jl,Le,Ye,on="Tilt",Dt,fl,ht=t[4]!==null?`${t[4].toFixed(1)} dB/oct`:"—",Bl,Ml,Je,vt,cn="A1-P0",Vl,ze,pt=en(t[3])+"",Ll,Pt,Kt,Ze,un="NMR",Rl,tt,At=(t[2]!==null?t[2].toFixed(3):"—")+"",Fl,Ul,Ce=t[1].length>0&&Fs(t);return{c(){e=c("div"),l=c("div"),n=c("span"),r=X(a),u=X("s"),d=b(),h=c("div"),v=c("div"),v.textContent=k,w=b(),_=c("div"),y=c("div"),T=c("span"),T.textContent=B,E=b(),N=c("span"),F=X(S),p=b(),x=c("div"),P=c("span"),P.textContent=j,R=b(),A=c("span"),O=X(M),Z=b(),ge=c("div"),be=c("span"),be.textContent=We,Ue=b(),Re=c("span"),je=X(Te),ye=b(),De=c("div"),xe=c("div"),xe.textContent=W,me=b(),re=c("table"),Pe=c("tr"),Pe.innerHTML=Ae,Me=b(),ke=c("tr"),_e=c("td"),_e.textContent=Se,He=b(),I=c("td"),ae=X(q),$=b(),te=c("td"),ce=X(fe),we=b(),oe=c("tr"),D=c("td"),D.textContent=U,le=b(),Ve=c("td"),_t=X(it),rt=b(),Ke=c("td"),gt=X(qt),wl=b(),ot=c("tr"),C=c("td"),C.textContent=Y,Q=b(),G=c("td"),ve=X(de),ne=b(),ee=c("td"),Ee=X(ct),Fe=b(),Ge=c("tr"),Xe=c("td"),Xe.textContent=Wt,Pl=b(),bt=c("td"),Cl=X(kl),ul=b(),$t=c("td"),Et=X(ut),Al=b(),et=c("div"),el=c("div"),el.textContent=Wl,Nt=b(),ft=c("div"),Bt=c("div"),Mt=c("span"),Mt.textContent=Tl,xl=b(),dt=c("span"),Sl=X(It),jl=b(),Le=c("div"),Ye=c("span"),Ye.textContent=on,Dt=b(),fl=c("span"),Bl=X(ht),Ml=b(),Je=c("div"),vt=c("span"),vt.textContent=cn,Vl=b(),ze=c("span"),Ll=X(pt),Pt=b(),Kt=c("div"),Ze=c("span"),Ze.textContent=un,Rl=b(),tt=c("span"),Fl=X(At),Ul=b(),Ce&&Ce.c(),this.h()},l(ie){e=o(ie,"DIV",{class:!0});var ue=m(e);l=o(ue,"DIV",{class:!0});var Vt=m(l);n=o(Vt,"SPAN",{class:!0});var Kl=m(n);r=K(Kl,a),u=K(Kl,"s"),Kl.forEach(f),Vt.forEach(f),d=g(ue),h=o(ue,"DIV",{class:!0});var wt=m(h);v=o(wt,"DIV",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-d0x3ep"&&(v.textContent=k),w=g(wt),_=o(wt,"DIV",{class:!0});var dl=m(_);y=o(dl,"DIV",{class:!0});var yl=m(y);T=o(yl,"SPAN",{class:!0,"data-svelte-h":!0}),z(T)!=="svelte-1cn36l0"&&(T.textContent=B),E=g(yl),N=o(yl,"SPAN",{class:!0});var Xt=m(N);F=K(Xt,S),Xt.forEach(f),yl.forEach(f),p=g(dl),x=o(dl,"DIV",{class:!0});var Qe=m(x);P=o(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),z(P)!=="svelte-1kbwfyu"&&(P.textContent=j),R=g(Qe),A=o(Qe,"SPAN",{class:!0});var hl=m(A);O=K(hl,M),hl.forEach(f),Qe.forEach(f),Z=g(dl),ge=o(dl,"DIV",{class:!0});var Lt=m(ge);be=o(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),z(be)!=="svelte-1wxjkk8"&&(be.textContent=We),Ue=g(Lt),Re=o(Lt,"SPAN",{class:!0});var Xl=m(Re);je=K(Xl,Te),Xl.forEach(f),Lt.forEach(f),dl.forEach(f),wt.forEach(f),ye=g(ue),De=o(ue,"DIV",{class:!0});var Yt=m(De);xe=o(Yt,"DIV",{class:!0,"data-svelte-h":!0}),z(xe)!=="svelte-sqr9el"&&(xe.textContent=W),me=g(Yt),re=o(Yt,"TABLE",{class:!0});var Oe=m(re);Pe=o(Oe,"TR",{"data-svelte-h":!0}),z(Pe)!=="svelte-316y0v"&&(Pe.innerHTML=Ae),Me=g(Oe),ke=o(Oe,"TR",{});var tl=m(ke);_e=o(tl,"TD",{class:!0,"data-svelte-h":!0}),z(_e)!=="svelte-1iujy6z"&&(_e.textContent=Se),He=g(tl),I=o(tl,"TD",{class:!0});var vl=m(I);ae=K(vl,q),vl.forEach(f),$=g(tl),te=o(tl,"TD",{class:!0});var ll=m(te);ce=K(ll,fe),ll.forEach(f),tl.forEach(f),we=g(Oe),oe=o(Oe,"TR",{});var nl=m(oe);D=o(nl,"TD",{class:!0,"data-svelte-h":!0}),z(D)!=="svelte-kfs2py"&&(D.textContent=U),le=g(nl),Ve=o(nl,"TD",{class:!0});var pl=m(Ve);_t=K(pl,it),pl.forEach(f),rt=g(nl),Ke=o(nl,"TD",{class:!0});var sl=m(Ke);gt=K(sl,qt),sl.forEach(f),nl.forEach(f),wl=g(Oe),ot=o(Oe,"TR",{});var al=m(ot);C=o(al,"TD",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-h8k9fd"&&(C.textContent=Y),Q=g(al),G=o(al,"TD",{class:!0});var il=m(G);ve=K(il,de),il.forEach(f),ne=g(al),ee=o(al,"TD",{class:!0});var Yl=m(ee);Ee=K(Yl,ct),Yl.forEach(f),al.forEach(f),Fe=g(Oe),Ge=o(Oe,"TR",{});var mt=m(Ge);Xe=o(mt,"TD",{class:!0,"data-svelte-h":!0}),z(Xe)!=="svelte-zz0m8k"&&(Xe.textContent=Wt),Pl=g(mt),bt=o(mt,"TD",{class:!0});var Jt=m(bt);Cl=K(Jt,kl),Jt.forEach(f),ul=g(mt),$t=o(mt,"TD",{class:!0});var Jl=m($t);Et=K(Jl,ut),Jl.forEach(f),mt.forEach(f),Oe.forEach(f),Yt.forEach(f),Al=g(ue),et=o(ue,"DIV",{class:!0});var rl=m(et);el=o(rl,"DIV",{class:!0,"data-svelte-h":!0}),z(el)!=="svelte-19lj3il"&&(el.textContent=Wl),Nt=g(rl),ft=o(rl,"DIV",{class:!0});var xt=m(ft);Bt=o(xt,"DIV",{class:!0});var El=m(Bt);Mt=o(El,"SPAN",{class:!0,"data-svelte-h":!0}),z(Mt)!=="svelte-m4uzze"&&(Mt.textContent=Tl),xl=g(El),dt=o(El,"SPAN",{class:!0});var Nl=m(dt);Sl=K(Nl,It),Nl.forEach(f),El.forEach(f),jl=g(xt),Le=o(xt,"DIV",{class:!0});var ml=m(Le);Ye=o(ml,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ye)!=="svelte-124pemq"&&(Ye.textContent=on),Dt=g(ml),fl=o(ml,"SPAN",{class:!0});var Zl=m(fl);Bl=K(Zl,ht),Zl.forEach(f),ml.forEach(f),Ml=g(xt),Je=o(xt,"DIV",{class:!0});var Zt=m(Je);vt=o(Zt,"SPAN",{class:!0,"data-svelte-h":!0}),z(vt)!=="svelte-hotqe4"&&(vt.textContent=cn),Vl=g(Zt),ze=o(Zt,"SPAN",{class:!0});var fn=m(ze);Ll=K(fn,pt),fn.forEach(f),Zt.forEach(f),Pt=g(xt),Kt=o(xt,"DIV",{class:!0});var $e=m(Kt);Ze=o($e,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ze)!=="svelte-avoxxe"&&(Ze.textContent=un),Rl=g($e),tt=o($e,"SPAN",{class:!0});var Ql=m(tt);Fl=K(Ql,At),Ql.forEach(f),$e.forEach(f),xt.forEach(f),rl.forEach(f),Ul=g(ue),Ce&&Ce.l(ue),ue.forEach(f),this.h()},h(){i(n,"class","time-label svelte-1etf494"),i(l,"class","panel-header svelte-1etf494"),i(v,"class","section-title svelte-1etf494"),i(T,"class","label pitch-label svelte-1etf494"),i(N,"class","value svelte-1etf494"),i(y,"class","value-row svelte-1etf494"),i(P,"class","label intensity-label svelte-1etf494"),i(A,"class","value svelte-1etf494"),i(x,"class","value-row svelte-1etf494"),i(be,"class","label hnr-label svelte-1etf494"),i(Re,"class","value svelte-1etf494"),i(ge,"class","value-row svelte-1etf494"),i(_,"class","values-grid svelte-1etf494"),i(h,"class","section svelte-1etf494"),i(xe,"class","section-title svelte-1etf494"),i(_e,"class","label f-label svelte-1etf494"),i(I,"class","value svelte-1etf494"),i(te,"class","value bw svelte-1etf494"),i(D,"class","label f-label svelte-1etf494"),i(Ve,"class","value svelte-1etf494"),i(Ke,"class","value bw svelte-1etf494"),i(C,"class","label f-label svelte-1etf494"),i(G,"class","value svelte-1etf494"),i(ee,"class","value bw svelte-1etf494"),i(Xe,"class","label f-label svelte-1etf494"),i(bt,"class","value svelte-1etf494"),i($t,"class","value bw svelte-1etf494"),i(re,"class","formant-table svelte-1etf494"),i(De,"class","section svelte-1etf494"),i(el,"class","section-title svelte-1etf494"),i(Mt,"class","label cog-label svelte-1etf494"),i(dt,"class","value svelte-1etf494"),i(Bt,"class","value-row svelte-1etf494"),i(Ye,"class","label tilt-label svelte-1etf494"),i(fl,"class","value svelte-1etf494"),i(Le,"class","value-row svelte-1etf494"),i(vt,"class","label nasal-label svelte-1etf494"),i(ze,"class","value svelte-1etf494"),i(Je,"class","value-row svelte-1etf494"),i(Ze,"class","label nmr-label svelte-1etf494"),i(tt,"class","value svelte-1etf494"),i(Kt,"class","value-row svelte-1etf494"),i(ft,"class","values-grid svelte-1etf494"),i(et,"class","section svelte-1etf494"),i(e,"class","values-panel svelte-1etf494")},m(ie,ue){H(ie,e,ue),s(e,l),s(l,n),s(n,r),s(n,u),s(e,d),s(e,h),s(h,v),s(h,w),s(h,_),s(_,y),s(y,T),s(y,E),s(y,N),s(N,F),s(_,p),s(_,x),s(x,P),s(x,R),s(x,A),s(A,O),s(_,Z),s(_,ge),s(ge,be),s(ge,Ue),s(ge,Re),s(Re,je),s(e,ye),s(e,De),s(De,xe),s(De,me),s(De,re),s(re,Pe),s(re,Me),s(re,ke),s(ke,_e),s(ke,He),s(ke,I),s(I,ae),s(ke,$),s(ke,te),s(te,ce),s(re,we),s(re,oe),s(oe,D),s(oe,le),s(oe,Ve),s(Ve,_t),s(oe,rt),s(oe,Ke),s(Ke,gt),s(re,wl),s(re,ot),s(ot,C),s(ot,Q),s(ot,G),s(G,ve),s(ot,ne),s(ot,ee),s(ee,Ee),s(re,Fe),s(re,Ge),s(Ge,Xe),s(Ge,Pl),s(Ge,bt),s(bt,Cl),s(Ge,ul),s(Ge,$t),s($t,Et),s(e,Al),s(e,et),s(et,el),s(et,Nt),s(et,ft),s(ft,Bt),s(Bt,Mt),s(Bt,xl),s(Bt,dt),s(dt,Sl),s(ft,jl),s(ft,Le),s(Le,Ye),s(Le,Dt),s(Le,fl),s(fl,Bl),s(ft,Ml),s(ft,Je),s(Je,vt),s(Je,Vl),s(Je,ze),s(ze,Ll),s(ft,Pt),s(ft,Kt),s(Kt,Ze),s(Kt,Rl),s(Kt,tt),s(tt,Fl),s(e,Ul),Ce&&Ce.m(e,null)},p(ie,[ue]){ue&1&&a!==(a=ie[0].toFixed(3)+"")&&se(r,a),ue&65536&&S!==(S=Fn(ie[16])+"")&&se(F,S),ue&32768&&M!==(M=en(ie[15])+"")&&se(O,M),ue&64&&Te!==(Te=en(ie[6])+"")&&se(je,Te),ue&16384&&q!==(q=at(ie[14])+"")&&se(ae,q),ue&1024&&fe!==(fe=at(ie[10])+"")&&se(ce,fe),ue&8192&&it!==(it=at(ie[13])+"")&&se(_t,it),ue&512&&qt!==(qt=at(ie[9])+"")&&se(gt,qt),ue&4096&&de!==(de=at(ie[12])+"")&&se(ve,de),ue&256&&ct!==(ct=at(ie[8])+"")&&se(Ee,ct),ue&2048&&kl!==(kl=at(ie[11])+"")&&se(Cl,kl),ue&128&&ut!==(ut=at(ie[7])+"")&&se(Et,ut),ue&32&&It!==(It=Fn(ie[5])+"")&&se(Sl,It),ue&16&&ht!==(ht=ie[4]!==null?`${ie[4].toFixed(1)} dB/oct`:"—")&&se(Bl,ht),ue&8&&pt!==(pt=en(ie[3])+"")&&se(Ll,pt),ue&4&&At!==(At=(ie[2]!==null?ie[2].toFixed(3):"—")+"")&&se(Fl,At),ie[1].length>0?Ce?Ce.p(ie,ue):(Ce=Fs(ie),Ce.c(),Ce.m(e,null)):Ce&&(Ce.d(1),Ce=null)},i:yt,o:yt,d(ie){ie&&f(e),Ce&&Ce.d()}}}function kt(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const r=Math.floor((n+a)/2);e[r]<l?n=r+1:a=r}return n>0&&Math.abs(e[n-1]-l)<Math.abs(e[n]-l)&&(n=n-1),t[n]}function La(t,e,l){if(!t||!e||e.length===0)return null;let n=0,a=e.length-1;for(;n<a;){const _=Math.floor((n+a+1)/2);e[_]<=l?n=_:a=_-1}const r=n,u=e[r],d=t[r];if(r>=e.length-1)return d;const h=e[r+1],v=t[r+1],k=d!==null&&d>0,w=v!==null&&v>0;if(k&&w){const _=(l-u)/(h-u);return Math.exp(Math.log(d)+_*(Math.log(v)-Math.log(d)))}else return k?d:w?v:null}function at(t){return t===null?"—":`${t.toFixed(0)}`}function Fn(t){return t===null?"—":`${t.toFixed(1)} Hz`}function en(t){return t===null?"—":`${t.toFixed(1)} dB`}function Ra(t,e,l){let n,a,r,u,d,h,v,k,w,_,y,T,B,E,N,S,F,p,x,P,j;Ne(t,ia,A=>l(17,p=A)),Ne(t,zn,A=>l(20,x=A)),Ne(t,ql,A=>l(18,P=A)),Ne(t,pn,A=>l(19,j=A));function R(A){if(!x||x.length===0)return[];const M=[];for(const O of x){const Z=O.intervals.find(ge=>A>=ge.start&&A<ge.end);Z&&Z.text&&M.push({tierName:O.name,text:Z.text})}return M}return t.$$.update=()=>{t.$$.dirty&786432&&l(0,n=j!==null?j:P),t.$$.dirty&131073&&l(16,a=p?La(p.pitch,p.times,n):null),t.$$.dirty&131073&&l(15,r=p?kt(p.intensity,p.times,n):null),t.$$.dirty&131073&&l(14,u=p?kt(p.formants.f1,p.times,n):null),t.$$.dirty&131073&&l(13,d=p?kt(p.formants.f2,p.times,n):null),t.$$.dirty&131073&&l(12,h=p?kt(p.formants.f3,p.times,n):null),t.$$.dirty&131073&&l(11,v=p?kt(p.formants.f4,p.times,n):null),t.$$.dirty&131073&&l(10,k=p?kt(p.formants.b1,p.times,n):null),t.$$.dirty&131073&&l(9,w=p?kt(p.formants.b2,p.times,n):null),t.$$.dirty&131073&&l(8,_=p?kt(p.formants.b3,p.times,n):null),t.$$.dirty&131073&&l(7,y=p?kt(p.formants.b4,p.times,n):null),t.$$.dirty&131073&&l(6,T=p?kt(p.harmonicity,p.times,n):null),t.$$.dirty&131073&&l(5,B=p!=null&&p.cog?kt(p.cog,p.times,n):null),t.$$.dirty&131073&&l(4,E=p!=null&&p.spectralTilt?kt(p.spectralTilt,p.times,n):null),t.$$.dirty&131073&&l(3,N=p!=null&&p.a1p0?kt(p.a1p0,p.times,n):null),t.$$.dirty&131073&&l(2,S=p!=null&&p.nmr?kt(p.nmr,p.times,n):null),t.$$.dirty&1&&l(1,F=R(n))},[n,F,S,N,E,B,T,y,_,w,k,v,h,d,u,r,a,p,P,j]}class Fa extends an{constructor(e){super(),rn(this,e,Ra,Va,sn,{})}}function Ua(t){let e,l,n,a,r='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',u,d,h,v,k='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><rect x="6" y="6" width="12" height="12"></rect></svg>',w,_,y,T='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>',B,E,N,S,F,p,x=ol(t[21])+"",P,j,R=ol(t[0].length/t[20])+"",A,M,O,Z,ge,be,We,Ue,Re,Te,je='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.03 7.03 0 00-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.49.49 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.01-1.58zM12 15.6a3.6 3.6 0 110-7.2 3.6 3.6 0 010 7.2z"></path></svg>',ye,De,xe,W,me,re,Pe,Ae,Me="Pitch",ke,_e,Se,He,I,q="Formants",ae,$,te,fe,ce,we="Intensity",oe,D,U,le,Ve,it="HNR",_t,rt,Ke,qt,gt,wl="CoG",ot,C,Y,Q,G,de="Sp.Tilt",ve,ne,ee,ct,Ee,Fe="A1-P0",Ge,Xe,Wt,Pl,bt,kl="NMR",Cl,ul,$t,ut,Et,Al,et,el="Points",Wl,Nt,ft="Import",Bt,Mt,Tl,xl,dt,It,Sl="Voice:",jl,Le,Ye,on="Female",Dt,fl="Male",ht,Bl="Child",Ml,Je,vt,cn="Max Freq:",Vl,ze,pt,Ll="5 kHz",Pt,Kt="7.5 kHz",Ze,un="10 kHz",Rl,tt,At,Fl="Backend:",Ul,Ce,ie,ue="praatfan (local)",Vt,Kl="praatfan (remote)",wt,dl="praatfan-gpl (remote)",yl,Xt,Qe,hl,Lt,Xl,Yt,Oe,tl,vl,ll,nl,pl,sl,al,il,Yl,mt,Jt,Jl,rl=ol(t[22].start)+"",xt,El,Nl=ol(t[22].end)+"",ml,Zl,Zt,fn="Space: play | Tab: play visible | Arrows: navigate/zoom",$e,Ql,Qn;function $n(V,J){return V[25]?Ga:Ha}let _n=$n(t),_l=_n(t);function es(V,J){return V[6]?Wa:qa}let gn=es(t),Qt=gn(t),lt=t[26]&&zs(t),nt=t[27]&&Os(t);function ts(V,J){return V[3]?Xa:Ka}let bn=ts(t),gl=bn(t),st=t[23].length>0&&Hs(t);return Lt=new oa({}),Oe=new ca({props:{showPitch:t[8],showFormants:t[9],showIntensity:t[10],showHNR:t[11],showCoG:t[12],showSpectralTilt:t[13],showA1P0:t[14],showNMR:t[15],showDataPoints:t[16],maxFreq:t[17]}}),ll=new ua({}),sl=new Ma({}),il=new Fa({}),{c(){e=c("div"),l=c("header"),n=c("div"),a=c("button"),a.innerHTML=r,u=b(),d=c("button"),_l.c(),h=b(),v=c("button"),v.innerHTML=k,w=b(),Qt.c(),_=b(),y=c("button"),y.innerHTML=T,B=b(),E=c("span"),N=X(t[19]),S=b(),F=c("div"),p=c("span"),P=X(x),j=X(" / "),A=X(R),M=b(),lt&&lt.c(),O=b(),Z=c("div"),nt&&nt.c(),ge=b(),be=c("span"),We=X(t[20]),Ue=X(" Hz"),Re=b(),Te=c("button"),Te.innerHTML=je,ye=b(),De=c("button"),gl.c(),xe=b(),W=c("div"),me=c("label"),re=c("input"),Pe=b(),Ae=c("span"),Ae.textContent=Me,ke=b(),_e=c("label"),Se=c("input"),He=b(),I=c("span"),I.textContent=q,ae=b(),$=c("label"),te=c("input"),fe=b(),ce=c("span"),ce.textContent=we,oe=b(),D=c("label"),U=c("input"),le=b(),Ve=c("span"),Ve.textContent=it,_t=b(),rt=c("label"),Ke=c("input"),qt=b(),gt=c("span"),gt.textContent=wl,ot=b(),C=c("label"),Y=c("input"),Q=b(),G=c("span"),G.textContent=de,ve=b(),ne=c("label"),ee=c("input"),ct=b(),Ee=c("span"),Ee.textContent=Fe,Ge=b(),Xe=c("label"),Wt=c("input"),Pl=b(),bt=c("span"),bt.textContent=kl,Cl=b(),ul=c("span"),$t=b(),ut=c("label"),Et=c("input"),Al=b(),et=c("span"),et.textContent=el,Wl=b(),Nt=c("button"),Nt.textContent=ft,Bt=b(),st&&st.c(),Mt=b(),Tl=c("span"),xl=b(),dt=c("label"),It=c("span"),It.textContent=Sl,jl=b(),Le=c("select"),Ye=c("option"),Ye.textContent=on,Dt=c("option"),Dt.textContent=fl,ht=c("option"),ht.textContent=Bl,Ml=b(),Je=c("label"),vt=c("span"),vt.textContent=cn,Vl=b(),ze=c("select"),pt=c("option"),pt.textContent=Ll,Pt=c("option"),Pt.textContent=Kt,Ze=c("option"),Ze.textContent=un,Rl=b(),tt=c("label"),At=c("span"),At.textContent=Fl,Ul=b(),Ce=c("select"),ie=c("option"),ie.textContent=ue,Vt=c("option"),Vt.textContent=Kl,wt=c("option"),wt.textContent=dl,yl=b(),Xt=c("div"),Qe=c("div"),hl=c("div"),Ot(Lt.$$.fragment),Xl=b(),Yt=c("div"),Ot(Oe.$$.fragment),tl=b(),vl=c("div"),Ot(ll.$$.fragment),nl=b(),pl=c("div"),Ot(sl.$$.fragment),al=b(),Ot(il.$$.fragment),Yl=b(),mt=c("footer"),Jt=c("span"),Jl=X("View: "),xt=X(rl),El=X(" - "),ml=X(Nl),Zl=b(),Zt=c("span"),Zt.textContent=fn,this.h()},l(V){e=o(V,"DIV",{class:!0});var J=m(e);l=o(J,"HEADER",{class:!0});var qe=m(l);n=o(qe,"DIV",{class:!0});var Rt=m(n);a=o(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(a)!=="svelte-1lvwg3g"&&(a.innerHTML=r),u=g(Rt),d=o(Rt,"BUTTON",{class:!0,title:!0});var ls=m(d);_l.l(ls),ls.forEach(f),h=g(Rt),v=o(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(v)!=="svelte-1ictkst"&&(v.innerHTML=k),w=g(Rt),Qt.l(Rt),_=g(Rt),y=o(Rt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(y)!=="svelte-u6ddbp"&&(y.innerHTML=T),B=g(Rt),E=o(Rt,"SPAN",{class:!0});var ns=m(E);N=K(ns,t[19]),ns.forEach(f),Rt.forEach(f),S=g(qe),F=o(qe,"DIV",{class:!0});var wn=m(F);p=o(wn,"SPAN",{class:!0});var kn=m(p);P=K(kn,x),j=K(kn," / "),A=K(kn,R),kn.forEach(f),M=g(wn),lt&&lt.l(wn),wn.forEach(f),O=g(qe),Z=o(qe,"DIV",{class:!0});var Il=m(Z);nt&&nt.l(Il),ge=g(Il),be=o(Il,"SPAN",{class:!0});var Hn=m(be);We=K(Hn,t[20]),Ue=K(Hn," Hz"),Hn.forEach(f),Re=g(Il),Te=o(Il,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(Te)!=="svelte-px3wau"&&(Te.innerHTML=je),ye=g(Il),De=o(Il,"BUTTON",{class:!0,title:!0});var ss=m(De);gl.l(ss),ss.forEach(f),Il.forEach(f),qe.forEach(f),xe=g(J),W=o(J,"DIV",{class:!0});var he=m(W);me=o(he,"LABEL",{class:!0,title:!0});var Cn=m(me);re=o(Cn,"INPUT",{type:!0,class:!0}),Pe=g(Cn),Ae=o(Cn,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ae)!=="svelte-1k01z98"&&(Ae.textContent=Me),Cn.forEach(f),ke=g(he),_e=o(he,"LABEL",{class:!0,title:!0});var Tn=m(_e);Se=o(Tn,"INPUT",{type:!0,class:!0}),He=g(Tn),I=o(Tn,"SPAN",{class:!0,"data-svelte-h":!0}),z(I)!=="svelte-6cthmg"&&(I.textContent=q),Tn.forEach(f),ae=g(he),$=o(he,"LABEL",{class:!0,title:!0});var yn=m($);te=o(yn,"INPUT",{type:!0,class:!0}),fe=g(yn),ce=o(yn,"SPAN",{class:!0,"data-svelte-h":!0}),z(ce)!=="svelte-1el2ji2"&&(ce.textContent=we),yn.forEach(f),oe=g(he),D=o(he,"LABEL",{class:!0,title:!0});var En=m(D);U=o(En,"INPUT",{type:!0,class:!0}),le=g(En),Ve=o(En,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ve)!=="svelte-177jta0"&&(Ve.textContent=it),En.forEach(f),_t=g(he),rt=o(he,"LABEL",{class:!0,title:!0});var Nn=m(rt);Ke=o(Nn,"INPUT",{type:!0,class:!0}),qt=g(Nn),gt=o(Nn,"SPAN",{class:!0,"data-svelte-h":!0}),z(gt)!=="svelte-1myrnh2"&&(gt.textContent=wl),Nn.forEach(f),ot=g(he),C=o(he,"LABEL",{class:!0,title:!0});var In=m(C);Y=o(In,"INPUT",{type:!0,class:!0}),Q=g(In),G=o(In,"SPAN",{class:!0,"data-svelte-h":!0}),z(G)!=="svelte-1pame47"&&(G.textContent=de),In.forEach(f),ve=g(he),ne=o(he,"LABEL",{class:!0,title:!0});var Dn=m(ne);ee=o(Dn,"INPUT",{type:!0,class:!0}),ct=g(Dn),Ee=o(Dn,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ee)!=="svelte-kia4wx"&&(Ee.textContent=Fe),Dn.forEach(f),Ge=g(he),Xe=o(he,"LABEL",{class:!0,title:!0});var Pn=m(Xe);Wt=o(Pn,"INPUT",{type:!0,class:!0}),Pl=g(Pn),bt=o(Pn,"SPAN",{class:!0,"data-svelte-h":!0}),z(bt)!=="svelte-1idlrfi"&&(bt.textContent=kl),Pn.forEach(f),Cl=g(he),ul=o(he,"SPAN",{class:!0}),m(ul).forEach(f),$t=g(he),ut=o(he,"LABEL",{class:!0,title:!0});var An=m(ut);Et=o(An,"INPUT",{type:!0,class:!0}),Al=g(An),et=o(An,"SPAN",{class:!0,"data-svelte-h":!0}),z(et)!=="svelte-16btzso"&&(et.textContent=el),An.forEach(f),Wl=g(he),Nt=o(he,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(Nt)!=="svelte-13z3t6e"&&(Nt.textContent=ft),Bt=g(he),st&&st.l(he),Mt=g(he),Tl=o(he,"SPAN",{class:!0}),m(Tl).forEach(f),xl=g(he),dt=o(he,"LABEL",{class:!0});var xn=m(dt);It=o(xn,"SPAN",{class:!0,"data-svelte-h":!0}),z(It)!=="svelte-1d25ili"&&(It.textContent=Sl),jl=g(xn),Le=o(xn,"SELECT",{class:!0});var Sn=m(Le);Ye=o(Sn,"OPTION",{"data-svelte-h":!0}),z(Ye)!=="svelte-kgyr86"&&(Ye.textContent=on),Dt=o(Sn,"OPTION",{"data-svelte-h":!0}),z(Dt)!=="svelte-8wnvoi"&&(Dt.textContent=fl),ht=o(Sn,"OPTION",{"data-svelte-h":!0}),z(ht)!=="svelte-7fkmwe"&&(ht.textContent=Bl),Sn.forEach(f),xn.forEach(f),Ml=g(he),Je=o(he,"LABEL",{class:!0});var jn=m(Je);vt=o(jn,"SPAN",{class:!0,"data-svelte-h":!0}),z(vt)!=="svelte-rpytas"&&(vt.textContent=cn),Vl=g(jn),ze=o(jn,"SELECT",{class:!0});var Bn=m(ze);pt=o(Bn,"OPTION",{"data-svelte-h":!0}),z(pt)!=="svelte-1awwqhf"&&(pt.textContent=Ll),Pt=o(Bn,"OPTION",{"data-svelte-h":!0}),z(Pt)!=="svelte-1xbdoff"&&(Pt.textContent=Kt),Ze=o(Bn,"OPTION",{"data-svelte-h":!0}),z(Ze)!=="svelte-1o5m333"&&(Ze.textContent=un),Bn.forEach(f),jn.forEach(f),Rl=g(he),tt=o(he,"LABEL",{class:!0,title:!0});var Mn=m(tt);At=o(Mn,"SPAN",{class:!0,"data-svelte-h":!0}),z(At)!=="svelte-bjtusk"&&(At.textContent=Fl),Ul=g(Mn),Ce=o(Mn,"SELECT",{class:!0});var Vn=m(Ce);ie=o(Vn,"OPTION",{"data-svelte-h":!0}),z(ie)!=="svelte-x3trnu"&&(ie.textContent=ue),Vt=o(Vn,"OPTION",{"data-svelte-h":!0}),z(Vt)!=="svelte-10tohf9"&&(Vt.textContent=Kl),wt=o(Vn,"OPTION",{"data-svelte-h":!0}),z(wt)!=="svelte-pzpi85"&&(wt.textContent=dl),Vn.forEach(f),Mn.forEach(f),he.forEach(f),yl=g(J),Xt=o(J,"DIV",{class:!0});var Ln=m(Xt);Qe=o(Ln,"DIV",{class:!0});var Dl=m(Qe);hl=o(Dl,"DIV",{class:!0});var as=m(hl);zt(Lt.$$.fragment,as),as.forEach(f),Xl=g(Dl),Yt=o(Dl,"DIV",{class:!0});var is=m(Yt);zt(Oe.$$.fragment,is),is.forEach(f),tl=g(Dl),vl=o(Dl,"DIV",{class:!0});var rs=m(vl);zt(ll.$$.fragment,rs),rs.forEach(f),nl=g(Dl),pl=o(Dl,"DIV",{class:!0});var os=m(pl);zt(sl.$$.fragment,os),os.forEach(f),Dl.forEach(f),al=g(Ln),zt(il.$$.fragment,Ln),Ln.forEach(f),Yl=g(J),mt=o(J,"FOOTER",{class:!0});var Rn=m(mt);Jt=o(Rn,"SPAN",{});var dn=m(Jt);Jl=K(dn,"View: "),xt=K(dn,rl),El=K(dn," - "),ml=K(dn,Nl),dn.forEach(f),Zl=g(Rn),Zt=o(Rn,"SPAN",{"data-svelte-h":!0}),z(Zt)!=="svelte-109nybm"&&(Zt.textContent=fn),Rn.forEach(f),J.forEach(f),this.h()},h(){i(a,"class","open-btn svelte-1jxv242"),i(a,"title","Open audio file"),i(d,"class","play-btn svelte-1jxv242"),i(d,"title","Play/Pause (Space)"),cl(d,"playing",t[25]),i(v,"class","stop-btn svelte-1jxv242"),i(v,"title","Stop (Escape)"),i(y,"class","save-btn svelte-1jxv242"),i(y,"title","Save audio as WAV"),i(E,"class","filename svelte-1jxv242"),i(n,"class","toolbar-left svelte-1jxv242"),i(p,"class","time-display svelte-1jxv242"),i(F,"class","toolbar-center svelte-1jxv242"),i(be,"class","sample-rate svelte-1jxv242"),i(Te,"class","settings-btn svelte-1jxv242"),i(Te,"title","Load configuration file"),i(De,"class","theme-btn svelte-1jxv242"),i(De,"title","Toggle theme"),i(Z,"class","toolbar-right svelte-1jxv242"),i(l,"class","toolbar svelte-1jxv242"),i(re,"type","checkbox"),i(re,"class","svelte-1jxv242"),i(Ae,"class","toggle-label pitch svelte-1jxv242"),i(me,"class","overlay-toggle svelte-1jxv242"),i(me,"title","Fundamental frequency (F0) - the perceived pitch of voiced speech"),i(Se,"type","checkbox"),i(Se,"class","svelte-1jxv242"),i(I,"class","toggle-label formants svelte-1jxv242"),i(_e,"class","overlay-toggle svelte-1jxv242"),i(_e,"title","Formants (F1-F4) - resonant frequencies of the vocal tract that distinguish vowels"),i(te,"type","checkbox"),i(te,"class","svelte-1jxv242"),i(ce,"class","toggle-label intensity svelte-1jxv242"),i($,"class","overlay-toggle svelte-1jxv242"),i($,"title","Intensity - sound pressure level in decibels (dB)"),i(U,"type","checkbox"),i(U,"class","svelte-1jxv242"),i(Ve,"class","toggle-label hnr svelte-1jxv242"),i(D,"class","overlay-toggle svelte-1jxv242"),i(D,"title","Harmonics-to-Noise Ratio - measure of voice quality (higher = clearer voice)"),i(Ke,"type","checkbox"),i(Ke,"class","svelte-1jxv242"),i(gt,"class","toggle-label cog svelte-1jxv242"),i(rt,"class","overlay-toggle svelte-1jxv242"),i(rt,"title","Center of Gravity - spectral centroid, indicates brightness of sound"),i(Y,"type","checkbox"),i(Y,"class","svelte-1jxv242"),i(G,"class","toggle-label tilt svelte-1jxv242"),i(C,"class","overlay-toggle svelte-1jxv242"),i(C,"title","Spectral Tilt - balance between low and high frequencies (dB difference 0-500 Hz vs 2000-4000 Hz)"),i(ee,"type","checkbox"),i(ee,"class","svelte-1jxv242"),i(Ee,"class","toggle-label a1p0 svelte-1jxv242"),i(ne,"class","overlay-toggle svelte-1jxv242"),i(ne,"title","A1-P0 Nasal Ratio - amplitude at F0 minus nasal pole (~250 Hz), indicates nasality"),i(Wt,"type","checkbox"),i(Wt,"class","svelte-1jxv242"),i(bt,"class","toggle-label nmr svelte-1jxv242"),i(Xe,"class","overlay-toggle svelte-1jxv242"),i(Xe,"title","Nasal Murmur Ratio - low-freq energy (0-500Hz) / total energy (0-5000Hz)"),i(ul,"class","controls-separator svelte-1jxv242"),i(Et,"type","checkbox"),i(Et,"class","svelte-1jxv242"),i(et,"class","toggle-label points svelte-1jxv242"),i(ut,"class","overlay-toggle svelte-1jxv242"),i(ut,"title","Data collection points - double-click to add, right-click to remove"),i(Nt,"class","import-points-btn svelte-1jxv242"),i(Nt,"title","Import data points from TSV"),i(Tl,"class","controls-separator svelte-1jxv242"),i(It,"class","freq-label svelte-1jxv242"),Ye.__value="female",St(Ye,Ye.__value),Dt.__value="male",St(Dt,Dt.__value),ht.__value="child",St(ht,ht.__value),i(Le,"class","svelte-1jxv242"),t[2]===void 0&&cs(()=>t[56].call(Le)),i(dt,"class","freq-selector svelte-1jxv242"),i(vt,"class","freq-label svelte-1jxv242"),pt.__value=5e3,St(pt,pt.__value),Pt.__value=7500,St(Pt,Pt.__value),Ze.__value=1e4,St(Ze,Ze.__value),i(ze,"class","svelte-1jxv242"),t[17]===void 0&&cs(()=>t[57].call(ze)),i(Je,"class","freq-selector svelte-1jxv242"),i(At,"class","freq-label svelte-1jxv242"),ie.__value="praatfan-local",St(ie,ie.__value),Vt.__value="praatfan",St(Vt,Vt.__value),wt.__value="praatfan-gpl",St(wt,wt.__value),i(Ce,"class","svelte-1jxv242"),i(tt,"class","freq-selector svelte-1jxv242"),i(tt,"title","Acoustic analysis backend"),i(W,"class","overlay-controls svelte-1jxv242"),i(hl,"class","display-panel waveform-panel svelte-1jxv242"),i(Yt,"class","display-panel spectrogram-panel svelte-1jxv242"),i(vl,"class","time-axis-panel svelte-1jxv242"),i(pl,"class","display-panel annotation-panel svelte-1jxv242"),i(Qe,"class","displays svelte-1jxv242"),i(Xt,"class","main-content svelte-1jxv242"),i(mt,"class","status-bar svelte-1jxv242"),i(e,"class","app-container svelte-1jxv242")},m(V,J){H(V,e,J),s(e,l),s(l,n),s(n,a),s(n,u),s(n,d),_l.m(d,null),s(n,h),s(n,v),s(n,w),Qt.m(n,null),s(n,_),s(n,y),s(n,B),s(n,E),s(E,N),s(l,S),s(l,F),s(F,p),s(p,P),s(p,j),s(p,A),s(F,M),lt&&lt.m(F,null),s(l,O),s(l,Z),nt&&nt.m(Z,null),s(Z,ge),s(Z,be),s(be,We),s(be,Ue),s(Z,Re),s(Z,Te),s(Z,ye),s(Z,De),gl.m(De,null),s(e,xe),s(e,W),s(W,me),s(me,re),re.checked=t[8],s(me,Pe),s(me,Ae),s(W,ke),s(W,_e),s(_e,Se),Se.checked=t[9],s(_e,He),s(_e,I),s(W,ae),s(W,$),s($,te),te.checked=t[10],s($,fe),s($,ce),s(W,oe),s(W,D),s(D,U),U.checked=t[11],s(D,le),s(D,Ve),s(W,_t),s(W,rt),s(rt,Ke),Ke.checked=t[12],s(rt,qt),s(rt,gt),s(W,ot),s(W,C),s(C,Y),Y.checked=t[13],s(C,Q),s(C,G),s(W,ve),s(W,ne),s(ne,ee),ee.checked=t[14],s(ne,ct),s(ne,Ee),s(W,Ge),s(W,Xe),s(Xe,Wt),Wt.checked=t[15],s(Xe,Pl),s(Xe,bt),s(W,Cl),s(W,ul),s(W,$t),s(W,ut),s(ut,Et),Et.checked=t[16],s(ut,Al),s(ut,et),s(W,Wl),s(W,Nt),s(W,Bt),st&&st.m(W,null),s(W,Mt),s(W,Tl),s(W,xl),s(W,dt),s(dt,It),s(dt,jl),s(dt,Le),s(Le,Ye),s(Le,Dt),s(Le,ht),$l(Le,t[2],!0),s(W,Ml),s(W,Je),s(Je,vt),s(Je,Vl),s(Je,ze),s(ze,pt),s(ze,Pt),s(ze,Ze),$l(ze,t[17],!0),s(W,Rl),s(W,tt),s(tt,At),s(tt,Ul),s(tt,Ce),s(Ce,ie),s(Ce,Vt),s(Ce,wt),$l(Ce,t[24]),s(e,yl),s(e,Xt),s(Xt,Qe),s(Qe,hl),Ut(Lt,hl,null),s(Qe,Xl),s(Qe,Yt),Ut(Oe,Yt,null),s(Qe,tl),s(Qe,vl),Ut(ll,vl,null),s(Qe,nl),s(Qe,pl),Ut(sl,pl,null),s(Xt,al),Ut(il,Xt,null),s(e,Yl),s(e,mt),s(mt,Jt),s(Jt,Jl),s(Jt,xt),s(Jt,El),s(Jt,ml),s(mt,Zl),s(mt,Zt),$e=!0,Ql||(Qn=[L(a,"click",t[36]),L(d,"click",Xs),L(v,"click",Ks),L(y,"click",t[35]),L(Te,"click",t[38]),L(De,"click",t[30]),L(re,"change",t[47]),L(Se,"change",t[48]),L(te,"change",t[49]),L(U,"change",t[50]),L(Ke,"change",t[51]),L(Y,"change",t[52]),L(ee,"change",t[53]),L(Wt,"change",t[54]),L(Et,"change",t[55]),L(Nt,"click",t[41]),L(Le,"change",t[56]),L(ze,"change",t[57]),L(Ce,"change",t[29])],Ql=!0)},p(V,J){_n!==(_n=$n(V))&&(_l.d(1),_l=_n(V),_l&&(_l.c(),_l.m(d,null))),(!$e||J[0]&33554432)&&cl(d,"playing",V[25]),gn===(gn=es(V))&&Qt?Qt.p(V,J):(Qt.d(1),Qt=gn(V),Qt&&(Qt.c(),Qt.m(n,_))),(!$e||J[0]&524288)&&se(N,V[19]),(!$e||J[0]&2097152)&&x!==(x=ol(V[21])+"")&&se(P,x),(!$e||J[0]&1048577)&&R!==(R=ol(V[0].length/V[20])+"")&&se(A,R),V[26]?lt?lt.p(V,J):(lt=zs(V),lt.c(),lt.m(F,null)):lt&&(lt.d(1),lt=null),V[27]?nt?nt.p(V,J):(nt=Os(V),nt.c(),nt.m(Z,ge)):nt&&(nt.d(1),nt=null),(!$e||J[0]&1048576)&&se(We,V[20]),bn!==(bn=ts(V))&&(gl.d(1),gl=bn(V),gl&&(gl.c(),gl.m(De,null))),J[0]&256&&(re.checked=V[8]),J[0]&512&&(Se.checked=V[9]),J[0]&1024&&(te.checked=V[10]),J[0]&2048&&(U.checked=V[11]),J[0]&4096&&(Ke.checked=V[12]),J[0]&8192&&(Y.checked=V[13]),J[0]&16384&&(ee.checked=V[14]),J[0]&32768&&(Wt.checked=V[15]),J[0]&65536&&(Et.checked=V[16]),V[23].length>0?st?st.p(V,J):(st=Hs(V),st.c(),st.m(W,Mt)):st&&(st.d(1),st=null),J[0]&4&&$l(Le,V[2]),J[0]&131072&&$l(ze,V[17]),(!$e||J[0]&16777216)&&$l(Ce,V[24]);const qe={};J[0]&256&&(qe.showPitch=V[8]),J[0]&512&&(qe.showFormants=V[9]),J[0]&1024&&(qe.showIntensity=V[10]),J[0]&2048&&(qe.showHNR=V[11]),J[0]&4096&&(qe.showCoG=V[12]),J[0]&8192&&(qe.showSpectralTilt=V[13]),J[0]&16384&&(qe.showA1P0=V[14]),J[0]&32768&&(qe.showNMR=V[15]),J[0]&65536&&(qe.showDataPoints=V[16]),J[0]&131072&&(qe.maxFreq=V[17]),Oe.$set(qe),(!$e||J[0]&4194304)&&rl!==(rl=ol(V[22].start)+"")&&se(xt,rl),(!$e||J[0]&4194304)&&Nl!==(Nl=ol(V[22].end)+"")&&se(ml,Nl)},i(V){$e||(pe(Lt.$$.fragment,V),pe(Oe.$$.fragment,V),pe(ll.$$.fragment,V),pe(sl.$$.fragment,V),pe(il.$$.fragment,V),$e=!0)},o(V){Ie(Lt.$$.fragment,V),Ie(Oe.$$.fragment,V),Ie(ll.$$.fragment,V),Ie(sl.$$.fragment,V),Ie(il.$$.fragment,V),$e=!1},d(V){V&&f(e),_l.d(),Qt.d(),lt&&lt.d(),nt&&nt.d(),gl.d(),st&&st.d(),Ft(Lt),Ft(Oe),Ft(ll),Ft(sl),Ft(il),Ql=!1,jt(Qn)}}}function za(t){let e,l;return e=new Ea({props:{onFile:t[31],onRecordedBlob:t[32]}}),{c(){Ot(e.$$.fragment)},l(n){zt(e.$$.fragment,n)},m(n,a){Ut(e,n,a),l=!0},p:yt,i(n){l||(pe(e.$$.fragment,n),l=!0)},o(n){Ie(e.$$.fragment,n),l=!1},d(n){Ft(e,n)}}}function Oa(t){let e,l="Loading acoustic analysis engine...";return{c(){e=c("div"),e.textContent=l,this.h()},l(n){e=o(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-plgi30"&&(e.textContent=l),this.h()},h(){i(e,"class","loading svelte-1jxv242")},m(n,a){H(n,e,a)},p:yt,i:yt,o:yt,d(n){n&&f(e)}}}function Ha(t){let e,l;return{c(){e=Gt("svg"),l=Gt("path"),this.h()},l(n){e=Ht(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=m(e);l=Ht(a,"path",{d:!0}),m(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M8 5v14l11-7z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Ga(t){let e,l,n;return{c(){e=Gt("svg"),l=Gt("rect"),n=Gt("rect"),this.h()},l(a){e=Ht(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=m(e);l=Ht(r,"rect",{x:!0,y:!0,width:!0,height:!0}),m(l).forEach(f),n=Ht(r,"rect",{x:!0,y:!0,width:!0,height:!0}),m(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"x","6"),i(l,"y","4"),i(l,"width","4"),i(l,"height","16"),i(n,"x","14"),i(n,"y","4"),i(n,"width","4"),i(n,"height","16"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","20"),i(e,"height","20")},m(a,r){H(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function qa(t){let e,l='<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><circle cx="12" cy="12" r="6"></circle></svg>',n,a;return{c(){e=c("button"),e.innerHTML=l,this.h()},l(r){e=o(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(e)!=="svelte-d9ton6"&&(e.innerHTML=l),this.h()},h(){i(e,"class","record-btn svelte-1jxv242"),i(e,"title","Record from microphone")},m(r,u){H(r,e,u),n||(a=L(e,"click",t[33]),n=!0)},p:yt,d(r){r&&f(e),n=!1,a()}}}function Wa(t){let e,l,n,a,r,u=t[7].toFixed(1)+"",d,h,v,k;return{c(){e=c("button"),l=Gt("svg"),n=Gt("rect"),a=b(),r=c("span"),d=X(u),h=X("s"),this.h()},l(w){e=o(w,"BUTTON",{class:!0,title:!0});var _=m(e);l=Ht(_,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var y=m(l);n=Ht(y,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),m(n).forEach(f),y.forEach(f),a=g(_),r=o(_,"SPAN",{class:!0});var T=m(r);d=K(T,u),h=K(T,"s"),T.forEach(f),_.forEach(f),this.h()},h(){i(n,"x","6"),i(n,"y","6"),i(n,"width","12"),i(n,"height","12"),i(n,"rx","2"),i(l,"viewBox","0 0 24 24"),i(l,"fill","currentColor"),i(l,"width","16"),i(l,"height","16"),i(r,"class","recording-time svelte-1jxv242"),i(e,"class","record-btn recording svelte-1jxv242"),i(e,"title","Stop recording")},m(w,_){H(w,e,_),s(e,l),s(l,n),s(e,a),s(e,r),s(r,d),s(r,h),v||(k=L(e,"click",t[34]),v=!0)},p(w,_){_[0]&128&&u!==(u=w[7].toFixed(1)+"")&&se(d,u)},d(w){w&&f(e),v=!1,k()}}}function zs(t){let e,l,n=ol(t[26].end-t[26].start)+"",a;return{c(){e=c("span"),l=X("Sel: "),a=X(n),this.h()},l(r){e=o(r,"SPAN",{class:!0});var u=m(e);l=K(u,"Sel: "),a=K(u,n),u.forEach(f),this.h()},h(){i(e,"class","selection-info svelte-1jxv242")},m(r,u){H(r,e,u),s(e,l),s(e,a)},p(r,u){u[0]&67108864&&n!==(n=ol(r[26].end-r[26].start)+"")&&se(a,n)},d(r){r&&f(e)}}}function Os(t){let e,l,n,a;return{c(){e=c("span"),l=X("Analyzing... "),n=X(t[28]),a=X("%"),this.h()},l(r){e=o(r,"SPAN",{class:!0});var u=m(e);l=K(u,"Analyzing... "),n=K(u,t[28]),a=K(u,"%"),u.forEach(f),this.h()},h(){i(e,"class","analysis-progress svelte-1jxv242")},m(r,u){H(r,e,u),s(e,l),s(e,n),s(e,a)},p(r,u){u[0]&268435456&&se(n,r[28])},d(r){r&&f(e)}}}function Ka(t){let e,l,n;return{c(){e=Gt("svg"),l=Gt("circle"),n=Gt("path"),this.h()},l(a){e=Ht(a,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var r=m(e);l=Ht(r,"circle",{cx:!0,cy:!0,r:!0}),m(l).forEach(f),n=Ht(r,"path",{d:!0}),m(n).forEach(f),r.forEach(f),this.h()},h(){i(l,"cx","12"),i(l,"cy","12"),i(l,"r","5"),i(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(a,r){H(a,e,r),s(e,l),s(e,n)},d(a){a&&f(e)}}}function Xa(t){let e,l;return{c(){e=Gt("svg"),l=Gt("path"),this.h()},l(n){e=Ht(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0});var a=m(e);l=Ht(a,"path",{d:!0}),m(l).forEach(f),a.forEach(f),this.h()},h(){i(l,"d","M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"width","16"),i(e,"height","16")},m(n,a){H(n,e,a),s(e,l)},d(n){n&&f(e)}}}function Hs(t){let e,l,n=t[23].length+"",a,r,u,d;return{c(){e=c("button"),l=X("Export ("),a=X(n),r=X(")"),this.h()},l(h){e=o(h,"BUTTON",{class:!0,title:!0});var v=m(e);l=K(v,"Export ("),a=K(v,n),r=K(v,")"),v.forEach(f),this.h()},h(){i(e,"class","export-points-btn svelte-1jxv242"),i(e,"title","Export data points to TSV")},m(h,v){H(h,e,v),s(e,l),s(e,a),s(e,r),u||(d=L(e,"click",t[40]),u=!0)},p(h,v){v[0]&8388608&&n!==(n=h[23].length+"")&&se(a,n)},d(h){h&&f(e),u=!1,d()}}}function Ya(t){let e,l,n,a,r,u,d,h,v,k,w,_;const y=[Oa,za,Ua],T=[];function B(E,N){return E[1]?E[0]?2:1:0}return h=B(t),v=T[h]=y[h](t),{c(){e=c("input"),l=b(),n=c("input"),a=b(),r=c("input"),u=b(),d=c("main"),v.c(),this.h()},l(E){e=o(E,"INPUT",{type:!0,accept:!0,style:!0}),l=g(E),n=o(E,"INPUT",{type:!0,accept:!0,style:!0}),a=g(E),r=o(E,"INPUT",{type:!0,accept:!0,style:!0}),u=g(E),d=o(E,"MAIN",{class:!0});var N=m(d);v.l(N),N.forEach(f),this.h()},h(){i(e,"type","file"),i(e,"accept","audio/*"),Be(e,"display","none"),i(n,"type","file"),i(n,"accept",".yaml,.yml"),Be(n,"display","none"),i(r,"type","file"),i(r,"accept",".tsv,.txt"),Be(r,"display","none"),i(d,"class","svelte-1jxv242")},m(E,N){H(E,e,N),t[44](e),H(E,l,N),H(E,n,N),t[45](n),H(E,a,N),H(E,r,N),t[46](r),H(E,u,N),H(E,d,N),T[h].m(d,null),k=!0,w||(_=[L(e,"change",t[37]),L(n,"change",t[39]),L(r,"change",t[42])],w=!0)},p(E,N){let S=h;h=B(E),h===S?T[h].p(E,N):(zl(),Ie(T[S],1,1,()=>{T[S]=null}),Ol(),v=T[h],v?v.p(E,N):(v=T[h]=y[h](E),v.c()),pe(v,1),v.m(d,null))},i(E){k||(pe(v),k=!0)},o(E){Ie(v),k=!1},d(E){E&&(f(e),f(l),f(n),f(a),f(r),f(u),f(d)),t[44](null),t[45](null),t[46](null),T[h].d(),w=!1,jt(_)}}}function ol(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toFixed(2).padStart(5,"0")}`}function Ja(t,e,l){let n,a,r,u,d,h,v,k,w,_,y,T,B,E,N;Ne(t,Un,C=>l(19,n=C)),Ne(t,Wn,C=>l(0,a=C)),Ne(t,da,C=>l(61,r=C)),Ne(t,Kn,C=>l(20,u=C)),Ne(t,ql,C=>l(21,d=C)),Ne(t,tn,C=>l(22,h=C)),Ne(t,zn,C=>l(62,v=C)),Ne(t,ps,C=>l(23,k=C)),Ne(t,ha,C=>l(1,w=C)),Ne(t,ms,C=>l(2,_=C)),Ne(t,Xn,C=>l(24,y=C)),Ne(t,va,C=>l(25,T=C)),Ne(t,ln,C=>l(26,B=C)),Ne(t,pa,C=>l(27,E=C)),Ne(t,ma,C=>l(28,N=C));let S=!0,F,p,x=!1,P=null,j=[],R=0,A=null;On(()=>{const C=localStorage.getItem("ozen-backend");return(C==="praatfan-gpl"||C==="praatfan"||C==="praatfan-local")&&Xn.set(C),qn(y),_a(zn,ps),localStorage.getItem("ozen-theme")==="light"&&(l(3,S=!1),document.documentElement.classList.add("light")),window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)}),Zn(()=>{A&&clearInterval(A),P&&x&&P.stop()});async function M(C){const Q=C.target.value;Xn.set(Q),localStorage.setItem("ozen-backend",Q);try{await qn(Q),a&&(hn(),vn().catch(G=>console.error("Analysis failed:",G)))}catch(G){console.error("Failed to switch backend:",G)}}let O=_;function Z(){l(3,S=!S),S?(document.documentElement.classList.remove("light"),localStorage.setItem("ozen-theme","dark")):(document.documentElement.classList.add("light"),localStorage.setItem("ozen-theme","light"))}async function ge(){if(k.length===0){console.log("No data points to copy");return}const C=hs({showPitch:xe,showFormants:W,showIntensity:me,showHNR:re,showCoG:Pe,showSpectralTilt:Ae,showA1P0:Me,showNMR:ke});try{await navigator.clipboard.writeText(C),console.log(`Copied ${k.length} data points to clipboard`)}catch(Y){console.error("Failed to copy to clipboard:",Y)}}function be(C){if(!(C.target instanceof HTMLInputElement||C.target instanceof HTMLTextAreaElement)){if(C.ctrlKey||C.metaKey)switch(C.key.toLowerCase()){case"z":C.preventDefault(),C.shiftKey?Jn():Ws();return;case"y":C.preventDefault(),Jn();return;case"c":C.preventDefault(),ge();return}switch(C.code){case"Space":C.preventDefault(),Xs();break;case"Escape":C.preventDefault(),Ks(),ln.set(null);break;case"Tab":C.preventDefault(),ra();break;case"ArrowLeft":C.preventDefault(),We(-.1);break;case"ArrowRight":C.preventDefault(),We(.1);break;case"ArrowUp":C.preventDefault(),Ue(.91,!0);break;case"ArrowDown":C.preventDefault(),Ue(1.1,!0);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":const Y=parseInt(C.code.slice(-1))-1;Y<v.length&&bl.set(Y);break}}}function We(C){if(!a)return;const Y=a.length/u,{start:Q,end:G}=h,de=G-Q,ve=de*C;let ne=Q+ve,ee=G+ve;ne<0&&(ne=0,ee=de),ee>Y&&(ee=Y,ne=Y-de),tn.set({start:ne,end:ee})}function Ue(C,Y=!1){if(!a)return;const Q=a.length/u,{start:G,end:de}=h,ve=de-G,ne=Y?(G+de)/2:d,ee=Math.max(.01,Math.min(Q,ve*C)),ct=(ne-G)/ve;let Ee=Math.max(0,ne-ct*ee),Fe=Math.min(Q,Ee+ee);Fe===Q&&(Ee=Math.max(0,Fe-ee)),tn.set({start:Ee,end:Fe})}async function Re(C){hn();const Y=await C.arrayBuffer(),G=await new AudioContext().decodeAudioData(Y),de=new Float64Array(G.length),ve=G.getChannelData(0);for(let ee=0;ee<G.length;ee++)de[ee]=ve[ee];Wn.set(de),Kn.set(G.sampleRate),Un.set(C.name);const ne=G.length/G.sampleRate;vs.set(ne),tn.set({start:0,end:Math.min(ne,10)}),ql.set(0),ln.set(null),vn().catch(ee=>console.error("Analysis failed:",ee))}async function Te(C){hn();const Y=await C.arrayBuffer(),G=await new AudioContext().decodeAudioData(Y),de=new Float64Array(G.length),ve=G.getChannelData(0);for(let ee=0;ee<G.length;ee++)de[ee]=ve[ee];Wn.set(de),Kn.set(G.sampleRate),Un.set(`Recording ${new Date().toLocaleTimeString()}`);const ne=G.length/G.sampleRate;vs.set(ne),tn.set({start:0,end:Math.min(ne,10)}),ql.set(0),ln.set(null),vn().catch(ee=>console.error("Analysis failed:",ee))}async function je(){try{const C=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});j=[],P=new MediaRecorder(C,{mimeType:"audio/webm"}),P.ondataavailable=Y=>{Y.data.size>0&&j.push(Y.data)},P.onstop=async()=>{C.getTracks().forEach(Q=>Q.stop());const Y=new Blob(j,{type:"audio/webm"});await Te(Y)},P.start(100),l(6,x=!0),l(7,R=0),A=setInterval(()=>{l(7,R+=.1)},100)}catch(C){console.error("Failed to start recording:",C),alert("Could not access microphone. Please allow microphone access.")}}function ye(){P&&x&&(P.stop(),l(6,x=!1),A&&(clearInterval(A),A=null))}async function De(){if(!a||!u)return;const C=a.length,Y=new ArrayBuffer(44+C*2),Q=new DataView(Y),G=(Ee,Fe)=>{for(let Ge=0;Ge<Fe.length;Ge++)Q.setUint8(Ee+Ge,Fe.charCodeAt(Ge))};G(0,"RIFF"),Q.setUint32(4,36+C*2,!0),G(8,"WAVE"),G(12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,1,!0),Q.setUint16(22,1,!0),Q.setUint32(24,u,!0),Q.setUint32(28,u*2,!0),Q.setUint16(32,2,!0),Q.setUint16(34,16,!0),G(36,"data"),Q.setUint32(40,C*2,!0);let de=44;for(let Ee=0;Ee<C;Ee++){const Fe=Math.max(-1,Math.min(1,a[Ee]));Q.setInt16(de,Fe<0?Fe*32768:Fe*32767,!0),de+=2}const ve=new Blob([Y],{type:"audio/wav"});let ne="audio.wav";if(n&&(ne=n.replace(/\.[^/.]+$/,"")+".wav"),"showSaveFilePicker"in window)try{const Fe=await(await window.showSaveFilePicker({suggestedName:ne,types:[{description:"WAV Audio",accept:{"audio/wav":[".wav"]}}]})).createWritable();await Fe.write(ve),await Fe.close();return}catch(Ee){if(Ee.name==="AbortError")return}const ee=URL.createObjectURL(ve),ct=document.createElement("a");ct.href=ee,ct.download=ne,ct.click(),URL.revokeObjectURL(ee)}let xe=!0,W=!0,me=!1,re=!1,Pe=!1,Ae=!1,Me=!1,ke=!1,_e=!0,Se=5e3,He;function I(){He.click()}async function q(C){var G;const Y=C.target,Q=(G=Y.files)==null?void 0:G[0];Q&&await Re(Q),Y.value=""}function ae(){F.click()}async function $(C){var G;const Y=C.target,Q=(G=Y.files)==null?void 0:G[0];if(Q){const de=await Q.text(),ve=ga(de);if(ve&&ve.backend!==r)try{await qn(ve.backend),localStorage.setItem("ozen-backend",ve.backend),a&&(hn(),vn().catch(ne=>console.error("Analysis failed:",ne)))}catch(ne){console.error("Failed to switch backend:",ne)}}Y.value=""}async function te(){const C=hs({showPitch:xe,showFormants:W,showIntensity:me,showHNR:re,showCoG:Pe,showSpectralTilt:Ae,showA1P0:Me,showNMR:ke});let Y="data_points.tsv";if(n&&(Y=n.replace(/\.[^/.]+$/,"")+"_points.tsv"),"showSaveFilePicker"in window)try{const ne=await(await window.showSaveFilePicker({suggestedName:Y,types:[{description:"Tab-Separated Values",accept:{"text/tab-separated-values":[".tsv"]}}]})).createWritable();await ne.write(C),await ne.close();return}catch(ve){if(ve.name==="AbortError")return}const Q=new Blob([C],{type:"text/tab-separated-values"}),G=URL.createObjectURL(Q),de=document.createElement("a");de.href=G,de.download=Y,de.click(),URL.revokeObjectURL(G)}function fe(){p.click()}async function ce(C){var G;const Y=C.target,Q=(G=Y.files)==null?void 0:G[0];if(Q){const de=await Q.text();fa(de)===-1&&console.error("Failed to import data points: invalid TSV format (need time and frequency columns)")}Y.value=""}function we(C){Gl[C?"unshift":"push"](()=>{He=C,l(18,He)})}function oe(C){Gl[C?"unshift":"push"](()=>{F=C,l(4,F)})}function D(C){Gl[C?"unshift":"push"](()=>{p=C,l(5,p)})}function U(){xe=this.checked,l(8,xe)}function le(){W=this.checked,l(9,W)}function Ve(){me=this.checked,l(10,me)}function it(){re=this.checked,l(11,re)}function _t(){Pe=this.checked,l(12,Pe)}function rt(){Ae=this.checked,l(13,Ae)}function Ke(){Me=this.checked,l(14,Me)}function qt(){ke=this.checked,l(15,ke)}function gt(){_e=this.checked,l(16,_e)}function wl(){_=us(this),ms.set(_)}function ot(){Se=us(this),l(17,Se)}return t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&4096&&_!==O&&(l(43,O=_),a&&w&&(hn(),vn().catch(C=>console.error("Analysis failed:",C))))},[a,w,_,S,F,p,x,R,xe,W,me,re,Pe,Ae,Me,ke,_e,Se,He,n,u,d,h,k,y,T,B,E,N,M,Z,Re,Te,je,ye,De,I,q,ae,$,te,fe,ce,O,we,oe,D,U,le,Ve,it,_t,rt,Ke,qt,gt,wl,ot]}class ti extends an{constructor(e){super(),rn(this,e,Ja,Ya,sn,{},null,[-1,-1,-1])}}export{ti as component};
